{"version":3,"sources":["sw.js"],"names":["version","baseDir","console","log","CACHE_NAME","urlsToCache","join","self","addEventListener","event","skipWaiting","waitUntil","caches","open","then","cache","addAll","respondWith","match","request","ignoreSearch","response","fetch","keys","cacheNames","Promise","all","map","cacheName","delete"],"mappings":"AAAA,MAAMA,QAAU,gBACVC,QAAU,gBAChBC,QAAQC,IAAI,0BAA2BH,SAEvC,MAAMI,WAAa,kBAAoBJ,QACjCK,eA8BNH,QAAQC,IAAI,eAAgBE,YAAYC,KAAK,OAE7CC,KAAKC,iBAAiB,UAAWC,IAC7BP,QAAQC,IAAI,WAAYM,GACxBF,KAAKG,cACLD,EAAME,UACFC,OAAOC,KAAKT,YAAYU,KAAKC,IACzBb,QAAQC,IAAI,iBACLY,EAAMC,OAAOX,kBAKhCE,KAAKC,iBAAiB,QAASC,IAE3BA,EAAMQ,YACFL,OAAOM,MAAMT,EAAMU,SAAWC,cAAe,IAAQN,KAAKO,GAClDA,GAGGC,MAAMb,EAAMU,aAK/BZ,KAAKC,iBAAiB,WAAYC,IAC9BP,QAAQC,IAAI,YAAaM,GACzBA,EAAME,UACFC,OAAOW,OAAOT,KAAKU,GACRC,QAAQC,IACXF,EAAWG,IAAIC,IACX,GAAIA,GAAaxB,WACb,OAAOQ,OAAOiB,OAAOD","file":"sw.js","sourcesContent":["const version = '1533995214232'\r\nconst baseDir = 'pdfanno/0.5.0'\r\nconsole.log('service worker version:', version)\r\n\r\nconst CACHE_NAME = 'pdfanno-cache-v' + version\r\nconst urlsToCache = [\r\n    // `/${baseDir}/embedded-sample.html`,\r\n    // `/${baseDir}/embedded-sample.bundle.js`,\r\n    // `/${baseDir}/pdfanno.core.bundle.js`,\r\n    // `/${baseDir}/pages/viewer.html`,\r\n    // `/${baseDir}/pages/viewer.css`,\r\n    // `/${baseDir}/pages/compatibility.js`,\r\n    // `/${baseDir}/pages/l10n.js`,\r\n    // `/${baseDir}/pages/debugger.js`,\r\n    // `/${baseDir}/pages/viewer.js`,\r\n    // `/${baseDir}/pages/images/texture.png`,\r\n    // `/${baseDir}/pages/images/toolbarButton-menuArrows.png`,\r\n    // `/${baseDir}/pages/images/toolbarButton-viewThumbnail.png`,\r\n    // `/${baseDir}/pages/images/toolbarButton-viewOutline.png`,\r\n    // `/${baseDir}/pages/images/toolbarButton-viewAttachments.png`,\r\n    // `/${baseDir}/pages/images/toolbarButton-sidebarToggle.png`,\r\n    // `/${baseDir}/pages/images/toolbarButton-pageUp.png`,\r\n    // `/${baseDir}/pages/images/toolbarButton-secondaryToolbarToggle.png`,\r\n    // `/${baseDir}/pages/images/toolbarButton-zoomIn.png`,\r\n    // `/${baseDir}/pages/images/toolbarButton-zoomOut.png`,\r\n    // `/${baseDir}/pages/images/toolbarButton-pageDown.png`,\r\n    // `/${baseDir}/pages/images/shadow.png`,\r\n    // `/${baseDir}/pages/images/loading-icon.gif`,\r\n    // `/${baseDir}/pages/images/loading-small.png`,\r\n    // `/${baseDir}/pages/locale/locale.properties`,\r\n    // `/${baseDir}/pages/locale/ja/viewer.properties`,\r\n    // `/${baseDir}/build/pdf.js`,\r\n    // `/${baseDir}/build/pdf.worker.js`,\r\n    // 'https://code.jquery.com/jquery-3.1.1.min.js',\r\n]\r\nconsole.log('urlsToCache:', urlsToCache.join('\\n'))\r\n\r\nself.addEventListener('install', event => {\r\n    console.log('install:', event)\r\n    self.skipWaiting()\r\n    event.waitUntil(\r\n        caches.open(CACHE_NAME).then(cache => {\r\n            console.log('Opened cache.')\r\n            return cache.addAll(urlsToCache)\r\n        })\r\n    )\r\n})\r\n\r\nself.addEventListener('fetch', event => {\r\n    // console.log('fetch:', event.request.method, event.request.url)\r\n    event.respondWith(\r\n        caches.match(event.request, { ignoreSearch : true }).then(response => {\r\n            if (response) {\r\n                return response\r\n            }\r\n            return fetch(event.request)\r\n        })\r\n    )\r\n})\r\n\r\nself.addEventListener('activate', event => {\r\n    console.log('activate:', event)\r\n    event.waitUntil(\r\n        caches.keys().then(cacheNames => {\r\n            return Promise.all(\r\n                cacheNames.map(cacheName => {\r\n                    if (cacheName != CACHE_NAME) {\r\n                        return caches.delete(cacheName)\r\n                    }\r\n                })\r\n            )\r\n        })\r\n    )\r\n})\r\n"]}