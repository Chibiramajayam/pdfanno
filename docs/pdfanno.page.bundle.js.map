{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///webpack/bootstrap 18a9ec9ae3966b2851ae?1861","webpack:///./src/pdfanno.js","webpack:///./~/toml/index.js?5e68","webpack:///./~/toml/lib/parser.js?c4bc","webpack:///./~/toml/lib/compiler.js?4919","webpack:///./src/shared/coords.js?9f44","webpack:///./src/shared/util.js?2873","webpack:///./~/css-loader/lib/css-base.js?da04","webpack:///./~/style-loader/addStyles.js?b980","webpack:///./src/page/ui/browseButton.js","webpack:///./src/page/util/display.js","webpack:///./src/page/pdf/index.js","webpack:///./src/page/ui/pdfDropdown.js","webpack:///./src/page/util/dropdown.js","webpack:///./src/page/ui/primaryAnnoDropdown.js","webpack:///./src/page/ui/annoListDropdown.js","webpack:///./src/page/ui/referenceAnnoDropdown.js","webpack:///./src/page/ui/downloadButton.js","webpack:///./src/page/util/window.js","webpack:///./src/page/ui/uploadButton.js","webpack:///./src/page/ui/annotationTools.js","webpack:///./src/page/ui/inputLabel.js","webpack:///./src/page/public.js","webpack:///./src/page/pdf/PDFAnnoPage.js","webpack:///./src/page/AbstractAnnoPage.js","webpack:///./src/page/pdf/loadFiles.js","webpack:///./src/index.html","webpack:///./src/pdfanno.css?319e","webpack:///./src/pdfanno.css"],"names":["browseButton","pdfDropdown","primaryAnnoDropdown","annoListDropdown","referenceAnnoDropdown","downloadButton","uploadButton","annotationTools","inputLabel","publicApi","require","window","pdfanno","add","addAnnotation","addAll","addAllAnnotations","delete","deleteAnnotation","RectAnnotation","PublicRectAnnotation","SpanAnnotation","PublicSpanAnnotation","RelationAnnotation","PublicRelationAnnotation","readTOML","clear","annoPage","$","document","on","e","keyCode","manageCtrlKey","target","tagName","toLowerCase","addEventListener","initializeViewer","clearAllAnnotations","resetPDFViewerSettings","startViewerApplication","setup","convertToExportY","convertFromExportY","getPageSize","y","meta","paddingTop","pageHeight","height","paddingBetweenPages","pageNumber","Math","floor","yInPage","pagePadding","pdfView","PDFView","iframeWindow","viewBox","pdfViewer","getPageView","viewport","size","width","anyOf","dispatchWindowEvent","candidates","filter","c","length","eventName","data","event","createEvent","initCustomEvent","dispatchEvent","val","files","ev","error","isValidDirectorySelect","alert","loadFiles","then","current","getCurrentFileNames","setPDFDropdownList","setAnnoDropdownList","display","relativePath","webkitRelativePath","currentDisplay","contentFiles","name","pdfName","pdf","content","text","each","index","element","$elm","find","removeClass","annoFiles","primaryAnnotationName","promise1","Promise","resolve","names","referenceAnnotationNames","colors","referenceAnnotationColors","changed","i","found","annos","spectrum","promise2","join","all","_excludeBaseDirName","filePath","frgms","split","hasClass","annoName","push","color","toHexString","pdfs","console","log","remove","forEach","snipet","append","html","file","snipet1","snipet2","displayAnnotation","reloadPDFViewer","setupColorPicker","isPrimary","reload","annotations","primaryIndex","annoPath","annoFile","getAnnoFile","filename","localStorage","setItem","paperData","primary","PDFAnnoCore","getStoreAdapter","importAnnotations","removeAnnoLayer","renderAnno","iframeReady","removeEventListener","showPaletteOnly","showPalette","hideAfterPaletteSelect","palette","slice","elm","off","bind","$this","currentTarget","pdfPath","currentPDFName","confirm","addClass","getContentFile","displayViewer","click","resetCheckPrimaryAnnoDropdown","resetCheckReferenceAnnoDropdown","currentAnnoName","userAnswer","getAllAnnotations","a","readOnly","sort","a1","a2","_getY","elements","map","icon","type","direction","uuid","id","annotation","findAnnotationById","_y","y1","rectangles","getViewerViewport","scale","contents","parent","scrollTop","highlight","setTimeout","dehighlight","watchPrimaryAnno","primaryAnnos","toggleClass","annoNames","blur","downloadAnnotation","exportData","blob","Blob","blobURL","URL","createObjectURL","createElement","body","appendChild","download","_getDownloadFileName","href","parentNode","removeChild","pdfFileName","getCurrentContentName","listenWindowLeaveEvent","unlistenWindowLeaveEvent","adjustViewerSize","resizeHandler","setupResizableColumns","annotationUpdated","innerHeight","offset","top","css","height1","height2","height3","height4","height5","resizable","handles","alsoResizeReverse","start","stop","ui","plugin","that","o","options","el","parseInt","left","resize","os","originalSize","op","originalPosition","delta","position","style","parents","originalElement","prop","sum","removeData","conentFile","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","contentBase64","$progressBar","url","ajax","xhr","XMLHttpRequest","upload","evt","lengthComputable","percentComplete","loaded","total","percent","attr","method","dataType","result","json","JSON","parse","anno","currentAnnoToolType","$btn","disableRect","enableRect","createSpan","$button","createRelation","enable","disable","$inputLabel","$form","_blurListener","currentUUID","autoFocus","blurListener","cancelSubmit","removeAttr","saveText","focus","treatAnnotationDeleted","arguments","handleAnnotationHoverIn","getSelectedAnnotations","handleAnnotationHoverOut","handleAnnotationSelected","handleAnnotationDeselected","preventDefault","save","enableViewMode","LSKEY_DATALIST","setDatalist","setupActions","listenWindowEvents","datalist","getItem","d","snipets","isEnd","is","stringify","modal","detail","tomlObject","key","publicAnnotation","render","disableAnnotateFunctions","enableAnnotateFunction","destroy","page","label","parseFloat","p","rect","createRectAnnotation","x","pp","span","createSpanAnnotation","selectedText","dir","ids","r","createRelationAnnotation","rel1","rel2","PDFAnnoPage","get","contentWindow","Object","assign","selected","reference","items","contentName","contentFile","uint8Array","PDFViewerApplication","open","removeItem","rects","UI","getRectangles","annotationContainer","selectedAnnotations","selectedTime","first","second","arrows","rel1Annotation","rel2Annotation","disableViewMode","findById","newInstance","getFileName","ctrlPressed","AbstractAnnoPage","autoBind","getOwnPropertyNames","constructor","prototype","getContents","pdfNames","reject","promises","fileReader2","FileReader","onload","fileName","readAsArrayBuffer","concat","fileReader","readAsText","results","match"],"mappings":"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A;AACA;AACA;;AAEA;AACA;AACA,6BAA4B,oDAAoD;;AAEhF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAA+D,yBAAyB,EAAE;AAC1F,gEAA+D,yBAAyB,EAAE;AAC1F,gEAA+D,yBAAyB,EAAE;AAC1F,gEAA+D,yBAAyB,EAAE;AAC1F;;AAEA;AACA;;AAEA,oBAAmB,qBAAqB;AACxC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,kBAAkB;AAC1D;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,kBAAkB;AAC5D;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA,6CAA4C,mBAAmB;AAC/D;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,kBAAkB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,+CAA8C,mBAAmB;AACjE;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA,iDAAgD,mBAAmB;AACnE;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,mBAAmB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA,6CAA4C,mBAAmB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,mBAAmB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,mBAAmB;AAC7D;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,mBAAmB;AAC7D;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,mBAAmB;AACzD;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,kBAAkB;AAC1D;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,kBAAkB;AACxD;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,kBAAkB;AAC5D;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,kBAAkB;AACxD;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,mBAAmB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,mBAAmB;AAC7D;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,kBAAkB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,mBAAmB;AAC7D;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,kBAAkB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA,6CAA4C,mBAAmB;AAC/D;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,kBAAkB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA,iDAAgD,mBAAmB;AACnE;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,mBAAmB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA,6CAA4C,mBAAmB;AAC/D;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,mBAAmB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA,mDAAkD,mBAAmB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA,6CAA4C,mBAAmB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA,6CAA4C,mBAAmB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA,mDAAkD,mBAAmB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,+CAA8C,mBAAmB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,+CAA8C,mBAAmB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA,uDAAsD,mBAAmB;AACzE;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA,yDAAwD,mBAAmB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B;AAC/B;AACA,6DAA4D,mBAAmB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC;AACnC;AACA;AACA;AACA,kCAAiC;AACjC;AACA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,mBAAmB;AAC7D;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,kBAAkB;AACtD;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,oBAAoB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,yCAAwC,oBAAoB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,2CAA0C,oBAAoB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA,6CAA4C,oBAAoB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,+CAA8C,oBAAoB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA,iDAAgD,oBAAoB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,qCAAoC,oBAAoB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uCAAsC,oBAAoB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA,yBAAwB;;AAExB;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oBAAmB;AACnB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC;AACpC;AACA,YAAW,OAAO,sBAAsB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA,MAAK;AACL;AACA,mBAAkB,2CAA2C;AAC7D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;;;;;;AChwHD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,mBAAmB;AACtC;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAoC;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;SCjMgBE,gB,GAAAA,gB;SAiBAC,kB,GAAAA,kB;SA0BAC,W,GAAAA,W;AA9ChB;;;AAGO,UAASF,gBAAT,CAA0BG,CAA1B,EAA6B;;AAEhC,OAAIC,OAAOF,aAAX;;AAEAC,QAAKE,UAAL;;AAEA,OAAIC,aAAaF,KAAKG,MAAL,GAAcC,mBAA/B;;AAEA,OAAIC,aAAaC,KAAKC,KAAL,CAAWR,IAAIG,UAAf,IAA6B,CAA9C;AACA,OAAIM,UAAUT,IAAI,CAACM,aAAW,CAAZ,IAAiBH,UAAnC;;AAEA,UAAO,EAAEG,sBAAF,EAAcN,GAAIS,OAAlB,EAAP;AACH;;AAED;;;AAGO,UAASX,kBAAT,CAA4BQ,UAA5B,EAAwCG,OAAxC,EAAiD;;AAEpD,OAAIR,OAAOF,aAAX;;AAEA,OAAIC,IAAIS,UAAUP,UAAlB;;AAEA,OAAIQ,cAAcL,mBAAlB;;AAEAL,QAAK,CAACM,aAAa,CAAd,KAAoBL,KAAKG,MAAL,GAAcM,WAAlC,CAAL;;AAEA,UAAOV,CAAP;AACH;;AAED;;;AAGA,KAAME,aAAa,CAAnB;;AAEA;;;AAGO,KAAMG,oDAAsB,CAA5B;;AAEP;;;AAGO,UAASN,WAAT,GAAuB;;AAE1B,OAAIY,UAAU9C,OAAO+C,OAAP,IAAkBC,aAAaD,OAA7C;;AAEA,OAAIE,UAAUH,QAAQI,SAAR,CAAkBC,WAAlB,CAA8B,CAA9B,EAAiCC,QAAjC,CAA0CH,OAAxD;AACA,OAAII,OAAO,EAAEC,OAAQL,QAAQ,CAAR,CAAV,EAAsBV,QAASU,QAAQ,CAAR,CAA/B,EAAX;AACA,UAAOI,IAAP;AACH,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;SCjDeE,K,GAAAA,K;SAOAC,mB,GAAAA,mB;AAXhB;;;;AAIO,UAASD,KAAT,CAAehC,MAAf,EAAuBkC,UAAvB,EAAmC;AACtC,UAAOA,WAAWC,MAAX,CAAkB;AAAA,YAAKC,MAAMpC,MAAX;AAAA,IAAlB,EAAqCqC,MAArC,GAA8C,CAArD;AACH;;AAED;;;AAGO,UAASJ,mBAAT,CAA6BK,SAA7B,EAAwCC,IAAxC,EAA8C;AACjD,OAAIC,QAAQ7C,SAAS8C,WAAT,CAAqB,aAArB,CAAZ;AACAD,SAAME,eAAN,CAAsBJ,SAAtB,EAAiC,IAAjC,EAAuC,IAAvC,EAA6CC,IAA7C;AACA9D,UAAOkE,aAAP,CAAqBH,KAArB;AACH,E;;;;;;;;;ACfD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA,yCAAwC,gBAAgB;AACxD,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,aAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAE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","file":"./dist/pdfanno.page.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PDFAnnoCore\"] = factory();\n\telse\n\t\troot[\"PDFAnnoCore\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 18a9ec9ae3966b2851ae\n **/","/*\n    UIの非依存.\n\n    ベースのディレクトリ：src/page/pdf\n\n    ※ 以下の「◎」をUIから切り出す必要があり、それらをAbstractAnnoPageなどのクラスにインターフェースとして定義し、\n    　　　　それをPDFAnnoとHTMLAnnoでそれぞれ実装することで、UIを再利用できる作りにできそうです。\n\n    Browseボタン\n        ・Fileダイアログから読み込んで、PDFとAnnoをメモリ上に保持.\n            ◎ loadFiles\n                ・PDFとAnnoを読み込んでメモリ上に保持する.\n                ・引数：files\n                ・戻り値：Promise（処理終了時にresolve）\n    PDFドロップダウン\n        ・開くとき\n            ・PDF一覧を取得して、一覧表示\n                ◎ getContentList\n                    ・メモリ上に存在するPDF一覧を返却する\n                    ・引数：なし\n                    ・戻り値：PDF一覧（[{name: \"a.pdf\", content: \"xxx\"}, {name: \"b.pdf\", content: \"yyy\"}]\n                ◎ getDisplayedPDF\n                    ・現在ビュワーに表示しているPDFを返却する（リストボックスの`チェックマーク`に利用）\n                    ・引数：なし\n                    ・戻り値：PDF情報（{name: \"a.pdf\", content: \"xxx\"}）、選択なしの場合はnull\n        ・Click\n            ・選択されたPDFをViewerに表示\n                ◎ displayPDF\n                    ・引数で指定されたPDFをビュワーに表示する\n                    ・引数：PDF名\n                    ・戻り値：なし\n    Annoドロップダウン\n        ・開くとき\n            ・Anno一覧を取得して、一覧表示\n                ◎ getAnnoFileList\n                    ・メモリ上に存在するAnnoFile一覧を返却する\n                    ・引数：なし\n                    ・戻り値：Anno一覧（[{name: \"a.anno\", content: \"xxx\"}, {name: \"b.anno\", content: \"yyy\"}]\n                ◎ getDisplayedPrimaryAnnoFile\n                    ・現在ビュワーに表示しているPrimaryAnnoFileを返却する（リストボックスの`チェックマーク`に利用）\n                    ・引数：なし\n                    ・戻り値：Anno情報（{name: \"a.anno\", content: \"xxx\"}）、選択なしの場合はnull\n        ・Click\n            ・選択されたAnnoをPrimaryとしてViewerに表示\n                ◎ displayPrimaryAnnoFile\n                    ・引数で指定されたPrimaryAnnoFileをビュワーに表示する\n                    ・引数：AnnoFile名\n                    ・戻り値：なし\n    Referenceドロップダウン\n        ・開くとき\n            ・Anno一覧を取得して、一覧表示\n                ◎ getAnnoFileList\n                    ・同上\n                ◎ getDisplayedReferenceAnnoFiles\n                    ・現在ビュワーに表示しているReferenceAnnoFileを返却する（リストボックスの`チェックマーク`に利用）\n                    ・引数：なし\n                    ・戻り値：AnnoFile一覧（[{name: \"a.anno\", content: \"xxx\"}, {name: \"b.anno\", content: \"xxx\"}]）、選択なしの場合は空配列\n        ・Click\n            ・選択されたAnnoをReferenceとしてViewerに表示\n                ◎ displayReferenceAnnoFiles\n                    ・引数で指定されたAnnoFileを追加/削除し、ビュワーに表示する\n                    ・引数1：AnnoFile名\n                    ・引数2：処理タイプ（Add / Remove）\n                    ・戻り値：なし\n    AnnoListドロップダウン\n        ・開くとき\n            ・表示中のPrimaryAnno一覧を取得して、一覧表示\n                ◎ getPrimaryAnnos\n                    ・現在ビュワーに表示しているPrimaryAnno一覧を返却する.\n                    ・引数：なし\n                    ・戻り値：PrimaryAnno一覧（[アノテーション情報]）\n        ・Click\n            ・選択されたAnnoまでスクロールして強調表示\n                ◎ scrollToAnno\n                    ・引数で指定されたPrimaryAnnoまでビュワーをスクロールする.\n                    ・引数：アノテーション情報（またはアノテーションのid）\n                    ・戻り値：なし\n    Downloadボタン\n        ・表示中のPrimaryAnnoをダウンロードできる\n                ◎ getPrimaryAnnosAsTOML\n                    ・現在ビュワーに表示しているPrimaryAnno一覧をTOML形式で返却する.\n                    ・引数：なし\n                    ・戻り値：TOMLファイル\n    Viewer\n        ・ビュワーを表示する\n            ◎ displayViewer\n                ・ビュワーを表示します\n                ・引数：なし\n                ・戻り値：なし\n    アノテーションツール（Span, Arrow, Rect）\n        ・アノテーションをPrimaryとして新規追加する\n            ◎ addSpan\n                ・Spanを追加します.\n                ・引数：なし\n                ・戻り値：追加成功の場合はOK、NGの場合はエラー理由（文字列未選択など）\n            ◎ addRelation\n                ・Relationを追加します.\n                ・引数：タイプ（two-way / one-way / link）\n                ・戻り値：追加成功の場合はOK、NGの場合はエラー理由（アノテーション未選択など）\n            ◎ enableRectMode\n                ・Rectを描画する状態にします.\n                ・引数：なし\n                ・戻り値：なし\n            ◎ disableRectMode\n                ・Rectの描画状態を解除します.\n                ・引数：なし\n                ・戻り値：なし\n    ラベル入力\n        ・ラベルの表示\n            ・requestEnableLabel（PDFAnno -> UI へ Window.Event経由で呼び出す）\n                ・ラベルインプットに情報を表示します\n                ・引数1：テキスト\n                ・引数2：状態（読み取り専用 / 書き込み可）\n                ・引数3：アノテーションID\n                ・戻り値：なし\n            ・requestDisableLabel（PDFAnno -> UI へ Window.Event経由で呼び出す）\n                ・ラベルインプットを初期状態に戻す\n                ・引数：なし\n                ・戻り値：なし\n        ・ラベルの入力と更新\n            ◎ updateLabel\n                ・アノテーションの保持するラベルを更新する.（ユーザーの入力に応じて）\n                ・引数1：アノテーションID\n                ・引数2：変更後のテキスト\n                ・戻り値：なし\n    PDFアップロード\n        ・表示中のPDFをサーバーへアップロード\n            ◎ getDisplayedPDF\n                ・同上\n*/\nrequire(\"file?name=dist/index.html!./index.html\");\nrequire(\"!style!css!./pdfanno.css\");\n\nimport { dispatchWindowEvent } from './shared/util';\n\n// UIs.\nimport * as browseButton from './page/ui/browseButton';\nimport * as pdfDropdown from './page/ui/pdfDropdown';\nimport * as primaryAnnoDropdown from './page/ui/primaryAnnoDropdown';\nimport * as annoListDropdown from './page/ui/annoListDropdown';\nimport * as referenceAnnoDropdown from './page/ui/referenceAnnoDropdown';\nimport * as downloadButton from './page/ui/downloadButton';\nimport * as uploadButton from './page/ui/uploadButton';\nimport * as annotationTools from './page/ui/annotationTools';\nimport * as inputLabel from './page/ui/inputLabel';\n\nimport {\n    listenWindowLeaveEvent,\n    unlistenWindowLeaveEvent,\n    resizeHandler,\n    setupResizableColumns\n} from './page/util/window';\n\nimport * as publicApi from './page/public';\n\nimport PDFAnnoPage from './page/pdf/PDFAnnoPage';\n\n/**\n * Global variable.\n */\nwindow.pdfanno = {};\n\n/**\n * Expose public APIs.\n */\nwindow.add = publicApi.addAnnotation;\nwindow.addAll = publicApi.addAllAnnotations;\nwindow.delete = publicApi.deleteAnnotation;\nwindow.RectAnnotation = publicApi.PublicRectAnnotation;\nwindow.SpanAnnotation = publicApi.PublicSpanAnnotation;\nwindow.RelationAnnotation = publicApi.PublicRelationAnnotation;\nwindow.readTOML = publicApi.readTOML;\nwindow.clear = publicApi.clear;\n\n/**\n * Annotation functions for Page.\n */\nwindow.annoPage = new PDFAnnoPage();\n\n\n// Check Ctrl or Cmd button clicked.\n// ** ATTENTION!! ALSO UPDATED by core/index.js **\n$(document).on('keydown', e => {\n\n    if (e.keyCode === 17 || e.keyCode === 91) { // 17:ctrlKey, 91:cmdKey\n        window.annoPage.manageCtrlKey('on');\n    }\n\n}).on('keyup', e => {\n\n    // Allow any keyboard events for <input/>.\n    if (e.target.tagName.toLowerCase() === 'input') {\n        return;\n    }\n\n    window.annoPage.manageCtrlKey('off');\n\n    if (e.keyCode === 49) {         // Digit \"1\"\n        dispatchWindowEvent('digit1Pressed');\n    } else if (e.keyCode === 50) {  // Digit \"2\"\n        dispatchWindowEvent('digit2Pressed');\n    } else if (e.keyCode === 51) {  // Digit \"3\"\n        dispatchWindowEvent('digit3Pressed');\n    } else if (e.keyCode === 52) {  // Digit \"4\"\n        dispatchWindowEvent('digit4Pressed');\n    }\n});\n\n/**\n *  The entry point.\n */\nwindow.addEventListener('DOMContentLoaded', e => {\n\n    // Init viewer.\n    window.annoPage.initializeViewer();\n\n    // Delete prev annotations.\n    window.annoPage.clearAllAnnotations();\n\n    // Reset PDFViwer settings.\n    window.annoPage.resetPDFViewerSettings();\n\n    // Start application.\n    window.annoPage.startViewerApplication();\n\n    // Setup UI parts.\n    browseButton.setup();\n    pdfDropdown.setup();\n    primaryAnnoDropdown.setup();\n    referenceAnnoDropdown.setup();\n    annoListDropdown.setup();\n    downloadButton.setup();\n    uploadButton.setup();\n    annotationTools.setup();\n    inputLabel.setup();\n\n    window.addEventListener('restartApp', window.annoPage.startViewerApplication);\n\n    // resizable.\n    setupResizableColumns();\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/pdfanno.js\n **/","var parser = require('./lib/parser');\nvar compiler = require('./lib/compiler');\n\nmodule.exports = {\n  parse: function(input) {\n    var nodes = parser.parse(input.toString());\n    return compiler.compile(nodes);\n  }\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/toml/index.js\n ** module id = 9\n ** module chunks = 0 1\n **/","module.exports = (function() {\n  /*\n   * Generated by PEG.js 0.8.0.\n   *\n   * http://pegjs.majda.cz/\n   */\n\n  function peg$subclass(child, parent) {\n    function ctor() { this.constructor = child; }\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n  }\n\n  function SyntaxError(message, expected, found, offset, line, column) {\n    this.message  = message;\n    this.expected = expected;\n    this.found    = found;\n    this.offset   = offset;\n    this.line     = line;\n    this.column   = column;\n\n    this.name     = \"SyntaxError\";\n  }\n\n  peg$subclass(SyntaxError, Error);\n\n  function parse(input) {\n    var options = arguments.length > 1 ? arguments[1] : {},\n\n        peg$FAILED = {},\n\n        peg$startRuleFunctions = { start: peg$parsestart },\n        peg$startRuleFunction  = peg$parsestart,\n\n        peg$c0 = [],\n        peg$c1 = function() { return nodes },\n        peg$c2 = peg$FAILED,\n        peg$c3 = \"#\",\n        peg$c4 = { type: \"literal\", value: \"#\", description: \"\\\"#\\\"\" },\n        peg$c5 = void 0,\n        peg$c6 = { type: \"any\", description: \"any character\" },\n        peg$c7 = \"[\",\n        peg$c8 = { type: \"literal\", value: \"[\", description: \"\\\"[\\\"\" },\n        peg$c9 = \"]\",\n        peg$c10 = { type: \"literal\", value: \"]\", description: \"\\\"]\\\"\" },\n        peg$c11 = function(name) { addNode(node('ObjectPath', name, line, column)) },\n        peg$c12 = function(name) { addNode(node('ArrayPath', name, line, column)) },\n        peg$c13 = function(parts, name) { return parts.concat(name) },\n        peg$c14 = function(name) { return [name] },\n        peg$c15 = function(name) { return name },\n        peg$c16 = \".\",\n        peg$c17 = { type: \"literal\", value: \".\", description: \"\\\".\\\"\" },\n        peg$c18 = \"=\",\n        peg$c19 = { type: \"literal\", value: \"=\", description: \"\\\"=\\\"\" },\n        peg$c20 = function(key, value) { addNode(node('Assign', value, line, column, key)) },\n        peg$c21 = function(chars) { return chars.join('') },\n        peg$c22 = function(node) { return node.value },\n        peg$c23 = \"\\\"\\\"\\\"\",\n        peg$c24 = { type: \"literal\", value: \"\\\"\\\"\\\"\", description: \"\\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\"\" },\n        peg$c25 = null,\n        peg$c26 = function(chars) { return node('String', chars.join(''), line, column) },\n        peg$c27 = \"\\\"\",\n        peg$c28 = { type: \"literal\", value: \"\\\"\", description: \"\\\"\\\\\\\"\\\"\" },\n        peg$c29 = \"'''\",\n        peg$c30 = { type: \"literal\", value: \"'''\", description: \"\\\"'''\\\"\" },\n        peg$c31 = \"'\",\n        peg$c32 = { type: \"literal\", value: \"'\", description: \"\\\"'\\\"\" },\n        peg$c33 = function(char) { return char },\n        peg$c34 = function(char) { return char},\n        peg$c35 = \"\\\\\",\n        peg$c36 = { type: \"literal\", value: \"\\\\\", description: \"\\\"\\\\\\\\\\\"\" },\n        peg$c37 = function() { return '' },\n        peg$c38 = \"e\",\n        peg$c39 = { type: \"literal\", value: \"e\", description: \"\\\"e\\\"\" },\n        peg$c40 = \"E\",\n        peg$c41 = { type: \"literal\", value: \"E\", description: \"\\\"E\\\"\" },\n        peg$c42 = function(left, right) { return node('Float', parseFloat(left + 'e' + right), line, column) },\n        peg$c43 = function(text) { return node('Float', parseFloat(text), line, column) },\n        peg$c44 = \"+\",\n        peg$c45 = { type: \"literal\", value: \"+\", description: \"\\\"+\\\"\" },\n        peg$c46 = function(digits) { return digits.join('') },\n        peg$c47 = \"-\",\n        peg$c48 = { type: \"literal\", value: \"-\", description: \"\\\"-\\\"\" },\n        peg$c49 = function(digits) { return '-' + digits.join('') },\n        peg$c50 = function(text) { return node('Integer', parseInt(text, 10), line, column) },\n        peg$c51 = \"true\",\n        peg$c52 = { type: \"literal\", value: \"true\", description: \"\\\"true\\\"\" },\n        peg$c53 = function() { return node('Boolean', true, line, column) },\n        peg$c54 = \"false\",\n        peg$c55 = { type: \"literal\", value: \"false\", description: \"\\\"false\\\"\" },\n        peg$c56 = function() { return node('Boolean', false, line, column) },\n        peg$c57 = function() { return node('Array', [], line, column) },\n        peg$c58 = function(value) { return node('Array', value ? [value] : [], line, column) },\n        peg$c59 = function(values) { return node('Array', values, line, column) },\n        peg$c60 = function(values, value) { return node('Array', values.concat(value), line, column) },\n        peg$c61 = function(value) { return value },\n        peg$c62 = \",\",\n        peg$c63 = { type: \"literal\", value: \",\", description: \"\\\",\\\"\" },\n        peg$c64 = \"{\",\n        peg$c65 = { type: \"literal\", value: \"{\", description: \"\\\"{\\\"\" },\n        peg$c66 = \"}\",\n        peg$c67 = { type: \"literal\", value: \"}\", description: \"\\\"}\\\"\" },\n        peg$c68 = function(values) { return node('InlineTable', values, line, column) },\n        peg$c69 = function(key, value) { return node('InlineTableValue', value, line, column, key) },\n        peg$c70 = function(digits) { return \".\" + digits },\n        peg$c71 = function(date) { return  date.join('') },\n        peg$c72 = \":\",\n        peg$c73 = { type: \"literal\", value: \":\", description: \"\\\":\\\"\" },\n        peg$c74 = function(time) { return time.join('') },\n        peg$c75 = \"T\",\n        peg$c76 = { type: \"literal\", value: \"T\", description: \"\\\"T\\\"\" },\n        peg$c77 = \"Z\",\n        peg$c78 = { type: \"literal\", value: \"Z\", description: \"\\\"Z\\\"\" },\n        peg$c79 = function(date, time) { return node('Date', new Date(date + \"T\" + time + \"Z\"), line, column) },\n        peg$c80 = function(date, time) { return node('Date', new Date(date + \"T\" + time), line, column) },\n        peg$c81 = /^[ \\t]/,\n        peg$c82 = { type: \"class\", value: \"[ \\\\t]\", description: \"[ \\\\t]\" },\n        peg$c83 = \"\\n\",\n        peg$c84 = { type: \"literal\", value: \"\\n\", description: \"\\\"\\\\n\\\"\" },\n        peg$c85 = \"\\r\",\n        peg$c86 = { type: \"literal\", value: \"\\r\", description: \"\\\"\\\\r\\\"\" },\n        peg$c87 = /^[0-9a-f]/i,\n        peg$c88 = { type: \"class\", value: \"[0-9a-f]i\", description: \"[0-9a-f]i\" },\n        peg$c89 = /^[0-9]/,\n        peg$c90 = { type: \"class\", value: \"[0-9]\", description: \"[0-9]\" },\n        peg$c91 = \"_\",\n        peg$c92 = { type: \"literal\", value: \"_\", description: \"\\\"_\\\"\" },\n        peg$c93 = function() { return \"\" },\n        peg$c94 = /^[A-Za-z0-9_\\-]/,\n        peg$c95 = { type: \"class\", value: \"[A-Za-z0-9_\\\\-]\", description: \"[A-Za-z0-9_\\\\-]\" },\n        peg$c96 = function(d) { return d.join('') },\n        peg$c97 = \"\\\\\\\"\",\n        peg$c98 = { type: \"literal\", value: \"\\\\\\\"\", description: \"\\\"\\\\\\\\\\\\\\\"\\\"\" },\n        peg$c99 = function() { return '\"'  },\n        peg$c100 = \"\\\\\\\\\",\n        peg$c101 = { type: \"literal\", value: \"\\\\\\\\\", description: \"\\\"\\\\\\\\\\\\\\\\\\\"\" },\n        peg$c102 = function() { return '\\\\' },\n        peg$c103 = \"\\\\b\",\n        peg$c104 = { type: \"literal\", value: \"\\\\b\", description: \"\\\"\\\\\\\\b\\\"\" },\n        peg$c105 = function() { return '\\b' },\n        peg$c106 = \"\\\\t\",\n        peg$c107 = { type: \"literal\", value: \"\\\\t\", description: \"\\\"\\\\\\\\t\\\"\" },\n        peg$c108 = function() { return '\\t' },\n        peg$c109 = \"\\\\n\",\n        peg$c110 = { type: \"literal\", value: \"\\\\n\", description: \"\\\"\\\\\\\\n\\\"\" },\n        peg$c111 = function() { return '\\n' },\n        peg$c112 = \"\\\\f\",\n        peg$c113 = { type: \"literal\", value: \"\\\\f\", description: \"\\\"\\\\\\\\f\\\"\" },\n        peg$c114 = function() { return '\\f' },\n        peg$c115 = \"\\\\r\",\n        peg$c116 = { type: \"literal\", value: \"\\\\r\", description: \"\\\"\\\\\\\\r\\\"\" },\n        peg$c117 = function() { return '\\r' },\n        peg$c118 = \"\\\\U\",\n        peg$c119 = { type: \"literal\", value: \"\\\\U\", description: \"\\\"\\\\\\\\U\\\"\" },\n        peg$c120 = function(digits) { return convertCodePoint(digits.join('')) },\n        peg$c121 = \"\\\\u\",\n        peg$c122 = { type: \"literal\", value: \"\\\\u\", description: \"\\\"\\\\\\\\u\\\"\" },\n\n        peg$currPos          = 0,\n        peg$reportedPos      = 0,\n        peg$cachedPos        = 0,\n        peg$cachedPosDetails = { line: 1, column: 1, seenCR: false },\n        peg$maxFailPos       = 0,\n        peg$maxFailExpected  = [],\n        peg$silentFails      = 0,\n\n        peg$cache = {},\n        peg$result;\n\n    if (\"startRule\" in options) {\n      if (!(options.startRule in peg$startRuleFunctions)) {\n        throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n      }\n\n      peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n    }\n\n    function text() {\n      return input.substring(peg$reportedPos, peg$currPos);\n    }\n\n    function offset() {\n      return peg$reportedPos;\n    }\n\n    function line() {\n      return peg$computePosDetails(peg$reportedPos).line;\n    }\n\n    function column() {\n      return peg$computePosDetails(peg$reportedPos).column;\n    }\n\n    function expected(description) {\n      throw peg$buildException(\n        null,\n        [{ type: \"other\", description: description }],\n        peg$reportedPos\n      );\n    }\n\n    function error(message) {\n      throw peg$buildException(message, null, peg$reportedPos);\n    }\n\n    function peg$computePosDetails(pos) {\n      function advance(details, startPos, endPos) {\n        var p, ch;\n\n        for (p = startPos; p < endPos; p++) {\n          ch = input.charAt(p);\n          if (ch === \"\\n\") {\n            if (!details.seenCR) { details.line++; }\n            details.column = 1;\n            details.seenCR = false;\n          } else if (ch === \"\\r\" || ch === \"\\u2028\" || ch === \"\\u2029\") {\n            details.line++;\n            details.column = 1;\n            details.seenCR = true;\n          } else {\n            details.column++;\n            details.seenCR = false;\n          }\n        }\n      }\n\n      if (peg$cachedPos !== pos) {\n        if (peg$cachedPos > pos) {\n          peg$cachedPos = 0;\n          peg$cachedPosDetails = { line: 1, column: 1, seenCR: false };\n        }\n        advance(peg$cachedPosDetails, peg$cachedPos, pos);\n        peg$cachedPos = pos;\n      }\n\n      return peg$cachedPosDetails;\n    }\n\n    function peg$fail(expected) {\n      if (peg$currPos < peg$maxFailPos) { return; }\n\n      if (peg$currPos > peg$maxFailPos) {\n        peg$maxFailPos = peg$currPos;\n        peg$maxFailExpected = [];\n      }\n\n      peg$maxFailExpected.push(expected);\n    }\n\n    function peg$buildException(message, expected, pos) {\n      function cleanupExpected(expected) {\n        var i = 1;\n\n        expected.sort(function(a, b) {\n          if (a.description < b.description) {\n            return -1;\n          } else if (a.description > b.description) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n\n        while (i < expected.length) {\n          if (expected[i - 1] === expected[i]) {\n            expected.splice(i, 1);\n          } else {\n            i++;\n          }\n        }\n      }\n\n      function buildMessage(expected, found) {\n        function stringEscape(s) {\n          function hex(ch) { return ch.charCodeAt(0).toString(16).toUpperCase(); }\n\n          return s\n            .replace(/\\\\/g,   '\\\\\\\\')\n            .replace(/\"/g,    '\\\\\"')\n            .replace(/\\x08/g, '\\\\b')\n            .replace(/\\t/g,   '\\\\t')\n            .replace(/\\n/g,   '\\\\n')\n            .replace(/\\f/g,   '\\\\f')\n            .replace(/\\r/g,   '\\\\r')\n            .replace(/[\\x00-\\x07\\x0B\\x0E\\x0F]/g, function(ch) { return '\\\\x0' + hex(ch); })\n            .replace(/[\\x10-\\x1F\\x80-\\xFF]/g,    function(ch) { return '\\\\x'  + hex(ch); })\n            .replace(/[\\u0180-\\u0FFF]/g,         function(ch) { return '\\\\u0' + hex(ch); })\n            .replace(/[\\u1080-\\uFFFF]/g,         function(ch) { return '\\\\u'  + hex(ch); });\n        }\n\n        var expectedDescs = new Array(expected.length),\n            expectedDesc, foundDesc, i;\n\n        for (i = 0; i < expected.length; i++) {\n          expectedDescs[i] = expected[i].description;\n        }\n\n        expectedDesc = expected.length > 1\n          ? expectedDescs.slice(0, -1).join(\", \")\n              + \" or \"\n              + expectedDescs[expected.length - 1]\n          : expectedDescs[0];\n\n        foundDesc = found ? \"\\\"\" + stringEscape(found) + \"\\\"\" : \"end of input\";\n\n        return \"Expected \" + expectedDesc + \" but \" + foundDesc + \" found.\";\n      }\n\n      var posDetails = peg$computePosDetails(pos),\n          found      = pos < input.length ? input.charAt(pos) : null;\n\n      if (expected !== null) {\n        cleanupExpected(expected);\n      }\n\n      return new SyntaxError(\n        message !== null ? message : buildMessage(expected, found),\n        expected,\n        found,\n        pos,\n        posDetails.line,\n        posDetails.column\n      );\n    }\n\n    function peg$parsestart() {\n      var s0, s1, s2;\n\n      var key    = peg$currPos * 49 + 0,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseline();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseline();\n      }\n      if (s1 !== peg$FAILED) {\n        peg$reportedPos = s0;\n        s1 = peg$c1();\n      }\n      s0 = s1;\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseline() {\n      var s0, s1, s2, s3, s4, s5, s6;\n\n      var key    = peg$currPos * 49 + 1,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseS();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseS();\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseexpression();\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseS();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseS();\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = [];\n            s5 = peg$parsecomment();\n            while (s5 !== peg$FAILED) {\n              s4.push(s5);\n              s5 = peg$parsecomment();\n            }\n            if (s4 !== peg$FAILED) {\n              s5 = [];\n              s6 = peg$parseNL();\n              if (s6 !== peg$FAILED) {\n                while (s6 !== peg$FAILED) {\n                  s5.push(s6);\n                  s6 = peg$parseNL();\n                }\n              } else {\n                s5 = peg$c2;\n              }\n              if (s5 === peg$FAILED) {\n                s5 = peg$parseEOF();\n              }\n              if (s5 !== peg$FAILED) {\n                s1 = [s1, s2, s3, s4, s5];\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c2;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = [];\n        s2 = peg$parseS();\n        if (s2 !== peg$FAILED) {\n          while (s2 !== peg$FAILED) {\n            s1.push(s2);\n            s2 = peg$parseS();\n          }\n        } else {\n          s1 = peg$c2;\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = [];\n          s3 = peg$parseNL();\n          if (s3 !== peg$FAILED) {\n            while (s3 !== peg$FAILED) {\n              s2.push(s3);\n              s3 = peg$parseNL();\n            }\n          } else {\n            s2 = peg$c2;\n          }\n          if (s2 === peg$FAILED) {\n            s2 = peg$parseEOF();\n          }\n          if (s2 !== peg$FAILED) {\n            s1 = [s1, s2];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n        if (s0 === peg$FAILED) {\n          s0 = peg$parseNL();\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseexpression() {\n      var s0;\n\n      var key    = peg$currPos * 49 + 2,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$parsecomment();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsepath();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parsetablearray();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseassignment();\n          }\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsecomment() {\n      var s0, s1, s2, s3, s4, s5;\n\n      var key    = peg$currPos * 49 + 3,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 35) {\n        s1 = peg$c3;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c4); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$currPos;\n        s4 = peg$currPos;\n        peg$silentFails++;\n        s5 = peg$parseNL();\n        if (s5 === peg$FAILED) {\n          s5 = peg$parseEOF();\n        }\n        peg$silentFails--;\n        if (s5 === peg$FAILED) {\n          s4 = peg$c5;\n        } else {\n          peg$currPos = s4;\n          s4 = peg$c2;\n        }\n        if (s4 !== peg$FAILED) {\n          if (input.length > peg$currPos) {\n            s5 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c6); }\n          }\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$c2;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$c2;\n        }\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$currPos;\n          s4 = peg$currPos;\n          peg$silentFails++;\n          s5 = peg$parseNL();\n          if (s5 === peg$FAILED) {\n            s5 = peg$parseEOF();\n          }\n          peg$silentFails--;\n          if (s5 === peg$FAILED) {\n            s4 = peg$c5;\n          } else {\n            peg$currPos = s4;\n            s4 = peg$c2;\n          }\n          if (s4 !== peg$FAILED) {\n            if (input.length > peg$currPos) {\n              s5 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c6); }\n            }\n            if (s5 !== peg$FAILED) {\n              s4 = [s4, s5];\n              s3 = s4;\n            } else {\n              peg$currPos = s3;\n              s3 = peg$c2;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$c2;\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          s1 = [s1, s2];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsepath() {\n      var s0, s1, s2, s3, s4, s5;\n\n      var key    = peg$currPos * 49 + 4,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 91) {\n        s1 = peg$c7;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c8); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parseS();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parseS();\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsetable_key();\n          if (s3 !== peg$FAILED) {\n            s4 = [];\n            s5 = peg$parseS();\n            while (s5 !== peg$FAILED) {\n              s4.push(s5);\n              s5 = peg$parseS();\n            }\n            if (s4 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 93) {\n                s5 = peg$c9;\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c10); }\n              }\n              if (s5 !== peg$FAILED) {\n                peg$reportedPos = s0;\n                s1 = peg$c11(s3);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c2;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsetablearray() {\n      var s0, s1, s2, s3, s4, s5, s6, s7;\n\n      var key    = peg$currPos * 49 + 5,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 91) {\n        s1 = peg$c7;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c8); }\n      }\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 91) {\n          s2 = peg$c7;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c8); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseS();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseS();\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parsetable_key();\n            if (s4 !== peg$FAILED) {\n              s5 = [];\n              s6 = peg$parseS();\n              while (s6 !== peg$FAILED) {\n                s5.push(s6);\n                s6 = peg$parseS();\n              }\n              if (s5 !== peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 93) {\n                  s6 = peg$c9;\n                  peg$currPos++;\n                } else {\n                  s6 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c10); }\n                }\n                if (s6 !== peg$FAILED) {\n                  if (input.charCodeAt(peg$currPos) === 93) {\n                    s7 = peg$c9;\n                    peg$currPos++;\n                  } else {\n                    s7 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c10); }\n                  }\n                  if (s7 !== peg$FAILED) {\n                    peg$reportedPos = s0;\n                    s1 = peg$c12(s4);\n                    s0 = s1;\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$c2;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$c2;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c2;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsetable_key() {\n      var s0, s1, s2;\n\n      var key    = peg$currPos * 49 + 6,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parsedot_ended_table_key_part();\n      if (s2 !== peg$FAILED) {\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          s2 = peg$parsedot_ended_table_key_part();\n        }\n      } else {\n        s1 = peg$c2;\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsetable_key_part();\n        if (s2 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c13(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parsetable_key_part();\n        if (s1 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c14(s1);\n        }\n        s0 = s1;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsetable_key_part() {\n      var s0, s1, s2, s3, s4;\n\n      var key    = peg$currPos * 49 + 7,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseS();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseS();\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsekey();\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseS();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseS();\n          }\n          if (s3 !== peg$FAILED) {\n            peg$reportedPos = s0;\n            s1 = peg$c15(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = [];\n        s2 = peg$parseS();\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          s2 = peg$parseS();\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parsequoted_key();\n          if (s2 !== peg$FAILED) {\n            s3 = [];\n            s4 = peg$parseS();\n            while (s4 !== peg$FAILED) {\n              s3.push(s4);\n              s4 = peg$parseS();\n            }\n            if (s3 !== peg$FAILED) {\n              peg$reportedPos = s0;\n              s1 = peg$c15(s2);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsedot_ended_table_key_part() {\n      var s0, s1, s2, s3, s4, s5, s6;\n\n      var key    = peg$currPos * 49 + 8,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseS();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseS();\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsekey();\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseS();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseS();\n          }\n          if (s3 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 46) {\n              s4 = peg$c16;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c17); }\n            }\n            if (s4 !== peg$FAILED) {\n              s5 = [];\n              s6 = peg$parseS();\n              while (s6 !== peg$FAILED) {\n                s5.push(s6);\n                s6 = peg$parseS();\n              }\n              if (s5 !== peg$FAILED) {\n                peg$reportedPos = s0;\n                s1 = peg$c15(s2);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c2;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = [];\n        s2 = peg$parseS();\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          s2 = peg$parseS();\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parsequoted_key();\n          if (s2 !== peg$FAILED) {\n            s3 = [];\n            s4 = peg$parseS();\n            while (s4 !== peg$FAILED) {\n              s3.push(s4);\n              s4 = peg$parseS();\n            }\n            if (s3 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 46) {\n                s4 = peg$c16;\n                peg$currPos++;\n              } else {\n                s4 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c17); }\n              }\n              if (s4 !== peg$FAILED) {\n                s5 = [];\n                s6 = peg$parseS();\n                while (s6 !== peg$FAILED) {\n                  s5.push(s6);\n                  s6 = peg$parseS();\n                }\n                if (s5 !== peg$FAILED) {\n                  peg$reportedPos = s0;\n                  s1 = peg$c15(s2);\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$c2;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c2;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseassignment() {\n      var s0, s1, s2, s3, s4, s5;\n\n      var key    = peg$currPos * 49 + 9,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = peg$parsekey();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parseS();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parseS();\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 61) {\n            s3 = peg$c18;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c19); }\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = [];\n            s5 = peg$parseS();\n            while (s5 !== peg$FAILED) {\n              s4.push(s5);\n              s5 = peg$parseS();\n            }\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parsevalue();\n              if (s5 !== peg$FAILED) {\n                peg$reportedPos = s0;\n                s1 = peg$c20(s1, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c2;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parsequoted_key();\n        if (s1 !== peg$FAILED) {\n          s2 = [];\n          s3 = peg$parseS();\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            s3 = peg$parseS();\n          }\n          if (s2 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 61) {\n              s3 = peg$c18;\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c19); }\n            }\n            if (s3 !== peg$FAILED) {\n              s4 = [];\n              s5 = peg$parseS();\n              while (s5 !== peg$FAILED) {\n                s4.push(s5);\n                s5 = peg$parseS();\n              }\n              if (s4 !== peg$FAILED) {\n                s5 = peg$parsevalue();\n                if (s5 !== peg$FAILED) {\n                  peg$reportedPos = s0;\n                  s1 = peg$c20(s1, s5);\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$c2;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c2;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsekey() {\n      var s0, s1, s2;\n\n      var key    = peg$currPos * 49 + 10,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseASCII_BASIC();\n      if (s2 !== peg$FAILED) {\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          s2 = peg$parseASCII_BASIC();\n        }\n      } else {\n        s1 = peg$c2;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$reportedPos = s0;\n        s1 = peg$c21(s1);\n      }\n      s0 = s1;\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsequoted_key() {\n      var s0, s1;\n\n      var key    = peg$currPos * 49 + 11,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = peg$parsedouble_quoted_single_line_string();\n      if (s1 !== peg$FAILED) {\n        peg$reportedPos = s0;\n        s1 = peg$c22(s1);\n      }\n      s0 = s1;\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parsesingle_quoted_single_line_string();\n        if (s1 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c22(s1);\n        }\n        s0 = s1;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsevalue() {\n      var s0;\n\n      var key    = peg$currPos * 49 + 12,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$parsestring();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsedatetime();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parsefloat();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseinteger();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parseboolean();\n              if (s0 === peg$FAILED) {\n                s0 = peg$parsearray();\n                if (s0 === peg$FAILED) {\n                  s0 = peg$parseinline_table();\n                }\n              }\n            }\n          }\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsestring() {\n      var s0;\n\n      var key    = peg$currPos * 49 + 13,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$parsedouble_quoted_multiline_string();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsedouble_quoted_single_line_string();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parsesingle_quoted_multiline_string();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parsesingle_quoted_single_line_string();\n          }\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsedouble_quoted_multiline_string() {\n      var s0, s1, s2, s3, s4;\n\n      var key    = peg$currPos * 49 + 14,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 3) === peg$c23) {\n        s1 = peg$c23;\n        peg$currPos += 3;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c24); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseNL();\n        if (s2 === peg$FAILED) {\n          s2 = peg$c25;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parsemultiline_string_char();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parsemultiline_string_char();\n          }\n          if (s3 !== peg$FAILED) {\n            if (input.substr(peg$currPos, 3) === peg$c23) {\n              s4 = peg$c23;\n              peg$currPos += 3;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c24); }\n            }\n            if (s4 !== peg$FAILED) {\n              peg$reportedPos = s0;\n              s1 = peg$c26(s3);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsedouble_quoted_single_line_string() {\n      var s0, s1, s2, s3;\n\n      var key    = peg$currPos * 49 + 15,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 34) {\n        s1 = peg$c27;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c28); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsestring_char();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsestring_char();\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 34) {\n            s3 = peg$c27;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c28); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$reportedPos = s0;\n            s1 = peg$c26(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsesingle_quoted_multiline_string() {\n      var s0, s1, s2, s3, s4;\n\n      var key    = peg$currPos * 49 + 16,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 3) === peg$c29) {\n        s1 = peg$c29;\n        peg$currPos += 3;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c30); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseNL();\n        if (s2 === peg$FAILED) {\n          s2 = peg$c25;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parsemultiline_literal_char();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parsemultiline_literal_char();\n          }\n          if (s3 !== peg$FAILED) {\n            if (input.substr(peg$currPos, 3) === peg$c29) {\n              s4 = peg$c29;\n              peg$currPos += 3;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c30); }\n            }\n            if (s4 !== peg$FAILED) {\n              peg$reportedPos = s0;\n              s1 = peg$c26(s3);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsesingle_quoted_single_line_string() {\n      var s0, s1, s2, s3;\n\n      var key    = peg$currPos * 49 + 17,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 39) {\n        s1 = peg$c31;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c32); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parseliteral_char();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parseliteral_char();\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 39) {\n            s3 = peg$c31;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c32); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$reportedPos = s0;\n            s1 = peg$c26(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsestring_char() {\n      var s0, s1, s2;\n\n      var key    = peg$currPos * 49 + 18,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$parseESCAPED();\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$currPos;\n        peg$silentFails++;\n        if (input.charCodeAt(peg$currPos) === 34) {\n          s2 = peg$c27;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c28); }\n        }\n        peg$silentFails--;\n        if (s2 === peg$FAILED) {\n          s1 = peg$c5;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$c2;\n        }\n        if (s1 !== peg$FAILED) {\n          if (input.length > peg$currPos) {\n            s2 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c6); }\n          }\n          if (s2 !== peg$FAILED) {\n            peg$reportedPos = s0;\n            s1 = peg$c33(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseliteral_char() {\n      var s0, s1, s2;\n\n      var key    = peg$currPos * 49 + 19,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      peg$silentFails++;\n      if (input.charCodeAt(peg$currPos) === 39) {\n        s2 = peg$c31;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c32); }\n      }\n      peg$silentFails--;\n      if (s2 === peg$FAILED) {\n        s1 = peg$c5;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$c2;\n      }\n      if (s1 !== peg$FAILED) {\n        if (input.length > peg$currPos) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c6); }\n        }\n        if (s2 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c33(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsemultiline_string_char() {\n      var s0, s1, s2;\n\n      var key    = peg$currPos * 49 + 20,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$parseESCAPED();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsemultiline_string_delim();\n        if (s0 === peg$FAILED) {\n          s0 = peg$currPos;\n          s1 = peg$currPos;\n          peg$silentFails++;\n          if (input.substr(peg$currPos, 3) === peg$c23) {\n            s2 = peg$c23;\n            peg$currPos += 3;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c24); }\n          }\n          peg$silentFails--;\n          if (s2 === peg$FAILED) {\n            s1 = peg$c5;\n          } else {\n            peg$currPos = s1;\n            s1 = peg$c2;\n          }\n          if (s1 !== peg$FAILED) {\n            if (input.length > peg$currPos) {\n              s2 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s2 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c6); }\n            }\n            if (s2 !== peg$FAILED) {\n              peg$reportedPos = s0;\n              s1 = peg$c34(s2);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsemultiline_string_delim() {\n      var s0, s1, s2, s3, s4;\n\n      var key    = peg$currPos * 49 + 21,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 92) {\n        s1 = peg$c35;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c36); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseNL();\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseNLS();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseNLS();\n          }\n          if (s3 !== peg$FAILED) {\n            peg$reportedPos = s0;\n            s1 = peg$c37();\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsemultiline_literal_char() {\n      var s0, s1, s2;\n\n      var key    = peg$currPos * 49 + 22,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      peg$silentFails++;\n      if (input.substr(peg$currPos, 3) === peg$c29) {\n        s2 = peg$c29;\n        peg$currPos += 3;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c30); }\n      }\n      peg$silentFails--;\n      if (s2 === peg$FAILED) {\n        s1 = peg$c5;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$c2;\n      }\n      if (s1 !== peg$FAILED) {\n        if (input.length > peg$currPos) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c6); }\n        }\n        if (s2 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c33(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsefloat() {\n      var s0, s1, s2, s3;\n\n      var key    = peg$currPos * 49 + 23,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = peg$parsefloat_text();\n      if (s1 === peg$FAILED) {\n        s1 = peg$parseinteger_text();\n      }\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 101) {\n          s2 = peg$c38;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c39); }\n        }\n        if (s2 === peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 69) {\n            s2 = peg$c40;\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c41); }\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseinteger_text();\n          if (s3 !== peg$FAILED) {\n            peg$reportedPos = s0;\n            s1 = peg$c42(s1, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parsefloat_text();\n        if (s1 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c43(s1);\n        }\n        s0 = s1;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsefloat_text() {\n      var s0, s1, s2, s3, s4, s5;\n\n      var key    = peg$currPos * 49 + 24,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 43) {\n        s1 = peg$c44;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c45); }\n      }\n      if (s1 === peg$FAILED) {\n        s1 = peg$c25;\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$currPos;\n        s3 = peg$parseDIGITS();\n        if (s3 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 46) {\n            s4 = peg$c16;\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c17); }\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parseDIGITS();\n            if (s5 !== peg$FAILED) {\n              s3 = [s3, s4, s5];\n              s2 = s3;\n            } else {\n              peg$currPos = s2;\n              s2 = peg$c2;\n            }\n          } else {\n            peg$currPos = s2;\n            s2 = peg$c2;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$c2;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c46(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 45) {\n          s1 = peg$c47;\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c48); }\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$currPos;\n          s3 = peg$parseDIGITS();\n          if (s3 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 46) {\n              s4 = peg$c16;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c17); }\n            }\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parseDIGITS();\n              if (s5 !== peg$FAILED) {\n                s3 = [s3, s4, s5];\n                s2 = s3;\n              } else {\n                peg$currPos = s2;\n                s2 = peg$c2;\n              }\n            } else {\n              peg$currPos = s2;\n              s2 = peg$c2;\n            }\n          } else {\n            peg$currPos = s2;\n            s2 = peg$c2;\n          }\n          if (s2 !== peg$FAILED) {\n            peg$reportedPos = s0;\n            s1 = peg$c49(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseinteger() {\n      var s0, s1;\n\n      var key    = peg$currPos * 49 + 25,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = peg$parseinteger_text();\n      if (s1 !== peg$FAILED) {\n        peg$reportedPos = s0;\n        s1 = peg$c50(s1);\n      }\n      s0 = s1;\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseinteger_text() {\n      var s0, s1, s2, s3, s4;\n\n      var key    = peg$currPos * 49 + 26,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 43) {\n        s1 = peg$c44;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c45); }\n      }\n      if (s1 === peg$FAILED) {\n        s1 = peg$c25;\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parseDIGIT_OR_UNDER();\n        if (s3 !== peg$FAILED) {\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            s3 = peg$parseDIGIT_OR_UNDER();\n          }\n        } else {\n          s2 = peg$c2;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$currPos;\n          peg$silentFails++;\n          if (input.charCodeAt(peg$currPos) === 46) {\n            s4 = peg$c16;\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c17); }\n          }\n          peg$silentFails--;\n          if (s4 === peg$FAILED) {\n            s3 = peg$c5;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$c2;\n          }\n          if (s3 !== peg$FAILED) {\n            peg$reportedPos = s0;\n            s1 = peg$c46(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 45) {\n          s1 = peg$c47;\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c48); }\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = [];\n          s3 = peg$parseDIGIT_OR_UNDER();\n          if (s3 !== peg$FAILED) {\n            while (s3 !== peg$FAILED) {\n              s2.push(s3);\n              s3 = peg$parseDIGIT_OR_UNDER();\n            }\n          } else {\n            s2 = peg$c2;\n          }\n          if (s2 !== peg$FAILED) {\n            s3 = peg$currPos;\n            peg$silentFails++;\n            if (input.charCodeAt(peg$currPos) === 46) {\n              s4 = peg$c16;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c17); }\n            }\n            peg$silentFails--;\n            if (s4 === peg$FAILED) {\n              s3 = peg$c5;\n            } else {\n              peg$currPos = s3;\n              s3 = peg$c2;\n            }\n            if (s3 !== peg$FAILED) {\n              peg$reportedPos = s0;\n              s1 = peg$c49(s2);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseboolean() {\n      var s0, s1;\n\n      var key    = peg$currPos * 49 + 27,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 4) === peg$c51) {\n        s1 = peg$c51;\n        peg$currPos += 4;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c52); }\n      }\n      if (s1 !== peg$FAILED) {\n        peg$reportedPos = s0;\n        s1 = peg$c53();\n      }\n      s0 = s1;\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 5) === peg$c54) {\n          s1 = peg$c54;\n          peg$currPos += 5;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c55); }\n        }\n        if (s1 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c56();\n        }\n        s0 = s1;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsearray() {\n      var s0, s1, s2, s3, s4;\n\n      var key    = peg$currPos * 49 + 28,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 91) {\n        s1 = peg$c7;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c8); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsearray_sep();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsearray_sep();\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 93) {\n            s3 = peg$c9;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c10); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$reportedPos = s0;\n            s1 = peg$c57();\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 91) {\n          s1 = peg$c7;\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c8); }\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parsearray_value();\n          if (s2 === peg$FAILED) {\n            s2 = peg$c25;\n          }\n          if (s2 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 93) {\n              s3 = peg$c9;\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c10); }\n            }\n            if (s3 !== peg$FAILED) {\n              peg$reportedPos = s0;\n              s1 = peg$c58(s2);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n        if (s0 === peg$FAILED) {\n          s0 = peg$currPos;\n          if (input.charCodeAt(peg$currPos) === 91) {\n            s1 = peg$c7;\n            peg$currPos++;\n          } else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c8); }\n          }\n          if (s1 !== peg$FAILED) {\n            s2 = [];\n            s3 = peg$parsearray_value_list();\n            if (s3 !== peg$FAILED) {\n              while (s3 !== peg$FAILED) {\n                s2.push(s3);\n                s3 = peg$parsearray_value_list();\n              }\n            } else {\n              s2 = peg$c2;\n            }\n            if (s2 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 93) {\n                s3 = peg$c9;\n                peg$currPos++;\n              } else {\n                s3 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c10); }\n              }\n              if (s3 !== peg$FAILED) {\n                peg$reportedPos = s0;\n                s1 = peg$c59(s2);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c2;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n          if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 91) {\n              s1 = peg$c7;\n              peg$currPos++;\n            } else {\n              s1 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c8); }\n            }\n            if (s1 !== peg$FAILED) {\n              s2 = [];\n              s3 = peg$parsearray_value_list();\n              if (s3 !== peg$FAILED) {\n                while (s3 !== peg$FAILED) {\n                  s2.push(s3);\n                  s3 = peg$parsearray_value_list();\n                }\n              } else {\n                s2 = peg$c2;\n              }\n              if (s2 !== peg$FAILED) {\n                s3 = peg$parsearray_value();\n                if (s3 !== peg$FAILED) {\n                  if (input.charCodeAt(peg$currPos) === 93) {\n                    s4 = peg$c9;\n                    peg$currPos++;\n                  } else {\n                    s4 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c10); }\n                  }\n                  if (s4 !== peg$FAILED) {\n                    peg$reportedPos = s0;\n                    s1 = peg$c60(s2, s3);\n                    s0 = s1;\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$c2;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$c2;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c2;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          }\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsearray_value() {\n      var s0, s1, s2, s3, s4;\n\n      var key    = peg$currPos * 49 + 29,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parsearray_sep();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parsearray_sep();\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsevalue();\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parsearray_sep();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parsearray_sep();\n          }\n          if (s3 !== peg$FAILED) {\n            peg$reportedPos = s0;\n            s1 = peg$c61(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsearray_value_list() {\n      var s0, s1, s2, s3, s4, s5, s6;\n\n      var key    = peg$currPos * 49 + 30,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parsearray_sep();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parsearray_sep();\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsevalue();\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parsearray_sep();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parsearray_sep();\n          }\n          if (s3 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 44) {\n              s4 = peg$c62;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c63); }\n            }\n            if (s4 !== peg$FAILED) {\n              s5 = [];\n              s6 = peg$parsearray_sep();\n              while (s6 !== peg$FAILED) {\n                s5.push(s6);\n                s6 = peg$parsearray_sep();\n              }\n              if (s5 !== peg$FAILED) {\n                peg$reportedPos = s0;\n                s1 = peg$c61(s2);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c2;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsearray_sep() {\n      var s0;\n\n      var key    = peg$currPos * 49 + 31,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$parseS();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parseNL();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parsecomment();\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseinline_table() {\n      var s0, s1, s2, s3, s4, s5;\n\n      var key    = peg$currPos * 49 + 32,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 123) {\n        s1 = peg$c64;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c65); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parseS();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parseS();\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseinline_table_assignment();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseinline_table_assignment();\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = [];\n            s5 = peg$parseS();\n            while (s5 !== peg$FAILED) {\n              s4.push(s5);\n              s5 = peg$parseS();\n            }\n            if (s4 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 125) {\n                s5 = peg$c66;\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c67); }\n              }\n              if (s5 !== peg$FAILED) {\n                peg$reportedPos = s0;\n                s1 = peg$c68(s3);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c2;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseinline_table_assignment() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10;\n\n      var key    = peg$currPos * 49 + 33,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseS();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseS();\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsekey();\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseS();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseS();\n          }\n          if (s3 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 61) {\n              s4 = peg$c18;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c19); }\n            }\n            if (s4 !== peg$FAILED) {\n              s5 = [];\n              s6 = peg$parseS();\n              while (s6 !== peg$FAILED) {\n                s5.push(s6);\n                s6 = peg$parseS();\n              }\n              if (s5 !== peg$FAILED) {\n                s6 = peg$parsevalue();\n                if (s6 !== peg$FAILED) {\n                  s7 = [];\n                  s8 = peg$parseS();\n                  while (s8 !== peg$FAILED) {\n                    s7.push(s8);\n                    s8 = peg$parseS();\n                  }\n                  if (s7 !== peg$FAILED) {\n                    if (input.charCodeAt(peg$currPos) === 44) {\n                      s8 = peg$c62;\n                      peg$currPos++;\n                    } else {\n                      s8 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c63); }\n                    }\n                    if (s8 !== peg$FAILED) {\n                      s9 = [];\n                      s10 = peg$parseS();\n                      while (s10 !== peg$FAILED) {\n                        s9.push(s10);\n                        s10 = peg$parseS();\n                      }\n                      if (s9 !== peg$FAILED) {\n                        peg$reportedPos = s0;\n                        s1 = peg$c69(s2, s6);\n                        s0 = s1;\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$c2;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$c2;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$c2;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$c2;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c2;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = [];\n        s2 = peg$parseS();\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          s2 = peg$parseS();\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parsekey();\n          if (s2 !== peg$FAILED) {\n            s3 = [];\n            s4 = peg$parseS();\n            while (s4 !== peg$FAILED) {\n              s3.push(s4);\n              s4 = peg$parseS();\n            }\n            if (s3 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 61) {\n                s4 = peg$c18;\n                peg$currPos++;\n              } else {\n                s4 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c19); }\n              }\n              if (s4 !== peg$FAILED) {\n                s5 = [];\n                s6 = peg$parseS();\n                while (s6 !== peg$FAILED) {\n                  s5.push(s6);\n                  s6 = peg$parseS();\n                }\n                if (s5 !== peg$FAILED) {\n                  s6 = peg$parsevalue();\n                  if (s6 !== peg$FAILED) {\n                    peg$reportedPos = s0;\n                    s1 = peg$c69(s2, s6);\n                    s0 = s1;\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$c2;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$c2;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$c2;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsesecfragment() {\n      var s0, s1, s2;\n\n      var key    = peg$currPos * 49 + 34,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 46) {\n        s1 = peg$c16;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c17); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseDIGITS();\n        if (s2 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c70(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsedate() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11;\n\n      var key    = peg$currPos * 49 + 35,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parseDIGIT_OR_UNDER();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseDIGIT_OR_UNDER();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseDIGIT_OR_UNDER();\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parseDIGIT_OR_UNDER();\n            if (s5 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 45) {\n                s6 = peg$c47;\n                peg$currPos++;\n              } else {\n                s6 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c48); }\n              }\n              if (s6 !== peg$FAILED) {\n                s7 = peg$parseDIGIT_OR_UNDER();\n                if (s7 !== peg$FAILED) {\n                  s8 = peg$parseDIGIT_OR_UNDER();\n                  if (s8 !== peg$FAILED) {\n                    if (input.charCodeAt(peg$currPos) === 45) {\n                      s9 = peg$c47;\n                      peg$currPos++;\n                    } else {\n                      s9 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c48); }\n                    }\n                    if (s9 !== peg$FAILED) {\n                      s10 = peg$parseDIGIT_OR_UNDER();\n                      if (s10 !== peg$FAILED) {\n                        s11 = peg$parseDIGIT_OR_UNDER();\n                        if (s11 !== peg$FAILED) {\n                          s2 = [s2, s3, s4, s5, s6, s7, s8, s9, s10, s11];\n                          s1 = s2;\n                        } else {\n                          peg$currPos = s1;\n                          s1 = peg$c2;\n                        }\n                      } else {\n                        peg$currPos = s1;\n                        s1 = peg$c2;\n                      }\n                    } else {\n                      peg$currPos = s1;\n                      s1 = peg$c2;\n                    }\n                  } else {\n                    peg$currPos = s1;\n                    s1 = peg$c2;\n                  }\n                } else {\n                  peg$currPos = s1;\n                  s1 = peg$c2;\n                }\n              } else {\n                peg$currPos = s1;\n                s1 = peg$c2;\n              }\n            } else {\n              peg$currPos = s1;\n              s1 = peg$c2;\n            }\n          } else {\n            peg$currPos = s1;\n            s1 = peg$c2;\n          }\n        } else {\n          peg$currPos = s1;\n          s1 = peg$c2;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$c2;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$reportedPos = s0;\n        s1 = peg$c71(s1);\n      }\n      s0 = s1;\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsetime() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10;\n\n      var key    = peg$currPos * 49 + 36,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parseDIGIT_OR_UNDER();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseDIGIT_OR_UNDER();\n        if (s3 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 58) {\n            s4 = peg$c72;\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c73); }\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parseDIGIT_OR_UNDER();\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parseDIGIT_OR_UNDER();\n              if (s6 !== peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 58) {\n                  s7 = peg$c72;\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c73); }\n                }\n                if (s7 !== peg$FAILED) {\n                  s8 = peg$parseDIGIT_OR_UNDER();\n                  if (s8 !== peg$FAILED) {\n                    s9 = peg$parseDIGIT_OR_UNDER();\n                    if (s9 !== peg$FAILED) {\n                      s10 = peg$parsesecfragment();\n                      if (s10 === peg$FAILED) {\n                        s10 = peg$c25;\n                      }\n                      if (s10 !== peg$FAILED) {\n                        s2 = [s2, s3, s4, s5, s6, s7, s8, s9, s10];\n                        s1 = s2;\n                      } else {\n                        peg$currPos = s1;\n                        s1 = peg$c2;\n                      }\n                    } else {\n                      peg$currPos = s1;\n                      s1 = peg$c2;\n                    }\n                  } else {\n                    peg$currPos = s1;\n                    s1 = peg$c2;\n                  }\n                } else {\n                  peg$currPos = s1;\n                  s1 = peg$c2;\n                }\n              } else {\n                peg$currPos = s1;\n                s1 = peg$c2;\n              }\n            } else {\n              peg$currPos = s1;\n              s1 = peg$c2;\n            }\n          } else {\n            peg$currPos = s1;\n            s1 = peg$c2;\n          }\n        } else {\n          peg$currPos = s1;\n          s1 = peg$c2;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$c2;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$reportedPos = s0;\n        s1 = peg$c74(s1);\n      }\n      s0 = s1;\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsetime_with_offset() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12, s13, s14, s15, s16;\n\n      var key    = peg$currPos * 49 + 37,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parseDIGIT_OR_UNDER();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseDIGIT_OR_UNDER();\n        if (s3 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 58) {\n            s4 = peg$c72;\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c73); }\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parseDIGIT_OR_UNDER();\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parseDIGIT_OR_UNDER();\n              if (s6 !== peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 58) {\n                  s7 = peg$c72;\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c73); }\n                }\n                if (s7 !== peg$FAILED) {\n                  s8 = peg$parseDIGIT_OR_UNDER();\n                  if (s8 !== peg$FAILED) {\n                    s9 = peg$parseDIGIT_OR_UNDER();\n                    if (s9 !== peg$FAILED) {\n                      s10 = peg$parsesecfragment();\n                      if (s10 === peg$FAILED) {\n                        s10 = peg$c25;\n                      }\n                      if (s10 !== peg$FAILED) {\n                        if (input.charCodeAt(peg$currPos) === 45) {\n                          s11 = peg$c47;\n                          peg$currPos++;\n                        } else {\n                          s11 = peg$FAILED;\n                          if (peg$silentFails === 0) { peg$fail(peg$c48); }\n                        }\n                        if (s11 === peg$FAILED) {\n                          if (input.charCodeAt(peg$currPos) === 43) {\n                            s11 = peg$c44;\n                            peg$currPos++;\n                          } else {\n                            s11 = peg$FAILED;\n                            if (peg$silentFails === 0) { peg$fail(peg$c45); }\n                          }\n                        }\n                        if (s11 !== peg$FAILED) {\n                          s12 = peg$parseDIGIT_OR_UNDER();\n                          if (s12 !== peg$FAILED) {\n                            s13 = peg$parseDIGIT_OR_UNDER();\n                            if (s13 !== peg$FAILED) {\n                              if (input.charCodeAt(peg$currPos) === 58) {\n                                s14 = peg$c72;\n                                peg$currPos++;\n                              } else {\n                                s14 = peg$FAILED;\n                                if (peg$silentFails === 0) { peg$fail(peg$c73); }\n                              }\n                              if (s14 !== peg$FAILED) {\n                                s15 = peg$parseDIGIT_OR_UNDER();\n                                if (s15 !== peg$FAILED) {\n                                  s16 = peg$parseDIGIT_OR_UNDER();\n                                  if (s16 !== peg$FAILED) {\n                                    s2 = [s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12, s13, s14, s15, s16];\n                                    s1 = s2;\n                                  } else {\n                                    peg$currPos = s1;\n                                    s1 = peg$c2;\n                                  }\n                                } else {\n                                  peg$currPos = s1;\n                                  s1 = peg$c2;\n                                }\n                              } else {\n                                peg$currPos = s1;\n                                s1 = peg$c2;\n                              }\n                            } else {\n                              peg$currPos = s1;\n                              s1 = peg$c2;\n                            }\n                          } else {\n                            peg$currPos = s1;\n                            s1 = peg$c2;\n                          }\n                        } else {\n                          peg$currPos = s1;\n                          s1 = peg$c2;\n                        }\n                      } else {\n                        peg$currPos = s1;\n                        s1 = peg$c2;\n                      }\n                    } else {\n                      peg$currPos = s1;\n                      s1 = peg$c2;\n                    }\n                  } else {\n                    peg$currPos = s1;\n                    s1 = peg$c2;\n                  }\n                } else {\n                  peg$currPos = s1;\n                  s1 = peg$c2;\n                }\n              } else {\n                peg$currPos = s1;\n                s1 = peg$c2;\n              }\n            } else {\n              peg$currPos = s1;\n              s1 = peg$c2;\n            }\n          } else {\n            peg$currPos = s1;\n            s1 = peg$c2;\n          }\n        } else {\n          peg$currPos = s1;\n          s1 = peg$c2;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$c2;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$reportedPos = s0;\n        s1 = peg$c74(s1);\n      }\n      s0 = s1;\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parsedatetime() {\n      var s0, s1, s2, s3, s4;\n\n      var key    = peg$currPos * 49 + 38,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = peg$parsedate();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 84) {\n          s2 = peg$c75;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c76); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsetime();\n          if (s3 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 90) {\n              s4 = peg$c77;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c78); }\n            }\n            if (s4 !== peg$FAILED) {\n              peg$reportedPos = s0;\n              s1 = peg$c79(s1, s3);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parsedate();\n        if (s1 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 84) {\n            s2 = peg$c75;\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c76); }\n          }\n          if (s2 !== peg$FAILED) {\n            s3 = peg$parsetime_with_offset();\n            if (s3 !== peg$FAILED) {\n              peg$reportedPos = s0;\n              s1 = peg$c80(s1, s3);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$c2;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseS() {\n      var s0;\n\n      var key    = peg$currPos * 49 + 39,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      if (peg$c81.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c82); }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseNL() {\n      var s0, s1, s2;\n\n      var key    = peg$currPos * 49 + 40,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      if (input.charCodeAt(peg$currPos) === 10) {\n        s0 = peg$c83;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c84); }\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 13) {\n          s1 = peg$c85;\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c86); }\n        }\n        if (s1 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 10) {\n            s2 = peg$c83;\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c84); }\n          }\n          if (s2 !== peg$FAILED) {\n            s1 = [s1, s2];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseNLS() {\n      var s0;\n\n      var key    = peg$currPos * 49 + 41,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$parseNL();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parseS();\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseEOF() {\n      var s0, s1;\n\n      var key    = peg$currPos * 49 + 42,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      peg$silentFails++;\n      if (input.length > peg$currPos) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c6); }\n      }\n      peg$silentFails--;\n      if (s1 === peg$FAILED) {\n        s0 = peg$c5;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseHEX() {\n      var s0;\n\n      var key    = peg$currPos * 49 + 43,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      if (peg$c87.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c88); }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseDIGIT_OR_UNDER() {\n      var s0, s1;\n\n      var key    = peg$currPos * 49 + 44,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      if (peg$c89.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c90); }\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 95) {\n          s1 = peg$c91;\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c92); }\n        }\n        if (s1 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c93();\n        }\n        s0 = s1;\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseASCII_BASIC() {\n      var s0;\n\n      var key    = peg$currPos * 49 + 45,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      if (peg$c94.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c95); }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseDIGITS() {\n      var s0, s1, s2;\n\n      var key    = peg$currPos * 49 + 46,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseDIGIT_OR_UNDER();\n      if (s2 !== peg$FAILED) {\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          s2 = peg$parseDIGIT_OR_UNDER();\n        }\n      } else {\n        s1 = peg$c2;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$reportedPos = s0;\n        s1 = peg$c96(s1);\n      }\n      s0 = s1;\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseESCAPED() {\n      var s0, s1;\n\n      var key    = peg$currPos * 49 + 47,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 2) === peg$c97) {\n        s1 = peg$c97;\n        peg$currPos += 2;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c98); }\n      }\n      if (s1 !== peg$FAILED) {\n        peg$reportedPos = s0;\n        s1 = peg$c99();\n      }\n      s0 = s1;\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 2) === peg$c100) {\n          s1 = peg$c100;\n          peg$currPos += 2;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c101); }\n        }\n        if (s1 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c102();\n        }\n        s0 = s1;\n        if (s0 === peg$FAILED) {\n          s0 = peg$currPos;\n          if (input.substr(peg$currPos, 2) === peg$c103) {\n            s1 = peg$c103;\n            peg$currPos += 2;\n          } else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c104); }\n          }\n          if (s1 !== peg$FAILED) {\n            peg$reportedPos = s0;\n            s1 = peg$c105();\n          }\n          s0 = s1;\n          if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            if (input.substr(peg$currPos, 2) === peg$c106) {\n              s1 = peg$c106;\n              peg$currPos += 2;\n            } else {\n              s1 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c107); }\n            }\n            if (s1 !== peg$FAILED) {\n              peg$reportedPos = s0;\n              s1 = peg$c108();\n            }\n            s0 = s1;\n            if (s0 === peg$FAILED) {\n              s0 = peg$currPos;\n              if (input.substr(peg$currPos, 2) === peg$c109) {\n                s1 = peg$c109;\n                peg$currPos += 2;\n              } else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c110); }\n              }\n              if (s1 !== peg$FAILED) {\n                peg$reportedPos = s0;\n                s1 = peg$c111();\n              }\n              s0 = s1;\n              if (s0 === peg$FAILED) {\n                s0 = peg$currPos;\n                if (input.substr(peg$currPos, 2) === peg$c112) {\n                  s1 = peg$c112;\n                  peg$currPos += 2;\n                } else {\n                  s1 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c113); }\n                }\n                if (s1 !== peg$FAILED) {\n                  peg$reportedPos = s0;\n                  s1 = peg$c114();\n                }\n                s0 = s1;\n                if (s0 === peg$FAILED) {\n                  s0 = peg$currPos;\n                  if (input.substr(peg$currPos, 2) === peg$c115) {\n                    s1 = peg$c115;\n                    peg$currPos += 2;\n                  } else {\n                    s1 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c116); }\n                  }\n                  if (s1 !== peg$FAILED) {\n                    peg$reportedPos = s0;\n                    s1 = peg$c117();\n                  }\n                  s0 = s1;\n                  if (s0 === peg$FAILED) {\n                    s0 = peg$parseESCAPED_UNICODE();\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n    function peg$parseESCAPED_UNICODE() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10;\n\n      var key    = peg$currPos * 49 + 48,\n          cached = peg$cache[key];\n\n      if (cached) {\n        peg$currPos = cached.nextPos;\n        return cached.result;\n      }\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 2) === peg$c118) {\n        s1 = peg$c118;\n        peg$currPos += 2;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c119); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$currPos;\n        s3 = peg$parseHEX();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseHEX();\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parseHEX();\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parseHEX();\n              if (s6 !== peg$FAILED) {\n                s7 = peg$parseHEX();\n                if (s7 !== peg$FAILED) {\n                  s8 = peg$parseHEX();\n                  if (s8 !== peg$FAILED) {\n                    s9 = peg$parseHEX();\n                    if (s9 !== peg$FAILED) {\n                      s10 = peg$parseHEX();\n                      if (s10 !== peg$FAILED) {\n                        s3 = [s3, s4, s5, s6, s7, s8, s9, s10];\n                        s2 = s3;\n                      } else {\n                        peg$currPos = s2;\n                        s2 = peg$c2;\n                      }\n                    } else {\n                      peg$currPos = s2;\n                      s2 = peg$c2;\n                    }\n                  } else {\n                    peg$currPos = s2;\n                    s2 = peg$c2;\n                  }\n                } else {\n                  peg$currPos = s2;\n                  s2 = peg$c2;\n                }\n              } else {\n                peg$currPos = s2;\n                s2 = peg$c2;\n              }\n            } else {\n              peg$currPos = s2;\n              s2 = peg$c2;\n            }\n          } else {\n            peg$currPos = s2;\n            s2 = peg$c2;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$c2;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$reportedPos = s0;\n          s1 = peg$c120(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$c2;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 2) === peg$c121) {\n          s1 = peg$c121;\n          peg$currPos += 2;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c122); }\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$currPos;\n          s3 = peg$parseHEX();\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parseHEX();\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parseHEX();\n              if (s5 !== peg$FAILED) {\n                s6 = peg$parseHEX();\n                if (s6 !== peg$FAILED) {\n                  s3 = [s3, s4, s5, s6];\n                  s2 = s3;\n                } else {\n                  peg$currPos = s2;\n                  s2 = peg$c2;\n                }\n              } else {\n                peg$currPos = s2;\n                s2 = peg$c2;\n              }\n            } else {\n              peg$currPos = s2;\n              s2 = peg$c2;\n            }\n          } else {\n            peg$currPos = s2;\n            s2 = peg$c2;\n          }\n          if (s2 !== peg$FAILED) {\n            peg$reportedPos = s0;\n            s1 = peg$c120(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$c2;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$c2;\n        }\n      }\n\n      peg$cache[key] = { nextPos: peg$currPos, result: s0 };\n\n      return s0;\n    }\n\n\n      var nodes = [];\n\n      function genError(err, line, col) {\n        var ex = new Error(err);\n        ex.line = line;\n        ex.column = col;\n        throw ex;\n      }\n\n      function addNode(node) {\n        nodes.push(node);\n      }\n\n      function node(type, value, line, column, key) {\n        var obj = { type: type, value: value, line: line(), column: column() };\n        if (key) obj.key = key;\n        return obj;\n      }\n\n      function convertCodePoint(str, line, col) {\n        var num = parseInt(\"0x\" + str);\n\n        if (\n          !isFinite(num) ||\n          Math.floor(num) != num ||\n          num < 0 ||\n          num > 0x10FFFF ||\n          (num > 0xD7FF && num < 0xE000)\n        ) {\n          genError(\"Invalid Unicode escape code: \" + str, line, col);\n        } else {\n          return fromCodePoint(num);\n        }\n      }\n\n      function fromCodePoint() {\n        var MAX_SIZE = 0x4000;\n        var codeUnits = [];\n        var highSurrogate;\n        var lowSurrogate;\n        var index = -1;\n        var length = arguments.length;\n        if (!length) {\n          return '';\n        }\n        var result = '';\n        while (++index < length) {\n          var codePoint = Number(arguments[index]);\n          if (codePoint <= 0xFFFF) { // BMP code point\n            codeUnits.push(codePoint);\n          } else { // Astral code point; split in surrogate halves\n            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n            codePoint -= 0x10000;\n            highSurrogate = (codePoint >> 10) + 0xD800;\n            lowSurrogate = (codePoint % 0x400) + 0xDC00;\n            codeUnits.push(highSurrogate, lowSurrogate);\n          }\n          if (index + 1 == length || codeUnits.length > MAX_SIZE) {\n            result += String.fromCharCode.apply(null, codeUnits);\n            codeUnits.length = 0;\n          }\n        }\n        return result;\n      }\n\n\n    peg$result = peg$startRuleFunction();\n\n    if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n      return peg$result;\n    } else {\n      if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n        peg$fail({ type: \"end\", description: \"end of input\" });\n      }\n\n      throw peg$buildException(null, peg$maxFailExpected, peg$maxFailPos);\n    }\n  }\n\n  return {\n    SyntaxError: SyntaxError,\n    parse:       parse\n  };\n})();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/toml/lib/parser.js\n ** module id = 10\n ** module chunks = 0 1\n **/","\"use strict\";\nfunction compile(nodes) {\n  var assignedPaths = [];\n  var valueAssignments = [];\n  var currentPath = \"\";\n  var data = {};\n  var context = data;\n  var arrayMode = false;\n\n  return reduce(nodes);\n\n  function reduce(nodes) {\n    var node;\n    for (var i in nodes) {\n      node = nodes[i];\n      switch (node.type) {\n      case \"Assign\":\n        assign(node);\n        break;\n      case \"ObjectPath\":\n        setPath(node);\n        break;\n      case \"ArrayPath\":\n        addTableArray(node);\n        break;\n      }\n    }\n\n    return data;\n  }\n\n  function genError(err, line, col) {\n    var ex = new Error(err);\n    ex.line = line;\n    ex.column = col;\n    throw ex;\n  }\n\n  function assign(node) {\n    var key = node.key;\n    var value = node.value;\n    var line = node.line;\n    var column = node.column;\n\n    var fullPath;\n    if (currentPath) {\n      fullPath = currentPath + \".\" + key;\n    } else {\n      fullPath = key;\n    }\n    if (typeof context[key] !== \"undefined\") {\n      genError(\"Cannot redefine existing key '\" + fullPath + \"'.\", line, column);\n    }\n\n    context[key] = reduceValueNode(value);\n\n    if (!pathAssigned(fullPath)) {\n      assignedPaths.push(fullPath);\n      valueAssignments.push(fullPath);\n    }\n  }\n\n\n  function pathAssigned(path) {\n    return assignedPaths.indexOf(path) !== -1;\n  }\n\n  function reduceValueNode(node) {\n    if (node.type === \"Array\") {\n      return reduceArrayWithTypeChecking(node.value);\n    } else if (node.type === \"InlineTable\") {\n      return reduceInlineTableNode(node.value);\n    } else {\n      return node.value;\n    }\n  }\n\n  function reduceInlineTableNode(values) {\n    var obj = {};\n    for (var i = 0; i < values.length; i++) {\n      var val = values[i];\n      if (val.value.type === \"InlineTable\") {\n        obj[val.key] = reduceInlineTableNode(val.value.value);\n      } else if (val.type === \"InlineTableValue\") {\n        obj[val.key] = reduceValueNode(val.value);\n      }\n    }\n\n    return obj;\n  }\n\n  function setPath(node) {\n    var path = node.value;\n    var quotedPath = path.map(quoteDottedString).join(\".\");\n    var line = node.line;\n    var column = node.column;\n\n    if (pathAssigned(quotedPath)) {\n      genError(\"Cannot redefine existing key '\" + path + \"'.\", line, column);\n    }\n    assignedPaths.push(quotedPath);\n    context = deepRef(data, path, {}, line, column);\n    currentPath = path;\n  }\n\n  function addTableArray(node) {\n    var path = node.value;\n    var quotedPath = path.map(quoteDottedString).join(\".\");\n    var line = node.line;\n    var column = node.column;\n\n    if (!pathAssigned(quotedPath)) {\n      assignedPaths.push(quotedPath);\n    }\n    assignedPaths = assignedPaths.filter(function(p) {\n      return p.indexOf(quotedPath) !== 0;\n    });\n    assignedPaths.push(quotedPath);\n    context = deepRef(data, path, [], line, column);\n    currentPath = quotedPath;\n\n    if (context instanceof Array) {\n      var newObj = {};\n      context.push(newObj);\n      context = newObj;\n    } else {\n      genError(\"Cannot redefine existing key '\" + path + \"'.\", line, column);\n    }\n  }\n\n  // Given a path 'a.b.c', create (as necessary) `start.a`,\n  // `start.a.b`, and `start.a.b.c`, assigning `value` to `start.a.b.c`.\n  // If `a` or `b` are arrays and have items in them, the last item in the\n  // array is used as the context for the next sub-path.\n  function deepRef(start, keys, value, line, column) {\n    var key;\n    var traversed = [];\n    var traversedPath = \"\";\n    var path = keys.join(\".\");\n    var ctx = start;\n    var keysLen = keys.length;\n\n    for (var i in keys) {\n      key = keys[i];\n      traversed.push(key);\n      traversedPath = traversed.join(\".\");\n      if (typeof ctx[key] === \"undefined\") {\n        if (i === String(keysLen - 1)) {\n          ctx[key] = value;\n        } else {\n          ctx[key] = {};\n        }\n      } else if (i !== keysLen - 1 && valueAssignments.indexOf(traversedPath) > -1) {\n        // already a non-object value at key, can't be used as part of a new path\n        genError(\"Cannot redefine existing key '\" + traversedPath + \"'.\", line, column);\n      }\n\n      ctx = ctx[key];\n      if (ctx instanceof Array && ctx.length && i < keys.length - 1) {\n        ctx = ctx[ctx.length - 1];\n      }\n    }\n\n    return ctx;\n  }\n\n  function reduceArrayWithTypeChecking(array) {\n    // Ensure that all items in the array are of the same type\n    var firstType = null;\n    for(var i in array) {\n      var node = array[i];\n      if (firstType === null) {\n        firstType = node.type;\n      } else if ((node.type === 'Integer' || node.type === 'Float') && (firstType === 'Integer' || firstType === 'Float')) {\n        // OK.\n      } else if (node.type !== firstType) {\n        genError(\"Cannot add value of type \" + node.type + \" to array of type \" +\n          firstType + \".\", node.line, node.column);\n      }\n    }\n\n    // Recursively reduce array of nodes into array of the nodes' values\n    return array.map(reduceValueNode);\n  }\n\n  function quoteDottedString(str) {\n    if (str.indexOf(\".\") > -1) {\n      return \"\\\"\" + str + \"\\\"\";\n    } else {\n      return str;\n    }\n  }\n}\n\nmodule.exports = {\n  compile: compile\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/toml/lib/compiler.js\n ** module id = 11\n ** module chunks = 0 1\n **/","/**\n * Convert the `y` position from the local coords to exported json.\n */\nexport function convertToExportY(y) {\n\n    let meta = getPageSize();\n\n    y -= paddingTop;\n\n    let pageHeight = meta.height + paddingBetweenPages;\n\n    let pageNumber = Math.floor(y / pageHeight) + 1;\n    let yInPage = y - (pageNumber-1) * pageHeight;\n\n    return { pageNumber, y : yInPage };\n}\n\n/**\n * Convert the `y` position from exported json to local coords.\n */\nexport function convertFromExportY(pageNumber, yInPage) {\n\n    let meta = getPageSize();\n\n    let y = yInPage + paddingTop;\n\n    let pagePadding = paddingBetweenPages;\n\n    y += (pageNumber - 1) * (meta.height + pagePadding);\n\n    return y;\n}\n\n/**\n * The padding of page top.\n */\nconst paddingTop = 9;\n\n/**\n * The padding between pages.\n */\nexport const paddingBetweenPages = 9;\n\n/**\n * Get a page size of a single PDF page.\n */\nexport function getPageSize() {\n\n    let pdfView = window.PDFView || iframeWindow.PDFView;\n\n    let viewBox = pdfView.pdfViewer.getPageView(0).viewport.viewBox;\n    let size = { width : viewBox[2], height : viewBox[3] };\n    return size;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shared/coords.js\n **/","/**\n * Utility.\n */\n\nexport function anyOf(target, candidates) {\n    return candidates.filter(c => c === target).length > 0;\n}\n\n/**\n * Dispatch a custom event to `window` object.\n */\nexport function dispatchWindowEvent(eventName, data) {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, true, true, data);\n    window.dispatchEvent(event);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shared/util.js\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 45\n ** module chunks = 0 1\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 46\n ** module chunks = 0 1\n **/","/**\n * UI parts - Browse button.\n */\nimport { reloadPDFViewer, setupColorPicker, displayAnnotation } from '../util/display';\n\n// TODO Refactoring.\n\n// TODO Remove ?\nimport AnnoPage from '../pdf';\n\n/**\n * Setup the behavior of a Browse Button.\n */\nexport function setup() {\n\n    // Enable to select the same directory twice or more.\n    $('.js-file :file').on('click', ev => {\n        $('input[type=\"file\"]').val(null);\n    });\n\n    $('.js-file :file').on('change', ev => {\n\n        const files = ev.target.files;\n\n        let error = isValidDirectorySelect(files);\n        if (error) {\n            return alert(error);\n        }\n\n        window.annoPage.loadFiles(files).then(() => {\n\n            // Get current visuals.\n            const current = getCurrentFileNames();\n\n            // Initialize PDF Viewer.\n            window.annoPage.clearAllAnnotations();\n\n            // Setup PDF Dropdown.\n            // setPDFDropdownList(1);\n            setPDFDropdownList();\n\n            // Setup Anno Dropdown.\n            setAnnoDropdownList();\n\n            // Display a PDF and annotations.\n            // display(current, pdfDataMap, annoDataMap);\n            display();\n\n            // TODO Browseボタン以前の選択状態の復元と、ビュワーの復元をする.\n        });\n\n    });\n}\n\n/**\n * Check whether the directory the user specified is valid.\n */\nfunction isValidDirectorySelect(files) {\n\n    // Error, if no contents exits.\n    if (!files || files.length === 0) {\n        return 'Not files specified';\n    }\n\n    // Error, if the user select a file - not a directory.\n    let relativePath = files[0].webkitRelativePath;\n    if (!relativePath) {\n        return 'Please select a directory, NOT a file';\n    }\n\n    // OK.\n    return null;\n}\n\n\n\nfunction display() {\n\n    const currentDisplay = getCurrentFileNames();\n\n    let files;\n\n    // Restore the check state of a content.\n    files = window.annoPage.contentFiles.filter(c => c.name === currentDisplay.pdfName);\n    if (files.length > 0) {\n        window.pdf = files[0].content;\n        window.pdfName = files[0].name;\n\n        $('#dropdownPdf .js-text').text(name);\n        $('#dropdownPdf a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.js-pdfname').text() === currentDisplay.pdfName) {\n                $elm.find('.fa-check').removeClass('no-visible');\n            }\n        });\n    } else {\n        delete window.pdf;\n        delete window.pdfName;\n    }\n\n    // Restore the check state of a primaryAnno.\n    files = window.annoPage.annoFiles.filter(c => c.name === currentDisplay.primaryAnnotationName);\n    let promise1 = Promise.resolve();\n    if (files.length > 0) {\n        $('#dropdownAnnoPrimary .js-text').text(currentDisplay.primaryAnnotationName);\n        $('#dropdownAnnoPrimary a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.js-annoname').text() === name) {\n                $elm.find('.fa-check').removeClass('no-visible');\n            }\n        });\n        promise1 = displayAnnotation(true, false);\n    }\n\n    // Restore the check states of referenceAnnos.\n    let names = currentDisplay.referenceAnnotationNames;\n    let colors = currentDisplay.referenceAnnotationColors;\n    let changed = false;\n    names = names.filter((name, i) => {\n        let found = false;\n        let annos = window.annoPage.annoFiles.filter(c => c.name === name);\n        if (annos.length > 0) {\n            $('#dropdownAnnoReference a').each((index, element) => {\n                let $elm = $(element);\n                if ($elm.find('.js-annoname').text() === name) {\n                    $elm.find('.fa-check').removeClass('no-visible');\n                    $elm.find('.js-anno-palette').spectrum('set', colors[i]);\n                    found = true;\n                }\n            });\n        }\n        return found;\n    });\n    let promise2 = Promise.resolve();\n    if (names.length > 0) {\n        $('#dropdownAnnoReference .js-text').text(names.join(','));\n        promise2 = displayAnnotation(false, false);\n    }\n\n\n    // Reload page.\n    Promise.all([promise1, promise2]).then(reloadPDFViewer);\n\n}\n\n/**\n * Get a filename from a path.\n */\n // TODO No need ?\nfunction _excludeBaseDirName(filePath) {\n    let frgms = filePath.split('/');\n    return frgms[frgms.length - 1];\n}\n\n/**\n * Get the file names which currently are displayed.\n */\n// TODO Refactoring independent from UI.\nfunction getCurrentFileNames() {\n\n    let text;\n\n    // a PDF name.\n    text = $('#dropdownPdf .js-text').text();\n    let pdfName = (text !== 'PDF File' ? text : null);\n\n    // a Primary anno.\n    text = $('#dropdownAnnoPrimary .js-text').text();\n    let primaryAnnotationName = (text !== 'Anno File' ? text : null);\n\n\n    let referenceAnnotationNames = [];\n    let referenceAnnotationColors = [];\n    $('#dropdownAnnoReference a').each((index, element) => {\n        let $elm = $(element);\n        if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n            let annoName = $elm.find('.js-annoname').text(); // TODO こういうのはJS変数として持っておいたほうがいいかも（選択済のものについて）\n            referenceAnnotationNames.push(annoName);\n            let color = $elm.find('.js-anno-palette').spectrum('get').toHexString();\n            referenceAnnotationColors.push(color);\n        }\n    });\n\n    return {\n        pdfName,\n        primaryAnnotationName,\n        referenceAnnotationNames,\n        referenceAnnotationColors\n    };\n}\n\n/**\n * Setup the contents of the dropdown for PDFs.\n */\n// function setPDFDropdownList(pdfs=[]) {\n\n//     console.log('pdfs:', pdfs);\n\n//     $('#dropdownPdf .js-text').text('PDF File');\n//     $('#dropdownPdf li').remove();\n//     pdfs.forEach(file => {\n//         let pdfPath = _excludeBaseDirName(file.webkitRelativePath);\n//         let snipet = `\n//             <li>\n//                 <a href=\"#\">\n//                     <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>&nbsp;\n//                     <span class=\"js-pdfname\">${pdfPath}</span>\n//                 </a>\n//             </li>\n//         `;\n//         $('#dropdownPdf ul').append(snipet);\n//     });\n// }\nfunction setPDFDropdownList() {\n\n    const pdfs = window.annoPage.contentFiles;\n\n    console.log('pdfs:', pdfs);\n\n    $('#dropdownPdf .js-text').text('PDF File');\n    $('#dropdownPdf li').remove();\n    pdfs.forEach(pdf => {\n        // let pdfPath = _excludeBaseDirName(pdf.webkitRelativePath);\n        // let pdfPath = _excludeBaseDirName()\n        let snipet = `\n            <li>\n                <a href=\"#\">\n                    <i class=\"fa fa-check no-visible\"></i>&nbsp;\n                    <span class=\"js-pdfname\">${pdf.name}</span>\n                </a>\n            </li>\n        `;\n        $('#dropdownPdf ul').append(snipet);\n    });\n}\n\n/**\n * Setup the contents of the dropdowns for primary/reference annotations.\n */\n// function setAnnoDropdownList(annos=[]) {\n\n//     // Reset.\n//     $('#dropdownAnnoPrimary ul').html('');\n//     $('#dropdownAnnoReference ul').html('');\n//     $('#dropdownAnnoPrimary .js-text').text('Anno File');\n//     $('#dropdownAnnoReference .js-text').text('Reference Files');\n\n//     // Setup anno / reference dropdown.\n//     annos.forEach(file => {\n\n//         let fileName = _excludeBaseDirName(file.webkitRelativePath);\n\n//         let snipet1 = `\n//             <li>\n//                 <a href=\"#\">\n//                     <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>\n//                     <span class=\"js-annoname\">${fileName}</span>\n//                 </a>\n//             </li>\n//         `;\n//         $('#dropdownAnnoPrimary ul').append(snipet1);\n\n//         let snipet2 = `\n//             <li>\n//                 <a href=\"#\">\n//                     <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>\n//                     <input type=\"text\" name=\"color\" class=\"js-anno-palette\" autocomplete=\"off\">\n//                     <span class=\"js-annoname\">${fileName}</span>\n//                 </a>\n//             </li>\n//         `;\n//         $('#dropdownAnnoReference ul').append(snipet2);\n//     });\n\n//     // Setup color pallets.\n//     setupColorPicker();\n// }\n\n\nfunction setAnnoDropdownList() {\n\n    // const annoFiles = window.annoPage.annoFiles;\n\n    // console.log('setAnnoDropdownList:', window.annoPage.annoFiles);\n\n    // Reset.\n    $('#dropdownAnnoPrimary ul').html('');\n    $('#dropdownAnnoReference ul').html('');\n    $('#dropdownAnnoPrimary .js-text').text('Anno File');\n    $('#dropdownAnnoReference .js-text').text('Reference Files');\n\n    // Setup anno / reference dropdown.\n    window.annoPage.annoFiles.forEach(file => {\n\n        console.log('anno:', file.name);\n\n        // let fileName = _excludeBaseDirName(file.webkitRelativePath);\n\n        let snipet1 = `\n            <li>\n                <a href=\"#\">\n                    <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>\n                    <span class=\"js-annoname\">${file.name}</span>\n                </a>\n            </li>\n        `;\n        $('#dropdownAnnoPrimary ul').append(snipet1);\n\n        let snipet2 = `\n            <li>\n                <a href=\"#\">\n                    <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>\n                    <input type=\"text\" name=\"color\" class=\"js-anno-palette\" autocomplete=\"off\">\n                    <span class=\"js-annoname\">${file.name}</span>\n                </a>\n            </li>\n        `;\n        $('#dropdownAnnoReference ul').append(snipet2);\n    });\n\n    // Setup color pallets.\n    setupColorPicker();\n}\n\n// console.log('getCurrentFileNames:', getCurrentFileNames);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/browseButton.js\n **/","\n\n/**\n * Display annotations an user selected.\n */\n// TODO move to PDFAnnoPage.js\nexport function displayAnnotation(isPrimary, reload=true) {\n\n    let annotations = [];\n    let colors = [];\n    let primaryIndex = -1;\n\n    // Primary annotation.\n    if (isPrimary) {\n        $('#dropdownAnnoPrimary a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n                let annoPath = $elm.find('.js-annoname').text();\n\n                const annoFile = window.annoPage.getAnnoFile(annoPath);\n                if (!annoFile) {\n                    console.log('ERROR');\n                    return;\n                }\n                primaryIndex = 0;\n                annotations.push(annoFile.content);\n                let color = null; // Use the default color used for edit.\n                colors.push(color);\n\n                // let filename = annoPath.split('/')[annoPath.split('/').length - 1];\n                let filename = annoFile.name;\n                localStorage.setItem('_pdfanno_primary_annoname', filename);\n                console.log('filename:', filename);\n            }\n        });\n    }\n\n    // Reference annotations.\n    if (!isPrimary) {\n        $('#dropdownAnnoReference a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n                let annoPath = $elm.find('.js-annoname').text();\n\n                const annoFile = window.annoPage.getAnnoFile(annoPath);\n\n                if (!annoFile) {\n                    console.log('ERROR');\n                    return;\n                }\n                annotations.push(annoFile.content);\n                let color = $elm.find('.js-anno-palette').spectrum('get').toHexString();\n                console.log(color);\n                colors.push(color);\n            }\n        });\n    }\n\n    console.log('colors:', colors);\n\n    // Create import data.\n    let paperData = {\n        primary : primaryIndex,\n        colors,\n        annotations\n    };\n\n    // Pass the data to pdf-annotatejs.\n    // TODO Discard storeAdaptor.\n    window.iframeWindow.PDFAnnoCore.getStoreAdapter().importAnnotations(paperData, isPrimary).then(result => {\n\n        // if (reload) {\n        //     // Reload the viewer.\n        //     reloadPDFViewer();\n        // }\n\n        iframeWindow.removeAnnoLayer();\n        iframeWindow.renderAnno();\n\n        // return true;\n    });\n\n}\n\n/**\n * Reload PDF Viewer.\n */\n// TODO Need?\n// TODO UI分離.\nexport function reloadPDFViewer() {\n\n    // Reset setting.\n    window.annoPage.resetPDFViewerSettings();\n\n    // Reload pdf.js.\n    $('#viewer iframe').remove();\n    $('#viewer').html('<iframe src=\"./pages/viewer.html\" class=\"anno-viewer\" frameborder=\"0\"></iframe>');\n\n    // Restart.\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('restartApp', true, true, null);\n    window.dispatchEvent(event);\n\n    // Catch the event iframe is ready.\n    function iframeReady() {\n        console.log('iframeReady');\n        window.removeEventListener('annotationrendered', iframeReady);\n    }\n    window.addEventListener('annotationrendered', iframeReady);\n}\n\n/**\n * Setup the color pickers.\n */\nexport function setupColorPicker() {\n\n    const colors = [\n        'rgb(255, 128, 0)', 'hsv 100 70 50', 'yellow', 'blanchedalmond',\n        'red', 'green', 'blue', 'violet'\n    ];\n\n    // Setup colorPickers.\n    $('.js-anno-palette').spectrum({\n        showPaletteOnly        : true,\n        showPalette            : true,\n        hideAfterPaletteSelect : true,\n        palette                : [\n            colors.slice(0, Math.floor(colors.length/2)),\n            colors.slice(Math.floor(colors.length/2), colors.length)\n        ]\n    });\n    // Set initial color.\n    $('.js-anno-palette').each((i, elm) => {\n        $(elm).spectrum('set', colors[ i % colors.length ]);\n    });\n\n    // Setup behavior.\n    $('.js-anno-palette').off('change').on('change', displayAnnotation.bind(null, false));\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/util/display.js\n **/","/**\n *  PDFAnnoPage functions.\n */\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/pdf/index.js\n **/","/**\n * UI parts - PDF Dropdown.\n */\nimport { reloadPDFViewer } from '../util/display';\nimport { resetCheckPrimaryAnnoDropdown, resetCheckReferenceAnnoDropdown } from '../util/dropdown';\n\n// TODO Refactoring.\n\n/**\n * Setup the dropdown of PDFs.\n */\nexport function setup() {\n\n    $('#dropdownPdf').on('click', 'a', e => {\n\n        let $this = $(e.currentTarget);\n        // TODO pdfPath to name.\n        // TODO js-pdfname to js-content-name\n        let pdfPath = $this.find('.js-pdfname').text();\n\n        let currentPDFName = $('#dropdownPdf .js-text').text();\n        if (currentPDFName === pdfPath) {\n            console.log('Not reload. the pdf are same.');\n            return;\n        }\n\n        // Confirm to override.\n        if (currentPDFName !== 'PDF File') {\n            if (!window.confirm('Are you sure to load another PDF ?')) {\n                return;\n            }\n        }\n\n        $('#dropdownPdf .js-text').text(pdfPath);\n\n        $('#dropdownPdf .fa-check').addClass('no-visible');\n        $this.find('.fa-check').removeClass('no-visible');\n\n        const content = window.annoPage.getContentFile(pdfPath);\n        if (!content) {\n            return false;\n        }\n\n        // Reset Primary/Reference anno dropdowns, and data.\n        window.annoPage.clearAllAnnotations();\n        resetCheckPrimaryAnnoDropdown();\n        resetCheckReferenceAnnoDropdown();\n\n        // reload.\n        window.annoPage.displayViewer(content);\n        // window.pdf = content.content;\n        // window.fileName = content.name;\n        // reloadPDFViewer();\n\n        // Close dropdown.\n        $('#dropdownPdf').click();\n\n        return false;\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/pdfDropdown.js\n **/","/**\n * Utility functions for dropdown UIs.\n */\n\n// TODO Need?\nexport function resetCheckPrimaryAnnoDropdown() {\n    $('#dropdownAnnoPrimary .js-text').text('Anno File');\n    $('#dropdownAnnoPrimary .fa-check').addClass('no-visible');\n}\n\n// TODO Need?\nexport function resetCheckReferenceAnnoDropdown() {\n    $('#dropdownAnnoReference .js-text').text('Reference Files');\n    $('#dropdownAnnoReference .fa-check').addClass('no-visible');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/util/dropdown.js\n **/","/**\n * UI parts - Primary Annotation Dropdown.\n */\nimport { reloadPDFViewer, displayAnnotation } from '../util/display';\n\n// TODO Refactoring.\n\n/**\n * Setup a click action of the Primary Annotation Dropdown.\n */\nexport function setup() {\n\n    $('#dropdownAnnoPrimary').on('click', 'a', e => {\n\n        let $this = $(e.currentTarget);\n        let annoName = $this.find('.js-annoname').text();\n\n        let currentAnnoName = $('#dropdownAnnoPrimary .js-text').text();\n        if (currentAnnoName === annoName) {\n\n            let userAnswer = window.confirm('Are you sure to clear the current annotations?');\n            if (!userAnswer) {\n                return;\n            }\n\n            $('#dropdownAnnoPrimary .fa-check').addClass('no-visible');\n            $('#dropdownAnnoPrimary .js-text').text('Anno File');\n\n            window.annoPage.clearAllAnnotations();\n\n            // Close\n            $('#dropdownAnnoPrimary').click();\n\n            return false;\n\n        }\n\n        // Confirm to override.\n        if (currentAnnoName !== 'Anno File') {\n            if (!window.confirm('Are you sure to load another Primary Annotation ?')) {\n                return;\n            }\n        }\n\n        $('#dropdownAnnoPrimary .js-text').text(annoName);\n\n        $('#dropdownAnnoPrimary .fa-check').addClass('no-visible');\n        $this.find('.fa-check').removeClass('no-visible');\n\n        // reload.\n        displayAnnotation(true);\n\n        // Close\n        $('#dropdownAnnoPrimary').click();\n\n        return false;\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/primaryAnnoDropdown.js\n **/","/**\n * UI parts - Anno List Dropdown.\n */\nimport { convertToExportY, getPageSize, paddingBetweenPages } from '../../shared/coords';\n\n/**\n * Setup the dropdown for Anno list.\n */\nexport function setup() {\n\n    // Show the list of primary annotations.\n    $('#dropdownAnnoList').on('click', () => {\n\n        // Get displayed annotations.\n        let annotations = window.annoPage.getAllAnnotations();\n\n        // Filter only Primary.\n        annotations = annotations.filter(a => {\n            return !a.readOnly;\n        });\n\n        // Sort by offsetY.\n        annotations = annotations.sort((a1, a2) => {\n            return _getY(a1) - _getY(a2);\n        });\n\n        // Create elements.\n        let elements = annotations.map(a => {\n\n            let icon;\n            if (a.type === 'span') {\n                icon = '<i class=\"fa fa-pencil\"></i>';\n            } else if (a.type === 'relation' && a.direction === 'one-way') {\n                icon = '<i class=\"fa fa-long-arrow-right\"></i>';\n            } else if (a.type === 'relation' && a.direction === 'two-way') {\n                icon = '<i class=\"fa fa-arrows-h\"></i>';\n            } else if (a.type === 'relation' && a.direction === 'link') {\n                icon = '<i class=\"fa fa-minus\"></i>';\n            } else if (a.type === 'area') {\n                icon = '<i class=\"fa fa-square-o\"></i>';\n            }\n\n            let y = _getY(a);\n            let { pageNumber } = convertToExportY(y);\n\n\n            let snipet = `\n                <li>\n                    <a href=\"#\" data-page=\"${pageNumber}\" data-id=\"${a.uuid}\">\n                        ${icon}&nbsp;&nbsp;\n                        <span>${a.text || ''}</span>\n                    </a>\n                </li>\n            `;\n\n            return snipet;\n        });\n\n        $('#dropdownAnnoList ul').html(elements);\n\n    });\n\n    // Jump to the page that the selected annotation is at.\n    $('#dropdownAnnoList').on('click', 'a', e => {\n\n        let id = $(e.currentTarget).data('id');\n        let annotation = window.annoPage.findAnnotationById(id);\n\n        if (annotation) {\n\n            // scroll to.\n            let _y = annotation.y || annotation.y1 || annotation.rectangles[0].y;\n            let { pageNumber, y } = convertToExportY(_y);\n            let pageHeight = window.annoPage.getViewerViewport().height;\n            let scale = window.annoPage.getViewerViewport().scale;\n            _y = (pageHeight + paddingBetweenPages) * (pageNumber - 1) + y * scale;\n            _y -= 100;\n            $('#viewer iframe').contents().find('#viewer').parent()[0].scrollTop = _y;\n\n            // highlight.\n            annotation.highlight();\n            setTimeout(() => {\n                annotation.dehighlight();\n            }, 1000);\n        }\n\n        // Close the dropdown.\n        $('#dropdownAnnoList').click();\n    });\n\n    // Watch the number of primary annos.\n    function watchPrimaryAnno(e) {\n        const primaryAnnos = window.annoPage.getAllAnnotations().filter(a => {\n            return !a.readOnly;\n        });\n        $('#dropdownAnnoList .js-count').text(primaryAnnos.length);\n    }\n    $(window)\n        .off('annotationrendered annotationUpdated', watchPrimaryAnno)\n        .on('annotationrendered annotationUpdated', watchPrimaryAnno);\n\n}\n\n/**\n * Get the y position in the annotation.\n */\nfunction _getY(annotation) {\n\n    if (annotation.rectangles) {\n        return annotation.rectangles[0].y;\n\n    } else if (annotation.y1) {\n        return annotation.y1;\n\n    } else {\n        return annotation.y;\n    }\n}\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/annoListDropdown.js\n **/","/**\n * UI parts - Reference Annotation Dropdown.\n */\nimport { displayAnnotation } from '../util/display';\n\n/**\n * Setup a click action of the Reference Annotation Dropdown.\n */\nexport function setup() {\n\n    $('#dropdownAnnoReference').on('click', 'a', e => {\n\n        let $this = $(e.currentTarget);\n\n        $this.find('.fa-check').toggleClass('no-visible');\n\n        let annoNames = [];\n        $('#dropdownAnnoReference a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n                annoNames.push($elm.find('.js-annoname').text());\n            }\n        });\n        if (annoNames.length > 0) {\n            $('#dropdownAnnoReference .js-text').text(annoNames.join(','));\n        } else {\n            $('#dropdownAnnoReference .js-text').text('Reference Files');\n        }\n\n        // TODO Move to PDFAnnoPage.js.\n        displayAnnotation(false);\n\n        return false;\n\n    });\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/referenceAnnoDropdown.js\n **/","/**\n * UI parts - Download Button.\n */\nimport { unlistenWindowLeaveEvent } from '../util/window';\n\n/**\n * Setup the behavior of a Download Button.\n */\nexport function setup() {\n\n    $('#downloadButton').off('click').on('click', e => {\n\n        $(e.currentTarget).blur();\n\n        downloadAnnotation();\n\n        return false;\n    });\n\n}\n\n\n/**\n * Export the primary annotation data for download.\n */\nfunction downloadAnnotation() {\n\n    // TODO UIとの分離.\n    window.annoPage.exportData().then(annotations => {\n        let blob = new Blob([annotations]);\n        let blobURL = window.URL.createObjectURL(blob);\n        let a = document.createElement('a');\n        document.body.appendChild(a); // for firefox working correctly.\n        a.download = _getDownloadFileName();\n        a.href = blobURL;\n        a.click();\n        a.parentNode.removeChild(a);\n    });\n\n    unlistenWindowLeaveEvent();\n}\n\n/**\n * Get the file name for download.\n */\nfunction _getDownloadFileName() {\n\n    // The name of Primary Annotation.\n    let primaryAnnotationName;\n    $('#dropdownAnnoPrimary a').each((index, element) => {\n        let $elm = $(element);\n        if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n            primaryAnnotationName = $elm.find('.js-annoname').text();\n        }\n    });\n    if (primaryAnnotationName) {\n        return primaryAnnotationName;\n    }\n\n    // The name of PDF.\n    let pdfFileName = window.annoPage.getCurrentContentName();\n    return pdfFileName.split('.')[0] + '.anno';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/downloadButton.js\n **/","/**\n * Utility for window.\n */\n\n/**\n * Set the confirm dialog at leaving the page.\n */\nexport function listenWindowLeaveEvent() {\n    window.annotationUpdated = true;\n    $(window).off('beforeunload').on('beforeunload', () => {\n        return 'You don\\'t save the annotations yet.\\nAre you sure to leave ?';\n    });\n}\n\n/**\n * Unset the confirm dialog at leaving the page.\n */\nexport function unlistenWindowLeaveEvent() {\n    window.annotationUpdated = false;\n    $(window).off('beforeunload');\n}\n\n/**\n    Adjust the height of viewer according to window height.\n*/\nexport function adjustViewerSize() {\n    window.removeEventListener('resize', resizeHandler);\n    window.addEventListener('resize', resizeHandler);\n    resizeHandler();\n}\n\n/**\n * Resize the height of elements adjusting to the window.\n */\nexport function resizeHandler() {\n\n    // PDFViewer.\n    let height = $(window).innerHeight() - $('#viewer').offset().top;\n    $('#viewer iframe').css('height', `${height}px`);\n\n    // Dropdown for PDF.\n    let height1 = $(window).innerHeight() - ($('#dropdownPdf ul').offset().top || 120);\n    $('#dropdownPdf ul').css('max-height', `${height1 - 20}px`);\n\n    // Dropdown for Primary Annos.\n    let height2 = $(window).innerHeight() - ($('#dropdownAnnoPrimary ul').offset().top || 120);\n    $('#dropdownAnnoPrimary ul').css('max-height', `${height2 - 20}px`);\n\n    // Dropdown for Anno list.\n    let height3 = $(window).innerHeight() - ($('#dropdownAnnoList ul').offset().top || 120);\n    $('#dropdownAnnoList ul').css('max-height', `${height3 - 20}px`);\n\n    // Dropdown for Reference Annos.\n    let height4 = $(window).innerHeight() - ($('#dropdownAnnoReference ul').offset().top || 120);\n    $('#dropdownAnnoReference ul').css('max-height', `${height4 - 20}px`);\n\n    // Tools.\n    let height5 = $(window).innerHeight() - $('#tools').offset().top;\n    $('#tools').css('height', `${height5}px`);\n}\n\nexport function setupResizableColumns() {\n\n    // Make resizable.\n    $('#tools').resizable({\n      handles: 'e',\n      alsoResizeReverse: '#viewerWrapper',\n      start : () => {\n        console.log('resize start');\n        $('#viewer iframe').css({\n            'pointer-events' : 'none',\n        });\n\n      },\n      stop : () => {\n        console.log('resize stop');\n        $('#viewer iframe').css({\n            'pointer-events' : 'auto',\n        });\n\n      }\n    });\n\n    // Customize.\n    $.ui.plugin.add(\"resizable\", \"alsoResizeReverse\", {\n\n        start: function() {\n            var that = $(this).resizable( \"instance\" ),\n                o = that.options;\n\n            $(o.alsoResizeReverse).each(function() {\n                var el = $(this);\n                el.data(\"ui-resizable-alsoresizeReverse\", {\n                    width: parseInt(el.width(), 10), height: parseInt(el.height(), 10),\n                    left: parseInt(el.css(\"left\"), 10), top: parseInt(el.css(\"top\"), 10)\n                });\n            });\n        },\n\n        resize: function(event, ui) {\n            var that = $(this).resizable( \"instance\" ),\n                o = that.options,\n                os = that.originalSize,\n                op = that.originalPosition,\n                delta = {\n                    height: (that.size.height - os.height) || 0,\n                    width: (that.size.width - os.width) || 0,\n                    top: (that.position.top - op.top) || 0,\n                    left: (that.position.left - op.left) || 0\n                };\n\n            $(o.alsoResizeReverse).each(function() {\n                var el = $(this), start = $(this).data(\"ui-resizable-alsoresize-reverse\"), style = {},\n                    css = el.parents(ui.originalElement[0]).length ?\n                        [ \"width\", \"height\" ] :\n                        [ \"width\", \"height\", \"top\", \"left\" ];\n\n                $.each(css, function(i, prop) {\n                    var sum = (start[prop] || 0) - (delta[prop] || 0);\n                    if (sum && sum >= 0) {\n                        style[prop] = sum || null;\n                    }\n                });\n\n                el.css(style);\n            });\n        },\n\n        stop: function() {\n            $(this).removeData(\"resizable-alsoresize-reverse\");\n        }\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/util/window.js\n **/","/**\n * UI parts - Upload Button.\n */\n\n// TODO Refactoring.\n\nexport function setup() {\n    $('.js-btn-upload').off('click').on('click', () => {\n\n        const pdfFileName = $('#dropdownPdf .js-text').text();\n        if (!pdfFileName || pdfFileName === 'PDF File') {\n            return alert('Display a PDF before upload.');\n        }\n        const conentFile = window.annoPage.getContentFile(pdfFileName);\n\n        function arrayBufferToBase64( buffer ) {\n            var binary = '';\n            var bytes = new Uint8Array( buffer );\n            var len = bytes.byteLength;\n            for (var i = 0; i < len; i++) {\n                binary += String.fromCharCode( bytes[ i ] );\n            }\n            return window.btoa( binary );\n        }\n\n        const contentBase64 = arrayBufferToBase64(conentFile.content);\n\n\n        const $progressBar = $('.js-upload-progress');\n\n        const url = $('#serverURL').val();\n        if (!url) {\n            return alert('Set server URL.');\n        }\n\n        $('#uploadResult').val(\"Waiting for response...\");\n\n        $.ajax({\n            xhr: function(){\n               var xhr = new window.XMLHttpRequest();\n               //Upload progress\n               xhr.upload.addEventListener(\"progress\", function(evt){\n               if (evt.lengthComputable) {\n                 var percentComplete = evt.loaded / evt.total;\n                 //Do something with upload progress\n                 console.log('uploadProgress:', percentComplete);\n\n                 let percent = Math.floor(percentComplete * 100);\n                 $progressBar.find('.progress-bar').css('width', percent + '%').attr('aria-valuenow', percent).text(percent + '%');\n                 if (percent === 100) {\n                    setTimeout(() => {\n                        $progressBar.addClass('hidden');\n                    }, 2000);\n                 }\n                }\n               }, false);\n               //Download progress\n               xhr.addEventListener(\"progress\", function(evt){\n                 if (evt.lengthComputable) {\n                   var percentComplete = evt.loaded / evt.total;\n                   //Do something with download progress\n                   console.log('downloadProgress:', percentComplete);\n                 }\n               }, false);\n               return xhr;\n            },\n            url : url,\n            method : 'POST',\n            dataType : \"text\",\n            data : contentBase64\n            //dataType : 'json',\n            //data : { name : pdfFileName, content : contentBase64 }\n        }).then(result => {\n            console.log('result:', result);\n            setTimeout(() => {\n                // alert('Upload completed.');\n                var json = JSON.parse(result);\n                $('#uploadResult').val(json.text);\n                window.addAll(json.anno);\n            }, 500); // wait for progress bar animation.\n        });\n\n        // Show.\n        $progressBar.removeClass('hidden').find('.progress-bar').css('width', '0%').attr('aria-valuenow', 0).text('0%');\n\n        return false;\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/uploadButton.js\n **/","/**\n * UI parts - Annotations Tools.\n */\n\n/**\n    Set the behavior of the tool buttons for annotations.\n*/\nexport function setup() {\n\n    // TODO Restoreようだけど必要？\n    window.currentAnnoToolType = 'view';\n\n    // Rect annotation button.\n    $('.js-tool-btn-rect').off('click').on('click', (e) => {\n\n        let $btn = $(e.currentTarget);\n\n        // Make disable.\n        if ($btn.hasClass('active')) {\n            window.currentAnnoToolType = 'view';\n            $btn.removeClass('active').blur();\n            window.annoPage.disableRect();\n\n        // Make enable.\n        } else {\n            window.currentAnnoToolType = 'rect';\n            window.annoPage.enableRect();\n        }\n\n        return false;\n    });\n\n    // Span annotation button.\n    $('.js-tool-btn-span').off('click').on('click', e => {\n        $(e.currentTarget).blur();\n        window.annoPage.createSpan();\n    });\n\n    // Relation annotation button.\n    $('.js-tool-btn-rel').off('click').on('click', e => {\n        const $button = $(e.currentTarget);\n        const type = $button.data('type');\n        window.annoPage.createRelation(type);\n        $button.blur();\n    });\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/annotationTools.js\n **/","/**\n * UI parts - Input Label.\n */\n\n let $inputLabel;\n // TODO Remove?\n let $form;\n window.addEventListener('DOMContentLoaded', () => {\n    $inputLabel = $('#inputLabel');\n    $form = $('#autocompleteform');\n });\n\nlet _blurListener;\n\nlet currentUUID;\n\nexport function enable({ uuid, text, disable=false, autoFocus=false, blurListener=null }) {\n    console.log('enableInputLabel:', uuid, text);\n\n    currentUUID = uuid;\n\n    if (_blurListener) {\n        _blurListener();\n        _blurListener = null;\n        console.log('old _blurListener is called.');\n    }\n\n    $form\n        .off('submit')\n        .on('submit', cancelSubmit);\n\n    $inputLabel\n        .attr('disabled', 'disabled')\n        .val(text || '')\n        .off('blur')\n        .off('keyup');\n\n    if (disable === false) {\n        $inputLabel\n            .removeAttr('disabled')\n            .on('keyup', () => {\n                saveText(uuid);\n            });\n    }\n\n    if (autoFocus) {\n        $inputLabel.focus();\n    }\n\n    $inputLabel.on('blur', () => {\n\n        if (blurListener) {\n            blurListener();\n            _blurListener = blurListener;\n        }\n\n        saveText(uuid);\n\n        // Add an autocomplete candidate. (Firefox, Chrome)\n        $form.find('[type=\"submit\"]').click();\n    });\n\n};\n\nexport function disable() {\n    console.log('disableInputLabel');\n\n    currentUUID = null;\n\n    $inputLabel\n        .attr('disabled', 'disabled')\n        .val('');\n}\n\nfunction treatAnnotationDeleted({ uuid }) {\n    console.log('treatAnnotationDeleted:', uuid);\n\n    if (currentUUID === uuid) {\n        disable(...arguments);\n    }\n}\n\nfunction handleAnnotationHoverIn(annotation) {\n    if (getSelectedAnnotations().length === 0) {\n        enable({ uuid : annotation.uuid, text : annotation.text, disable : true });\n    }\n}\n\nfunction handleAnnotationHoverOut(annotation) {\n    if (getSelectedAnnotations().length === 0) {\n        disable();\n    }\n}\n\nfunction handleAnnotationSelected(annotation) {\n    if (getSelectedAnnotations().length === 1) {\n        enable({ uuid : annotation.uuid, text : annotation.text });\n    } else {\n        disable();\n    }\n}\n\nfunction handleAnnotationDeselected() {\n    const annos = getSelectedAnnotations();\n    if (annos.length === 1) {\n        enable({ uuid : annos[0].uuid, text : annos[0].text });\n    } else {\n        disable();\n    }\n}\n\nfunction getSelectedAnnotations() {\n    return window.annoPage.getSelectedAnnotations();\n}\n// TODO No need ?\nfunction cancelSubmit(e) {\n  e.preventDefault();\n  return false;\n}\n\nfunction saveText(uuid) {\n\n    const text = $inputLabel.val() || '';\n\n    const annotation = window.annoPage.findAnnotationById(uuid);\n    if (annotation) {\n        annotation.text = text;\n        annotation.save();\n        annotation.enableViewMode();\n    }\n\n}\n\n/**\n * Local storage key for datalist.\n */\nconst LSKEY_DATALIST = '_pdfanno_datalist';\n\nexport function setup() {\n\n    // set datalist.\n    setDatalist();\n\n    // set actions.\n    setupActions();\n\n    // Start to listen window events.\n    listenWindowEvents();\n}\n\nfunction setDatalist() {\n\n    // set datalist.\n    let datalist = JSON.parse(localStorage.getItem(LSKEY_DATALIST) || '[]');\n    const options = datalist.map(d => {\n        return `<option value=\"${d}\"></option>`;\n    });\n    $('#labels').html(options);\n}\n\nfunction setupActions() {\n    // Setup datalist modal.\n    $('#datalistModal').off().on('show.bs.modal', e => {\n\n        // datalist.\n        let datalist = JSON.parse(localStorage.getItem(LSKEY_DATALIST) || '[]');\n\n        // input for new.\n        datalist.push('');\n\n        const snipets = datalist.map(d => {\n            return `\n            <li class=\"list-group-item\">\n                <input class=\"form-control js-input\" value=\"${d}\">\n                <span class=\"glyphicon glyphicon-remove js-delete\"></span>\n            </li>\n            `;\n        });\n\n        $('#datalistModal .js-datalist').html(snipets.join(''));\n\n    });\n\n    $('#datalistModal').on('keyup', '.js-input', e => {\n\n        const $this = $(e.currentTarget);\n        const val = $this.val();\n        const isEnd = $this.parent().is(':last-child');\n\n        if (isEnd && val && val.length > 0) {\n            $('#datalistModal .js-datalist').append(`\n                <li class=\"list-group-item\">\n                    <input class=\"form-control js-input\" value=\"\">\n                    <span class=\"glyphicon glyphicon-remove js-delete\"></span>\n                </li>\n            `);\n        }\n    });\n\n    $('#datalistModal').on('click', '.js-delete', e => {\n        $(e.currentTarget).parent().remove();\n    });\n\n    $('#datalistModal .js-done').on('click', e => {\n\n        let datalist = [];\n        $('#datalistModal .js-datalist .js-input').each(function() {\n            const val = $(this).val();\n            if (val && val.length > 0) {\n                datalist.push(val);\n            }\n        });\n\n        localStorage.setItem(LSKEY_DATALIST, JSON.stringify(datalist));\n\n        setDatalist();\n\n        $('#datalistModal').modal('hide');\n    });\n}\n\n\nfunction listenWindowEvents() {\n\n    // enable text input.\n    window.addEventListener('enableTextInput', e => {\n        console.log('enableTextInput:', e.detail);\n        enable(e.detail);\n    });\n\n    // disable text input.\n    window.addEventListener('disappearTextInput', e => {\n        console.log('disappearTextInput:', e.detail);\n        disable(e.detail);\n    });\n\n    // handle annotation deleted.\n    window.addEventListener('annotationDeleted', e => {\n        treatAnnotationDeleted(e.detail);\n    });\n\n    // handle annotation hoverIn.\n    window.addEventListener('annotationHoverIn' , e => {\n        handleAnnotationHoverIn(e.detail);\n    });\n\n    // handle annotation hoverOut.\n    window.addEventListener('annotationHoverOut' , e => {\n        handleAnnotationHoverOut(e.detail);\n    });\n\n    // handle annotation selected.\n    window.addEventListener('annotationSelected' , e => {\n        handleAnnotationSelected(e.detail);\n    });\n\n    // handle annotation deselected.\n    window.addEventListener('annotationDeselected' , () => {\n        handleAnnotationDeselected();\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/inputLabel.js\n **/","import { convertFromExportY } from '../shared/coords';\nimport toml from 'toml';\n\n// TODO Refactoring.\n// TODO UI分離.\n\n/**\n * Add all annotations.\n *\n * This method expect to get argument made from a TOML file parsed by `window.readTOML`.\n */\nexport function addAllAnnotations(tomlObject) {\n\n    let result = {};\n\n    for (const key in tomlObject) {\n\n        let data = tomlObject[key];\n\n        if (typeof data !== 'object') {\n            continue;\n        }\n\n        data.id = key;\n\n        let a;\n        if (data.type === 'span') {\n            a = new PublicSpanAnnotation(data);\n        } else if (data.type === 'rect') {\n            a = new PublicRectAnnotation(data);\n        } else if (data.type === 'relation') {\n            a = new PublicRelationAnnotation(data);\n        } else {\n            console.log('Unknown: ', key, data);\n        }\n\n        if (a) {\n            addAnnotation(a);\n            result[key] = a;\n        }\n    }\n\n    return result;\n\n}\n\n/**\n * Add an annotation, and render it.\n */\nexport function addAnnotation(publicAnnotation) {\n\n    let a = publicAnnotation.annotation;\n    window.annoPage.addAnnotation(a);\n    a.render();\n    a.enableViewMode();\n    a.save();\n\n    // Restore the status of AnnoTools.\n    window.annoPage.disableAnnotateFunctions();\n    window.annoPage.enableAnnotateFunction(window.currentAnnoToolType);\n}\n\n/**\n * Delete an annotation, and also detach it from view.\n */\nexport function deleteAnnotation(publicAnnotation) {\n\n    publicAnnotation.annotation.destroy();\n}\n\n/**\n * Rect Annotation Class wrapping the core.\n */\nexport class PublicRectAnnotation {\n\n    /**\n     * Create a rect annotation from a TOML data.\n     */\n    constructor({ page, position, label='', id=0 }) {\n\n        // Check inputs.\n        if (!page || typeof page !== 'number') {\n            throw 'Set the page as number.';\n        }\n        if (!position || position.length !== 4) {\n            throw 'Set the position which includes `x`, `y`, `width` and `height`.';\n        }\n\n        // position: String -> Float.\n        position = position.map(p => parseFloat(p));\n\n        let rect = window.annoPage.createRectAnnotation({\n            uuid     : id && String(id), // annotationid must be string.\n            x        : position[0],\n            y        : convertFromExportY(page, position[1]),\n            width    : position[2],\n            height   : position[3],\n            text     : label,\n            color    : \"#FF0000\",  // TODO 固定で良い？\n            readOnly : false       // TODO 固定で良い？\n        });\n\n        this.annotation = rect;\n    }\n}\n\n/**\n * Rect Annotation Class wrapping the core.\n */\nexport class PublicSpanAnnotation {\n\n    constructor({ page, position, label='', text='', id=0 }) {\n\n        // Check inputs.\n        if (!page || typeof page !== 'number') {\n            throw 'Set the page as number.';\n        }\n        if (!position) {\n            throw 'Set the position.';\n        }\n\n        // position: String -> Float.\n        position = position.map(p => p.map(pp => parseFloat(pp)));\n\n        // Convert.\n        position = position.map(p => {\n            return {\n                page   : page,\n                x      : p[0],\n                y      : convertFromExportY(page, p[1]),\n                width  : p[2],\n                height : p[3]\n            }\n        });\n\n        let span = window.annoPage.createSpanAnnotation({\n            uuid         : id && String(id), // annotationid must be string.\n            rectangles   : position,\n            text         : label,\n            color        : '#FFFF00',  // TODO 固定で良い？\n            readOnly     : false,      // TODO 固定で良い？\n            selectedText : text\n        });\n\n        this.annotation = span;\n    }\n}\n\n/**\n * Rect Annotation Class wrapping the core.\n */\nexport class PublicRelationAnnotation {\n\n    constructor({ dir, ids, label='', id=0 }) {\n\n        // Check inputs.\n        if (!dir) {\n            throw 'Set the dir.';\n        }\n        if (!ids || ids.length !== 2) {\n            throw 'Set the ids.';\n        }\n\n        let r = window.annoPage.createRelationAnnotation({\n            uuid      : id && String(id), // annotationid must be string.\n            direction : dir,\n            rel1      : typeof ids[0] === 'object' ? ids[0].annotation : ids[0],\n            rel2      : typeof ids[1] === 'object' ? ids[1].annotation : ids[1],\n            text      : label,\n            color     : \"#FF0000\",\n            readOnly  : false\n        });\n\n        this.annotation = r;\n    }\n}\n\n/**\n * TOML parser.\n */\nexport const readTOML = toml.parse;\n\n/**\n * Delete all annotations.\n */\nexport function clear() {\n    window.annoPage.clearAllAnnotations();\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/public.js\n **/","import AbstractAnnoPage from '../AbstractAnnoPage';\nimport loadFiles from './loadFiles';\nimport { anyOf, dispatchWindowEvent } from '../../shared/util';\n\nimport {\n    listenWindowLeaveEvent,\n    unlistenWindowLeaveEvent,\n    adjustViewerSize,\n    resizeHandler,\n    setupResizableColumns\n} from '../util/window';\n\n/**\n * PDFAnno's Annotation functions for Page produced by .\n */\nexport default class PDFAnnoPage extends AbstractAnnoPage {\n\n    constructor() {\n        super(...arguments);\n        this.setup();\n    }\n\n    setup() {\n        this.listenWindowEvents();\n    }\n\n    listenWindowEvents() {\n        window.addEventListener('digit1Pressed' , () => {\n            this.createSpan();\n        });\n        window.addEventListener('digit2Pressed' , () => {\n            this.createRelation('one-way');\n        });\n        window.addEventListener('digit3Pressed' , () => {\n            this.createRelation('two-way');\n        });\n        window.addEventListener('digit4Pressed' , () => {\n            this.createRelation('link');\n        });\n    }\n\n    /**\n     * Start PDFAnno Application.\n     */\n    startViewerApplication() {\n\n        // TODO Refactoring: \"iframeWindow -> window event\" make as common.\n\n        // Alias for convenience.\n        window.iframeWindow = $('#viewer iframe').get(0).contentWindow;\n\n        iframeWindow.addEventListener('DOMContentLoaded', () => {\n\n            // Adjust the height of viewer.\n            adjustViewerSize();\n\n            // Reset the confirm dialog at leaving page.\n            unlistenWindowLeaveEvent();\n        });\n\n        iframeWindow.addEventListener('annotationrendered', () => {\n\n            // Restore the status of AnnoTools.\n            this.disableAnnotateFunctions();\n            this.enableAnnotateFunction(window.currentAnnoToolType);\n\n            dispatchWindowEvent('annotationrendered');\n        });\n\n        // Set the confirm dialog when leaving a page.\n        iframeWindow.addEventListener('annotationUpdated', () => {\n            listenWindowLeaveEvent();\n            dispatchWindowEvent('annotationUpdated');\n        });\n\n        // enable text input.\n        iframeWindow.addEventListener('enableTextInput', (e) => {\n            dispatchWindowEvent('enableTextInput', e.detail);\n        });\n\n        // disable text input.\n        iframeWindow.addEventListener('disappearTextInput', () => {\n            dispatchWindowEvent('disappearTextInput', e.detail);\n        });\n\n        iframeWindow.addEventListener('annotationDeleted', e => {\n            dispatchWindowEvent('annotationDeleted', e.detail);\n        });\n\n        iframeWindow.addEventListener('annotationHoverIn' , e => {\n            dispatchWindowEvent('annotationHoverIn', e.detail);\n        });\n\n        iframeWindow.addEventListener('annotationHoverOut' , e => {\n            dispatchWindowEvent('annotationHoverOut', e.detail);\n        });\n\n        iframeWindow.addEventListener('annotationSelected' , e => {\n            dispatchWindowEvent('annotationSelected', e.detail);\n        });\n\n        iframeWindow.addEventListener('annotationDeselected' , () => {\n            dispatchWindowEvent('annotationDeselected');\n        });\n\n        iframeWindow.addEventListener('digit1Pressed' , () => {\n            dispatchWindowEvent('digit1Pressed');\n        });\n\n        iframeWindow.addEventListener('digit2Pressed' , () => {\n            dispatchWindowEvent('digit2Pressed');\n        });\n\n        iframeWindow.addEventListener('digit3Pressed' , () => {\n            dispatchWindowEvent('digit3Pressed');\n        });\n\n        iframeWindow.addEventListener('digit4Pressed' , () => {\n            dispatchWindowEvent('digit4Pressed');\n        });\n    }\n\n    /**\n     * Load files(contents and annoFiles).\n     *\n     * @param {Array<File>} files - files user selected in a file dialog.\n     * @return {Promise}\n     */\n    loadFiles(files) {\n        return loadFiles(files).then(result => {\n            this.contentFiles = result.contents.map(c => {\n                return Object.assign(c, {\n                    selected : false\n                });\n            });\n            this.annoFiles = result.annos.map(a => {\n                return Object.assign(a, {\n                    primary   : false,\n                    reference : false\n                });\n            });\n        });\n    }\n\n    getContentFile(name) {\n        const items = this.contentFiles.filter(c => c.name === name);\n        if (items.length > 0) {\n            return items[0];\n        }\n        return null;\n    }\n\n    getAnnoFile(name) {\n        const items = this.annoFiles.filter(c => c.name === name);\n        if (items.length > 0) {\n            return items[0];\n        }\n        return null;\n    }\n\n    displayContent(contentName) {\n\n        let contentFile = this.contentFiles.filter(c => c.name === contentName);\n        if (contentFile.length === 0) {\n            console.log('displayContent: NOT FOUND FILE. file=', contentName);\n            return;\n        }\n\n        displayViewer(contentFile[0]);\n    }\n\n\n    displayViewer(contentFile) {\n\n        // Reset settings.\n        this.resetPDFViewerSettings();\n\n        // Load PDF.\n        const uint8Array = new Uint8Array(contentFile.content);\n        iframeWindow.PDFViewerApplication.open(uint8Array);\n\n        // if (contentFile) {\n        //     window.pdf = window.atob(contentFile.content);\n        //     window.pdfName = contentFile.name;\n        // } else {\n        //     window.pdf = null;\n        //     window.pdfName = null;\n        // }\n\n        // // Reset setting.\n\n\n        // // Reload pdf.js.\n        // $('#viewer iframe').remove();\n        // $('#viewer').html('<iframe src=\"./pages/viewer.html?file=../pdfs/P12-1046.pdf\" class=\"anno-viewer\" frameborder=\"0\"></iframe>');\n\n        // // Restart.\n        // var event = document.createEvent('CustomEvent');\n        // event.initCustomEvent('restartApp', true, true, null);\n        // window.dispatchEvent(event);\n\n    }\n\n    initializeViewer() {\n\n        window.pdf = null;\n        window.pdfName = null;\n\n        // Reset setting.\n        this.resetPDFViewerSettings();\n\n        // Reload pdf.js.\n        $('#viewer iframe').remove();\n        $('#viewer').html('<iframe src=\"./pages/viewer.html?file=../pdfs/P12-1046.pdf\" class=\"anno-viewer\" frameborder=\"0\"></iframe>');\n\n        // Restart.\n        var event = document.createEvent('CustomEvent');\n        event.initCustomEvent('restartApp', true, true, null);\n        window.dispatchEvent(event);\n    }\n\n    /**\n     * Reset the setting of PDFViewer.\n     */\n    resetPDFViewerSettings() {\n        localStorage.removeItem('database');\n    }\n\n    /**\n     * Create a Span annotation.\n     */\n    createSpan() {\n\n        const rects = window.iframeWindow.PDFAnnoCore.UI.getRectangles();\n\n        // Check empty.\n        if (!rects) {\n            return alert('Please select a text span first.');\n        }\n\n        // Check duplicated.\n        let annos = window.iframeWindow.annotationContainer\n                        .getAllAnnotations()\n                        .filter(a => a.type === 'span')\n                        .filter(a => {\n                            if (rects.length !== a.rectangles.length) {\n                                return false;\n                            }\n                            for (let i = 0; i < rects.length; i++) {\n                                if (rects[i].x !== a.rectangles[i].x\n                                    || rects[i].y !== a.rectangles[i].y\n                                    || rects[i].width !== a.rectangles[i].width\n                                    || rects[i].height !== a.rectangles[i].height) {\n                                    return false;\n                                }\n                            }\n                            return true;\n                        });\n\n        if (annos.length > 0) {\n            // Show label input.\n            var event = document.createEvent('CustomEvent');\n            event.initCustomEvent('enableTextInput', true, true, {\n                uuid : annos[0].uuid,\n                text : annos[0].text\n            });\n            window.dispatchEvent(event);\n            return;\n        }\n\n        // Create a new rectAnnotation.\n        window.iframeWindow.PDFAnnoCore.UI.createSpan();\n    }\n\n\n    /**\n     * Create a Relation annotation.\n     */\n    createRelation(type) {\n\n        let selectedAnnotations = window.iframeWindow.annotationContainer.getSelectedAnnotations();\n        selectedAnnotations = selectedAnnotations.filter(a => {\n            return a.type === 'area' || a.type === 'span';\n        }).sort((a1, a2) => {\n            return (a1.selectedTime - a2.selectedTime); // asc\n        });\n\n        if (selectedAnnotations.length < 2) {\n            return alert('Please select two annotations first.');\n        }\n\n        const first  = selectedAnnotations[selectedAnnotations.length - 2];\n        const second = selectedAnnotations[selectedAnnotations.length - 1];\n        console.log('first:second,', first, second);\n\n        // Check duplicated.\n        const arrows = window.iframeWindow.annotationContainer\n                        .getAllAnnotations()\n                        .filter(a => a.type === 'relation')\n                        .filter(a => {\n                            return anyOf(a.rel1Annotation.uuid, [first.uuid, second.uuid])\n                                    && anyOf(a.rel2Annotation.uuid, [first.uuid, second.uuid])\n                        });\n\n        if (arrows.length > 0) {\n            console.log('same found!!!');\n            // Update!!\n            arrows[0].direction = type;\n            arrows[0].rel1Annotation = first;\n            arrows[0].rel2Annotation = second;\n            arrows[0].save();\n            arrows[0].render();\n            arrows[0].enableViewMode();\n            // Show label input.\n            var event = document.createEvent('CustomEvent');\n            event.initCustomEvent('enableTextInput', true, true, {\n                uuid : arrows[0].uuid,\n                text : arrows[0].text\n            });\n            window.dispatchEvent(event);\n            return;\n        }\n\n        window.iframeWindow.PDFAnnoCore.UI.createRelation(type, first, second);\n    }\n\n    /**\n        Disable annotation tool buttons.\n    */\n    disableRect() {\n        window.iframeWindow.PDFAnnoCore.UI.disableRect();\n        // TODO 以下のは必要？\n        window.iframeWindow.PDFAnnoCore.UI.disableViewMode();\n    }\n\n    /**\n     * Enable an annotation tool.\n     */\n    enableRect() {\n        window.iframeWindow.PDFAnnoCore.UI.enableRect();\n    }\n\n    /**\n        Disable annotation tool buttons.\n    */\n    disableAnnotateFunctions() {\n        window.iframeWindow.PDFAnnoCore.UI.disableRect();\n        window.iframeWindow.PDFAnnoCore.UI.disableViewMode();\n    }\n\n    /**\n     * Enable an annotation tool.\n     */\n    enableAnnotateFunction(type) {\n        if (type === 'rect') {\n            window.iframeWindow.PDFAnnoCore.UI.enableRect();\n        }\n    }\n\n    /**\n     * Get all annotations.\n     */\n    getAllAnnotations() {\n        return iframeWindow.annotationContainer.getAllAnnotations();\n    }\n\n    /**\n     * Get selected annotations.\n     */\n    getSelectedAnnotations() {\n        return iframeWindow.annotationContainer.getSelectedAnnotations();\n    }\n\n    /**\n     * Find an annotation by id.\n     */\n    findAnnotationById(id) {\n        return iframeWindow.annotationContainer.findById(id);\n    }\n\n    /**\n     * Clear the all annotations from the view and storage.\n     */\n    clearAllAnnotations() {\n        if (window.iframeWindow) {\n            window.iframeWindow.annotationContainer.getAllAnnotations().forEach(a => a.destroy());\n        }\n        localStorage.removeItem('_pdfanno_containers');\n        localStorage.removeItem('_pdfanno_primary_annoname');\n    }\n\n    /**\n     * Add an annotation to the container.\n     */\n    addAnnotation(annotation) {\n        window.iframeWindow.annotationContainer.add(annotation);\n    }\n\n    /**\n     * Create a new rect annotation.\n     */\n    createRectAnnotation(options) {\n        return iframeWindow.PDFAnnoCore.RectAnnotation.newInstance(options);\n    }\n\n    /**\n     * Create a new span annotation.\n     */\n    createSpanAnnotation(options) {\n        return iframeWindow.PDFAnnoCore.SpanAnnotation.newInstance(options);\n    }\n\n    /**\n     * Create a new relation annotation.\n     */\n    createRelationAnnotation(options) {\n        return iframeWindow.PDFAnnoCore.RelationAnnotation.newInstance(options);\n    }\n\n    /**\n     * Get the export data of annotations.\n     *\n     * @return {Promise}\n     */\n    exportData() {\n        return window.iframeWindow.PDFAnnoCore.getStoreAdapter().exportData();\n    }\n\n    /**\n     * Get the viewport of the viewer.\n     */\n    getViewerViewport() {\n        return iframeWindow.PDFView.pdfViewer.getPageView(0).viewport;\n    }\n\n    /**\n     * Get the content's name displayed now.\n     */\n    getCurrentContentName() {\n        return iframeWindow.getFileName(iframeWindow.PDFView.url);\n    }\n\n    /**\n     * Manage the ctrl button is enable/disable.\n     */\n    manageCtrlKey(type) {\n\n        if (type === 'on') {\n            window.iframeWindow.ctrlPressed = true;\n\n        } else if (type === 'off') {\n            window.iframeWindow.ctrlPressed = false;\n        }\n    }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/pdf/PDFAnnoPage.js\n **/","/**\n * Annotation functions for Page.\n */\nexport default class AbstractAnnoPage {\n\n    constructor() {\n\n        // Auto-binding.\n        this.autoBind();\n\n        // PDFs or HTMLs.\n        this.contentFiles = [];\n\n        // AnnoFiles,\n        this.annoFiles = [];\n\n    }\n\n    /**\n     * Bind the `this` scope of instance methods to `this`.\n     */\n    autoBind() {\n      Object.getOwnPropertyNames(this.constructor.prototype)\n        .filter(prop => typeof this[prop] === 'function')\n        .forEach(method => {\n          this[method] = this[method].bind(this);\n        });\n    }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/AbstractAnnoPage.js\n **/","/**\n *  Functions depending on pdfanno-core.js.\n */\nimport { reloadPDFViewer, setupColorPicker, displayAnnotation } from '../util/display';\n\n/**\n * Load PDFs and Annos via Browse button.\n */\nexport default function loadFiles(files) {\n\n    let { pdfNames, annoNames } = getContents(files);\n\n    return new Promise((resolve, reject) => {\n\n        let promises = [];\n\n        // Load pdfs.\n        let p = pdfNames.map(file => {\n            return new Promise((resolve, reject) => {\n\n                // Old.\n                // let fileReader = new FileReader();\n                // fileReader.onload = event => {\n                //     let pdf = event.target.result;\n                //     let fileName = _excludeBaseDirName(file.webkitRelativePath);\n\n                //     resolve({\n                //         type    : 'content',\n                //         name    : fileName,\n                //         content : pdf\n                //     });\n                // }\n                // fileReader.readAsDataURL(file);\n\n                // for test.\n                let fileReader2 = new FileReader();\n                fileReader2.onload = event => {\n\n                    let buffer = event.target.result;\n                    let fileName = _excludeBaseDirName(file.webkitRelativePath);\n\n                    resolve({\n                        type    : 'content',\n                        name    : fileName,\n                        content : buffer\n                    });\n\n                    // window.test = { buffer, fileName };\n                }\n                fileReader2.readAsArrayBuffer(file);\n            });\n        });\n        promises = promises.concat(p);\n\n        // Load annos.\n        p = annoNames.map(file => {\n            return new Promise((resolve, reject) => {\n                let fileReader = new FileReader();\n                fileReader.onload = event => {\n                    let anno = event.target.result;\n                    let fileName = _excludeBaseDirName(file.webkitRelativePath);\n\n                    resolve({\n                        type    : 'anno',\n                        name    : fileName,\n                        content : anno\n                    });\n                }\n                fileReader.readAsText(file);\n            });\n        });\n        promises = promises.concat(p);\n\n        // Wait for complete.\n        Promise.all(promises).then(results => {\n\n            const contents = results.filter(r => r.type === 'content');\n            const annos = results.filter(r => r.type === 'anno');\n\n            resolve({ contents, annos });\n        });\n\n    });\n}\n\n/**\n * Extract PDFs and annotations from files the user specified.\n */\nfunction getContents(files) {\n    let pdfNames = [];\n    let annoNames = [];\n\n    for (let i = 0; i < files.length; i++) {\n\n        let file = files[i];\n        let relativePath = file.webkitRelativePath;\n\n        let frgms = relativePath.split('/');\n        if (frgms.length > 2) {\n            console.log('SKIP:', relativePath);\n            continue;\n        }\n        console.log('relativePath:', relativePath);\n\n        // Get files only PDFs or Anno files.\n        if (relativePath.match(/\\.pdf$/i)) {\n            pdfNames.push(file);\n        } else if (relativePath.match(/\\.anno$/i)) {\n            annoNames.push(file);\n        }\n    }\n\n    return {\n        pdfNames,\n        annoNames\n    };\n}\n\n/**\n * Get a filename from a path.\n */\nfunction _excludeBaseDirName(filePath) {\n    let frgms = filePath.split('/');\n    return frgms[frgms.length - 1];\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/pdf/loadFiles.js\n **/","module.exports = __webpack_public_path__ + \"dist/index.html\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/file-loader?name=dist/index.html!./src/index.html\n ** module id = 65\n ** module chunks = 1\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader!./~/css-loader!./src/pdfanno.css\n ** module id = 66\n ** module chunks = 1\n **/","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"@charset 'utf-8';\\n\\n/* Super Hack to disable autofill style for Chrome. */\\ninput:-webkit-autofill,\\ninput:-webkit-autofill:hover,\\ninput:-webkit-autofill:focus,\\ninput:-webkit-autofill:active {\\n    transition: background-color 5000s ease-in-out 0s;\\n}\\n\\n.u-mt-10 {margin-top: 10px;}\\n.u-mt-20 {margin-top: 20px;}\\n.u-mb-10 {margin-bottom: 10px;}\\n.u-ml-15 {margin-left: 15px;}\\n.u-disp-iblock {display: inline-block;}\\n.no-visible {visibility: hidden;}\\n\\n/**\\n * Viewer size.\\n * This height will be override to fit the browser height (by app.js).\\n */\\n.anno-viewer {\\n    width: 100%;\\n    height: 500px;\\n}\\n\\n/**\\n * Annotation Select UI Layout.\\n */\\n.anno-select-layout {}\\n.anno-select-layout .row:first-child {\\n    margin-bottom: 10px;\\n}\\n.anno-select-layout [type=\\\"radio\\\"] {\\n    margin-right: 5px;\\n}\\n.anno-select-layout [type=\\\"file\\\"] {\\n    display: inline-block;\\n    margin-left: 5px;\\n    line-height: 1em;\\n}\\n.anno-select-layout .sp-replacer {\\n    padding: 0;\\n    border: none;\\n}\\n.anno-select-layout .sp-dd {\\n    display: none;\\n}\\n\\n/**\\n * Dropdown.\\n */\\n.dropdown-menu {\\n    overflow: scroll;\\n}\\n\\n/**\\n * Color picker.\\n */\\n.anno-ui .sp-replacer {\\n    padding: 0;\\n    border: none;\\n}\\n.anno-ui .sp-dd {\\n    display: none;\\n}\\n.anno-ui .sp-preview {\\n    margin-right: 0;\\n}\\n\\n/**\\n * Modal dialog for Datalist.\\n */\\n.modal-datalist {}\\n.modal-datalist .list-group-item {\\n    position: relative;\\n    padding-right: 38px;\\n}\\n.modal-datalist .form-control {}\\n.modal-datalist .glyphicon-remove {\\n    position: absolute;\\n    top: 50%;\\n    right: 12px;\\n    margin-top: -7px;\\n}\\n.modal-datalist .list-group-item:last-child .glyphicon-remove {\\n    display: none;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./src/pdfanno.css\n ** module id = 67\n ** module chunks = 1\n **/"],"sourceRoot":""}