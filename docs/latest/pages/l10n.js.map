{"version":3,"sources":["pages/l10n.js"],"names":["document","webL10n","window","undefined","gL10nData","gTextData","gTextProp","gLanguage","gMacros","gReadyState","gAsyncResourceLoading","fireL10nReadyEvent","lang","evtObject","createEvent","initEvent","language","dispatchEvent","xhrLoadText","url","onSuccess","onFailure","data","console","warn","xhr","XMLHttpRequest","open","overrideMimeType","onreadystatechange","readyState","status","responseText","onerror","ontimeout","send","e","parseResource","href","successCallback","failureCallback","baseURL","replace","response","text","parsedPropertiesCallback","dictionary","reBlank","reComment","reSection","reImport","reSplit","parseRawLines","rawText","extendedSyntax","parsedRawLinesCallback","entries","split","currentLang","genericLang","skipLang","match","nextEntry","length","line","shift","test","exec","toLowerCase","loadImport","tmp","lastIndexOf","callback","content","parseProperties","key","id","prop","index","substring","substr","loadLocale","script","langLinks","querySelectorAll","langCount","dict","querySelector","JSON","parse","innerHTML","locales","default_locale","log","defaultLocale","anyCaseLang","onResourceLoaded","gResourceCount","L10nResourceLink","link","this","load","i","getL10nData","args","fallback","rv","str","substArguments","substIndexes","reMatch","param","macroName","paramName","macro","matched_text","arg","translateElement","element","l10n","l10nId","getAttribute","l10nArgs","getL10nAttributes","children","childElementCount","count","childNodes","nodeType","getChildElementCount","found","l","nodeValue","textNode","createTextNode","insertBefore","firstChild","k","translateFragment","getTranslatableChildren","documentElement","elementCount","plural","n","parseFloat","isNaN","_pluralRules","isIn","list","indexOf","isBetween","start","end","pluralRules","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","af","ak","am","ar","asa","az","be","bem","bez","bg","bh","bm","bn","bo","br","brx","bs","ca","cgg","chr","cs","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fil","fo","fr","fur","fy","ga","gd","gl","gsw","gu","guw","gv","ha","haw","he","hi","hr","hu","ig","ii","is","it","iu","ja","jmc","jv","ka","kab","kaj","kcg","kde","kea","kk","kl","km","kn","ko","ksb","ksh","ku","kw","lag","lb","lg","ln","lo","lt","lv","mas","mg","mk","ml","mn","mo","mr","ms","mt","my","nah","naq","nb","nd","ne","nl","nn","no","nr","nso","ny","nyn","om","or","pa","pap","pl","ps","pt","rm","ro","rof","ru","rwk","sah","saq","se","seh","ses","sg","sh","shi","sk","sl","sma","smi","smj","smn","sms","sn","so","sq","sr","ss","ssy","st","sv","sw","syr","ta","te","teo","th","ti","tig","tk","tl","tn","to","tr","ts","tzm","uk","ur","ve","vi","vun","wa","wae","wo","xh","xog","yo","zh","zu","getPluralRules","get","fallbackString","getData","getText","getLanguage","setLanguage","getDirection","shortCode","translate","getReadyState","ready","setTimeout","addEventListener","once","removeEventListener"],"mappings":"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AM,EACNC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,GAAM,GACNC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,IAAO,EACPC,GAAM,GACNC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,GAAM,GACNC,GAAM,EACN5J,GAAM,EACN6J,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,IAAO,EACPC,IAAO,EACPC,IAAO,EACPC,IAAO,EACPC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,IAAO,EACPC,IAAO,GACPC,GAAM,EACNC,GAAM,EACNC,IAAO,GACPC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,GACNC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,GAAM,GACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,GACNC,GAAM,EACNC,IAAO,EACPC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,IAAO,EACPC,GAAM,GACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,IAAO,EACPC,GAAM,GACNC,IAAO,EACPC,IAAO,EACPC,IAAO,EACPC,GAAM,EACNC,IAAO,EACPC,IAAO,EACPC,GAAM,EACNC,GAAM,GACNC,IAAO,GACPC,GAAM,GACNC,GAAM,GACNC,IAAO,EACPC,IAAO,EACPC,IAAO,EACPC,IAAO,EACPC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,GACNC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,IAAO,GACPC,GAAM,GACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,IAAO,EACPC,GAAM,EACNC,GAAM,EACNC,GAAM,GAwNkB/U,EAAK8B,QAAQ,OAAQ,KAC/C,OAAMoC,KAAS2E,EAIRA,EAAY3E,IAHjBvD,QAAQC,KAAK,4BAA8BZ,EAAO,KAC3C,WAAa,MAAO,UAiBJgV,CAAerV,IAExC,IAAIuE,EAAQ,IAAMtE,EAAQ0I,aAAaH,GAAK,IAe5C,OAZU,IAANA,GAAYpE,EAAM,WAAavE,EACjCuG,EAAMvG,EAAUuE,EAAM,UAAUE,GAClB,GAALkE,GAAWpE,EAAM,UAAYvE,EACtCuG,EAAMvG,EAAUuE,EAAM,SAASE,GACjB,GAALkE,GAAWpE,EAAM,UAAYvE,EACtCuG,EAAMvG,EAAUuE,EAAM,SAASE,GACrBF,EAAMG,KAAU1E,EAC1BuG,EAAMvG,EAAUuE,EAAMG,GAAOD,GACnBF,EAAM,YAAcvE,IAC9BuG,EAAMvG,EAAUuE,EAAM,WAAWE,IAG5B8B,IA0JPkP,IAAK,SAASlR,EAAK6B,EAAMsP,GACvB,IAMIrP,EANA3B,EAAQH,EAAIJ,YAAY,KACxBM,EAAOvE,EACPwE,EAAQ,IACVD,EAAOF,EAAIK,OAAOF,EAAQ,GAC1BH,EAAMA,EAAII,UAAU,EAAGD,IAGrBgR,KACFrP,MACS5B,GAAQiR,GAEnB,IAAIxU,EAAOiF,EAAY5B,EAAK6B,EAAMC,GAClC,OAAInF,GAAQuD,KAAQvD,EACXA,EAAKuD,GAEP,KAAOF,EAAM,MAItBoR,QAAS,WAAa,OAAO3V,GAC7B4V,QAAS,WAAa,OAAO3V,GAG7B4V,YAAa,WAAa,OAAO1V,GACjC2V,YAAa,SAAStV,EAAM4D,GAC1BS,EAAWrE,EAAM,WACX4D,GACFA,IACFkE,OAKJyN,aAAc,WAGZ,IACIC,EAAY7V,EAAUkD,MAAM,IAAK,GAAG,GACxC,OAFe,KAAM,KAAM,KAAM,KAAM,MAEvB4F,QAAQ+M,IAAc,EAAK,MAAQ,OAIrDC,UAAW3N,EAGX4N,cAAe,WAAa,OAAO7V,GACnC8V,MAAO,SAAS/R,GACTA,IAEqB,YAAf/D,GAA4C,eAAfA,EACtCP,EAAOsW,WAAW,WAChBhS,MAEOxE,EAASyW,kBAClBzW,EAASyW,iBAAiB,YAAa,SAASC,IAC9C1W,EAAS2W,oBAAoB,YAAaD,GAC1ClS,SAn+BS,CAw+BftE,OAAQF","file":"l10n.js","sourcesContent":["/**\n * Copyright (c) 2011-2013 Fabien Cazenave, Mozilla.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n/*\n  Additional modifications for PDF.js project:\n    - Disables language initialization on page loading;\n    - Removes consoleWarn and consoleLog and use console.log/warn directly.\n    - Removes window._ assignment.\n    - Remove compatibility code for OldIE.\n*/\n\n/*jshint browser: true, devel: true, es5: true, globalstrict: true */\n'use strict';\n\ndocument.webL10n = (function(window, document, undefined) {\n  var gL10nData = {};\n  var gTextData = '';\n  var gTextProp = 'textContent';\n  var gLanguage = '';\n  var gMacros = {};\n  var gReadyState = 'loading';\n\n\n  /**\n   * Synchronously loading l10n resources significantly minimizes flickering\n   * from displaying the app with non-localized strings and then updating the\n   * strings. Although this will block all script execution on this page, we\n   * expect that the l10n resources are available locally on flash-storage.\n   *\n   * As synchronous XHR is generally considered as a bad idea, we're still\n   * loading l10n resources asynchronously -- but we keep this in a setting,\n   * just in case... and applications using this library should hide their\n   * content until the `localized' event happens.\n   */\n\n  var gAsyncResourceLoading = true; // read-only\n\n\n  /**\n   * DOM helpers for the so-called \"HTML API\".\n   *\n   * These functions are written for modern browsers. For old versions of IE,\n   * they're overridden in the 'startup' section at the end of this file.\n   */\n\n  function getL10nResourceLinks() {\n    return document.querySelectorAll('link[type=\"application/l10n\"]');\n  }\n\n  function getL10nDictionary() {\n    var script = document.querySelector('script[type=\"application/l10n\"]');\n    // TODO: support multiple and external JSON dictionaries\n    return script ? JSON.parse(script.innerHTML) : null;\n  }\n\n  function getTranslatableChildren(element) {\n    return element ? element.querySelectorAll('*[data-l10n-id]') : [];\n  }\n\n  function getL10nAttributes(element) {\n    if (!element)\n      return {};\n\n    var l10nId = element.getAttribute('data-l10n-id');\n    var l10nArgs = element.getAttribute('data-l10n-args');\n    var args = {};\n    if (l10nArgs) {\n      try {\n        args = JSON.parse(l10nArgs);\n      } catch (e) {\n        console.warn('could not parse arguments for #' + l10nId);\n      }\n    }\n    return { id: l10nId, args: args };\n  }\n\n  function fireL10nReadyEvent(lang) {\n    var evtObject = document.createEvent('Event');\n    evtObject.initEvent('localized', true, false);\n    evtObject.language = lang;\n    document.dispatchEvent(evtObject);\n  }\n\n  function xhrLoadText(url, onSuccess, onFailure) {\n    onSuccess = onSuccess || function _onSuccess(data) {};\n    onFailure = onFailure || function _onFailure() {\n      console.warn(url + ' not found.');\n    };\n\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, gAsyncResourceLoading);\n    if (xhr.overrideMimeType) {\n      xhr.overrideMimeType('text/plain; charset=utf-8');\n    }\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState == 4) {\n        if (xhr.status == 200 || xhr.status === 0) {\n          onSuccess(xhr.responseText);\n        } else {\n          onFailure();\n        }\n      }\n    };\n    xhr.onerror = onFailure;\n    xhr.ontimeout = onFailure;\n\n    // in Firefox OS with the app:// protocol, trying to XHR a non-existing\n    // URL will raise an exception here -- hence this ugly try...catch.\n    try {\n      xhr.send(null);\n    } catch (e) {\n      onFailure();\n    }\n  }\n\n\n  /**\n   * l10n resource parser:\n   *  - reads (async XHR) the l10n resource matching `lang';\n   *  - imports linked resources (synchronously) when specified;\n   *  - parses the text data (fills `gL10nData' and `gTextData');\n   *  - triggers success/failure callbacks when done.\n   *\n   * @param {string} href\n   *    URL of the l10n resource to parse.\n   *\n   * @param {string} lang\n   *    locale (language) to parse. Must be a lowercase string.\n   *\n   * @param {Function} successCallback\n   *    triggered when the l10n resource has been successully parsed.\n   *\n   * @param {Function} failureCallback\n   *    triggered when the an error has occured.\n   *\n   * @return {void}\n   *    uses the following global variables: gL10nData, gTextData, gTextProp.\n   */\n\n  function parseResource(href, lang, successCallback, failureCallback) {\n    var baseURL = href.replace(/[^\\/]*$/, '') || './';\n\n    // handle escaped characters (backslashes) in a string\n    function evalString(text) {\n      if (text.lastIndexOf('\\\\') < 0)\n        return text;\n      return text.replace(/\\\\\\\\/g, '\\\\')\n                 .replace(/\\\\n/g, '\\n')\n                 .replace(/\\\\r/g, '\\r')\n                 .replace(/\\\\t/g, '\\t')\n                 .replace(/\\\\b/g, '\\b')\n                 .replace(/\\\\f/g, '\\f')\n                 .replace(/\\\\{/g, '{')\n                 .replace(/\\\\}/g, '}')\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/\\\\'/g, \"'\");\n    }\n\n    // parse *.properties text data into an l10n dictionary\n    // If gAsyncResourceLoading is false, then the callback will be called\n    // synchronously. Otherwise it is called asynchronously.\n    function parseProperties(text, parsedPropertiesCallback) {\n      var dictionary = {};\n\n      // token expressions\n      var reBlank = /^\\s*|\\s*$/;\n      var reComment = /^\\s*#|^\\s*$/;\n      var reSection = /^\\s*\\[(.*)\\]\\s*$/;\n      var reImport = /^\\s*@import\\s+url\\((.*)\\)\\s*$/i;\n      var reSplit = /^([^=\\s]*)\\s*=\\s*(.+)$/; // TODO: escape EOLs with '\\'\n\n      // parse the *.properties file into an associative array\n      function parseRawLines(rawText, extendedSyntax, parsedRawLinesCallback) {\n        var entries = rawText.replace(reBlank, '').split(/[\\r\\n]+/);\n        var currentLang = '*';\n        var genericLang = lang.split('-', 1)[0];\n        var skipLang = false;\n        var match = '';\n\n        function nextEntry() {\n          // Use infinite loop instead of recursion to avoid reaching the\n          // maximum recursion limit for content with many lines.\n          while (true) {\n            if (!entries.length) {\n              parsedRawLinesCallback();\n              return;\n            }\n            var line = entries.shift();\n\n            // comment or blank line?\n            if (reComment.test(line))\n              continue;\n\n            // the extended syntax supports [lang] sections and @import rules\n            if (extendedSyntax) {\n              match = reSection.exec(line);\n              if (match) { // section start?\n                // RFC 4646, section 4.4, \"All comparisons MUST be performed\n                // in a case-insensitive manner.\"\n\n                currentLang = match[1].toLowerCase();\n                skipLang = (currentLang !== '*') &&\n                    (currentLang !== lang) && (currentLang !== genericLang);\n                continue;\n              } else if (skipLang) {\n                continue;\n              }\n              match = reImport.exec(line);\n              if (match) { // @import rule?\n                loadImport(baseURL + match[1], nextEntry);\n                return;\n              }\n            }\n\n            // key-value pair\n            var tmp = line.match(reSplit);\n            if (tmp && tmp.length == 3) {\n              dictionary[tmp[1]] = evalString(tmp[2]);\n            }\n          }\n        }\n        nextEntry();\n      }\n\n      // import another *.properties file\n      function loadImport(url, callback) {\n        xhrLoadText(url, function(content) {\n          parseRawLines(content, false, callback); // don't allow recursive imports\n        }, null);\n      }\n\n      // fill the dictionary\n      parseRawLines(text, true, function() {\n        parsedPropertiesCallback(dictionary);\n      });\n    }\n\n    // load and parse l10n data (warning: global variables are used here)\n    xhrLoadText(href, function(response) {\n      gTextData += response; // mostly for debug\n\n      // parse *.properties text data into an l10n dictionary\n      parseProperties(response, function(data) {\n\n        // find attribute descriptions, if any\n        for (var key in data) {\n          var id, prop, index = key.lastIndexOf('.');\n          if (index > 0) { // an attribute has been specified\n            id = key.substring(0, index);\n            prop = key.substr(index + 1);\n          } else { // no attribute: assuming text content by default\n            id = key;\n            prop = gTextProp;\n          }\n          if (!gL10nData[id]) {\n            gL10nData[id] = {};\n          }\n          gL10nData[id][prop] = data[key];\n        }\n\n        // trigger callback\n        if (successCallback) {\n          successCallback();\n        }\n      });\n    }, failureCallback);\n  }\n\n  // load and parse all resources for the specified locale\n  function loadLocale(lang, callback) {\n    // RFC 4646, section 2.1 states that language tags have to be treated as\n    // case-insensitive. Convert to lowercase for case-insensitive comparisons.\n    if (lang) {\n      lang = lang.toLowerCase();\n    }\n\n    callback = callback || function _callback() {};\n\n    clear();\n    gLanguage = lang;\n\n    // check all <link type=\"application/l10n\" href=\"...\" /> nodes\n    // and load the resource files\n    var langLinks = getL10nResourceLinks();\n    var langCount = langLinks.length;\n    if (langCount === 0) {\n      // we might have a pre-compiled dictionary instead\n      var dict = getL10nDictionary();\n      if (dict && dict.locales && dict.default_locale) {\n        console.log('using the embedded JSON directory, early way out');\n        gL10nData = dict.locales[lang];\n        if (!gL10nData) {\n          var defaultLocale = dict.default_locale.toLowerCase();\n          for (var anyCaseLang in dict.locales) {\n            anyCaseLang = anyCaseLang.toLowerCase();\n            if (anyCaseLang === lang) {\n              gL10nData = dict.locales[lang];\n              break;\n            } else if (anyCaseLang === defaultLocale) {\n              gL10nData = dict.locales[defaultLocale];\n            }\n          }\n        }\n        callback();\n      } else {\n        console.log('no resource to load, early way out');\n      }\n      // early way out\n      fireL10nReadyEvent(lang);\n      gReadyState = 'complete';\n      return;\n    }\n\n    // start the callback when all resources are loaded\n    var onResourceLoaded = null;\n    var gResourceCount = 0;\n    onResourceLoaded = function() {\n      gResourceCount++;\n      if (gResourceCount >= langCount) {\n        callback();\n        fireL10nReadyEvent(lang);\n        gReadyState = 'complete';\n      }\n    };\n\n    // load all resource files\n    function L10nResourceLink(link) {\n      var href = link.href;\n      // Note: If |gAsyncResourceLoading| is false, then the following callbacks\n      // are synchronously called.\n      this.load = function(lang, callback) {\n        parseResource(href, lang, callback, function() {\n          console.warn(href + ' not found.');\n          // lang not found, used default resource instead\n          console.warn('\"' + lang + '\" resource not found');\n          gLanguage = '';\n          // Resource not loaded, but we still need to call the callback.\n          callback();\n        });\n      };\n    }\n\n    for (var i = 0; i < langCount; i++) {\n      var resource = new L10nResourceLink(langLinks[i]);\n      resource.load(lang, onResourceLoaded);\n    }\n  }\n\n  // clear all l10n data\n  function clear() {\n    gL10nData = {};\n    gTextData = '';\n    gLanguage = '';\n    // TODO: clear all non predefined macros.\n    // There's no such macro /yet/ but we're planning to have some...\n  }\n\n\n  /**\n   * Get rules for plural forms (shared with JetPack), see:\n   * http://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/language_plural_rules.html\n   * https://github.com/mozilla/addon-sdk/blob/master/python-lib/plural-rules-generator.p\n   *\n   * @param {string} lang\n   *    locale (language) used.\n   *\n   * @return {Function}\n   *    returns a function that gives the plural form name for a given integer:\n   *       var fun = getPluralRules('en');\n   *       fun(1)    -> 'one'\n   *       fun(0)    -> 'other'\n   *       fun(1000) -> 'other'.\n   */\n\n  function getPluralRules(lang) {\n    var locales2rules = {\n      'af': 3,\n      'ak': 4,\n      'am': 4,\n      'ar': 1,\n      'asa': 3,\n      'az': 0,\n      'be': 11,\n      'bem': 3,\n      'bez': 3,\n      'bg': 3,\n      'bh': 4,\n      'bm': 0,\n      'bn': 3,\n      'bo': 0,\n      'br': 20,\n      'brx': 3,\n      'bs': 11,\n      'ca': 3,\n      'cgg': 3,\n      'chr': 3,\n      'cs': 12,\n      'cy': 17,\n      'da': 3,\n      'de': 3,\n      'dv': 3,\n      'dz': 0,\n      'ee': 3,\n      'el': 3,\n      'en': 3,\n      'eo': 3,\n      'es': 3,\n      'et': 3,\n      'eu': 3,\n      'fa': 0,\n      'ff': 5,\n      'fi': 3,\n      'fil': 4,\n      'fo': 3,\n      'fr': 5,\n      'fur': 3,\n      'fy': 3,\n      'ga': 8,\n      'gd': 24,\n      'gl': 3,\n      'gsw': 3,\n      'gu': 3,\n      'guw': 4,\n      'gv': 23,\n      'ha': 3,\n      'haw': 3,\n      'he': 2,\n      'hi': 4,\n      'hr': 11,\n      'hu': 0,\n      'id': 0,\n      'ig': 0,\n      'ii': 0,\n      'is': 3,\n      'it': 3,\n      'iu': 7,\n      'ja': 0,\n      'jmc': 3,\n      'jv': 0,\n      'ka': 0,\n      'kab': 5,\n      'kaj': 3,\n      'kcg': 3,\n      'kde': 0,\n      'kea': 0,\n      'kk': 3,\n      'kl': 3,\n      'km': 0,\n      'kn': 0,\n      'ko': 0,\n      'ksb': 3,\n      'ksh': 21,\n      'ku': 3,\n      'kw': 7,\n      'lag': 18,\n      'lb': 3,\n      'lg': 3,\n      'ln': 4,\n      'lo': 0,\n      'lt': 10,\n      'lv': 6,\n      'mas': 3,\n      'mg': 4,\n      'mk': 16,\n      'ml': 3,\n      'mn': 3,\n      'mo': 9,\n      'mr': 3,\n      'ms': 0,\n      'mt': 15,\n      'my': 0,\n      'nah': 3,\n      'naq': 7,\n      'nb': 3,\n      'nd': 3,\n      'ne': 3,\n      'nl': 3,\n      'nn': 3,\n      'no': 3,\n      'nr': 3,\n      'nso': 4,\n      'ny': 3,\n      'nyn': 3,\n      'om': 3,\n      'or': 3,\n      'pa': 3,\n      'pap': 3,\n      'pl': 13,\n      'ps': 3,\n      'pt': 3,\n      'rm': 3,\n      'ro': 9,\n      'rof': 3,\n      'ru': 11,\n      'rwk': 3,\n      'sah': 0,\n      'saq': 3,\n      'se': 7,\n      'seh': 3,\n      'ses': 0,\n      'sg': 0,\n      'sh': 11,\n      'shi': 19,\n      'sk': 12,\n      'sl': 14,\n      'sma': 7,\n      'smi': 7,\n      'smj': 7,\n      'smn': 7,\n      'sms': 7,\n      'sn': 3,\n      'so': 3,\n      'sq': 3,\n      'sr': 11,\n      'ss': 3,\n      'ssy': 3,\n      'st': 3,\n      'sv': 3,\n      'sw': 3,\n      'syr': 3,\n      'ta': 3,\n      'te': 3,\n      'teo': 3,\n      'th': 0,\n      'ti': 4,\n      'tig': 3,\n      'tk': 3,\n      'tl': 4,\n      'tn': 3,\n      'to': 0,\n      'tr': 0,\n      'ts': 3,\n      'tzm': 22,\n      'uk': 11,\n      'ur': 3,\n      've': 3,\n      'vi': 0,\n      'vun': 3,\n      'wa': 4,\n      'wae': 3,\n      'wo': 0,\n      'xh': 3,\n      'xog': 3,\n      'yo': 0,\n      'zh': 0,\n      'zu': 3\n    };\n\n    // utility functions for plural rules methods\n    function isIn(n, list) {\n      return list.indexOf(n) !== -1;\n    }\n    function isBetween(n, start, end) {\n      return start <= n && n <= end;\n    }\n\n    // list of all plural rules methods:\n    // map an integer to the plural form name to use\n    var pluralRules = {\n      '0': function(n) {\n        return 'other';\n      },\n      '1': function(n) {\n        if ((isBetween((n % 100), 3, 10)))\n          return 'few';\n        if (n === 0)\n          return 'zero';\n        if ((isBetween((n % 100), 11, 99)))\n          return 'many';\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '2': function(n) {\n        if (n !== 0 && (n % 10) === 0)\n          return 'many';\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '3': function(n) {\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '4': function(n) {\n        if ((isBetween(n, 0, 1)))\n          return 'one';\n        return 'other';\n      },\n      '5': function(n) {\n        if ((isBetween(n, 0, 2)) && n != 2)\n          return 'one';\n        return 'other';\n      },\n      '6': function(n) {\n        if (n === 0)\n          return 'zero';\n        if ((n % 10) == 1 && (n % 100) != 11)\n          return 'one';\n        return 'other';\n      },\n      '7': function(n) {\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '8': function(n) {\n        if ((isBetween(n, 3, 6)))\n          return 'few';\n        if ((isBetween(n, 7, 10)))\n          return 'many';\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '9': function(n) {\n        if (n === 0 || n != 1 && (isBetween((n % 100), 1, 19)))\n          return 'few';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '10': function(n) {\n        if ((isBetween((n % 10), 2, 9)) && !(isBetween((n % 100), 11, 19)))\n          return 'few';\n        if ((n % 10) == 1 && !(isBetween((n % 100), 11, 19)))\n          return 'one';\n        return 'other';\n      },\n      '11': function(n) {\n        if ((isBetween((n % 10), 2, 4)) && !(isBetween((n % 100), 12, 14)))\n          return 'few';\n        if ((n % 10) === 0 ||\n            (isBetween((n % 10), 5, 9)) ||\n            (isBetween((n % 100), 11, 14)))\n          return 'many';\n        if ((n % 10) == 1 && (n % 100) != 11)\n          return 'one';\n        return 'other';\n      },\n      '12': function(n) {\n        if ((isBetween(n, 2, 4)))\n          return 'few';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '13': function(n) {\n        if ((isBetween((n % 10), 2, 4)) && !(isBetween((n % 100), 12, 14)))\n          return 'few';\n        if (n != 1 && (isBetween((n % 10), 0, 1)) ||\n            (isBetween((n % 10), 5, 9)) ||\n            (isBetween((n % 100), 12, 14)))\n          return 'many';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '14': function(n) {\n        if ((isBetween((n % 100), 3, 4)))\n          return 'few';\n        if ((n % 100) == 2)\n          return 'two';\n        if ((n % 100) == 1)\n          return 'one';\n        return 'other';\n      },\n      '15': function(n) {\n        if (n === 0 || (isBetween((n % 100), 2, 10)))\n          return 'few';\n        if ((isBetween((n % 100), 11, 19)))\n          return 'many';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '16': function(n) {\n        if ((n % 10) == 1 && n != 11)\n          return 'one';\n        return 'other';\n      },\n      '17': function(n) {\n        if (n == 3)\n          return 'few';\n        if (n === 0)\n          return 'zero';\n        if (n == 6)\n          return 'many';\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '18': function(n) {\n        if (n === 0)\n          return 'zero';\n        if ((isBetween(n, 0, 2)) && n !== 0 && n != 2)\n          return 'one';\n        return 'other';\n      },\n      '19': function(n) {\n        if ((isBetween(n, 2, 10)))\n          return 'few';\n        if ((isBetween(n, 0, 1)))\n          return 'one';\n        return 'other';\n      },\n      '20': function(n) {\n        if ((isBetween((n % 10), 3, 4) || ((n % 10) == 9)) && !(\n            isBetween((n % 100), 10, 19) ||\n            isBetween((n % 100), 70, 79) ||\n            isBetween((n % 100), 90, 99)\n            ))\n          return 'few';\n        if ((n % 1000000) === 0 && n !== 0)\n          return 'many';\n        if ((n % 10) == 2 && !isIn((n % 100), [12, 72, 92]))\n          return 'two';\n        if ((n % 10) == 1 && !isIn((n % 100), [11, 71, 91]))\n          return 'one';\n        return 'other';\n      },\n      '21': function(n) {\n        if (n === 0)\n          return 'zero';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '22': function(n) {\n        if ((isBetween(n, 0, 1)) || (isBetween(n, 11, 99)))\n          return 'one';\n        return 'other';\n      },\n      '23': function(n) {\n        if ((isBetween((n % 10), 1, 2)) || (n % 20) === 0)\n          return 'one';\n        return 'other';\n      },\n      '24': function(n) {\n        if ((isBetween(n, 3, 10) || isBetween(n, 13, 19)))\n          return 'few';\n        if (isIn(n, [2, 12]))\n          return 'two';\n        if (isIn(n, [1, 11]))\n          return 'one';\n        return 'other';\n      }\n    };\n\n    // return a function that gives the plural form name for a given integer\n    var index = locales2rules[lang.replace(/-.*$/, '')];\n    if (!(index in pluralRules)) {\n      console.warn('plural form unknown for [' + lang + ']');\n      return function() { return 'other'; };\n    }\n    return pluralRules[index];\n  }\n\n  // pre-defined 'plural' macro\n  gMacros.plural = function(str, param, key, prop) {\n    var n = parseFloat(param);\n    if (isNaN(n))\n      return str;\n\n    // TODO: support other properties (l20n still doesn't...)\n    if (prop != gTextProp)\n      return str;\n\n    // initialize _pluralRules\n    if (!gMacros._pluralRules) {\n      gMacros._pluralRules = getPluralRules(gLanguage);\n    }\n    var index = '[' + gMacros._pluralRules(n) + ']';\n\n    // try to find a [zero|one|two] key if it's defined\n    if (n === 0 && (key + '[zero]') in gL10nData) {\n      str = gL10nData[key + '[zero]'][prop];\n    } else if (n == 1 && (key + '[one]') in gL10nData) {\n      str = gL10nData[key + '[one]'][prop];\n    } else if (n == 2 && (key + '[two]') in gL10nData) {\n      str = gL10nData[key + '[two]'][prop];\n    } else if ((key + index) in gL10nData) {\n      str = gL10nData[key + index][prop];\n    } else if ((key + '[other]') in gL10nData) {\n      str = gL10nData[key + '[other]'][prop];\n    }\n\n    return str;\n  };\n\n\n  /**\n   * l10n dictionary functions\n   */\n\n  // fetch an l10n object, warn if not found, apply `args' if possible\n  function getL10nData(key, args, fallback) {\n    var data = gL10nData[key];\n    if (!data) {\n      console.warn('#' + key + ' is undefined.');\n      if (!fallback) {\n        return null;\n      }\n      data = fallback;\n    }\n\n    /** This is where l10n expressions should be processed.\n      * The plan is to support C-style expressions from the l20n project;\n      * until then, only two kinds of simple expressions are supported:\n      *   {[ index ]} and {{ arguments }}.\n      */\n    var rv = {};\n    for (var prop in data) {\n      var str = data[prop];\n      str = substIndexes(str, args, key, prop);\n      str = substArguments(str, args, key);\n      rv[prop] = str;\n    }\n    return rv;\n  }\n\n  // replace {[macros]} with their values\n  function substIndexes(str, args, key, prop) {\n    var reIndex = /\\{\\[\\s*([a-zA-Z]+)\\(([a-zA-Z]+)\\)\\s*\\]\\}/;\n    var reMatch = reIndex.exec(str);\n    if (!reMatch || !reMatch.length)\n      return str;\n\n    // an index/macro has been found\n    // Note: at the moment, only one parameter is supported\n    var macroName = reMatch[1];\n    var paramName = reMatch[2];\n    var param;\n    if (args && paramName in args) {\n      param = args[paramName];\n    } else if (paramName in gL10nData) {\n      param = gL10nData[paramName];\n    }\n\n    // there's no macro parser yet: it has to be defined in gMacros\n    if (macroName in gMacros) {\n      var macro = gMacros[macroName];\n      str = macro(str, param, key, prop);\n    }\n    return str;\n  }\n\n  // replace {{arguments}} with their values\n  function substArguments(str, args, key) {\n    var reArgs = /\\{\\{\\s*(.+?)\\s*\\}\\}/g;\n    return str.replace(reArgs, function(matched_text, arg) {\n      if (args && arg in args) {\n        return args[arg];\n      }\n      if (arg in gL10nData) {\n        return gL10nData[arg];\n      }\n      console.log('argument {{' + arg + '}} for #' + key + ' is undefined.');\n      return matched_text;\n    });\n  }\n\n  // translate an HTML element\n  function translateElement(element) {\n    var l10n = getL10nAttributes(element);\n    if (!l10n.id)\n      return;\n\n    // get the related l10n object\n    var data = getL10nData(l10n.id, l10n.args);\n    if (!data) {\n      console.warn('#' + l10n.id + ' is undefined.');\n      return;\n    }\n\n    // translate element (TODO: security checks?)\n    if (data[gTextProp]) { // XXX\n      if (getChildElementCount(element) === 0) {\n        element[gTextProp] = data[gTextProp];\n      } else {\n        // this element has element children: replace the content of the first\n        // (non-empty) child textNode and clear other child textNodes\n        var children = element.childNodes;\n        var found = false;\n        for (var i = 0, l = children.length; i < l; i++) {\n          if (children[i].nodeType === 3 && /\\S/.test(children[i].nodeValue)) {\n            if (found) {\n              children[i].nodeValue = '';\n            } else {\n              children[i].nodeValue = data[gTextProp];\n              found = true;\n            }\n          }\n        }\n        // if no (non-empty) textNode is found, insert a textNode before the\n        // first element child.\n        if (!found) {\n          var textNode = document.createTextNode(data[gTextProp]);\n          element.insertBefore(textNode, element.firstChild);\n        }\n      }\n      delete data[gTextProp];\n    }\n\n    for (var k in data) {\n      element[k] = data[k];\n    }\n  }\n\n  // webkit browsers don't currently support 'children' on SVG elements...\n  function getChildElementCount(element) {\n    if (element.children) {\n      return element.children.length;\n    }\n    if (typeof element.childElementCount !== 'undefined') {\n      return element.childElementCount;\n    }\n    var count = 0;\n    for (var i = 0; i < element.childNodes.length; i++) {\n      count += element.nodeType === 1 ? 1 : 0;\n    }\n    return count;\n  }\n\n  // translate an HTML subtree\n  function translateFragment(element) {\n    element = element || document.documentElement;\n\n    // check all translatable children (= w/ a `data-l10n-id' attribute)\n    var children = getTranslatableChildren(element);\n    var elementCount = children.length;\n    for (var i = 0; i < elementCount; i++) {\n      translateElement(children[i]);\n    }\n\n    // translate element itself if necessary\n    translateElement(element);\n  }\n\n  return {\n    // get a localized string\n    get: function(key, args, fallbackString) {\n      var index = key.lastIndexOf('.');\n      var prop = gTextProp;\n      if (index > 0) { // An attribute has been specified\n        prop = key.substr(index + 1);\n        key = key.substring(0, index);\n      }\n      var fallback;\n      if (fallbackString) {\n        fallback = {};\n        fallback[prop] = fallbackString;\n      }\n      var data = getL10nData(key, args, fallback);\n      if (data && prop in data) {\n        return data[prop];\n      }\n      return '{{' + key + '}}';\n    },\n\n    // debug\n    getData: function() { return gL10nData; },\n    getText: function() { return gTextData; },\n\n    // get|set the document language\n    getLanguage: function() { return gLanguage; },\n    setLanguage: function(lang, callback) {\n      loadLocale(lang, function() {\n        if (callback)\n          callback();\n        translateFragment();\n      });\n    },\n\n    // get the direction (ltr|rtl) of the current language\n    getDirection: function() {\n      // http://www.w3.org/International/questions/qa-scripts\n      // Arabic, Hebrew, Farsi, Pashto, Urdu\n      var rtlList = ['ar', 'he', 'fa', 'ps', 'ur'];\n      var shortCode = gLanguage.split('-', 1)[0];\n      return (rtlList.indexOf(shortCode) >= 0) ? 'rtl' : 'ltr';\n    },\n\n    // translate an element or document fragment\n    translate: translateFragment,\n\n    // this can be used to prevent race conditions\n    getReadyState: function() { return gReadyState; },\n    ready: function(callback) {\n      if (!callback) {\n        return;\n      } else if (gReadyState == 'complete' || gReadyState == 'interactive') {\n        window.setTimeout(function() {\n          callback();\n        });\n      } else if (document.addEventListener) {\n        document.addEventListener('localized', function once() {\n          document.removeEventListener('localized', once);\n          callback();\n        });\n      }\n    }\n  };\n}) (window, document);\n"]}