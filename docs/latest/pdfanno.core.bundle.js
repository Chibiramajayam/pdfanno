(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports.PDFAnnoCore=t():e.PDFAnnoCore=t()})(this,function(){var e=Math.min,t=Math.abs,n=Math.sin,o=Math.cos,i=Math.atan,r=Math.floor;return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=66)}([,function(e,t){'use strict';function n(){let e=window.PDFView||window.iframeWindow.PDFView,t=e.pdfViewer.getPageView(0).viewport.viewBox,n={width:t[2],height:t[3]};return n}t.b=function(e){let t=n();e-=o;let a=t.height+i,l=r(e/a)+1,s=e-(l-1)*a;return{pageNumber:l,y:s}},t.a=function(e,t){let r=n(),a=t+o;return a+=(e-1)*(r.height+i),a},t.c=function(){let e=window.iframeWindow?window.iframeWindow:window;return e.nextZIndex||(e.nextZIndex=10),e.nextZIndex++};const o=9,i=9;t.d=i},function(e,t){'use strict';t.a=function(e,t){return 0<t.filter((t)=>t===e).length},t.b=function(e,t){var n=document.createEvent('CustomEvent');n.initCustomEvent(e,!0,!0,t),window.dispatchEvent(n)}},function(e,t){'use strict';t.a=function(e=8){const t='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',n=t.length;let o='';for(let a=0;a<e;a++)o+=t[r(Math.random()*n)];return o}},,,function(e){e.exports=function(){var e=[];return e.toString=function(){for(var e,t=[],n=0;n<this.length;n++)e=this[n],e[2]?t.push('@media '+e[2]+'{'+e[1]+'}'):t.push(e[1]);return t.join('')},e.i=function(t,n){'string'==typeof t&&(t=[[null,t,'']]);for(var o,r={},a=0;a<this.length;a++)o=this[a][0],'number'==typeof o&&(r[o]=!0);for(a=0;a<t.length;a++){var i=t[a];'number'==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]='('+i[2]+') and ('+n+')'),e.push(i))}},e}},function(e){function t(e,t){for(var n=0;n<e.length;n++){var o=e[n],i=p[o.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](o.parts[r]);for(;r<o.parts.length;r++)i.parts.push(l(o.parts[r],t))}else{for(var a=[],r=0;r<o.parts.length;r++)a.push(l(o.parts[r],t));p[o.id]={id:o.id,refs:1,parts:a}}}}function n(e){for(var t=[],n={},o=0;o<e.length;o++){var i=e[o],r=i[0],a=i[1],l=i[2],s=i[3],d={css:a,media:l,sourceMap:s};n[r]?n[r].parts.push(d):t.push(n[r]={id:r,parts:[d]})}return t}function o(e,t){var n=y(),o=x[x.length-1];if('top'===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),x.push(t);else if('bottom'===e.insertAt)n.appendChild(t);else throw new Error('Invalid value for parameter \'insertAt\'. Must be \'top\' or \'bottom\'.')}function i(e){e.parentNode.removeChild(e);var t=x.indexOf(e);0<=t&&x.splice(t,1)}function r(e){var t=document.createElement('style');return t.type='text/css',o(e,t),t}function a(e){var t=document.createElement('link');return t.rel='stylesheet',o(e,t),t}function l(e,t){var n,o,l;if(t.singleton){var p=g++;n=v||(v=r(t)),o=s.bind(null,n,p,!1),l=s.bind(null,n,p,!0)}else e.sourceMap&&'function'==typeof URL&&'function'==typeof URL.createObjectURL&&'function'==typeof URL.revokeObjectURL&&'function'==typeof Blob&&'function'==typeof btoa?(n=a(t),o=u.bind(null,n),l=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=r(t),o=d.bind(null,n),l=function(){i(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else l()}}function s(e,t,n,o){var i=n?'':o.css;if(e.styleSheet)e.styleSheet.cssText=f(t,i);else{var r=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function d(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute('media',o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function u(e,t){var n=t.css,o=t.sourceMap;o&&(n+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+' */');var i=new Blob([n],{type:'text/css'}),r=e.href;e.href=URL.createObjectURL(i),r&&URL.revokeObjectURL(r)}var p={},c=function(e){var t;return function(){return'undefined'==typeof t&&(t=e.apply(this,arguments)),t}},h=c(function(){return /msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),y=c(function(){return document.head||document.getElementsByTagName('head')[0]}),v=null,g=0,x=[];e.exports=function(e,o){if('undefined'!=typeof DEBUG&&DEBUG&&'object'!=typeof document)throw new Error('The style-loader cannot be used in a non-browser environment');o=o||{},'undefined'==typeof o.singleton&&(o.singleton=h()),'undefined'==typeof o.insertAt&&(o.insertAt='bottom');var r=n(e);return t(r,o),function(e){for(var a=[],l=0;l<r.length;l++){var i=r[l],s=p[i.id];s.refs--,a.push(s)}if(e){var d=n(e);t(d,o)}for(var s,l=0;l<a.length;l++)if(s=a[l],0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete p[s.id]}}};var f=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join('\n')}}()},,,,function(e,t,n){var o=n(12),i=n(13);e.exports={parse:function(e){var t=o.parse(e.toString());return i.compile(t)}}},function(e){e.exports=function(){function e(e,t,n,o,i,r){this.message=e,this.expected=t,this.found=n,this.offset=o,this.line=i,this.column=r,this.name='SyntaxError'}function t(t){function n(){return i(On).line}function o(){return i(On).column}function i(e){return Ln!==e&&(Ln>e&&(Ln=0,Mn={line:1,column:1,seenCR:!1}),function(e,n,o){var i,r;for(i=n;i<o;i++)r=t.charAt(i),'\n'===r?(!e.seenCR&&e.line++,e.column=1,e.seenCR=!1):'\r'===r||'\u2028'===r||'\u2029'===r?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}(Mn,Ln,e),Ln=e),Mn}function a(e){Rn<Vn||(Rn>Vn&&(Vn=Rn,In=[]),In.push(e))}function l(){var e,t,n,o=49*Rn+0,i=Sn[o];if(i)return Rn=i.nextPos,i.result;for(e=Rn,t=[],n=s();n!==pe;)t.push(n),n=s();return t!==pe&&(On=e,t=ye()),e=t,Sn[o]={nextPos:Rn,result:e},e}function s(){var e,t,n,o,i,r,a,l=49*Rn+1,s=Sn[l];if(s)return Rn=s.nextPos,s.result;for(e=Rn,t=[],n=Z();n!==pe;)t.push(n),n=Z();if(t===pe)Rn=e,e=ve;else if(n=d(),n!==pe){for(o=[],i=Z();i!==pe;)o.push(i),i=Z();if(o!==pe){for(i=[],r=u();r!==pe;)i.push(r),r=u();if(i!==pe){if(r=[],a=W(),a!==pe)for(;a!==pe;)r.push(a),a=W();else r=ve;r===pe&&(r=K()),r===pe?(Rn=e,e=ve):(t=[t,n,o,i,r],e=t)}else Rn=e,e=ve}else Rn=e,e=ve}else Rn=e,e=ve;if(e===pe){if(e=Rn,t=[],n=Z(),n!==pe)for(;n!==pe;)t.push(n),n=Z();else t=ve;if(t!==pe){if(n=[],o=W(),o!==pe)for(;o!==pe;)n.push(o),o=W();else n=ve;n===pe&&(n=K()),n===pe?(Rn=e,e=ve):(t=[t,n],e=t)}else Rn=e,e=ve;e===pe&&(e=W())}return Sn[l]={nextPos:Rn,result:e},e}function d(){var e,t=49*Rn+2,n=Sn[t];return n?(Rn=n.nextPos,n.result):(e=u(),e===pe&&(e=p(),e===pe&&(e=c(),e===pe&&(e=g()))),Sn[t]={nextPos:Rn,result:e},e)}function u(){var e,n,o,i,r,l,s=49*Rn+3,d=Sn[s];if(d)return Rn=d.nextPos,d.result;if(e=Rn,35===t.charCodeAt(Rn)?(n=ge,Rn++):(n=pe,0===Tn&&a(xe)),n!==pe){for(o=[],i=Rn,r=Rn,Tn++,l=W(),l===pe&&(l=K()),Tn--,l===pe?r=se:(Rn=r,r=ve),r===pe?(Rn=i,i=ve):(t.length>Rn?(l=t.charAt(Rn),Rn++):(l=pe,0===Tn&&a(fe)),l===pe?(Rn=i,i=ve):(r=[r,l],i=r));i!==pe;)o.push(i),i=Rn,r=Rn,Tn++,l=W(),l===pe&&(l=K()),Tn--,l===pe?r=se:(Rn=r,r=ve),r===pe?(Rn=i,i=ve):(t.length>Rn?(l=t.charAt(Rn),Rn++):(l=pe,0===Tn&&a(fe)),l===pe?(Rn=i,i=ve):(r=[r,l],i=r));o===pe?(Rn=e,e=ve):(n=[n,o],e=n)}else Rn=e,e=ve;return Sn[s]={nextPos:Rn,result:e},e}function p(){var e,n,o,i,r,l,s=49*Rn+4,d=Sn[s];if(d)return Rn=d.nextPos,d.result;if(e=Rn,91===t.charCodeAt(Rn)?(n=be,Rn++):(n=pe,0===Tn&&a(me)),n!==pe){for(o=[],i=Z();i!==pe;)o.push(i),i=Z();if(o===pe)Rn=e,e=ve;else if(i=h(),i!==pe){for(r=[],l=Z();l!==pe;)r.push(l),l=Z();r===pe?(Rn=e,e=ve):(93===t.charCodeAt(Rn)?(l=Ae,Rn++):(l=pe,0===Tn&&a(ke)),l===pe?(Rn=e,e=ve):(On=e,n=we(i),e=n))}else Rn=e,e=ve}else Rn=e,e=ve;return Sn[s]={nextPos:Rn,result:e},e}function c(){var e,n,o,i,r,l,s,d,u=49*Rn+5,p=Sn[u];if(p)return Rn=p.nextPos,p.result;if(e=Rn,91===t.charCodeAt(Rn)?(n=be,Rn++):(n=pe,0===Tn&&a(me)),n===pe)Rn=e,e=ve;else if(91===t.charCodeAt(Rn)?(o=be,Rn++):(o=pe,0===Tn&&a(me)),o!==pe){for(i=[],r=Z();r!==pe;)i.push(r),r=Z();if(i===pe)Rn=e,e=ve;else if(r=h(),r!==pe){for(l=[],s=Z();s!==pe;)l.push(s),s=Z();l===pe?(Rn=e,e=ve):(93===t.charCodeAt(Rn)?(s=Ae,Rn++):(s=pe,0===Tn&&a(ke)),s===pe?(Rn=e,e=ve):(93===t.charCodeAt(Rn)?(d=Ae,Rn++):(d=pe,0===Tn&&a(ke)),d===pe?(Rn=e,e=ve):(On=e,n=Ce(r),e=n)))}else Rn=e,e=ve}else Rn=e,e=ve;return Sn[u]={nextPos:Rn,result:e},e}function h(){var e,t,n,o=49*Rn+6,i=Sn[o];if(i)return Rn=i.nextPos,i.result;if(e=Rn,t=[],n=v(),n!==pe)for(;n!==pe;)t.push(n),n=v();else t=ve;return t===pe?(Rn=e,e=ve):(n=y(),n===pe?(Rn=e,e=ve):(On=e,t=Ee(t,n),e=t)),e===pe&&(e=Rn,t=y(),t!==pe&&(On=e,t=Pe(t)),e=t),Sn[o]={nextPos:Rn,result:e},e}function y(){var e,t,n,o,i,r=49*Rn+7,a=Sn[r];if(a)return Rn=a.nextPos,a.result;for(e=Rn,t=[],n=Z();n!==pe;)t.push(n),n=Z();if(t===pe)Rn=e,e=ve;else if(n=x(),n!==pe){for(o=[],i=Z();i!==pe;)o.push(i),i=Z();o===pe?(Rn=e,e=ve):(On=e,t=_e(n),e=t)}else Rn=e,e=ve;if(e===pe){for(e=Rn,t=[],n=Z();n!==pe;)t.push(n),n=Z();if(t===pe)Rn=e,e=ve;else if(n=f(),n!==pe){for(o=[],i=Z();i!==pe;)o.push(i),i=Z();o===pe?(Rn=e,e=ve):(On=e,t=_e(n),e=t)}else Rn=e,e=ve}return Sn[r]={nextPos:Rn,result:e},e}function v(){var e,n,o,i,r,l,s,d=49*Rn+8,u=Sn[d];if(u)return Rn=u.nextPos,u.result;for(e=Rn,n=[],o=Z();o!==pe;)n.push(o),o=Z();if(n===pe)Rn=e,e=ve;else if(o=x(),o!==pe){for(i=[],r=Z();r!==pe;)i.push(r),r=Z();if(i===pe)Rn=e,e=ve;else if(46===t.charCodeAt(Rn)?(r=Re,Rn++):(r=pe,0===Tn&&a(Oe)),r!==pe){for(l=[],s=Z();s!==pe;)l.push(s),s=Z();l===pe?(Rn=e,e=ve):(On=e,n=_e(o),e=n)}else Rn=e,e=ve}else Rn=e,e=ve;if(e===pe){for(e=Rn,n=[],o=Z();o!==pe;)n.push(o),o=Z();if(n===pe)Rn=e,e=ve;else if(o=f(),o!==pe){for(i=[],r=Z();r!==pe;)i.push(r),r=Z();if(i===pe)Rn=e,e=ve;else if(46===t.charCodeAt(Rn)?(r=Re,Rn++):(r=pe,0===Tn&&a(Oe)),r!==pe){for(l=[],s=Z();s!==pe;)l.push(s),s=Z();l===pe?(Rn=e,e=ve):(On=e,n=_e(o),e=n)}else Rn=e,e=ve}else Rn=e,e=ve}return Sn[d]={nextPos:Rn,result:e},e}function g(){var e,n,o,i,r,l,s=49*Rn+9,d=Sn[s];if(d)return Rn=d.nextPos,d.result;if(e=Rn,n=x(),n!==pe){for(o=[],i=Z();i!==pe;)o.push(i),i=Z();if(o===pe)Rn=e,e=ve;else if(61===t.charCodeAt(Rn)?(i=Le,Rn++):(i=pe,0===Tn&&a(Me)),i!==pe){for(r=[],l=Z();l!==pe;)r.push(l),l=Z();r===pe?(Rn=e,e=ve):(l=b(),l===pe?(Rn=e,e=ve):(On=e,n=Ve(n,l),e=n))}else Rn=e,e=ve}else Rn=e,e=ve;if(e===pe)if(e=Rn,n=f(),n!==pe){for(o=[],i=Z();i!==pe;)o.push(i),i=Z();if(o===pe)Rn=e,e=ve;else if(61===t.charCodeAt(Rn)?(i=Le,Rn++):(i=pe,0===Tn&&a(Me)),i!==pe){for(r=[],l=Z();l!==pe;)r.push(l),l=Z();r===pe?(Rn=e,e=ve):(l=b(),l===pe?(Rn=e,e=ve):(On=e,n=Ve(n,l),e=n))}else Rn=e,e=ve}else Rn=e,e=ve;return Sn[s]={nextPos:Rn,result:e},e}function x(){var e,t,n,o=49*Rn+10,i=Sn[o];if(i)return Rn=i.nextPos,i.result;if(e=Rn,t=[],n=G(),n!==pe)for(;n!==pe;)t.push(n),n=G();else t=ve;return t!==pe&&(On=e,t=Ie(t)),e=t,Sn[o]={nextPos:Rn,result:e},e}function f(){var e,t,n=49*Rn+11,o=Sn[n];return o?(Rn=o.nextPos,o.result):(e=Rn,t=k(),t!==pe&&(On=e,t=Te(t)),e=t,e===pe&&(e=Rn,t=C(),t!==pe&&(On=e,t=Te(t)),e=t),Sn[n]={nextPos:Rn,result:e},e)}function b(){var e,t=49*Rn+12,n=Sn[t];return n?(Rn=n.nextPos,n.result):(e=m(),e===pe&&(e=Y(),e===pe&&(e=L(),e===pe&&(e=V(),e===pe&&(e=T(),e===pe&&(e=S(),e===pe&&(e=F())))))),Sn[t]={nextPos:Rn,result:e},e)}function m(){var e,t=49*Rn+13,n=Sn[t];return n?(Rn=n.nextPos,n.result):(e=A(),e===pe&&(e=k(),e===pe&&(e=w(),e===pe&&(e=C()))),Sn[t]={nextPos:Rn,result:e},e)}function A(){var e,n,o,i,r,l=49*Rn+14,s=Sn[l];if(s)return Rn=s.nextPos,s.result;if(e=Rn,t.substr(Rn,3)===Se?(n=Se,Rn+=3):(n=pe,0===Tn&&a(je)),n===pe)Rn=e,e=ve;else if(o=W(),o===pe&&(o=De),o!==pe){for(i=[],r=_();r!==pe;)i.push(r),r=_();i===pe?(Rn=e,e=ve):(t.substr(Rn,3)===Se?(r=Se,Rn+=3):(r=pe,0===Tn&&a(je)),r===pe?(Rn=e,e=ve):(On=e,n=Ne(i),e=n))}else Rn=e,e=ve;return Sn[l]={nextPos:Rn,result:e},e}function k(){var e,n,o,i,r=49*Rn+15,l=Sn[r];if(l)return Rn=l.nextPos,l.result;if(e=Rn,34===t.charCodeAt(Rn)?(n=Fe,Rn++):(n=pe,0===Tn&&a(He)),n!==pe){for(o=[],i=E();i!==pe;)o.push(i),i=E();o===pe?(Rn=e,e=ve):(34===t.charCodeAt(Rn)?(i=Fe,Rn++):(i=pe,0===Tn&&a(He)),i===pe?(Rn=e,e=ve):(On=e,n=Ne(o),e=n))}else Rn=e,e=ve;return Sn[r]={nextPos:Rn,result:e},e}function w(){var e,n,o,i,r,l=49*Rn+16,s=Sn[l];if(s)return Rn=s.nextPos,s.result;if(e=Rn,t.substr(Rn,3)===$e?(n=$e,Rn+=3):(n=pe,0===Tn&&a(Ue)),n===pe)Rn=e,e=ve;else if(o=W(),o===pe&&(o=De),o!==pe){for(i=[],r=O();r!==pe;)i.push(r),r=O();i===pe?(Rn=e,e=ve):(t.substr(Rn,3)===$e?(r=$e,Rn+=3):(r=pe,0===Tn&&a(Ue)),r===pe?(Rn=e,e=ve):(On=e,n=Ne(i),e=n))}else Rn=e,e=ve;return Sn[l]={nextPos:Rn,result:e},e}function C(){var e,n,o,i,r=49*Rn+17,l=Sn[r];if(l)return Rn=l.nextPos,l.result;if(e=Rn,39===t.charCodeAt(Rn)?(n=ze,Rn++):(n=pe,0===Tn&&a(Be)),n!==pe){for(o=[],i=P();i!==pe;)o.push(i),i=P();o===pe?(Rn=e,e=ve):(39===t.charCodeAt(Rn)?(i=ze,Rn++):(i=pe,0===Tn&&a(Be)),i===pe?(Rn=e,e=ve):(On=e,n=Ne(o),e=n))}else Rn=e,e=ve;return Sn[r]={nextPos:Rn,result:e},e}function E(){var e,n,o,i=49*Rn+18,r=Sn[i];return r?(Rn=r.nextPos,r.result):(e=te(),e===pe&&(e=Rn,n=Rn,Tn++,34===t.charCodeAt(Rn)?(o=Fe,Rn++):(o=pe,0===Tn&&a(He)),Tn--,o===pe?n=se:(Rn=n,n=ve),n===pe?(Rn=e,e=ve):(t.length>Rn?(o=t.charAt(Rn),Rn++):(o=pe,0===Tn&&a(fe)),o===pe?(Rn=e,e=ve):(On=e,n=Xe(o),e=n))),Sn[i]={nextPos:Rn,result:e},e)}function P(){var e,n,o,i=49*Rn+19,r=Sn[i];return r?(Rn=r.nextPos,r.result):(e=Rn,n=Rn,Tn++,39===t.charCodeAt(Rn)?(o=ze,Rn++):(o=pe,0===Tn&&a(Be)),Tn--,o===pe?n=se:(Rn=n,n=ve),n===pe?(Rn=e,e=ve):(t.length>Rn?(o=t.charAt(Rn),Rn++):(o=pe,0===Tn&&a(fe)),o===pe?(Rn=e,e=ve):(On=e,n=Xe(o),e=n)),Sn[i]={nextPos:Rn,result:e},e)}function _(){var e,n,o,i=49*Rn+20,r=Sn[i];return r?(Rn=r.nextPos,r.result):(e=te(),e===pe&&(e=R(),e===pe&&(e=Rn,n=Rn,Tn++,t.substr(Rn,3)===Se?(o=Se,Rn+=3):(o=pe,0===Tn&&a(je)),Tn--,o===pe?n=se:(Rn=n,n=ve),n===pe?(Rn=e,e=ve):(t.length>Rn?(o=t.charAt(Rn),Rn++):(o=pe,0===Tn&&a(fe)),o===pe?(Rn=e,e=ve):(On=e,n=Ye(o),e=n)))),Sn[i]={nextPos:Rn,result:e},e)}function R(){var e,n,o,i,r,l=49*Rn+21,s=Sn[l];if(s)return Rn=s.nextPos,s.result;if(e=Rn,92===t.charCodeAt(Rn)?(n=Ze,Rn++):(n=pe,0===Tn&&a(We)),n===pe)Rn=e,e=ve;else if(o=W(),o!==pe){for(i=[],r=q();r!==pe;)i.push(r),r=q();i===pe?(Rn=e,e=ve):(On=e,n=qe(),e=n)}else Rn=e,e=ve;return Sn[l]={nextPos:Rn,result:e},e}function O(){var e,n,o,i=49*Rn+22,r=Sn[i];return r?(Rn=r.nextPos,r.result):(e=Rn,n=Rn,Tn++,t.substr(Rn,3)===$e?(o=$e,Rn+=3):(o=pe,0===Tn&&a(Ue)),Tn--,o===pe?n=se:(Rn=n,n=ve),n===pe?(Rn=e,e=ve):(t.length>Rn?(o=t.charAt(Rn),Rn++):(o=pe,0===Tn&&a(fe)),o===pe?(Rn=e,e=ve):(On=e,n=Xe(o),e=n)),Sn[i]={nextPos:Rn,result:e},e)}function L(){var e,n,o,i,r=49*Rn+23,l=Sn[r];return l?(Rn=l.nextPos,l.result):(e=Rn,n=M(),n===pe&&(n=I()),n===pe?(Rn=e,e=ve):(101===t.charCodeAt(Rn)?(o=Ke,Rn++):(o=pe,0===Tn&&a(Qe)),o===pe&&(69===t.charCodeAt(Rn)?(o=Je,Rn++):(o=pe,0===Tn&&a(Ge))),o===pe?(Rn=e,e=ve):(i=I(),i===pe?(Rn=e,e=ve):(On=e,n=et(n,i),e=n))),e===pe&&(e=Rn,n=M(),n!==pe&&(On=e,n=tt(n)),e=n),Sn[r]={nextPos:Rn,result:e},e)}function M(){var e,n,o,i,r,l,s=49*Rn+24,d=Sn[s];return d?(Rn=d.nextPos,d.result):(e=Rn,43===t.charCodeAt(Rn)?(n=nt,Rn++):(n=pe,0===Tn&&a(ot)),n===pe&&(n=De),n===pe?(Rn=e,e=ve):(o=Rn,i=ee(),i===pe?(Rn=o,o=ve):(46===t.charCodeAt(Rn)?(r=Re,Rn++):(r=pe,0===Tn&&a(Oe)),r===pe?(Rn=o,o=ve):(l=ee(),l===pe?(Rn=o,o=ve):(i=[i,r,l],o=i))),o===pe?(Rn=e,e=ve):(On=e,n=it(o),e=n)),e===pe&&(e=Rn,45===t.charCodeAt(Rn)?(n=rt,Rn++):(n=pe,0===Tn&&a(at)),n===pe?(Rn=e,e=ve):(o=Rn,i=ee(),i===pe?(Rn=o,o=ve):(46===t.charCodeAt(Rn)?(r=Re,Rn++):(r=pe,0===Tn&&a(Oe)),r===pe?(Rn=o,o=ve):(l=ee(),l===pe?(Rn=o,o=ve):(i=[i,r,l],o=i))),o===pe?(Rn=e,e=ve):(On=e,n=lt(o),e=n))),Sn[s]={nextPos:Rn,result:e},e)}function V(){var e,t,n=49*Rn+25,o=Sn[n];return o?(Rn=o.nextPos,o.result):(e=Rn,t=I(),t!==pe&&(On=e,t=st(t)),e=t,Sn[n]={nextPos:Rn,result:e},e)}function I(){var e,n,o,i,r,l=49*Rn+26,s=Sn[l];if(s)return Rn=s.nextPos,s.result;if(e=Rn,43===t.charCodeAt(Rn)?(n=nt,Rn++):(n=pe,0===Tn&&a(ot)),n===pe&&(n=De),n!==pe){if(o=[],i=J(),i!==pe)for(;i!==pe;)o.push(i),i=J();else o=ve;o===pe?(Rn=e,e=ve):(i=Rn,Tn++,46===t.charCodeAt(Rn)?(r=Re,Rn++):(r=pe,0===Tn&&a(Oe)),Tn--,r===pe?i=se:(Rn=i,i=ve),i===pe?(Rn=e,e=ve):(On=e,n=it(o),e=n))}else Rn=e,e=ve;if(e===pe)if(e=Rn,45===t.charCodeAt(Rn)?(n=rt,Rn++):(n=pe,0===Tn&&a(at)),n!==pe){if(o=[],i=J(),i!==pe)for(;i!==pe;)o.push(i),i=J();else o=ve;o===pe?(Rn=e,e=ve):(i=Rn,Tn++,46===t.charCodeAt(Rn)?(r=Re,Rn++):(r=pe,0===Tn&&a(Oe)),Tn--,r===pe?i=se:(Rn=i,i=ve),i===pe?(Rn=e,e=ve):(On=e,n=lt(o),e=n))}else Rn=e,e=ve;return Sn[l]={nextPos:Rn,result:e},e}function T(){var e,n,o=49*Rn+27,i=Sn[o];return i?(Rn=i.nextPos,i.result):(e=Rn,t.substr(Rn,4)===dt?(n=dt,Rn+=4):(n=pe,0===Tn&&a(ut)),n!==pe&&(On=e,n=pt()),e=n,e===pe&&(e=Rn,t.substr(Rn,5)===ct?(n=ct,Rn+=5):(n=pe,0===Tn&&a(ht)),n!==pe&&(On=e,n=yt()),e=n),Sn[o]={nextPos:Rn,result:e},e)}function S(){var e,n,o,i,r,l=49*Rn+28,s=Sn[l];if(s)return Rn=s.nextPos,s.result;if(e=Rn,91===t.charCodeAt(Rn)?(n=be,Rn++):(n=pe,0===Tn&&a(me)),n!==pe){for(o=[],i=N();i!==pe;)o.push(i),i=N();o===pe?(Rn=e,e=ve):(93===t.charCodeAt(Rn)?(i=Ae,Rn++):(i=pe,0===Tn&&a(ke)),i===pe?(Rn=e,e=ve):(On=e,n=vt(),e=n))}else Rn=e,e=ve;if(e===pe&&(e=Rn,91===t.charCodeAt(Rn)?(n=be,Rn++):(n=pe,0===Tn&&a(me)),n===pe?(Rn=e,e=ve):(o=j(),o===pe&&(o=De),o===pe?(Rn=e,e=ve):(93===t.charCodeAt(Rn)?(i=Ae,Rn++):(i=pe,0===Tn&&a(ke)),i===pe?(Rn=e,e=ve):(On=e,n=gt(o),e=n))),e===pe)){if(e=Rn,91===t.charCodeAt(Rn)?(n=be,Rn++):(n=pe,0===Tn&&a(me)),n!==pe){if(o=[],i=D(),i!==pe)for(;i!==pe;)o.push(i),i=D();else o=ve;o===pe?(Rn=e,e=ve):(93===t.charCodeAt(Rn)?(i=Ae,Rn++):(i=pe,0===Tn&&a(ke)),i===pe?(Rn=e,e=ve):(On=e,n=xt(o),e=n))}else Rn=e,e=ve;if(e===pe)if(e=Rn,91===t.charCodeAt(Rn)?(n=be,Rn++):(n=pe,0===Tn&&a(me)),n!==pe){if(o=[],i=D(),i!==pe)for(;i!==pe;)o.push(i),i=D();else o=ve;o===pe?(Rn=e,e=ve):(i=j(),i===pe?(Rn=e,e=ve):(93===t.charCodeAt(Rn)?(r=Ae,Rn++):(r=pe,0===Tn&&a(ke)),r===pe?(Rn=e,e=ve):(On=e,n=ft(o,i),e=n)))}else Rn=e,e=ve}return Sn[l]={nextPos:Rn,result:e},e}function j(){var e,t,n,o,i,r=49*Rn+29,a=Sn[r];if(a)return Rn=a.nextPos,a.result;for(e=Rn,t=[],n=N();n!==pe;)t.push(n),n=N();if(t===pe)Rn=e,e=ve;else if(n=b(),n!==pe){for(o=[],i=N();i!==pe;)o.push(i),i=N();o===pe?(Rn=e,e=ve):(On=e,t=bt(n),e=t)}else Rn=e,e=ve;return Sn[r]={nextPos:Rn,result:e},e}function D(){var e,n,o,i,r,l,s,d=49*Rn+30,u=Sn[d];if(u)return Rn=u.nextPos,u.result;for(e=Rn,n=[],o=N();o!==pe;)n.push(o),o=N();if(n===pe)Rn=e,e=ve;else if(o=b(),o!==pe){for(i=[],r=N();r!==pe;)i.push(r),r=N();if(i===pe)Rn=e,e=ve;else if(44===t.charCodeAt(Rn)?(r=mt,Rn++):(r=pe,0===Tn&&a(At)),r!==pe){for(l=[],s=N();s!==pe;)l.push(s),s=N();l===pe?(Rn=e,e=ve):(On=e,n=bt(o),e=n)}else Rn=e,e=ve}else Rn=e,e=ve;return Sn[d]={nextPos:Rn,result:e},e}function N(){var e,t=49*Rn+31,n=Sn[t];return n?(Rn=n.nextPos,n.result):(e=Z(),e===pe&&(e=W(),e===pe&&(e=u())),Sn[t]={nextPos:Rn,result:e},e)}function F(){var e,n,o,i,r,l,s=49*Rn+32,d=Sn[s];if(d)return Rn=d.nextPos,d.result;if(e=Rn,123===t.charCodeAt(Rn)?(n=kt,Rn++):(n=pe,0===Tn&&a(wt)),n!==pe){for(o=[],i=Z();i!==pe;)o.push(i),i=Z();if(o!==pe){for(i=[],r=H();r!==pe;)i.push(r),r=H();if(i!==pe){for(r=[],l=Z();l!==pe;)r.push(l),l=Z();r===pe?(Rn=e,e=ve):(125===t.charCodeAt(Rn)?(l=Ct,Rn++):(l=pe,0===Tn&&a(Et)),l===pe?(Rn=e,e=ve):(On=e,n=Pt(i),e=n))}else Rn=e,e=ve}else Rn=e,e=ve}else Rn=e,e=ve;return Sn[s]={nextPos:Rn,result:e},e}function H(){var e,n,o,i,r,l,s,d,u,p,c,h=49*Rn+33,y=Sn[h];if(y)return Rn=y.nextPos,y.result;for(e=Rn,n=[],o=Z();o!==pe;)n.push(o),o=Z();if(n===pe)Rn=e,e=ve;else if(o=x(),o!==pe){for(i=[],r=Z();r!==pe;)i.push(r),r=Z();if(i===pe)Rn=e,e=ve;else if(61===t.charCodeAt(Rn)?(r=Le,Rn++):(r=pe,0===Tn&&a(Me)),r!==pe){for(l=[],s=Z();s!==pe;)l.push(s),s=Z();if(l===pe)Rn=e,e=ve;else if(s=b(),s!==pe){for(d=[],u=Z();u!==pe;)d.push(u),u=Z();if(d===pe)Rn=e,e=ve;else if(44===t.charCodeAt(Rn)?(u=mt,Rn++):(u=pe,0===Tn&&a(At)),u!==pe){for(p=[],c=Z();c!==pe;)p.push(c),c=Z();p===pe?(Rn=e,e=ve):(On=e,n=_t(o,s),e=n)}else Rn=e,e=ve}else Rn=e,e=ve}else Rn=e,e=ve}else Rn=e,e=ve;if(e===pe){for(e=Rn,n=[],o=Z();o!==pe;)n.push(o),o=Z();if(n===pe)Rn=e,e=ve;else if(o=x(),o!==pe){for(i=[],r=Z();r!==pe;)i.push(r),r=Z();if(i===pe)Rn=e,e=ve;else if(61===t.charCodeAt(Rn)?(r=Le,Rn++):(r=pe,0===Tn&&a(Me)),r!==pe){for(l=[],s=Z();s!==pe;)l.push(s),s=Z();l===pe?(Rn=e,e=ve):(s=b(),s===pe?(Rn=e,e=ve):(On=e,n=_t(o,s),e=n))}else Rn=e,e=ve}else Rn=e,e=ve}return Sn[h]={nextPos:Rn,result:e},e}function U(){var e,n,o,i=49*Rn+34,r=Sn[i];return r?(Rn=r.nextPos,r.result):(e=Rn,46===t.charCodeAt(Rn)?(n=Re,Rn++):(n=pe,0===Tn&&a(Oe)),n===pe?(Rn=e,e=ve):(o=ee(),o===pe?(Rn=e,e=ve):(On=e,n=Rt(o),e=n)),Sn[i]={nextPos:Rn,result:e},e)}function z(){var e,n,o,i,r,l,s,d,u,p,c,h,y=49*Rn+35,v=Sn[y];return v?(Rn=v.nextPos,v.result):(e=Rn,n=Rn,o=J(),o===pe?(Rn=n,n=ve):(i=J(),i===pe?(Rn=n,n=ve):(r=J(),r===pe?(Rn=n,n=ve):(l=J(),l===pe?(Rn=n,n=ve):(45===t.charCodeAt(Rn)?(s=rt,Rn++):(s=pe,0===Tn&&a(at)),s===pe?(Rn=n,n=ve):(d=J(),d===pe?(Rn=n,n=ve):(u=J(),u===pe?(Rn=n,n=ve):(45===t.charCodeAt(Rn)?(p=rt,Rn++):(p=pe,0===Tn&&a(at)),p===pe?(Rn=n,n=ve):(c=J(),c===pe?(Rn=n,n=ve):(h=J(),h===pe?(Rn=n,n=ve):(o=[o,i,r,l,s,d,u,p,c,h],n=o)))))))))),n!==pe&&(On=e,n=Ot(n)),e=n,Sn[y]={nextPos:Rn,result:e},e)}function B(){var e,n,o,i,r,l,s,d,u,p,c,h=49*Rn+36,y=Sn[h];return y?(Rn=y.nextPos,y.result):(e=Rn,n=Rn,o=J(),o===pe?(Rn=n,n=ve):(i=J(),i===pe?(Rn=n,n=ve):(58===t.charCodeAt(Rn)?(r=Lt,Rn++):(r=pe,0===Tn&&a(Mt)),r===pe?(Rn=n,n=ve):(l=J(),l===pe?(Rn=n,n=ve):(s=J(),s===pe?(Rn=n,n=ve):(58===t.charCodeAt(Rn)?(d=Lt,Rn++):(d=pe,0===Tn&&a(Mt)),d===pe?(Rn=n,n=ve):(u=J(),u===pe?(Rn=n,n=ve):(p=J(),p===pe?(Rn=n,n=ve):(c=U(),c===pe&&(c=De),c===pe?(Rn=n,n=ve):(o=[o,i,r,l,s,d,u,p,c],n=o))))))))),n!==pe&&(On=e,n=Vt(n)),e=n,Sn[h]={nextPos:Rn,result:e},e)}function X(){var e,n,o,i,r,l,s,d,u,p,c,h,y,v,g,x,f,b=49*Rn+37,m=Sn[b];return m?(Rn=m.nextPos,m.result):(e=Rn,n=Rn,o=J(),o===pe?(Rn=n,n=ve):(i=J(),i===pe?(Rn=n,n=ve):(58===t.charCodeAt(Rn)?(r=Lt,Rn++):(r=pe,0===Tn&&a(Mt)),r===pe?(Rn=n,n=ve):(l=J(),l===pe?(Rn=n,n=ve):(s=J(),s===pe?(Rn=n,n=ve):(58===t.charCodeAt(Rn)?(d=Lt,Rn++):(d=pe,0===Tn&&a(Mt)),d===pe?(Rn=n,n=ve):(u=J(),u===pe?(Rn=n,n=ve):(p=J(),p===pe?(Rn=n,n=ve):(c=U(),c===pe&&(c=De),c===pe?(Rn=n,n=ve):(45===t.charCodeAt(Rn)?(h=rt,Rn++):(h=pe,0===Tn&&a(at)),h===pe&&(43===t.charCodeAt(Rn)?(h=nt,Rn++):(h=pe,0===Tn&&a(ot))),h===pe?(Rn=n,n=ve):(y=J(),y===pe?(Rn=n,n=ve):(v=J(),v===pe?(Rn=n,n=ve):(58===t.charCodeAt(Rn)?(g=Lt,Rn++):(g=pe,0===Tn&&a(Mt)),g===pe?(Rn=n,n=ve):(x=J(),x===pe?(Rn=n,n=ve):(f=J(),f===pe?(Rn=n,n=ve):(o=[o,i,r,l,s,d,u,p,c,h,y,v,g,x,f],n=o))))))))))))))),n!==pe&&(On=e,n=Vt(n)),e=n,Sn[b]={nextPos:Rn,result:e},e)}function Y(){var e,n,o,i,r,l=49*Rn+38,s=Sn[l];return s?(Rn=s.nextPos,s.result):(e=Rn,n=z(),n===pe?(Rn=e,e=ve):(84===t.charCodeAt(Rn)?(o=It,Rn++):(o=pe,0===Tn&&a(Tt)),o===pe?(Rn=e,e=ve):(i=B(),i===pe?(Rn=e,e=ve):(90===t.charCodeAt(Rn)?(r=St,Rn++):(r=pe,0===Tn&&a(jt)),r===pe?(Rn=e,e=ve):(On=e,n=Dt(n,i),e=n)))),e===pe&&(e=Rn,n=z(),n===pe?(Rn=e,e=ve):(84===t.charCodeAt(Rn)?(o=It,Rn++):(o=pe,0===Tn&&a(Tt)),o===pe?(Rn=e,e=ve):(i=X(),i===pe?(Rn=e,e=ve):(On=e,n=Nt(n,i),e=n)))),Sn[l]={nextPos:Rn,result:e},e)}function Z(){var e,n=49*Rn+39,o=Sn[n];return o?(Rn=o.nextPos,o.result):(Ft.test(t.charAt(Rn))?(e=t.charAt(Rn),Rn++):(e=pe,0===Tn&&a(Ht)),Sn[n]={nextPos:Rn,result:e},e)}function W(){var e,n,o,i=49*Rn+40,r=Sn[i];return r?(Rn=r.nextPos,r.result):(10===t.charCodeAt(Rn)?(e=$t,Rn++):(e=pe,0===Tn&&a(Ut)),e===pe&&(e=Rn,13===t.charCodeAt(Rn)?(n=zt,Rn++):(n=pe,0===Tn&&a(Bt)),n===pe?(Rn=e,e=ve):(10===t.charCodeAt(Rn)?(o=$t,Rn++):(o=pe,0===Tn&&a(Ut)),o===pe?(Rn=e,e=ve):(n=[n,o],e=n))),Sn[i]={nextPos:Rn,result:e},e)}function q(){var e,t=49*Rn+41,n=Sn[t];return n?(Rn=n.nextPos,n.result):(e=W(),e===pe&&(e=Z()),Sn[t]={nextPos:Rn,result:e},e)}function K(){var e,n,o=49*Rn+42,i=Sn[o];return i?(Rn=i.nextPos,i.result):(e=Rn,Tn++,t.length>Rn?(n=t.charAt(Rn),Rn++):(n=pe,0===Tn&&a(fe)),Tn--,n===pe?e=se:(Rn=e,e=ve),Sn[o]={nextPos:Rn,result:e},e)}function Q(){var e,n=49*Rn+43,o=Sn[n];return o?(Rn=o.nextPos,o.result):(Xt.test(t.charAt(Rn))?(e=t.charAt(Rn),Rn++):(e=pe,0===Tn&&a(Yt)),Sn[n]={nextPos:Rn,result:e},e)}function J(){var e,n,o=49*Rn+44,i=Sn[o];return i?(Rn=i.nextPos,i.result):(Zt.test(t.charAt(Rn))?(e=t.charAt(Rn),Rn++):(e=pe,0===Tn&&a(Wt)),e===pe&&(e=Rn,95===t.charCodeAt(Rn)?(n=qt,Rn++):(n=pe,0===Tn&&a(Kt)),n!==pe&&(On=e,n=Qt()),e=n),Sn[o]={nextPos:Rn,result:e},e)}function G(){var e,n=49*Rn+45,o=Sn[n];return o?(Rn=o.nextPos,o.result):(Jt.test(t.charAt(Rn))?(e=t.charAt(Rn),Rn++):(e=pe,0===Tn&&a(Gt)),Sn[n]={nextPos:Rn,result:e},e)}function ee(){var e,t,n,o=49*Rn+46,i=Sn[o];if(i)return Rn=i.nextPos,i.result;if(e=Rn,t=[],n=J(),n!==pe)for(;n!==pe;)t.push(n),n=J();else t=ve;return t!==pe&&(On=e,t=en(t)),e=t,Sn[o]={nextPos:Rn,result:e},e}function te(){var e,n,o=49*Rn+47,i=Sn[o];return i?(Rn=i.nextPos,i.result):(e=Rn,t.substr(Rn,2)===tn?(n=tn,Rn+=2):(n=pe,0===Tn&&a(nn)),n!==pe&&(On=e,n=on()),e=n,e===pe&&(e=Rn,t.substr(Rn,2)===rn?(n=rn,Rn+=2):(n=pe,0===Tn&&a(an)),n!==pe&&(On=e,n=ln()),e=n,e===pe&&(e=Rn,t.substr(Rn,2)===sn?(n=sn,Rn+=2):(n=pe,0===Tn&&a(dn)),n!==pe&&(On=e,n=un()),e=n,e===pe&&(e=Rn,t.substr(Rn,2)===pn?(n=pn,Rn+=2):(n=pe,0===Tn&&a(cn)),n!==pe&&(On=e,n=hn()),e=n,e===pe&&(e=Rn,t.substr(Rn,2)===yn?(n=yn,Rn+=2):(n=pe,0===Tn&&a(vn)),n!==pe&&(On=e,n=gn()),e=n,e===pe&&(e=Rn,t.substr(Rn,2)===xn?(n=xn,Rn+=2):(n=pe,0===Tn&&a(fn)),n!==pe&&(On=e,n=bn()),e=n,e===pe&&(e=Rn,t.substr(Rn,2)===mn?(n=mn,Rn+=2):(n=pe,0===Tn&&a(An)),n!==pe&&(On=e,n=kn()),e=n,e===pe&&(e=ne()))))))),Sn[o]={nextPos:Rn,result:e},e)}function ne(){var e,n,o,i,r,l,s,d,u,p,c,h=49*Rn+48,y=Sn[h];return y?(Rn=y.nextPos,y.result):(e=Rn,t.substr(Rn,2)===wn?(n=wn,Rn+=2):(n=pe,0===Tn&&a(Cn)),n===pe?(Rn=e,e=ve):(o=Rn,i=Q(),i===pe?(Rn=o,o=ve):(r=Q(),r===pe?(Rn=o,o=ve):(l=Q(),l===pe?(Rn=o,o=ve):(s=Q(),s===pe?(Rn=o,o=ve):(d=Q(),d===pe?(Rn=o,o=ve):(u=Q(),u===pe?(Rn=o,o=ve):(p=Q(),p===pe?(Rn=o,o=ve):(c=Q(),c===pe?(Rn=o,o=ve):(i=[i,r,l,s,d,u,p,c],o=i)))))))),o===pe?(Rn=e,e=ve):(On=e,n=En(o),e=n)),e===pe&&(e=Rn,t.substr(Rn,2)===Pn?(n=Pn,Rn+=2):(n=pe,0===Tn&&a(_n)),n===pe?(Rn=e,e=ve):(o=Rn,i=Q(),i===pe?(Rn=o,o=ve):(r=Q(),r===pe?(Rn=o,o=ve):(l=Q(),l===pe?(Rn=o,o=ve):(s=Q(),s===pe?(Rn=o,o=ve):(i=[i,r,l,s],o=i)))),o===pe?(Rn=e,e=ve):(On=e,n=En(o),e=n))),Sn[h]={nextPos:Rn,result:e},e)}function oe(e,t,n){var o=new Error(e);throw o.line=t,o.column=n,o}function ie(e){jn.push(e)}function re(e,t,n,o,i){var r={type:e,value:t,line:n(),column:o()};return i&&(r.key=i),r}function ae(e,t,n){var o=parseInt('0x'+e);return!isFinite(o)||r(o)!=o||0>o||1114111<o||55295<o&&57344>o?void oe('Invalid Unicode escape code: '+e,t,n):le(o)}function le(){var e,t,n=[],o=-1,i=arguments.length;if(!i)return'';for(var r,a='';++o<i;)r=+arguments[o],65535>=r?n.push(r):(r-=65536,e=(r>>10)+55296,t=r%1024+56320,n.push(e,t)),(o+1==i||n.length>16384)&&(a+=String.fromCharCode.apply(null,n),n.length=0);return a}var se,de,ue=1<arguments.length?arguments[1]:{},pe={},ce={start:l},he=l,ye=function(){return jn},ve=pe,ge='#',xe={type:'literal',value:'#',description:'"#"'},fe={type:'any',description:'any character'},be='[',me={type:'literal',value:'[',description:'"["'},Ae=']',ke={type:'literal',value:']',description:'"]"'},we=function(e){ie(re('ObjectPath',e,n,o))},Ce=function(e){ie(re('ArrayPath',e,n,o))},Ee=function(e,t){return e.concat(t)},Pe=function(e){return[e]},_e=function(e){return e},Re='.',Oe={type:'literal',value:'.',description:'"."'},Le='=',Me={type:'literal',value:'=',description:'"="'},Ve=function(e,t){ie(re('Assign',t,n,o,e))},Ie=function(e){return e.join('')},Te=function(e){return e.value},Se='"""',je={type:'literal',value:'"""',description:'"\\"\\"\\""'},De=null,Ne=function(e){return re('String',e.join(''),n,o)},Fe='"',He={type:'literal',value:'"',description:'"\\""'},$e='\'\'\'',Ue={type:'literal',value:'\'\'\'',description:'"\'\'\'"'},ze='\'',Be={type:'literal',value:'\'',description:'"\'"'},Xe=function(e){return e},Ye=function(e){return e},Ze='\\',We={type:'literal',value:'\\',description:'"\\\\"'},qe=function(){return''},Ke='e',Qe={type:'literal',value:'e',description:'"e"'},Je='E',Ge={type:'literal',value:'E',description:'"E"'},et=function(e,t){return re('Float',parseFloat(e+'e'+t),n,o)},tt=function(e){return re('Float',parseFloat(e),n,o)},nt='+',ot={type:'literal',value:'+',description:'"+"'},it=function(e){return e.join('')},rt='-',at={type:'literal',value:'-',description:'"-"'},lt=function(e){return'-'+e.join('')},st=function(e){return re('Integer',parseInt(e,10),n,o)},dt='true',ut={type:'literal',value:'true',description:'"true"'},pt=function(){return re('Boolean',!0,n,o)},ct='false',ht={type:'literal',value:'false',description:'"false"'},yt=function(){return re('Boolean',!1,n,o)},vt=function(){return re('Array',[],n,o)},gt=function(e){return re('Array',e?[e]:[],n,o)},xt=function(e){return re('Array',e,n,o)},ft=function(e,t){return re('Array',e.concat(t),n,o)},bt=function(e){return e},mt=',',At={type:'literal',value:',',description:'","'},kt='{',wt={type:'literal',value:'{',description:'"{"'},Ct='}',Et={type:'literal',value:'}',description:'"}"'},Pt=function(e){return re('InlineTable',e,n,o)},_t=function(e,t){return re('InlineTableValue',t,n,o,e)},Rt=function(e){return'.'+e},Ot=function(e){return e.join('')},Lt=':',Mt={type:'literal',value:':',description:'":"'},Vt=function(e){return e.join('')},It='T',Tt={type:'literal',value:'T',description:'"T"'},St='Z',jt={type:'literal',value:'Z',description:'"Z"'},Dt=function(e,t){return re('Date',new Date(e+'T'+t+'Z'),n,o)},Nt=function(e,t){return re('Date',new Date(e+'T'+t),n,o)},Ft=/^[ \t]/,Ht={type:'class',value:'[ \\t]',description:'[ \\t]'},$t='\n',Ut={type:'literal',value:'\n',description:'"\\n"'},zt='\r',Bt={type:'literal',value:'\r',description:'"\\r"'},Xt=/^[0-9a-f]/i,Yt={type:'class',value:'[0-9a-f]i',description:'[0-9a-f]i'},Zt=/^[0-9]/,Wt={type:'class',value:'[0-9]',description:'[0-9]'},qt='_',Kt={type:'literal',value:'_',description:'"_"'},Qt=function(){return''},Jt=/^[A-Za-z0-9_\-]/,Gt={type:'class',value:'[A-Za-z0-9_\\-]',description:'[A-Za-z0-9_\\-]'},en=function(e){return e.join('')},tn='\\"',nn={type:'literal',value:'\\"',description:'"\\\\\\""'},on=function(){return'"'},rn='\\\\',an={type:'literal',value:'\\\\',description:'"\\\\\\\\"'},ln=function(){return'\\'},sn='\\b',dn={type:'literal',value:'\\b',description:'"\\\\b"'},un=function(){return'\b'},pn='\\t',cn={type:'literal',value:'\\t',description:'"\\\\t"'},hn=function(){return'\t'},yn='\\n',vn={type:'literal',value:'\\n',description:'"\\\\n"'},gn=function(){return'\n'},xn='\\f',fn={type:'literal',value:'\\f',description:'"\\\\f"'},bn=function(){return'\f'},mn='\\r',An={type:'literal',value:'\\r',description:'"\\\\r"'},kn=function(){return'\r'},wn='\\U',Cn={type:'literal',value:'\\U',description:'"\\\\U"'},En=function(e){return ae(e.join(''))},Pn='\\u',_n={type:'literal',value:'\\u',description:'"\\\\u"'},Rn=0,On=0,Ln=0,Mn={line:1,column:1,seenCR:!1},Vn=0,In=[],Tn=0,Sn={};if('startRule'in ue){if(!(ue.startRule in ce))throw new Error('Can\'t start parsing from rule "'+ue.startRule+'".');he=ce[ue.startRule]}var jn=[];if(de=he(),de!==pe&&Rn===t.length)return de;throw de!==pe&&Rn<t.length&&a({type:'end',description:'end of input'}),function(n,o,r){var a=i(r),l=r<t.length?t.charAt(r):null;return null!==o&&function(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(o),new e(null===n?function(e,t){var n,o,r,i=Array(e.length);for(r=0;r<e.length;r++)i[r]=e[r].description;return n=1<e.length?i.slice(0,-1).join(', ')+' or '+i[e.length-1]:i[0],o=t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\x08/g,'\\b').replace(/\t/g,'\\t').replace(/\n/g,'\\n').replace(/\f/g,'\\f').replace(/\r/g,'\\r').replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return'\\x0'+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return'\\x'+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return'\\u0'+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return'\\u'+t(e)})}(t)+'"':'end of input','Expected '+n+' but '+o+' found.'}(o,l):n,o,l,r,a.line,a.column)}(null,In,Vn)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:t}}()},function(e){'use strict';e.exports={compile:function(e){function t(e,t,n){var o=new Error(e);throw o.line=t,o.column=n,o}function n(e){var n,i=e.key,a=e.value,l=e.line,s=e.column;n=h?h+'.'+i:i,'undefined'!=typeof v[i]&&t('Cannot redefine existing key \''+n+'\'.',l,s),v[i]=r(a),o(n)||(p.push(n),c.push(n))}function o(e){return-1!==p.indexOf(e)}function r(e){return'Array'===e.type?d(e.value):'InlineTable'===e.type?a(e.value):e.value}function a(e){for(var t,n={},o=0;o<e.length;o++)t=e[o],'InlineTable'===t.value.type?n[t.key]=a(t.value.value):'InlineTableValue'===t.type&&(n[t.key]=r(t.value));return n}function l(e){var n=e.value,r=n.map(u).join('.'),a=e.line,l=e.column;o(r)&&t('Cannot redefine existing key \''+n+'\'.',a,l),p.push(r),v=i(y,n,{},a,l),h=n}function s(e){var n=e.value,r=n.map(u).join('.'),a=e.line,l=e.column;if(o(r)||p.push(r),p=p.filter(function(e){return 0!==e.indexOf(r)}),p.push(r),v=i(y,n,[],a,l),h=r,v instanceof Array){var s={};v.push(s),v=s}else t('Cannot redefine existing key \''+n+'\'.',a,l)}function i(e,n,o,r,a){var l,s=[],d='',u=n.join('.'),p=e,h=n.length;for(var y in n)l=n[y],s.push(l),d=s.join('.'),'undefined'==typeof p[l]?y===h-1+''?p[l]=o:p[l]={}:y!==h-1&&-1<c.indexOf(d)&&t('Cannot redefine existing key \''+d+'\'.',r,a),p=p[l],p instanceof Array&&p.length&&y<n.length-1&&(p=p[p.length-1]);return p}function d(e){var n=null;for(var o in e){var i=e[o];null===n?n=i.type:('Integer'===i.type||'Float'===i.type)&&('Integer'===n||'Float'===n)||i.type!==n&&t('Cannot add value of type '+i.type+' to array of type '+n+'.',i.line,i.column)}return e.map(r)}function u(e){return-1<e.indexOf('.')?'"'+e+'"':e}var p=[],c=[],h='',y={},v=y;return function(e){var t;for(var o in e)switch(t=e[o],t.type){case'Assign':n(t);break;case'ObjectPath':l(t);break;case'ArrayPath':s(t);}return y}(e)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){'use strict';var o=n(3),i=n(49),r=n(1);class l extends i.a{constructor(){super(),this.uuid=null,this.type='span',this.rectangles=[],this.text=null,this.color=null,this.readOnly=!1,this.$element=this.createDummyElement(),window.globalEvent.on('deleteSelectedAnnotation',this.deleteSelectedAnnotation),window.globalEvent.on('enableViewMode',this.enableViewMode)}static newInstance(e){let t=new l;return t.uuid=e.uuid||o.a(),t.rectangles=e.rectangles,t.text=e.text,t.color=e.color,t.readOnly=e.readOnly||!1,t.selectedText=e.selectedText,t.textRange=e.textRange,t.zIndex=e.zIndex||10,t}static newInstanceFromTomlObject(e){let t=e,n=t.position.map((e)=>e.map(parseFloat));t.selectedText=t.text,t.text=t.label,t.textRange=t.textrange,t.rectangles=n.map((e)=>({x:e[0],y:r.a(t.page,e[1]),width:e[2],height:e[3]}));let o=l.newInstance(t);return o}setHoverEvent(){this.$element.find('.anno-knob').hover(this.handleHoverInEvent,this.handleHoverOutEvent)}destroy(){let e=super.destroy();return this.emit('delete'),window.globalEvent.removeListener('deleteSelectedAnnotation',this.deleteSelectedAnnotation),window.globalEvent.removeListener('enableViewMode',this.enableViewMode),e}createAnnotation(){return{uuid:this.uuid,type:this.type,rectangles:this.rectangles,text:this.text,color:this.color,readyOnly:this.readOnly,selectedText:this.selectedText}}getTextPosition(){let e=null;return 0<this.rectangles.length&&(e={x:this.rectangles[0].x+7,y:this.rectangles[0].y-20}),e}deleteSelectedAnnotation(){super.deleteSelectedAnnotation()}handleTextSelected(){this.select()}handleTextDeselected(){this.deselect()}handleTextHoverIn(){this.highlight(),this.emit('hoverin')}handleTextHoverOut(){this.dehighlight(),this.emit('hoverout')}handleTextChanged(e){this.text=e,this.save()}handleHoverInEvent(t){super.handleHoverInEvent(t),this.emit('circlehoverin',this)}handleHoverOutEvent(t){super.handleHoverOutEvent(t),this.emit('circlehoverout',this)}handleClickEvent(t){super.handleClickEvent(t)}enableViewMode(){this.disableViewMode(),super.enableViewMode(),this.readOnly||this.$element.find('.anno-knob').on('click',this.handleClickEvent)}disableViewMode(){super.disableViewMode(),this.$element.find('.anno-knob').off('click')}}t.a=l},function(e,t,n){'use strict';var o=n(52),i=n.n(o),r=n(72),a=n(57);class l extends i.a{static isAnnotation(e){return e&&e.uuid&&e.type}constructor(){super(),this.autoBind(),this.deleted=!1,this.selected=!1,this.selectedTime=null,this.createdAt=new Date().getTime()}autoBind(){Object.getOwnPropertyNames(this.constructor.prototype).filter((e)=>'function'==typeof this[e]).forEach((e)=>{this[e]=this[e].bind(this)})}render(){if(this.$element.remove(),this.deleted)return!1;const e=$('#annoLayer2')[0];return this.$element=$(r.a(e,this)),!this.hoverEventDisable&&this.setHoverEvent&&this.setHoverEvent(),this.selected&&this.$element.addClass('--selected'),this.disabled&&this.disable(),!0}save(){window.annotationContainer.add(this)}destroy(){this.deleted=!0,this.$element.remove();let e=Promise.resolve();return this.uuid&&window.annotationContainer.remove(this),e}isHit(){return!1}handleClickEvent(){if(this.toggleSelect(),'textbox'!==this.type)if(this.selected){let e=document.createEvent('CustomEvent');e.initCustomEvent('annotationSelected',!0,!0,this),window.dispatchEvent(e)}else{let e=document.createEvent('CustomEvent');e.initCustomEvent('annotationDeselected',!0,!0,this),window.dispatchEvent(e)}}handleHoverInEvent(){console.log('handleHoverInEvent'),this.highlight(),this.emit('hoverin'),a.a('annotationHoverIn',this)}handleHoverOutEvent(){console.log('handleHoverOutEvent'),this.dehighlight(),this.emit('hoverout'),a.a('annotationHoverOut',this)}highlight(){this.$element.addClass('--hover')}dehighlight(){this.$element.removeClass('--hover')}select(){this.selected=!0,this.selectedTime=Date.now(),this.$element.addClass('--selected')}deselect(){console.log('deselect'),this.selected=!1,this.selectedTime=null,this.$element.removeClass('--selected')}toggleSelect(){this.selected?this.deselect():this.select()}deleteSelectedAnnotation(){return!!this.isSelected()&&(this.destroy().then(()=>{a.a('annotationDeleted',{uuid:this.uuid})}),!0)}isSelected(){return this.$element.hasClass('--selected')}createDummyElement(){return $('<div class="dummy"/>')}getBoundingCirclePosition(){const e=this.$element.find('.anno-knob');return 0<e.length?{x:parseFloat(e.css('left'))+parseFloat(e.css('width'))/2,y:parseFloat(e.css('top'))+parseFloat(e.css('height'))/2}:null}enableViewMode(){this.render()}disableViewMode(){this.render()}setDisableHoverEvent(){this.hoverEventDisable=!0}setEnableHoverEvent(){this.hoverEventDisable=!1}enable(){this.disabled=!1,this.$element.css('pointer-events','auto')}disable(){this.disabled=!0,this.$element.css('pointer-events','none')}equalTo(){return!1}}t.a=l},function(e,t){'use strict';function n(e,t,n){for(const o=$('.anno-knob');;){let i=!0;if(o.each(function(){var o=Math.pow;const r=$(this),a=parseInt(r.css('left')),l=parseInt(r.css('top')),s=o(e-a,2)+o(t-l,2),d=o(n,2);s<d&&(i=!1)}),i)break;t-=1}return[e,t]}t.b=function({x:e,y:t,readOnly:i}){[e,t]=n(e,t-(o+2),o);let r='anno-knob';return i&&(r+=' is-readonly'),$(`<div class="${r}"/>`).css({top:`${t}px`,left:`${e}px`,width:o+'px',height:o+'px'})};const o=7;t.a=o},function(e,t,n){'use strict';var o=n(3),i=n(49),r=n(56),a=n(2);let l;class s extends i.a{constructor(){super(),l=window.globalEvent,this.uuid=o.a(),this.type='relation',this.direction=null,this.rel1Annotation=null,this.rel2Annotation=null,this.text=null,this.color=null,this.readOnly=!1,this.$element=this.createDummyElement(),this.x1=0,this.y1=0,this.x2=0,this.y2=0,l.on('deleteSelectedAnnotation',this.deleteSelectedAnnotation),l.on('enableViewMode',this.enableViewMode),l.on('rectmoveend',this.handleRelMoveEnd)}static newInstance(e){let t=new s;return t.uuid=e.uuid||o.a(),t.direction=e.direction,t.rel1Annotation=i.a.isAnnotation(e.rel1)?e.rel1:window.annotationContainer.findById(e.rel1),t.rel2Annotation=i.a.isAnnotation(e.rel2)?e.rel2:window.annotationContainer.findById(e.rel2),t.text=e.text,t.color=e.color,t.readOnly=e.readOnly||!1,t.zIndex=e.zIndex||10,t}static newInstanceFromTomlObject(e){e.direction=e.dir,e.text=e.label;let t=s.newInstance(e);return t}setHoverEvent(){this.$element.find('path').hover(this.handleHoverInEvent,this.handleHoverOutEvent)}set rel1Annotation(e){this._rel1Annotation=e,this._rel1Annotation&&(this._rel1Annotation.on('hoverin',this.handleRelHoverIn),this._rel1Annotation.on('hoverout',this.handleRelHoverOut),this._rel1Annotation.on('rectmove',this.handleRelMove),this._rel1Annotation.on('delete',this.handleRelDelete))}get rel1Annotation(){return this._rel1Annotation}set rel2Annotation(e){this._rel2Annotation=e,this._rel2Annotation&&(this._rel2Annotation.on('hoverin',this.handleRelHoverIn),this._rel2Annotation.on('hoverout',this.handleRelHoverOut),this._rel2Annotation.on('rectmove',this.handleRelMove),this._rel2Annotation.on('delete',this.handleRelDelete))}get rel2Annotation(){return this._rel2Annotation}render(){this.setStartEndPosition(),super.render()}createAnnotation(){return{uuid:this.uuid,type:this.type,direction:this.direction,rel1:this._rel1Annotation.uuid,rel2:this._rel2Annotation.uuid,text:this.text,color:this.color,readOnly:this.readOnly}}destroy(){let e=super.destroy();return this._rel1Annotation&&(this._rel1Annotation.removeListener('hoverin',this.handleRelHoverIn),this._rel1Annotation.removeListener('hoverout',this.handleRelHoverOut),this._rel1Annotation.removeListener('rectmove',this.handleRelMove),this._rel1Annotation.removeListener('delete',this.handleRelDelete),delete this._rel1Annotation),this._rel2Annotation&&(this._rel2Annotation.removeListener('hoverin',this.handleRelHoverIn),this._rel2Annotation.removeListener('hoverout',this.handleRelHoverOut),this._rel2Annotation.removeListener('rectmove',this.handleRelMove),this._rel2Annotation.removeListener('delete',this.handleRelDelete),delete this._rel2Annotation),l.removeListener('deleteSelectedAnnotation',this.deleteSelectedAnnotation),l.removeListener('enableViewMode',this.enableViewMode),l.removeListener('rectmoveend',this.handleRelMoveEnd),e}deleteSelectedAnnotation(){super.deleteSelectedAnnotation()}getTextPosition(){return this.setStartEndPosition(),r.b(this.x1,this.y1,this.x2,this.y2,this.text,this.uuid)}highlightRelAnnotations(){this._rel1Annotation&&this._rel1Annotation.highlight(),this._rel2Annotation&&this._rel2Annotation.highlight()}dehighlightRelAnnotations(){this._rel1Annotation&&this._rel1Annotation.dehighlight(),this.rel2Annotation&&this.rel2Annotation.dehighlight()}handleTextSelected(){this.select()}handleTextDeselected(){this.deselect()}handleTextHoverIn(){this.highlight(),this.emit('hoverin'),this.highlightRelAnnotations()}handleTextHoverOut(){this.dehighlight(),this.emit('hoverout'),this.dehighlightRelAnnotations()}handleRelHoverIn(){this.highlight(),this.highlightRelAnnotations()}handleRelHoverOut(){this.dehighlight(),this.dehighlightRelAnnotations()}handleRelDelete(){this.destroy()}handleRelMove(){this.render()}handleRelMoveEnd(e){(this._rel1Annotation===e||this._rel2Annotation===e)&&this.enableViewMode()}handleTextChanged(e){this.text=e,this.save()}handleHoverInEvent(t){super.handleHoverInEvent(t),this.highlightRelAnnotations()}handleHoverOutEvent(t){super.handleHoverOutEvent(t),this.dehighlightRelAnnotations()}handleClickEvent(t){super.handleClickEvent(t)}enableViewMode(){this.disableViewMode(),super.enableViewMode(),this.readOnly||this.$element.find('path').on('click',this.handleClickEvent)}disableViewMode(){super.disableViewMode(),this.$element.find('path').off('click')}setStartEndPosition(){if(this._rel1Annotation){let e=this._rel1Annotation.getBoundingCirclePosition();this.x1=e.x,this.y1=e.y}if(this._rel2Annotation){let e=this._rel2Annotation.getBoundingCirclePosition();this.x2=e.x,this.y2=e.y}}equalTo(e){if(!e||this.type!==e)return!1;const t=a.a(this.rel1Annotation.uuid,[e.rel1Annotation.uuid,e.rel2Annotation.uuid])&&a.a(this.rel2Annotation.uuid,[e.rel1Annotation.uuid,e.rel2Annotation.uuid]);return t}}t.a=s},function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return'function'==typeof e}function o(e){return'number'==typeof e}function r(e){return'object'==typeof e&&null!==e}function a(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError('n must be a positive number');return this._maxListeners=e,this},t.prototype.emit=function(e){var t,o,l,s,d,i;if(this._events||(this._events={}),'error'===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length))if(t=arguments[1],t instanceof Error)throw t;else{var u=new Error('Uncaught, unspecified "error" event. ('+t+')');throw u.context=t,u}if(o=this._events[e],a(o))return!1;if(n(o))switch(arguments.length){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),o.apply(this,s);}else if(r(o))for(s=Array.prototype.slice.call(arguments,1),i=o.slice(),l=i.length,d=0;d<l;d++)i[d].apply(this,s);return!0},t.prototype.addListener=function(e,o){var i;if(!n(o))throw TypeError('listener must be a function');return this._events||(this._events={}),this._events.newListener&&this.emit('newListener',e,n(o.listener)?o.listener:o),this._events[e]?r(this._events[e])?this._events[e].push(o):this._events[e]=[this._events[e],o]:this._events[e]=o,r(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?t.defaultMaxListeners:this._maxListeners,i&&0<i&&this._events[e].length>i&&(this._events[e].warned=!0,console.error('(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.',this._events[e].length),'function'==typeof console.trace&&console.trace())),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){function o(){this.removeListener(e,o),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError('listener must be a function');var i=!1;return o.listener=t,this.on(e,o),this},t.prototype.removeListener=function(e,t){var o,a,l,s;if(!n(t))throw TypeError('listener must be a function');if(!this._events||!this._events[e])return this;if(o=this._events[e],l=o.length,a=-1,o===t||n(o.listener)&&o.listener===t)delete this._events[e],this._events.removeListener&&this.emit('removeListener',e,t);else if(r(o)){for(s=l;0<s--;)if(o[s]===t||o[s].listener&&o[s].listener===t){a=s;break}if(0>a)return this;1===o.length?(o.length=0,delete this._events[e]):o.splice(a,1),this._events.removeListener&&this.emit('removeListener',e,t)}return this},t.prototype.removeAllListeners=function(e){var t,o;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)'removeListener'!==t&&this.removeAllListeners(t);return this.removeAllListeners('removeListener'),this._events={},this}if(o=this._events[e],n(o))this.removeListener(e,o);else if(o)for(;o.length;)this.removeListener(e,o[o.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[],t},t.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},t.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){'use strict';t.d=function(e){2===arguments.length&&(e=arguments[1]);let t={};const n=window.PDFView.pdfViewer.getPageView(0).viewport;return Object.keys(e).forEach((o)=>{t[o]=e[o]/n.scale}),t},t.a=function(){$('body').addClass('disable-text-layer')},t.b=function(){$('body').removeClass('disable-text-layer')},t.c=function(){return $('#annoLayer2')[0].getBoundingClientRect()}},function(e,t){'use strict';t.a=function(e,t=1){let n=e.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i),o=null;return n&&(o=n.slice(1,4).map(function(e){return parseInt(e,16)})),n=e.match(/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i),n&&(o=n.slice(1,4).map(function(e){return 17*parseInt(e,16)})),o?`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${t})`:e}},function(e,t){'use strict';t.a=function(e,t){Object.keys(t).forEach((n)=>{e.setAttribute(i(n),t[n])})};const n=/[A-Z]/g,o=['viewBox'];let i=(e)=>(-1===o.indexOf(e)&&(e=e.replace(n,(e)=>'-'+e.toLowerCase())),e)},function(e,r){'use strict';function a(e,r,a,l){const s=30;if(e===a)return{x:e,y:(r+l)/2};if(r===l)return{x:(e+a)/2,y:r-s};let d={x:(e+a)/2,y:(r+l)/2},u=(r-l)/(e-a);u=-1/u;let p=i(u),c=o(p)*s,h=n(p)*s;return e<a?r>l?{x:d.x-t(c),y:d.y-t(h)}:{x:d.x+t(c),y:d.y-t(h)}:r>l?{x:d.x+t(c),y:d.y-t(h)}:{x:d.x-t(c),y:d.y-t(h)}}r.a=a,r.b=function(e,t,n,o,i='',r=null){let l=[];$('.anno-text').each(function(){let e=$(this);e.parent().data('parent-id')!==r&&l.push({x:parseFloat(e.attr('x')),y:parseFloat(e.attr('y')),width:parseFloat(e.attr('width')),height:parseFloat(e.attr('height'))})});let s=5;for(t<o&&(s*=-1);;){let i=a(e,t,n,o),d=n+.4*(i.x-n),u=o+.4*(i.y-o),r=!0;for(let e=0;e<l.length;e++){let t=l[e],n=t.x,o=t.x+t.width,i=t.y,a=t.y+t.height;if(n<=d+200&&d<=o&&i<=u+15&&u<=a){r=!1;break}}if(r)return{x:d,y:u};t+=s,o+=s}}},function(e,t){'use strict';t.a=function(e,t){var n=document.createEvent('CustomEvent');n.initCustomEvent(e,!0,!0,t),window.dispatchEvent(n)}},function(e,t){'use strict';t.a=function({uuid:e,text:t,disable:n=!1,autoFocus:o=!1,blurListener:i=null}){var r=document.createEvent('CustomEvent');r.initCustomEvent('enableTextInput',!0,!0,...arguments),window.dispatchEvent(r),console.log('dispatchEvent:',r,arguments[0])}},function(e,t,n){'use strict';var o=n(3),i=n(49),r=n(53),a=n(1);let l;class s extends i.a{constructor(){super(),l=window.globalEvent,this.uuid=null,this.type='rect',this.x=0,this.y=0,this.width=0,this.height=0,this.text=null,this.color=null,this.readOnly=!1,this.$element=this.createDummyElement(),l.on('deleteSelectedAnnotation',this.deleteSelectedAnnotation),l.on('enableViewMode',this.enableViewMode)}static newInstance(e){let t=new s;return t.uuid=e.uuid||o.a(),t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t.text=e.text,t.color=e.color,t.readOnly=e.readOnly||!1,t.zIndex=e.zIndex||10,t}static newInstanceFromTomlObject(e){let t=e;t.position=t.position.map(parseFloat),t.x=t.position[0],t.y=a.a(t.page,t.position[1]),t.width=t.position[2],t.height=t.position[3],t.text=t.label;let n=s.newInstance(t);return n}setHoverEvent(){this.$element.find('.anno-rect, .anno-knob').hover(this.handleHoverInEvent,this.handleHoverOutEvent)}destroy(){let e=super.destroy();return this.emit('delete'),window.globalEvent.removeListener('deleteSelectedAnnotation',this.deleteSelectedAnnotation),window.globalEvent.removeListener('enableViewMode',this.enableViewMode),e}createAnnotation(){return{uuid:this.uuid,type:this.type,x:this.x,y:this.y,width:this.width,height:this.height,text:this.text,color:this.color,readyOnly:this.readOnly}}deleteSelectedAnnotation(){super.deleteSelectedAnnotation()}getTextPosition(){return{x:this.x+7,y:this.y-20}}handleTextSelected(){this.select()}handleTextDeselected(){this.deselect()}handleTextHoverIn(){this.highlight(),this.emit('hoverin')}handleTextHoverOut(){this.dehighlight(),this.emit('hoverout')}handleTextChanged(e){console.log('rect:handleTextChanged:',e),this.text=e,this.save()}handleHoverInEvent(t){super.handleHoverInEvent(t);let e=$(t.currentTarget);'circle'===e.prop('tagName')&&this.emit('circlehoverin',this)}handleHoverOutEvent(t){super.handleHoverOutEvent(t);let e=$(t.currentTarget);'circle'===e.prop('tagName')&&this.emit('circlehoverout',this)}handleClickEvent(t){super.handleClickEvent(t)}handleMouseDownOnRect(){console.log('handleMouseDownOnRect'),this.originalX=this.x,this.originalY=this.y,document.addEventListener('mousemove',this.handleMouseMoveOnDocument),document.addEventListener('mouseup',this.handleMouseUpOnDocument),window.globalEvent.emit('rectmovestart'),r.a()}handleMouseMoveOnDocument(t){this._dragging=!0,this.startX||(this.startX=parseInt(t.clientX),this.startY=parseInt(t.clientY)),this.endX=parseInt(t.clientX),this.endY=parseInt(t.clientY);let e=r.d({x:this.endX-this.startX,y:this.endY-this.startY});this.x=this.originalX+e.x,this.y=this.originalY+e.y,this.render(),this.emit('rectmove',this)}handleMouseUpOnDocument(){this._dragging&&(this._dragging=!1,this.originalX=null,this.originalY=null,this.startX=null,this.startY=null,this.endX=null,this.endY=null,this.save(),this.enableViewMode(),l.emit('rectmoveend',this)),document.removeEventListener('mousemove',this.handleMouseMoveOnDocument),document.removeEventListener('mouseup',this.handleMouseUpOnDocument),'rect'!==window.currentType&&r.b()}enableDragAction(){this.$element.find('.anno-rect, circle').off('mousedown',this.handleMouseDownOnRect).on('mousedown',this.handleMouseDownOnRect)}disableDragAction(){this.$element.find('.anno-rect, circle').off('mousedown',this.handleMouseDownOnRect)}enableViewMode(){super.enableViewMode(),this.readOnly||(this.$element.find('.anno-rect, .anno-knob').on('click',this.handleClickEvent),this.enableDragAction())}disableViewMode(){super.disableViewMode(),this.$element.find('.anno-rect, .anno-knob').off('click'),this.disableDragAction()}}t.a=s},,,,,,,function(e,t,n){'use strict';function o(){$('#annoLayer, #annoLayer2').remove()}function i(){if(!window.PDFView.pdfViewer.getPageView(0))return;const e='annoLayer',t='annoLayer2';if(0<$('#'+e).length)return;if(0<$('#'+t).length)return;let n=($('#viewer').width()-$('.page').width())/2;0>n&&(n=9);let o=$('#viewer').height(),i=$('.page').width(),a=$(`<svg id="${e}" class="${e}"/>`).css({position:'absolute',top:'0px',left:`${n}px`,width:`${i}px`,height:`${o}px`,visibility:'hidden',"z-index":2}),l=$(`<div id="${t}"/>`).addClass('annoLayer').css({position:'absolute',top:'0px',left:`${n}px`,width:`${i}px`,height:`${o}px`,visibility:'hidden',"z-index":2});$('#viewer').css({position:'relative'}).append(a).append(l),r()}function r(){const e=window.annotationContainer.getAllAnnotations();0===e.length||(e.forEach((e)=>{e.render(),e.enableViewMode()}),a.b('annotationrendered'))}Object.defineProperty(t,'__esModule',{value:!0});var a=n(2),l=n(52),s=n.n(l),d=n(69),u=n(79);n(67),window.globalEvent=new s.a,t['default']=d.a,window.annotationContainer=new u.a,d.a.UI.enableViewMode(),window.addEventListener('pagerendered',function(e){if(console.log('pagerendered:',e.detail.pageNumber),!!window.PDFView.pdfViewer.getPageView(0)){i();let e=window.PDFView.pdfViewer.getPageView(0).viewport.scale,t=`${9*e}px`,n=`${-9*e}px`;$('.page').css({"border-top-width":t,"border-bottom-width":t,"margin-bottom":n})}}),window.addEventListener('scalechange',()=>{console.log('scalechange'),o(),i()})},function(e,t,n){var o=n(68);'string'==typeof o&&(o=[[e.i,o,'']]);n(7)(o,{});o.locals&&(e.exports=o.locals),!1},function(e,t,n){t=e.exports=n(6)(),t.push([e.i,'@charset "utf-8";\n\n/*\n *  Search UI.\n */\n.pdfanno-search-result {\n    position: absolute;\n    background-color: rgba(0, 255, 0, 0.7)\n}\n.pdfanno-search-result--highlight {\n    background-color: rgba(255, 0, 0, 0.7)\n}\n\n/*\n * Text Layer.\n */\n.pdfanno-text-layer {\n    position: absolute;\n    text-align: center;\n}\n\n/**\n * Annotation Layer.\n */\n.annoLayer > * {\n  opacity: 0.5;\n}\n.annoLayer > *.\\--hover,\n.annoLayer > *.\\--selected {\n  opacity: 1;\n}\n\n/**\n    Annotation Knob for control.\n*/\n.anno-knob {\n    position: absolute;\n    background-color: blue;\n    border-radius: 50%;\n    transition: 0.2s;\n    transform-origin: center center;\n}\n.\\--hover .anno-knob,\n.\\--selected .anno-knob {\n  box-shadow: rgba(113,135,164,.2) 1px 1px 1px;\n  transform: scale(2);\n}\n.anno-knob.is-readonly {\n    border-radius: 0;\n    transform: rotate(45deg) scale(0.7);\n}\n.\\--hover .anno-knob.is-readonly,\n.\\--selected .anno-knob.is-readonly {\n  transform: rotate(45deg) scale(1.4);\n}\n\n/*\n * Span Annotation.\n */\n.anno-span {\n    position: absolute;\n    top: 0;\n    left: 0;\n    visibility: visible;\n}\n.anno-span__area {\n    position: absolute;\n    border: 1px dashed black;\n}\n.\\--hover .anno-span__area,\n.\\--selected .anno-span__area {\n  border: 2px dashed black !important;\n  box-sizing: border-box;\n}\n.anno-span__border {\n    position: absolute;\n    border-bottom-width: 1px;\n    border-bottom-style: solid;\n}\n\n/*TODO Relation\u3092\u63CF\u753B\u3057\u305F\u76F4\u5F8C\u306F\u3001\u4F4D\u7F6E\u304C\u5C11\u3057\u305A\u308C\u308B\u3002\u305D\u306E\u5F8C\u306B\u30D5\u30A9\u30FC\u30AB\u30B9\u304C\u5916\u308C\u308B\u3068\u6B63\u3057\u3044\u4F4D\u7F6E\u3078\u79FB\u52D5\u3059\u308B\u3002*/\n\n/**\n  Relation Annotation.\n*/\n.\\--hover .anno-relation,\n.\\--selected .anno-relation {\n  stroke-width: 2px;\n}\n.anno-relation-outline {\n  fill: none;\n  visibility: hidden;\n}\n.\\--selected .anno-relation-outline {\n  visibility: visible;\n  stroke: black;\n  stroke-width: 4px;\n  pointer-events: stroke;\n  stroke-dasharray: 5;\n}\n\n/**\n * Span Annotation.\n */\n.anno-span rect {\n    /* Enable the hover event on circles and text even if they are overwraped other spans. */\n    pointer-events: none;\n}\n\n/**\n  Rect Annotation.\n*/\n.anno-rect-base {\n    position: absolute;\n    top: 0;\n    left: 0;\n    visibility: visible;\n}\n.anno-rect {\n    position: absolute;\n}\n.\\--hover .anno-rect {\n  box-shadow: 0 0 0 1px #ccc inset;\n  stroke: #ccc;\n  stroke-width: 0.75px;\n}\n.\\--selected .anno-rect {\n  stroke: black;\n  stroke-width: 0.5px;\n  stroke-dasharray: 3;\n}\n\n/**\n Disable text layers.\n*/\nbody.disable-text-layer .textLayer {\n    display: none;\n}\n\n',''])},function(e,t,n){'use strict';var o=n(70),i=n(59),r=n(48),a=n(51);t.a={UI:o.a,RectAnnotation:i.a,SpanAnnotation:r.a,RelationAnnotation:a.a}},function(e,t,n){'use strict';var o=n(71),i=n(77),r=n(78);t.a={createSpan:o.a,getRectangles:o.b,createRelation:i.a,enableViewMode:r.a}},function(n,o,i){'use strict';function r(){return window.PDFView.pdfViewer.getPageView(0).viewport.scale}function a(){try{let e=window.getSelection();if(0===e.rangeCount)return{rects:null,selectedText:null,textRange:null};let t=e.getRangeAt(0),n=t.getClientRects();const o=l(e.anchorNode),i=s(e.anchorNode),r=s(e.focusNode);if(console.log('t:',o,i,r),!o||!i||!r)return{rects:null,selectedText:null,textRange:null};const{text:a,textRange:u}=window.parent.getText(o,i,r);if(console.log('text:',a),console.log('textRange:',u),e.anchorNode&&'DIV'===e.anchorNode.tagName)return{rects:null,selectedText:null,textRange:null};if(0<n.length&&0<n[0].width&&0<n[0].height)return{rects:d(n),selectedText:a,textRange:u}}catch(t){console.log('ERROR:',t)}return{rects:null,selectedText:null,textRange:null}}function l(e){if(e.parentNode.hasAttribute('data-page'))return parseInt(e.parentNode.getAttribute('data-page'),10);return e.hasAttribute('data-page')?parseInt(e.getAttribute('data-page'),10):null}function s(e){if(e.parentNode.hasAttribute('data-index'))return parseInt(e.parentNode.getAttribute('data-index'),10);return e.hasAttribute('data-index')?parseInt(e.getAttribute('data-index'),10):null}function d(t){var n=Math.max;t=u(t);const o=5*r();let a=p(t[0]),l=[a];for(let r=1;r<t.length;r++)c(t[r].top,a.top,o)?(a.top=e(a.top,t[r].top),a.left=e(a.left,t[r].left),a.right=n(a.right,t[r].right),a.bottom=n(a.bottom,t[r].bottom),a.x=a.left,a.y=a.top,a.width=a.right-a.left,a.height=a.bottom-a.top):(a=p(t[r]),l.push(a));return l}function u(e){const n=1.5*r();let o=[e[0]];for(let r=1;r<e.length;r++)t(e[r].left-e[r-1].left)<n||o.push(e[r]);return o}function p(e){return{top:e.top,left:e.left,right:e.right,bottom:e.bottom,x:e.x,y:e.y,width:e.width,height:e.height}}function c(e,t,n){return t-n<=e&&e<=t+n}function h(){let e=window.getSelection();e.removeAllRanges&&e.removeAllRanges(),e.empty&&e.empty()}function y(e,t,n){let{rects:o,selectedText:i,textRange:r}=a();if(h(),!o)return;let l=v.c(),s={rectangles:o.map((e)=>v.d({x:e.left-l.left,y:e.top-l.top,width:e.width,height:e.height})).filter((e)=>0<e.width&&0<e.height&&-1<e.x&&-1<e.y),selectedText:i,text:e,textRange:r,zIndex:t,color:n},d=g.a.newInstance(s);return d.save(),d.render(),d.select(),x.a({uuid:d.uuid,autoFocus:!0,text:e}),d}o.b=function(){let{rects:e}=a();if(!e)return null;const t=v.c();return e=[...e].map((e)=>v.d({x:e.left-t.left,y:e.top-t.top,width:e.width,height:e.height})).filter((e)=>0<e.width&&0<e.height&&-1<e.x&&-1<e.y),e},o.a=function({text:e=null,zIndex:t=10,color:n=null}){return y(e,t,n)};var v=i(53),g=i(48),x=i(58)},function(e,t,n){'use strict';function o(e,t){return e.style.transform=`scale(${t.scale})`,e}t.a=function(e,t,n){n||(n=window.PDFView.pdfViewer.getPageView(0).viewport);let s;switch(t.type){case'rect':s=i.a(t,e);break;case'span':s=r.a(t,e);break;case'textbox':s=a.a(t,e);break;case'relation':s=l.a(t,e);}if(s){let i=o(s,n);'textbox'===t.type?e.appendChild(i):e.append(i)}return s};var i=n(73),r=n(74),a=n(75),l=n(76)},function(e,t,n){'use strict';t.a=function(e){let t=e.color||'#FF0';const n=$('<div class="anno-rect-base"/>');return n.append($('<div class="anno-rect"/>').css({top:`${e.y}px`,left:`${e.x}px`,width:`${e.width}px`,height:`${e.height}px`,border:`1px solid ${t}`,backgroundColor:e.readOnly?'none':i.a(t,.3)})),n.append(o.b(e)),n[0]};var o=n(50),i=n(54)},function(e,t,n){'use strict';function o(e,t,n){if(n)return $('<div class="anno-span__border"/>').css({top:e.y+'px',left:e.x+'px',width:e.width+'px',height:e.height+'px',borderColor:t});else{const n=a.a(t,.4);return $('<div class="anno-span__area"/>').css({top:e.y+'px',left:e.x+'px',width:e.width+'px',height:e.height+'px',backgroundColor:n})}}t.a=function(e){const t=e.readOnly,n=e.color||'#FF0',a=$('<div class="anno-span"/>').css('zIndex',e.zIndex||10);return e.rectangles.forEach((e)=>{a.append(o(e,n,t))}),a.append(i.b({x:e.rectangles[0].x,y:e.rectangles[0].y,readOnly:t})),a[0]};var i=n(50),a=n(54)},function(e,t,n){'use strict';function o(e,t){t.appendChild(e);let n=e.getBoundingClientRect();return e.parentNode.removeChild(e),n}t.a=function(e,t){let n=document.createElementNS('http://www.w3.org/2000/svg','text');i.a(n,{x:e.x,y:e.y+parseInt(r,10),fill:e.color||'#F00',fontSize:r}),n.innerHTML=e.content||e.text;let a=document.createElementNS('http://www.w3.org/2000/svg','rect'),l=o(n,t);i.a(a,{x:e.x-1,y:e.y,width:l.width,height:l.height,fill:'#FFFFFF',class:'anno-text'});let s=document.createElementNS('http://www.w3.org/2000/svg','g');return s.classList.add('anno-text-group'),s.setAttribute('read-only',!0===e.readOnly),s.setAttribute('data-parent-id',e.parentId),s.style.visibility='visible',s.appendChild(a),s.appendChild(n),s};var i=n(55);const r=9.5},function(r,a,l){'use strict';function s(e,t,n,o){const i=50;let r=$('<svg class=""/>').css({position:'absolute',top:`${e-i}px`,left:`${t-i}px`,width:`${n+2*i}px`,height:`${o+2*i}px`,visibility:'hidden',"z-index":2}).attr({x:0,y:0});return[r,i]}a.a=function(r){r.color=r.color||'#F00';let a=i((r.y1-r.y2)/(r.x1-r.x2)),l=r.x1<r.x2?1:-1;r.x1+=u.a*o(a)*l,r.x2-=u.a*o(a)*l,r.y1+=u.a*n(a)*l,r.y2-=u.a*n(a)*l;let c=e(r.y1,r.y2),h=e(r.x1,r.x2),y=t(r.x1-r.x2),v=t(r.y1-r.y2);const[g,x]=s(c,h,y,v);r.x1=r.x1-h+x,r.x2=r.x2-h+x,r.y1=r.y1-c+x,r.y2=r.y2-c+x;let f=document.createElementNS('http://www.w3.org/2000/svg','g');d.a(f,{fill:r.color,stroke:r.color}),f.style.visibility='visible',f.setAttribute('read-only',!0===r.readOnly),g[0].appendChild(f);const b='relationhead'+r.color.replace('#','');if(!document.querySelector('#'+b)){let e=document.createElementNS('http://www.w3.org/2000/svg','marker');d.a(e,{viewBox:'0 0 10 10',markerWidth:2,markerHeight:3,fill:r.color,id:b,orient:'auto-start-reverse'}),e.setAttribute('refX',5),e.setAttribute('refY',5),f.appendChild(e);let t=document.createElementNS('http://www.w3.org/2000/svg','polygon');d.a(t,{points:'0,0 0,10 10,5'}),e.appendChild(t)}let m=p.a(r.x1,r.y1,r.x2,r.y2),A=document.createElementNS('http://www.w3.org/2000/svg','path');d.a(A,{d:`M ${r.x1} ${r.y1} Q ${m.x} ${m.y} ${r.x2} ${r.y2}`,class:'anno-relation-outline'}),f.appendChild(A);let k=document.createElementNS('http://www.w3.org/2000/svg','path');d.a(k,{d:`M ${r.x1} ${r.y1} Q ${m.x} ${m.y} ${r.x2} ${r.y2}`,stroke:r.color,strokeWidth:1,fill:'none',class:'anno-relation'}),('one-way'===r.direction||'two-way'===r.direction)&&k.setAttribute('marker-end',`url(#${b})`),'two-way'===r.direction&&k.setAttribute('marker-start',`url(#${b})`),f.appendChild(k);const w=$('<div/>').css({position:'absolute',top:0,left:0,visibility:'visible'}).addClass('anno-relation');return w.append(g),w[0]};var d=l(55),u=l(50),p=l(56)},function(e,t,n){'use strict';t.a=function({type:e,anno1:t,anno2:n,text:r,color:a}){3===arguments.length&&(e=arguments[0],t=arguments[1],n=arguments[2]);let l=new i.a;return l.direction=e,l.rel1Annotation=t,l.rel2Annotation=n,l.text=r,l.color=a,l.save(),l.render(),window.annotationContainer.getSelectedAnnotations().forEach((e)=>e.deselect()),l.select(),o.a({uuid:l.uuid,autoFocus:!0,text:r}),l};var o=n(58),i=n(51)},function(e,t){'use strict';function n(t){return'input'===t.target.tagName.toLowerCase()?void 0:46===t.keyCode||8===t.keyCode?(t.preventDefault(),'keyup'===t.type&&i(),!1):void 0}function o(){window.annotationContainer.getSelectedAnnotations().forEach((e)=>e.deselect());var e=document.createEvent('CustomEvent');e.initCustomEvent('annotationDeselected',!0,!0,this),window.dispatchEvent(e)}function i(){window.globalEvent.emit('deleteSelectedAnnotation')}t.a=function(){console.log('view:enableViewMode'),document.removeEventListener('keyup',n),document.removeEventListener('keydown',n),document.addEventListener('keyup',n),document.addEventListener('keydown',n),$(document).off('click',o).on('click','.page',o)}},function(e,t,n){'use strict';var o=n(3),i=n(80),r=n(82),a=n(57),l=n(1),s=n(48),u=n(59),p=n(51);t.a=class{constructor(){this.set=new Set}add(e){this.set.add(e),a.a('annotationUpdated')}remove(e){this.set.delete(e),a.a('annotationUpdated')}destroy(){console.log('AnnotationContainer#destroy'),this.set.forEach((e)=>e.destroy()),this.set=new Set}getAllAnnotations(){let e=[];return this.set.forEach((t)=>e.push(t)),e}getSelectedAnnotations(){return this.getAllAnnotations().filter((e)=>e.selected)}findById(e){e+='';let t=null;return this.set.forEach((n)=>{n.uuid===e&&(t=n)}),t}changeColor({text:e,color:t,uuid:n,annoType:o}){if(console.log('changeColor: ',e,t,n),n){const e=this.findById(n);e&&(e.color=t,e.render(),e.enableViewMode())}else this.getAllAnnotations().filter((t)=>t.text===e).filter((e)=>'span'===o?e.type===o:('one-way'===o||'two-way'===o||'link'===o)&&'relation'===e.type&&e.direction===o).forEach((e)=>{e.color=t,e.render(),e.enableViewMode()})}setColor(e){console.log('setColor:',e),Object.keys(e).forEach((t)=>{'default'===t||Object.keys(e[t]).forEach((n)=>{const o=e[t][n];this.changeColor({text:n,color:o,annoType:t})})})}exportData(){return new Promise((e)=>{let t={version:i.a};const n=this.getAllAnnotations().filter((e)=>!e.readOnly);n.sort((e,t)=>e.createdAt-t.createdAt);let o=0;n.forEach((e)=>{if(o++,'span'===e.type){let{pageNumber:n}=l.b(e.rectangles[0].y),i=e.rectangles.map((e)=>{const{y:t}=l.b(e.y);return[e.x,t,e.width,e.height]}),r=(e.selectedText||'').replace(/\r\n/g,' ').replace(/\r/g,' ').replace(/\n/g,' ').replace(/"/g,'').replace(/\\/g,'');t[o]={type:e.type,page:n,position:i,label:e.text||'',text:r,textrange:e.textRange},e.exportId=o}else if('relation'===e.type)t[o]={type:'relation',dir:e.direction,ids:[e.rel1Annotation.exportId,e.rel2Annotation.exportId],label:e.text||''};else if('rect'===e.type){let{pageNumber:n,y:i}=l.b(e.y);t[o]={type:'rect',page:n,position:[e.x,i,e.width,e.height],label:e.text||''},e.exportId=o}}),e(r.b(t))})}importAnnotations(e,t){function n(e,t,n){let o=i.default;return i[t]&&i[t][n]&&(o=i[t][n]),o}const l=!t,i=e.colorMap;return new Promise((t)=>{this.getAllAnnotations().filter((e)=>e.readOnly===l).forEach((e)=>e.destroy()),e.annotations.forEach((e,t)=>{let i=r.a(e);if(i)for(const e in i){let r=i[e];if('object'==typeof r)if(r.uuid=o.a(),r.readOnly=l,'span'===r.type){let e=s.a.newInstanceFromTomlObject(r);e.color=n(t,e.type,e.text),e.save(),e.render(),e.enableViewMode()}else if('rect'===r.type){let e=u.a.newInstanceFromTomlObject(r);e.color=n(t,e.type,e.text),e.save(),e.render(),e.enableViewMode()}else if('relation'===r.type){r.rel1=i[r.ids[0]].uuid,r.rel2=i[r.ids[1]].uuid;let e=p.a.newInstanceFromTomlObject(r);e.color=n(t,e.direction,e.text),e.save(),e.render(),e.enableViewMode()}else console.log('Unknown: ',e,r)}}),t(!0)})}}},function(e,t,n){'use strict';let o=n(81),i=o.version;t.a=i},function(e){e.exports={name:'pdfanno',version:'0.4.0-dev',description:'',main:'index.js',scripts:{_prepare:'gulp prepare',"front:dev":'npm run _prepare && webpack-dev-server --inline',"front:publish:latest":'npm run _prepare && cross-env NODE_ENV=production SERVER_PATH=latest webpack && gulp publish_latest',"front:publish:stable":'npm run _prepare && cross-env NODE_ENV=production SERVER_PATH=0.3.1  webpack && gulp publish_stable',"server:latest":'cross-env NODE_ENV=production NODE_PORT=1001 node server/server.js',"server:stable":'cross-env NODE_ENV=production NODE_PORT=1000 node server/server.js',"server:dev":'cross-env NODE_PORT=3000 ./node_modules/.bin/node-dev server/server.js'},repository:{type:'git',url:'git+https://github.com/paperai/pdfanno'},author:'hshindo, yoheiMune',license:'MIT',bugs:{url:'https://github.com/paperai/pdfanno/issues'},homepage:'https://github.com/paperai/pdfanno#readme',pdfextract:{version:'0.2.2',url:'https://github.com/paperai/pdfextract/releases/download/v0.2.2/pdfextract-0.2.2.jar'},devDependencies:{"babel-cli":'^6.26.0',"babel-core":'^6.26.0',"babel-eslint":'^7.2.3',"babel-helpers":'^6.24.1',"babel-loader":'6.2.4',"babel-messages":'^6.23.0',"babel-minify-webpack-plugin":'^0.3.0',"babel-plugin-add-module-exports":'^0.2.1',"babel-preset-es2015":'^6.24.1',"babel-preset-stage-1":'^6.24.1',copy:'^0.3.0',cpr:'^2.2.0',"cross-env":'^5.0.5',"css-loader":'^0.25.0',"deep-assign":'^2.0.0',eslint:'^3.19.0',"eslint-config-standard":'^6.2.1',"eslint-friendly-formatter":'^2.0.7',"eslint-loader":'^1.7.1',"eslint-plugin-html":'^2.0.0',"eslint-plugin-promise":'^3.5.0',"eslint-plugin-standard":'^2.3.1',"file-loader":'^0.9.0',"fs-extra":'^1.0.0',"fuse.js":'^3.1.0',gulp:'^3.9.1',"gulp-cli":'^1.4.0',"node-dev":'^3.1.3',"style-loader":'^0.13.2',"vinyl-source-stream":'^1.1.0',webpack:'3.0.0',"webpack-dev-server":'^1.16.5'},dependencies:{"anno-ui":'github:paperai/anno-ui#master',axios:'^0.15.2',"body-parser":'^1.17.2',express:'^4.15.4',"json-loader":'^0.5.7',mkdirp:'^0.5.1',"mkdirp-promise":'^5.0.1',multer:'^1.3.0',request:'^2.81.0',"request-promise":'^4.2.2',requirejs:'^2.3.5',"socket.io":'^2.0.4',toml:'github:yoheiMune/toml-node',urijs:'^1.19.0'}}},function(e,t,n){'use strict';function o(e,t=!0){let n=[];if('version'in e&&(n.push(`version = "${e.version}"`),n.push(''),delete e.version),'position'in e){let t=e.position;t=t.map((e)=>'number'==typeof e?e+'':e.map((e)=>e+'')),e.position=t}return Object.keys(e).forEach((r)=>{let a=e[r];'string'==typeof a?(n.push(`${r} = "${a}"`),t&&n.push('')):'number'==typeof a?(n.push(`${r} = ${a}`),t&&n.push('')):i(a)?(n.push(`${r} = ${JSON.stringify(a)}`),t&&n.push('')):'object'==typeof a&&(n.push(`[${r}]`),n.push(o(a,!1)),t&&n.push(''))}),n.join('\n')}function i(e){return e&&'length'in e}t.b=o,t.a=function(t){try{return a.a.parse(t)}catch(n){return console.log('ERROR:',n),console.log('TOML:\n',t),null}};var r=n(11),a=n.n(r)}])});
//# sourceMappingURL=pdfanno.core.bundle.js.map