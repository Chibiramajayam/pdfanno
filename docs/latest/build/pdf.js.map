{"version":3,"sources":["build/pdf.js"],"names":["root","factory","define","amd","exports","pdfjsDistBuildPdf","this","pdfjsFilePath","document","currentScript","src","pdfjsLibs","globalScope","window","global","self","isWorker","PDFJS","version","build","pdfBug","pdfjsSharedGlobal","sharedGlobal","CustomStyle","pdfjsDisplayDOMUtils","prefixes","_cache","getProp","propName","element","arguments","length","prefixed","uPropName","style","documentElement","charAt","toUpperCase","slice","i","l","setProp","str","prop","VERBOSITY_LEVELS","errors","warnings","infos","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","fill","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotations","endAnnotations","beginAnnotation","endAnnotation","paintJpegXObject","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","warn","msg","verbosity","console","log","deprecated","details","error","Error","e","stack","split","join","backtrace","assert","cond","UNSUPPORTED_FEATURES","unknown","forms","javaScript","smask","shadingPattern","font","isValidUrl","url","allowRelative","protocol","exec","toLowerCase","addLinkAttributes","link","params","href","title","removeNullCharacters","isExternalLinkTargetSet","target","LinkTargetStringMap","externalLinkTarget","rel","externalLinkRel","shadow","obj","value","Object","defineProperty","enumerable","configurable","writable","LinkTarget","NONE","SELF","BLANK","PARENT","TOP","openExternalLinksInNewWindow","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","PasswordException","code","name","message","prototype","constructor","UnknownErrorException","InvalidPDFException","MissingPDFException","UnexpectedResponseException","status","NotImplementedException","MissingDataException","begin","end","XRefParseException","NullCharactersRegExp","replace","get","buffer8","Uint8Array","Uint16Array","buffer","canvas","createElement","width","height","getContext","createImageData","data","Uint32ArrayView","byteLength","undefined","uint32ArrayViewSetters","createUint32ArrayProp","ensureUint32ArrayViewProps","create","index","offset","set","Util","rgbBuf","makeCssRgb","r","g","b","m1","m2","applyTransform","p","m","xt","yt","applyInverseTransform","d","getAxialAlignedBoundingBox","p1","p2","p3","p4","Math","min","max","inverseTransform","apply3dTransform","v","singularValueDecompose2dScale","transpose","a","c","first","second","sqrt","sx","sy","normalizeRect","rect","intersect","rect1","rect2","compare","orderedX","sort","orderedY","result","sign","num","ROMAN_NUMBER_MAP","toRoman","number","lowerCase","isInt","pos","romanBuf","push","romanStr","appendToArray","arr1","arr2","Array","apply","prependToArray","unshift","extendObj","obj1","obj2","key","getInheritableProperty","dict","has","inherit","sub","base","loadScript","callback","script","loaded","setAttribute","onload","getElementsByTagName","appendChild","PDFStringTranslateTable","PageViewport","viewBox","scale","rotation","offsetX","offsetY","dontFlip","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","centerX","centerY","abs","fontScale","clone","args","convertToViewportPoint","x","y","convertToViewportRectangle","tl","br","convertToPdfPoint","createPromiseCapability","capability","promise","Promise","resolve","reject","all","iterable","count","results","resolve_","reject_","forEach","then","reason","catch","onReject","STATUS_PENDING","STATUS_REJECTED","HandlerManager","handlers","running","unhandledRejections","pendingRejectionCheck","scheduleHandlers","_status","concat","_handlers","setTimeout","runHandlers","bind","timeoutAt","Date","now","handler","shift","nextStatus","thisPromise","nextValue","_value","onResolve","_unhandledRejection","removeUnhandeledRejection","ex","nextPromise","_updateStatus","addUnhandledRejection","time","scheduleRejectionCheck","splice","unhandled","resolver","call","_resolve","_reject","promises","resolveAll","rejectAll","deferred","unresolved","ii","isPromise","StatTimer","rpad","pad","started","times","enabled","timeEnd","start","toString","out","longest","span","duration","MessageHandler","sourceName","targetName","comObj","callbackIndex","postMessageTransfers","callbacksCapabilities","ah","actionHandler","_onComObjOnMessage","event","isReply","callbackId","action","postMessage","addEventListener","createBlob","contentType","Blob","type","bb","MozBlobBuilder","append","getBlob","createObjectURL","digits","disableCreateObjectURL","URL","blob","b1","b2","b3","d1","d2","d3","d4","on","actionName","scope","send","transfers","sendWithPromise","destroy","removeEventListener","hasWorkingUrl","u","pathname","relative","relativePathDotMapping","EOF","ALPHA","ALPHANUMERIC","jURL","_isInvalid","_url","authority","_username","_password","_isRelative","host","_query","_fragment","clear","parse","_scheme","_port","_host","hostname","port","_path","_schemeData","search","hash","origin","OriginalURL","revokeObjectURL","isRelativeScheme","scheme","invalid","IDNAToASCII","h","percentEscape","unicode","charCodeAt","indexOf","encodeURIComponent","percentEscapeQuery","input","stateOverride","err","state","cursor","seenAt","seenBracket","loop","test","nextC","nextNextC","pop","cp","tempC","temp","parseInt","tmp","String","FONT_IDENTITY_MATRIX","IDENTITY_MATRIX","AnnotationBorderStyleType","SOLID","DASHED","BEVELED","INSET","UNDERLINE","AnnotationFlag","INVISIBLE","HIDDEN","PRINT","NOZOOM","NOROTATE","NOVIEW","READONLY","LOCKED","TOGGLENOVIEW","LOCKEDCONTENTS","AnnotationType","TEXT","LINK","FREETEXT","LINE","SQUARE","CIRCLE","POLYGON","POLYLINE","HIGHLIGHT","SQUIGGLY","STRIKEOUT","STAMP","CARET","INK","POPUP","FILEATTACHMENT","SOUND","MOVIE","WIDGET","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","FontType","UNKNOWN","TYPE1","TYPE1C","CIDFONTTYPE0","CIDFONTTYPE0C","TRUETYPE","CIDFONTTYPE2","TYPE3","OPENTYPE","TYPE0","MMTYPE1","ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","StreamType","FLATE","LZW","DCT","JPX","JBIG","A85","AHX","CCF","RL","TextRenderingMode","FILL","STROKE","FILL_STROKE","FILL_ADD_TO_PATH","STROKE_ADD_TO_PATH","FILL_STROKE_ADD_TO_PATH","ADD_TO_PATH","FILL_STROKE_MASK","ADD_TO_PATH_FLAG","bytesToString","bytes","fromCharCode","strBuf","chunkEnd","chunk","subarray","combineUrl","baseUrl","info","isArray","isArrayBuffer","isBool","isEmptyObj","isNum","isString","loadJpegStream","id","imageUrl","objs","img","Image","onerror","log2","n","readInt8","readUint16","readUint32","string32","stringToBytes","stringToPDFString","stringToUTF8String","decodeURIComponent","escape","utf8StringToString","unescape","pdfjsSharedUtil","sharedUtil","displayDOMUtils","AnnotationElementFactory","parameters","subtype","annotationType","LinkAnnotationElement","TextAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","AnnotationElement","layer","page","viewport","linkService","container","_createContainer","view","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderBottomStyle","color","borderColor","left","top","render","className","_bindNamedAction","_bindLink","dest","destination","getDestinationHash","onclick","navigateTo","getAnchorUrl","executeNamedAction","image","imageResourcesPath","alt","dataset","l10nId","l10nArgs","JSON","stringify","hasPopup","popupElement","PopupElement","trigger","contents","hideWrapper","popup","content","textContent","fieldValue","textAlignment","textAlign","verticalAlign","display","fontRefName","commonObjs","getData","_setTextStyle","fontSize","direction","fontDirection","fontWeight","black","bold","fontStyle","italic","fontFamily","loadedName","fallbackName","selector","parentId","parentElement","querySelector","parentLeft","parseFloat","parentWidth","pinned","wrapper","hideElement","backgroundColor","_formatContents","_toggle","_show","_hide","lines","line","createTextNode","pin","hasAttribute","removeAttribute","zIndex","unpin","AnnotationLayer","annotationElementFactory","annotations","hasHtml","properties","div","update","pdfjsDisplayAnnotationLayer","FontLoader","docId","styleElement","nativeFontFaces","loadTestFontId","loadingContext","requests","nextRequestId","insertRule","rule","styleSheet","sheet","cssRules","parentNode","removeChild","nativeFontFace","fonts","delete","loadTestFont","atob","addNativeFontFace","add","rules","fontsToLoad","fontLoadPromises","getNativeFontPromise","family","attached","loading","isFontLoadingAPISupported","createNativeFontFace","createFontFaceRule","request","queueLoadingCallback","complete","isSyncFontLoadingSupported","prepareFontLoadEvent","context","requestId","otherRequest","int32","spliceString","s","remove","insert","chunk1","substr","chunk2","ctx","called","checksum","btoa","names","body","isFontReady","fillText","imageData","getImageData","supported","userAgent","navigator","FontFaceObject","translatedData","compiledGlyphs","evalSupport","isEvalSupported","Function","disableFontFace","FontFace","fontAdded","fontName","mimetype","getPathGenerator","character","current","len","cmds","js","cmd","size","pdfjsDisplayFontLoader","Metadata","pdfjsDisplayMetadata","meta","codes","chars","substring","fixMetadata","parser","DOMParser","parseFromString","Document","metaDocument","metadata","doc","rdf","nodeName","firstChild","nextSibling","hasChildNodes","desc","entry","iLength","children","childNodes","trim","SVG_DEFAULTS","convertImgDataToPng","SVGExtraState","SVGGraphics","pdfjsDisplaySVG","fillColor","PNG_HEADER","CHUNK_WRAPPER_SIZE","crcTable","Int32Array","writePngChunk","crc","crc32","imgData","kind","bitDepth","colorType","lineSize","literals","offsetLiterals","offsetBytes","ihdr","deflateBlocks","ceil","idat","pi","adler","adler32","pngLength","encode","fontSizeScale","textMatrix","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRise","strokeColor","fillAlpha","strokeAlpha","lineWidth","lineJoin","lineCap","miterLimit","dashArray","dashPhase","dependencies","clipId","pendingClip","maskId","setCurrentPoint","pf","toFixed","pm","acos","PI","transformMatrix","transformStack","extraStack","pendingEOFill","embedFonts","embeddedFonts","cssStyle","NS","XLINK_NS","LINE_CAP_STYLES","LINE_JOIN_STYLES","clipCount","maskCount","old","tgrp","createElementNS","setAttributeNS","pgrp","group","items","executeOpTree","loadDependencies","operatorList","fnArray","fnArrayLen","argsArray","deps","nn","common","f","getSVG","svg","defs","opTree","convertOpList","REVOPS","opList","op","fnId","fn","opListLen","opListToTree","opTreeLen","lineMatrix","xcoords","tspan","txtElement","txtgrp","glyphs","glyphsLength","vertical","widthAdvanceScale","glyph","fontChar","charWidth","map","addFontStyle","fontObj","cgrp","limit","ops","path","opLength","j","xw","yh","clippath","clipElement","cloneNode","getAttributeNS","states","objId","w","imgObj","imgEl","mask","imgSrc","cliprect","matrix","bbox","renderTextLayer","pdfjsDisplayTextLayer","MAX_TEXT_DIVS_TO_RENDER","NonWhitespaceRegexp","appendText","textDivs","geom","styles","textDiv","tx","angle","atan2","fontHeight","fontAscent","ascent","descent","sin","cos","canvasWidth","isWhitespace","task","_canceled","textLayerFrag","_container","_textDivs","_capability","textDivsLength","mozOpaque","lastFontSize","lastFontFamily","alpha","measureText","textScale","TextLayerRenderTask","_textContent","_viewport","_renderTimer","cancel","clearTimeout","_render","timeout","textItems","renderParameters","WebGLUtils","pdfjsDisplayWebGL","loadShader","gl","shaderType","shader","createShader","shaderSource","compileShader","compiled","getShaderParameter","COMPILE_STATUS","errorMsg","getShaderInfoLog","createVertexShader","VERTEX_SHADER","createFragmentShader","FRAGMENT_SHADER","createProgram","shaders","program","attachShader","linkProgram","linked","getProgramParameter","LINK_STATUS","getProgramInfoLog","createTexture","textureId","activeTexture","texture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","currentGL","currentCanvas","generateGL","premultipliedalpha","smaskVertexShaderCode","smaskFragmentShaderCode","smaskCache","figuresVertexShaderCode","figuresFragmentShaderCode","figuresCache","isEnabled","disableWebGL","composeSMask","vertexShader","fragmentShader","useProgram","cache","resolutionLocation","getUniformLocation","positionLocation","getAttribLocation","backdropLocation","subtypeLocation","texCoordLocation","texLayerLocation","texMaskLocation","texCoordBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniform1i","initSmaskGL","drawingBufferWidth","drawingBufferHeight","uniform2f","backdrop","uniform4f","TEXTURE0","maskTexture","TEXTURE1","clearColor","enable","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","COLOR_BUFFER_BIT","drawArrays","TRIANGLES","flush","deleteTexture","deleteBuffer","drawFigures","figures","scaleLocation","offsetLocation","colorLocation","initFiguresGL","rows","coords","verticesPerRow","colors","coordsMap","colorsMap","pIndex","cIndex","figure","ps","cs","cols","row","col","jj","coordsBuffer","colorsBuffer","scaleX","scaleY","displayWebGL","ShadingIRs","RadialAxial","fromIR","raw","colorStops","p0","r0","r1","getPattern","grad","createLinearGradient","createRadialGradient","addColorStop","createMeshCanvas","drawTriangle","c1","c2","c3","rowSize","x1","y1","x2","y2","x3","y3","xa","car","cag","cab","xb","cbr","cbg","cbb","k","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","round","maxY","x1_","x2_","drawFigure","floor","q","bounds","combinesScale","cachedCanvases","tmpCanvas","boundsWidth","boundsHeight","getCanvas","drawImage","tmpCtx","putImageData","Mesh","background","owner","mozCurrentTransform","baseTransform","matrixScale","temporaryPatternCanvas","setTransform","translate","createPattern","Dummy","TilingPattern","PaintType","COLORED","UNCOLORED","IR","canvasGraphicsFactory","xstep","ystep","paintType","tilingType","createPatternCanvas","x0","y0","topLeft","botRight","curMatrixScale","combinedScale","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","setScale","transformToScale","tmpTranslate","clipBbox","executeOperatorList","tmpScale","scaleToContext","bboxWidth","bboxHeight","fillStyle","strokeStyle","cssColor","getShadingPatternFromIR","shadingIR","pdfjsDisplayPatternHelper","displayPatternHelper","FULL_CHUNK_HEIGHT","createScratchCanvas","addContextCurrentTransform","_originalSave","_originalRestore","_originalRotate","rotate","_originalScale","_originalTranslate","_originalTransform","_originalSetTransform","_transformMatrix","_transformStack","ad_bc","bc_ad","prev","cosValue","sinValue","CachedCanvases","trackTransform","canvasEntry","CanvasExtraState","alphaIsShape","textMatrixScale","textRenderingMode","patternFill","activeSMask","CanvasGraphics","canvasCtx","imageLayer","stateStack","res","xobjs","groupStack","processingType3","baseTransformStack","smaskStack","smaskCounter","tempSMask","cachedGetSinglePixelWidth","putBinaryImageData","ImageData","destPos","thisChunkHeight","elemsInThisChunk","partialChunkHeight","fullChunks","totalChunks","chunkImgData","srcPos","srcLength","dest32","hasCanvasTypedArrays","Uint32Array","dest32DataLength","fullSrcDiff","white","isLittleEndian","srcDiff","kEnd","kEndUnrolled","srcByte","putBinaryImageMask","elem","copyCtxState","sourceCtx","destCtx","property","setLineDash","getLineDash","lineDashOffset","mozDashOffset","mozDash","composeSMaskBackdrop","g0","b0","alpha_","composeSMaskAlpha","maskData","layerData","transferMap","composeSMaskLuminosity","layerCtx","maskCtx","composed","composeFn","hasBackdrop","chunkSize","chunkHeight","genericComposeSMask","NORMAL_CLIP","EO_CLIP","beginDrawing","transparency","fillRect","transparentCanvas","compositeCtx","beginLayout","executionStartIdx","continueCallback","stepper","argsArrayLen","chunkOperations","endTime","steps","nextBreakPoint","breakIt","depObjId","objsPool","isResolved","endDrawing","endLayout","intent","flatness","globalAlpha","mode","globalCompositeOperation","endSMaskGroup","beginSMaskGroup","drawnWidth","drawnHeight","cacheId","scratchCanvas","currentCtx","currentTransform","groupCtx","getSinglePixelWidth","bezierCurveTo","consumePath","hasOwnProperty","isPatternFill","needRestore","mozFillRule","paths","pendingTextPaths","beginPath","addToPath","spacing","isType3Font","typeface","browserFontSize","rise","paintChar","fillStrokeMode","isAddToPathSet","strokeText","isFontSubpixelAAEnabled","showType3Text","spacingDir","defaultVMetrics","simpleFillText","scaledX","scaledY","scaledAccentX","scaledAccentY","vmetric","vx","vy","restoreNeeded","isSpace","accent","remeasure","measuredWidth","characterScaleX","spacingLength","isTextInvisible","charProcOperatorList","operatorListId","transformed","xWidth","yWidth","llx","lly","urx","ury","getColorN_Pattern","pattern","patternIR","inv","mozCurrentTransformInverse","bl","ul","ur","isolated","knockout","canvasBounds","imageSmoothingEnabled","mozImageSmoothingEnabled","domImage","position","getCanvasPosition","appendImage","j0","width1","points","POINT_TYPES","data0","sum","outlines","pp","step","o","compileType3Glyph","maskCanvas","positions","images","imgToPaint","widthScale","heightScale","HTMLElement","paintWidth","paintHeight","tmpCanvasId","newWidth","newHeight","clearRect","tag","inverse","pdfjsDisplayCanvas","displayFontLoader","displayCanvas","displayMetadata","amdRequire","useRequireEnsure","module","require","disableWorker","ensure","__webpack_require__","workerSrc","requirejs","toUrl","fakeWorkerFilesLoader","worker","maxImageSize","cMapUrl","cMapPacked","disableRange","disableStream","disableAutoFetch","disableFullscreen","useOnlyCssZoom","maxCanvasPixels","getDocument","pdfDataRangeTransport","passwordCallback","progressCallback","source","PDFDocumentLoadingTask","PDFDataRangeTransport","initialData","abort","range","onPassword","onProgress","rangeTransport","pdfBytes","isNaN","location","rangeChunkSize","PDFWorker","_worker","destroyed","chunkedViewerLoading","messageHandler","workerId","_fetchDocument","transport","WorkerTransport","_transport","nextDocumentId","onUnsupportedFeature","transportDestroyed","onFulfilled","onRejected","_rangeListeners","_progressListeners","_progressiveReadListeners","_readyCapability","addRangeListener","listener","addProgressListener","addProgressiveReadListener","onDataRange","listeners","onDataProgress","onDataProgressiveRead","transportReady","requestDataRange","PDFDocumentProxy","pdfInfo","loadingTask","numPages","fingerprint","getPage","pageNumber","getPageIndex","ref","getDestinations","getDestination","getPageLabels","getAttachments","getJavaScript","getOutline","getMetadata","getDownloadInfo","downloadInfoCapability","getStats","cleanup","startCleanup","PDFPageProxy","pageIndex","pageInfo","stats","enableStats","PDFObjects","cleanupAfterRender","pendingCleanup","intentStates","getViewport","getAnnotations","annotationsPromise","annotationsIntent","renderingIntent","intentState","displayReadyCapability","receivingOperatorList","lastChunk","internalRenderTask","InternalRenderTask","useRequestAnimationFrame","renderTasks","renderTask","onContinue","_tryCleanup","initalizeGraphics","operatorListChanged","getOperatorList","opListReadCapability","opListTask","getTextContent","normalizeWhitespace","_destroy","pageCache","waitOn","keys","renderCompleted","some","_startRenderPage","_renderPageChunk","operatorListChunk","nextFakeWorkerId","getWorkerSrc","_webWorker","_messageHandler","_initialize","Worker","terminate","supportTypedArray","supportTransfers","_setupFakeWorker","sendTest","testObj","fakeWorkerFilesLoadedCapability","loader","setupFakeWorkerGlobal","_listeners","workerHandler","WorkerMessageHandler","setup","fontLoader","destroyCapability","pagePromises","setupMessageHandler","terminated","updatePassword","password","pdfDocument","exception","hasData","exportedData","fontObjs","pageProxy","total","pageNum","featureId","UnsupportedManager","notify","components","rgbaLength","buf","ensureObj","resolved","RenderTask","_internalRenderTask","operatorListIdx","graphicsReadyCallback","graphicsReady","cancelled","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","StepperManager","init","getNextBreakPoint","gfx","canvasContext","updateOperatorList","requestAnimationFrame","listen","cb","pdfjsDisplayAPI"],"mappings":"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","file":"pdf.js","sourcesContent":["/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* jshint globalstrict: false */\n/* umdutils ignore */\n\n(function (root, factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\ndefine('pdfjs-dist/build/pdf', ['exports'], factory);\n  } else if (typeof exports !== 'undefined') {\n    factory(exports);\n  } else {\nfactory((root.pdfjsDistBuildPdf = {}));\n  }\n}(this, function (exports) {\n  // Use strict in our context only - users might not want it\n  'use strict';\n\nvar pdfjsVersion = '1.4.20';\nvar pdfjsBuild = 'b15f335';\n\n  var pdfjsFilePath =\n    typeof document !== 'undefined' && document.currentScript ?\n      document.currentScript.src : null;\n\n  var pdfjsLibs = {};\n\n  (function pdfjsWrapper() {\n\n\n\n(function (root, factory) {\n  {\n    factory((root.pdfjsSharedGlobal = {}));\n  }\n}(this, function (exports) {\n\n  var globalScope = (typeof window !== 'undefined') ? window :\n                    (typeof global !== 'undefined') ? global :\n                    (typeof self !== 'undefined') ? self : this;\n\n  var isWorker = (typeof window === 'undefined');\n\n  // The global PDFJS object exposes the API\n  // In production, it will be declared outside a global wrapper\n  // In development, it will be declared here\n  if (!globalScope.PDFJS) {\n    globalScope.PDFJS = {};\n  }\n\n  if (typeof pdfjsVersion !== 'undefined') {\n    globalScope.PDFJS.version = pdfjsVersion;\n  }\n  if (typeof pdfjsVersion !== 'undefined') {\n    globalScope.PDFJS.build = pdfjsBuild;\n  }\n\n  globalScope.PDFJS.pdfBug = false;\n\n  exports.globalScope = globalScope;\n  exports.isWorker = isWorker;\n  exports.PDFJS = globalScope.PDFJS;\n}));\n\n\n(function (root, factory) {\n  {\n    factory((root.pdfjsDisplayDOMUtils = {}), root.pdfjsSharedGlobal);\n  }\n}(this, function (exports, sharedGlobal) {\n\nvar PDFJS = sharedGlobal.PDFJS;\n\n/**\n * Optimised CSS custom property getter/setter.\n * @class\n */\nvar CustomStyle = (function CustomStyleClosure() {\n\n  // As noted on: http://www.zachstronaut.com/posts/2009/02/17/\n  //              animate-css-transforms-firefox-webkit.html\n  // in some versions of IE9 it is critical that ms appear in this list\n  // before Moz\n  var prefixes = ['ms', 'Moz', 'Webkit', 'O'];\n  var _cache = {};\n\n  function CustomStyle() {}\n\n  CustomStyle.getProp = function get(propName, element) {\n    // check cache only when no element is given\n    if (arguments.length === 1 && typeof _cache[propName] === 'string') {\n      return _cache[propName];\n    }\n\n    element = element || document.documentElement;\n    var style = element.style, prefixed, uPropName;\n\n    // test standard property first\n    if (typeof style[propName] === 'string') {\n      return (_cache[propName] = propName);\n    }\n\n    // capitalize\n    uPropName = propName.charAt(0).toUpperCase() + propName.slice(1);\n\n    // test vendor specific properties\n    for (var i = 0, l = prefixes.length; i < l; i++) {\n      prefixed = prefixes[i] + uPropName;\n      if (typeof style[prefixed] === 'string') {\n        return (_cache[propName] = prefixed);\n      }\n    }\n\n    //if all fails then set to undefined\n    return (_cache[propName] = 'undefined');\n  };\n\n  CustomStyle.setProp = function set(propName, element, str) {\n    var prop = this.getProp(propName);\n    if (prop !== 'undefined') {\n      element.style[prop] = str;\n    }\n  };\n\n  return CustomStyle;\n})();\n\nPDFJS.CustomStyle = CustomStyle;\n\nexports.CustomStyle = CustomStyle;\n}));\n\n\n(function (root, factory) {\n  {\n    factory((root.pdfjsSharedUtil = {}), root.pdfjsSharedGlobal);\n  }\n}(this, function (exports, sharedGlobal) {\n\nvar PDFJS = sharedGlobal.PDFJS;\nvar globalScope = sharedGlobal.globalScope;\n\nvar FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\n\nvar TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\n\nvar ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\n\nvar AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\n\nvar AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\n\nvar AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\n\nvar StreamType = {\n  UNKNOWN: 0,\n  FLATE: 1,\n  LZW: 2,\n  DCT: 3,\n  JPX: 4,\n  JBIG: 5,\n  A85: 6,\n  AHX: 7,\n  CCF: 8,\n  RL: 9\n};\n\nvar FontType = {\n  UNKNOWN: 0,\n  TYPE1: 1,\n  TYPE1C: 2,\n  CIDFONTTYPE0: 3,\n  CIDFONTTYPE0C: 4,\n  TRUETYPE: 5,\n  CIDFONTTYPE2: 6,\n  TYPE3: 7,\n  OPENTYPE: 8,\n  TYPE0: 9,\n  MMTYPE1: 10\n};\n\nPDFJS.VERBOSITY_LEVELS = {\n  errors: 0,\n  warnings: 1,\n  infos: 5\n};\n\n// All the possible operations for an operator list.\nvar OPS = PDFJS.OPS = {\n  // Intentionally start from 1 so it is easy to spot bad operators that will be\n  // 0's.\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotations: 78,\n  endAnnotations: 79,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintJpegXObject: 82,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91\n};\n\n// A notice for devs. These are good for things that are helpful to devs, such\n// as warning that Workers were disabled, which is important to devs but not\n// end users.\nfunction info(msg) {\n  if (PDFJS.verbosity >= PDFJS.VERBOSITY_LEVELS.infos) {\n    console.log('Info: ' + msg);\n  }\n}\n\n// Non-fatal warnings.\nfunction warn(msg) {\n  if (PDFJS.verbosity >= PDFJS.VERBOSITY_LEVELS.warnings) {\n    console.log('Warning: ' + msg);\n  }\n}\n\n// Deprecated API function -- treated as warnings.\nfunction deprecated(details) {\n  warn('Deprecated API usage: ' + details);\n}\n\n// Fatal errors that should trigger the fallback UI and halt execution by\n// throwing an exception.\nfunction error(msg) {\n  if (PDFJS.verbosity >= PDFJS.VERBOSITY_LEVELS.errors) {\n    console.log('Error: ' + msg);\n    console.log(backtrace());\n  }\n  throw new Error(msg);\n}\n\nfunction backtrace() {\n  try {\n    throw new Error();\n  } catch (e) {\n    return e.stack ? e.stack.split('\\n').slice(2).join('\\n') : '';\n  }\n}\n\nfunction assert(cond, msg) {\n  if (!cond) {\n    error(msg);\n  }\n}\n\nvar UNSUPPORTED_FEATURES = PDFJS.UNSUPPORTED_FEATURES = {\n  unknown: 'unknown',\n  forms: 'forms',\n  javaScript: 'javaScript',\n  smask: 'smask',\n  shadingPattern: 'shadingPattern',\n  font: 'font'\n};\n\n// Combines two URLs. The baseUrl shall be absolute URL. If the url is an\n// absolute URL, it will be returned as is.\nfunction combineUrl(baseUrl, url) {\n  if (!url) {\n    return baseUrl;\n  }\n  return new URL(url, baseUrl).href;\n}\n\n// Validates if URL is safe and allowed, e.g. to avoid XSS.\nfunction isValidUrl(url, allowRelative) {\n  if (!url) {\n    return false;\n  }\n  // RFC 3986 (http://tools.ietf.org/html/rfc3986#section-3.1)\n  // scheme = ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n  var protocol = /^[a-z][a-z0-9+\\-.]*(?=:)/i.exec(url);\n  if (!protocol) {\n    return allowRelative;\n  }\n  protocol = protocol[0].toLowerCase();\n  switch (protocol) {\n    case 'http':\n    case 'https':\n    case 'ftp':\n    case 'mailto':\n    case 'tel':\n      return true;\n    default:\n      return false;\n  }\n}\nPDFJS.isValidUrl = isValidUrl;\n\n/**\n * Adds various attributes (href, title, target, rel) to hyperlinks.\n * @param {HTMLLinkElement} link - The link element.\n * @param {Object} params - An object with the properties:\n * @param {string} params.url - An absolute URL.\n */\nfunction addLinkAttributes(link, params) {\n  var url = params && params.url;\n  link.href = link.title = (url ? removeNullCharacters(url) : '');\n\n  if (url) {\n    if (isExternalLinkTargetSet()) {\n      link.target = LinkTargetStringMap[PDFJS.externalLinkTarget];\n    }\n    // Strip referrer from the URL.\n    link.rel = PDFJS.externalLinkRel;\n  }\n}\nPDFJS.addLinkAttributes = addLinkAttributes;\n\nfunction shadow(obj, prop, value) {\n  Object.defineProperty(obj, prop, { value: value,\n                                     enumerable: true,\n                                     configurable: true,\n                                     writable: false });\n  return value;\n}\nPDFJS.shadow = shadow;\n\nvar LinkTarget = PDFJS.LinkTarget = {\n  NONE: 0, // Default value.\n  SELF: 1,\n  BLANK: 2,\n  PARENT: 3,\n  TOP: 4,\n};\nvar LinkTargetStringMap = [\n  '',\n  '_self',\n  '_blank',\n  '_parent',\n  '_top'\n];\n\nfunction isExternalLinkTargetSet() {\n  if (PDFJS.openExternalLinksInNewWindow) {\n    deprecated('PDFJS.openExternalLinksInNewWindow, please use ' +\n               '\"PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK\" instead.');\n    if (PDFJS.externalLinkTarget === LinkTarget.NONE) {\n      PDFJS.externalLinkTarget = LinkTarget.BLANK;\n    }\n    // Reset the deprecated parameter, to suppress further warnings.\n    PDFJS.openExternalLinksInNewWindow = false;\n  }\n  switch (PDFJS.externalLinkTarget) {\n    case LinkTarget.NONE:\n      return false;\n    case LinkTarget.SELF:\n    case LinkTarget.BLANK:\n    case LinkTarget.PARENT:\n    case LinkTarget.TOP:\n      return true;\n  }\n  warn('PDFJS.externalLinkTarget is invalid: ' + PDFJS.externalLinkTarget);\n  // Reset the external link target, to suppress further warnings.\n  PDFJS.externalLinkTarget = LinkTarget.NONE;\n  return false;\n}\nPDFJS.isExternalLinkTargetSet = isExternalLinkTargetSet;\n\nvar PasswordResponses = PDFJS.PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\n\nvar PasswordException = (function PasswordExceptionClosure() {\n  function PasswordException(msg, code) {\n    this.name = 'PasswordException';\n    this.message = msg;\n    this.code = code;\n  }\n\n  PasswordException.prototype = new Error();\n  PasswordException.constructor = PasswordException;\n\n  return PasswordException;\n})();\nPDFJS.PasswordException = PasswordException;\n\nvar UnknownErrorException = (function UnknownErrorExceptionClosure() {\n  function UnknownErrorException(msg, details) {\n    this.name = 'UnknownErrorException';\n    this.message = msg;\n    this.details = details;\n  }\n\n  UnknownErrorException.prototype = new Error();\n  UnknownErrorException.constructor = UnknownErrorException;\n\n  return UnknownErrorException;\n})();\nPDFJS.UnknownErrorException = UnknownErrorException;\n\nvar InvalidPDFException = (function InvalidPDFExceptionClosure() {\n  function InvalidPDFException(msg) {\n    this.name = 'InvalidPDFException';\n    this.message = msg;\n  }\n\n  InvalidPDFException.prototype = new Error();\n  InvalidPDFException.constructor = InvalidPDFException;\n\n  return InvalidPDFException;\n})();\nPDFJS.InvalidPDFException = InvalidPDFException;\n\nvar MissingPDFException = (function MissingPDFExceptionClosure() {\n  function MissingPDFException(msg) {\n    this.name = 'MissingPDFException';\n    this.message = msg;\n  }\n\n  MissingPDFException.prototype = new Error();\n  MissingPDFException.constructor = MissingPDFException;\n\n  return MissingPDFException;\n})();\nPDFJS.MissingPDFException = MissingPDFException;\n\nvar UnexpectedResponseException =\n    (function UnexpectedResponseExceptionClosure() {\n  function UnexpectedResponseException(msg, status) {\n    this.name = 'UnexpectedResponseException';\n    this.message = msg;\n    this.status = status;\n  }\n\n  UnexpectedResponseException.prototype = new Error();\n  UnexpectedResponseException.constructor = UnexpectedResponseException;\n\n  return UnexpectedResponseException;\n})();\nPDFJS.UnexpectedResponseException = UnexpectedResponseException;\n\nvar NotImplementedException = (function NotImplementedExceptionClosure() {\n  function NotImplementedException(msg) {\n    this.message = msg;\n  }\n\n  NotImplementedException.prototype = new Error();\n  NotImplementedException.prototype.name = 'NotImplementedException';\n  NotImplementedException.constructor = NotImplementedException;\n\n  return NotImplementedException;\n})();\n\nvar MissingDataException = (function MissingDataExceptionClosure() {\n  function MissingDataException(begin, end) {\n    this.begin = begin;\n    this.end = end;\n    this.message = 'Missing data [' + begin + ', ' + end + ')';\n  }\n\n  MissingDataException.prototype = new Error();\n  MissingDataException.prototype.name = 'MissingDataException';\n  MissingDataException.constructor = MissingDataException;\n\n  return MissingDataException;\n})();\n\nvar XRefParseException = (function XRefParseExceptionClosure() {\n  function XRefParseException(msg) {\n    this.message = msg;\n  }\n\n  XRefParseException.prototype = new Error();\n  XRefParseException.prototype.name = 'XRefParseException';\n  XRefParseException.constructor = XRefParseException;\n\n  return XRefParseException;\n})();\n\nvar NullCharactersRegExp = /\\x00/g;\n\nfunction removeNullCharacters(str) {\n  if (typeof str !== 'string') {\n    warn('The argument for removeNullCharacters must be a string.');\n    return str;\n  }\n  return str.replace(NullCharactersRegExp, '');\n}\nPDFJS.removeNullCharacters = removeNullCharacters;\n\nfunction bytesToString(bytes) {\n  assert(bytes !== null && typeof bytes === 'object' &&\n         bytes.length !== undefined, 'Invalid argument for bytesToString');\n  var length = bytes.length;\n  var MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  var strBuf = [];\n  for (var i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    var chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    var chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join('');\n}\n\nfunction stringToBytes(str) {\n  assert(typeof str === 'string', 'Invalid argument for stringToBytes');\n  var length = str.length;\n  var bytes = new Uint8Array(length);\n  for (var i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xFF;\n  }\n  return bytes;\n}\n\nfunction string32(value) {\n  return String.fromCharCode((value >> 24) & 0xff, (value >> 16) & 0xff,\n                             (value >> 8) & 0xff, value & 0xff);\n}\n\nfunction log2(x) {\n  var n = 1, i = 0;\n  while (x > n) {\n    n <<= 1;\n    i++;\n  }\n  return i;\n}\n\nfunction readInt8(data, start) {\n  return (data[start] << 24) >> 24;\n}\n\nfunction readUint16(data, offset) {\n  return (data[offset] << 8) | data[offset + 1];\n}\n\nfunction readUint32(data, offset) {\n  return ((data[offset] << 24) | (data[offset + 1] << 16) |\n         (data[offset + 2] << 8) | data[offset + 3]) >>> 0;\n}\n\n// Lazy test the endianness of the platform\n// NOTE: This will be 'true' for simulated TypedArrays\nfunction isLittleEndian() {\n  var buffer8 = new Uint8Array(2);\n  buffer8[0] = 1;\n  var buffer16 = new Uint16Array(buffer8.buffer);\n  return (buffer16[0] === 1);\n}\n\nObject.defineProperty(PDFJS, 'isLittleEndian', {\n  configurable: true,\n  get: function PDFJS_isLittleEndian() {\n    return shadow(PDFJS, 'isLittleEndian', isLittleEndian());\n  }\n});\n\n  // Lazy test if the userAgent support CanvasTypedArrays\nfunction hasCanvasTypedArrays() {\n  var canvas = document.createElement('canvas');\n  canvas.width = canvas.height = 1;\n  var ctx = canvas.getContext('2d');\n  var imageData = ctx.createImageData(1, 1);\n  return (typeof imageData.data.buffer !== 'undefined');\n}\n\nObject.defineProperty(PDFJS, 'hasCanvasTypedArrays', {\n  configurable: true,\n  get: function PDFJS_hasCanvasTypedArrays() {\n    return shadow(PDFJS, 'hasCanvasTypedArrays', hasCanvasTypedArrays());\n  }\n});\n\nvar Uint32ArrayView = (function Uint32ArrayViewClosure() {\n\n  function Uint32ArrayView(buffer, length) {\n    this.buffer = buffer;\n    this.byteLength = buffer.length;\n    this.length = length === undefined ? (this.byteLength >> 2) : length;\n    ensureUint32ArrayViewProps(this.length);\n  }\n  Uint32ArrayView.prototype = Object.create(null);\n\n  var uint32ArrayViewSetters = 0;\n  function createUint32ArrayProp(index) {\n    return {\n      get: function () {\n        var buffer = this.buffer, offset = index << 2;\n        return (buffer[offset] | (buffer[offset + 1] << 8) |\n          (buffer[offset + 2] << 16) | (buffer[offset + 3] << 24)) >>> 0;\n      },\n      set: function (value) {\n        var buffer = this.buffer, offset = index << 2;\n        buffer[offset] = value & 255;\n        buffer[offset + 1] = (value >> 8) & 255;\n        buffer[offset + 2] = (value >> 16) & 255;\n        buffer[offset + 3] = (value >>> 24) & 255;\n      }\n    };\n  }\n\n  function ensureUint32ArrayViewProps(length) {\n    while (uint32ArrayViewSetters < length) {\n      Object.defineProperty(Uint32ArrayView.prototype,\n        uint32ArrayViewSetters,\n        createUint32ArrayProp(uint32ArrayViewSetters));\n      uint32ArrayViewSetters++;\n    }\n  }\n\n  return Uint32ArrayView;\n})();\n\nexports.Uint32ArrayView = Uint32ArrayView;\n\nvar IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\n\nvar Util = PDFJS.Util = (function UtilClosure() {\n  function Util() {}\n\n  var rgbBuf = ['rgb(', 0, ',', 0, ',', 0, ')'];\n\n  // makeCssRgb() can be called thousands of times. Using |rgbBuf| avoids\n  // creating many intermediate strings.\n  Util.makeCssRgb = function Util_makeCssRgb(r, g, b) {\n    rgbBuf[1] = r;\n    rgbBuf[3] = g;\n    rgbBuf[5] = b;\n    return rgbBuf.join('');\n  };\n\n  // Concatenates two transformation matrices together and returns the result.\n  Util.transform = function Util_transform(m1, m2) {\n    return [\n      m1[0] * m2[0] + m1[2] * m2[1],\n      m1[1] * m2[0] + m1[3] * m2[1],\n      m1[0] * m2[2] + m1[2] * m2[3],\n      m1[1] * m2[2] + m1[3] * m2[3],\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5]\n    ];\n  };\n\n  // For 2d affine transforms\n  Util.applyTransform = function Util_applyTransform(p, m) {\n    var xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    var yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  };\n\n  Util.applyInverseTransform = function Util_applyInverseTransform(p, m) {\n    var d = m[0] * m[3] - m[1] * m[2];\n    var xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    var yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  };\n\n  // Applies the transform to the rectangle and finds the minimum axially\n  // aligned bounding box.\n  Util.getAxialAlignedBoundingBox =\n    function Util_getAxialAlignedBoundingBox(r, m) {\n\n    var p1 = Util.applyTransform(r, m);\n    var p2 = Util.applyTransform(r.slice(2, 4), m);\n    var p3 = Util.applyTransform([r[0], r[3]], m);\n    var p4 = Util.applyTransform([r[2], r[1]], m);\n    return [\n      Math.min(p1[0], p2[0], p3[0], p4[0]),\n      Math.min(p1[1], p2[1], p3[1], p4[1]),\n      Math.max(p1[0], p2[0], p3[0], p4[0]),\n      Math.max(p1[1], p2[1], p3[1], p4[1])\n    ];\n  };\n\n  Util.inverseTransform = function Util_inverseTransform(m) {\n    var d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d,\n      (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  };\n\n  // Apply a generic 3d matrix M on a 3-vector v:\n  //   | a b c |   | X |\n  //   | d e f | x | Y |\n  //   | g h i |   | Z |\n  // M is assumed to be serialized as [a,b,c,d,e,f,g,h,i],\n  // with v as [X,Y,Z]\n  Util.apply3dTransform = function Util_apply3dTransform(m, v) {\n    return [\n      m[0] * v[0] + m[1] * v[1] + m[2] * v[2],\n      m[3] * v[0] + m[4] * v[1] + m[5] * v[2],\n      m[6] * v[0] + m[7] * v[1] + m[8] * v[2]\n    ];\n  };\n\n  // This calculation uses Singular Value Decomposition.\n  // The SVD can be represented with formula A = USV. We are interested in the\n  // matrix S here because it represents the scale values.\n  Util.singularValueDecompose2dScale =\n    function Util_singularValueDecompose2dScale(m) {\n\n    var transpose = [m[0], m[2], m[1], m[3]];\n\n    // Multiply matrix m with its transpose.\n    var a = m[0] * transpose[0] + m[1] * transpose[2];\n    var b = m[0] * transpose[1] + m[1] * transpose[3];\n    var c = m[2] * transpose[0] + m[3] * transpose[2];\n    var d = m[2] * transpose[1] + m[3] * transpose[3];\n\n    // Solve the second degree polynomial to get roots.\n    var first = (a + d) / 2;\n    var second = Math.sqrt((a + d) * (a + d) - 4 * (a * d - c * b)) / 2;\n    var sx = first + second || 1;\n    var sy = first - second || 1;\n\n    // Scale values are the square roots of the eigenvalues.\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  };\n\n  // Normalize rectangle rect=[x1, y1, x2, y2] so that (x1,y1) < (x2,y2)\n  // For coordinate systems whose origin lies in the bottom-left, this\n  // means normalization to (BL,TR) ordering. For systems with origin in the\n  // top-left, this means (TL,BR) ordering.\n  Util.normalizeRect = function Util_normalizeRect(rect) {\n    var r = rect.slice(0); // clone rect\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  };\n\n  // Returns a rectangle [x1, y1, x2, y2] corresponding to the\n  // intersection of rect1 and rect2. If no intersection, returns 'false'\n  // The rectangle coordinates of rect1, rect2 should be [x1, y1, x2, y2]\n  Util.intersect = function Util_intersect(rect1, rect2) {\n    function compare(a, b) {\n      return a - b;\n    }\n\n    // Order points along the axes\n    var orderedX = [rect1[0], rect1[2], rect2[0], rect2[2]].sort(compare),\n        orderedY = [rect1[1], rect1[3], rect2[1], rect2[3]].sort(compare),\n        result = [];\n\n    rect1 = Util.normalizeRect(rect1);\n    rect2 = Util.normalizeRect(rect2);\n\n    // X: first and second points belong to different rectangles?\n    if ((orderedX[0] === rect1[0] && orderedX[1] === rect2[0]) ||\n        (orderedX[0] === rect2[0] && orderedX[1] === rect1[0])) {\n      // Intersection must be between second and third points\n      result[0] = orderedX[1];\n      result[2] = orderedX[2];\n    } else {\n      return false;\n    }\n\n    // Y: first and second points belong to different rectangles?\n    if ((orderedY[0] === rect1[1] && orderedY[1] === rect2[1]) ||\n        (orderedY[0] === rect2[1] && orderedY[1] === rect1[1])) {\n      // Intersection must be between second and third points\n      result[1] = orderedY[1];\n      result[3] = orderedY[2];\n    } else {\n      return false;\n    }\n\n    return result;\n  };\n\n  Util.sign = function Util_sign(num) {\n    return num < 0 ? -1 : 1;\n  };\n\n  var ROMAN_NUMBER_MAP = [\n    '', 'C', 'CC', 'CCC', 'CD', 'D', 'DC', 'DCC', 'DCCC', 'CM',\n    '', 'X', 'XX', 'XXX', 'XL', 'L', 'LX', 'LXX', 'LXXX', 'XC',\n    '', 'I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX'\n  ];\n  /**\n   * Converts positive integers to (upper case) Roman numerals.\n   * @param {integer} number - The number that should be converted.\n   * @param {boolean} lowerCase - Indicates if the result should be converted\n   *   to lower case letters. The default is false.\n   * @return {string} The resulting Roman number.\n   */\n  Util.toRoman = function Util_toRoman(number, lowerCase) {\n    assert(isInt(number) && number > 0,\n           'The number should be a positive integer.');\n    var pos, romanBuf = [];\n    // Thousands\n    while (number >= 1000) {\n      number -= 1000;\n      romanBuf.push('M');\n    }\n    // Hundreds\n    pos = (number / 100) | 0;\n    number %= 100;\n    romanBuf.push(ROMAN_NUMBER_MAP[pos]);\n    // Tens\n    pos = (number / 10) | 0;\n    number %= 10;\n    romanBuf.push(ROMAN_NUMBER_MAP[10 + pos]);\n    // Ones\n    romanBuf.push(ROMAN_NUMBER_MAP[20 + number]);\n\n    var romanStr = romanBuf.join('');\n    return (lowerCase ? romanStr.toLowerCase() : romanStr);\n  };\n\n  Util.appendToArray = function Util_appendToArray(arr1, arr2) {\n    Array.prototype.push.apply(arr1, arr2);\n  };\n\n  Util.prependToArray = function Util_prependToArray(arr1, arr2) {\n    Array.prototype.unshift.apply(arr1, arr2);\n  };\n\n  Util.extendObj = function extendObj(obj1, obj2) {\n    for (var key in obj2) {\n      obj1[key] = obj2[key];\n    }\n  };\n\n  Util.getInheritableProperty = function Util_getInheritableProperty(dict,\n                                                                     name) {\n    while (dict && !dict.has(name)) {\n      dict = dict.get('Parent');\n    }\n    if (!dict) {\n      return null;\n    }\n    return dict.get(name);\n  };\n\n  Util.inherit = function Util_inherit(sub, base, prototype) {\n    sub.prototype = Object.create(base.prototype);\n    sub.prototype.constructor = sub;\n    for (var prop in prototype) {\n      sub.prototype[prop] = prototype[prop];\n    }\n  };\n\n  Util.loadScript = function Util_loadScript(src, callback) {\n    var script = document.createElement('script');\n    var loaded = false;\n    script.setAttribute('src', src);\n    if (callback) {\n      script.onload = function() {\n        if (!loaded) {\n          callback();\n        }\n        loaded = true;\n      };\n    }\n    document.getElementsByTagName('head')[0].appendChild(script);\n  };\n\n  return Util;\n})();\n\n/**\n * PDF page viewport created based on scale, rotation and offset.\n * @class\n * @alias PDFJS.PageViewport\n */\nvar PageViewport = PDFJS.PageViewport = (function PageViewportClosure() {\n  /**\n   * @constructor\n   * @private\n   * @param viewBox {Array} xMin, yMin, xMax and yMax coordinates.\n   * @param scale {number} scale of the viewport.\n   * @param rotation {number} rotations of the viewport in degrees.\n   * @param offsetX {number} offset X\n   * @param offsetY {number} offset Y\n   * @param dontFlip {boolean} if true, axis Y will not be flipped.\n   */\n  function PageViewport(viewBox, scale, rotation, offsetX, offsetY, dontFlip) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n\n    // creating transform to convert pdf coordinate system to the normal\n    // canvas like coordinates taking in account scale and rotation\n    var centerX = (viewBox[2] + viewBox[0]) / 2;\n    var centerY = (viewBox[3] + viewBox[1]) / 2;\n    var rotateA, rotateB, rotateC, rotateD;\n    rotation = rotation % 360;\n    rotation = rotation < 0 ? rotation + 360 : rotation;\n    switch (rotation) {\n      case 180:\n        rotateA = -1; rotateB = 0; rotateC = 0; rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0; rotateB = 1; rotateC = 1; rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0; rotateB = -1; rotateC = -1; rotateD = 0;\n        break;\n      //case 0:\n      default:\n        rotateA = 1; rotateB = 0; rotateC = 0; rotateD = -1;\n        break;\n    }\n\n    if (dontFlip) {\n      rotateC = -rotateC; rotateD = -rotateD;\n    }\n\n    var offsetCanvasX, offsetCanvasY;\n    var width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = Math.abs(viewBox[3] - viewBox[1]) * scale;\n      height = Math.abs(viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = Math.abs(viewBox[2] - viewBox[0]) * scale;\n      height = Math.abs(viewBox[3] - viewBox[1]) * scale;\n    }\n    // creating transform for the following operations:\n    // translate(-centerX, -centerY), rotate and flip vertically,\n    // scale, and translate(offsetCanvasX, offsetCanvasY)\n    this.transform = [\n      rotateA * scale,\n      rotateB * scale,\n      rotateC * scale,\n      rotateD * scale,\n      offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY,\n      offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY\n    ];\n\n    this.width = width;\n    this.height = height;\n    this.fontScale = scale;\n  }\n  PageViewport.prototype = /** @lends PDFJS.PageViewport.prototype */ {\n    /**\n     * Clones viewport with additional properties.\n     * @param args {Object} (optional) If specified, may contain the 'scale' or\n     * 'rotation' properties to override the corresponding properties in\n     * the cloned viewport.\n     * @returns {PDFJS.PageViewport} Cloned viewport.\n     */\n    clone: function PageViewPort_clone(args) {\n      args = args || {};\n      var scale = 'scale' in args ? args.scale : this.scale;\n      var rotation = 'rotation' in args ? args.rotation : this.rotation;\n      return new PageViewport(this.viewBox.slice(), scale, rotation,\n                              this.offsetX, this.offsetY, args.dontFlip);\n    },\n    /**\n     * Converts PDF point to the viewport coordinates. For examples, useful for\n     * converting PDF location into canvas pixel coordinates.\n     * @param x {number} X coordinate.\n     * @param y {number} Y coordinate.\n     * @returns {Object} Object that contains 'x' and 'y' properties of the\n     * point in the viewport coordinate space.\n     * @see {@link convertToPdfPoint}\n     * @see {@link convertToViewportRectangle}\n     */\n    convertToViewportPoint: function PageViewport_convertToViewportPoint(x, y) {\n      return Util.applyTransform([x, y], this.transform);\n    },\n    /**\n     * Converts PDF rectangle to the viewport coordinates.\n     * @param rect {Array} xMin, yMin, xMax and yMax coordinates.\n     * @returns {Array} Contains corresponding coordinates of the rectangle\n     * in the viewport coordinate space.\n     * @see {@link convertToViewportPoint}\n     */\n    convertToViewportRectangle:\n      function PageViewport_convertToViewportRectangle(rect) {\n      var tl = Util.applyTransform([rect[0], rect[1]], this.transform);\n      var br = Util.applyTransform([rect[2], rect[3]], this.transform);\n      return [tl[0], tl[1], br[0], br[1]];\n    },\n    /**\n     * Converts viewport coordinates to the PDF location. For examples, useful\n     * for converting canvas pixel location into PDF one.\n     * @param x {number} X coordinate.\n     * @param y {number} Y coordinate.\n     * @returns {Object} Object that contains 'x' and 'y' properties of the\n     * point in the PDF coordinate space.\n     * @see {@link convertToViewportPoint}\n     */\n    convertToPdfPoint: function PageViewport_convertToPdfPoint(x, y) {\n      return Util.applyInverseTransform([x, y], this.transform);\n    }\n  };\n  return PageViewport;\n})();\n\nvar PDFStringTranslateTable = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0x2D8, 0x2C7, 0x2C6, 0x2D9, 0x2DD, 0x2DB, 0x2DA, 0x2DC, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014,\n  0x2013, 0x192, 0x2044, 0x2039, 0x203A, 0x2212, 0x2030, 0x201E, 0x201C,\n  0x201D, 0x2018, 0x2019, 0x201A, 0x2122, 0xFB01, 0xFB02, 0x141, 0x152, 0x160,\n  0x178, 0x17D, 0x131, 0x142, 0x153, 0x161, 0x17E, 0, 0x20AC\n];\n\nfunction stringToPDFString(str) {\n  var i, n = str.length, strBuf = [];\n  if (str[0] === '\\xFE' && str[1] === '\\xFF') {\n    // UTF16BE BOM\n    for (i = 2; i < n; i += 2) {\n      strBuf.push(String.fromCharCode(\n        (str.charCodeAt(i) << 8) | str.charCodeAt(i + 1)));\n    }\n  } else {\n    for (i = 0; i < n; ++i) {\n      var code = PDFStringTranslateTable[str.charCodeAt(i)];\n      strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n    }\n  }\n  return strBuf.join('');\n}\n\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\n\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\n\nfunction isEmptyObj(obj) {\n  for (var key in obj) {\n    return false;\n  }\n  return true;\n}\n\nfunction isBool(v) {\n  return typeof v === 'boolean';\n}\n\nfunction isInt(v) {\n  return typeof v === 'number' && ((v | 0) === v);\n}\n\nfunction isNum(v) {\n  return typeof v === 'number';\n}\n\nfunction isString(v) {\n  return typeof v === 'string';\n}\n\nfunction isArray(v) {\n  return v instanceof Array;\n}\n\nfunction isArrayBuffer(v) {\n  return typeof v === 'object' && v !== null && v.byteLength !== undefined;\n}\n\n/**\n * Promise Capability object.\n *\n * @typedef {Object} PromiseCapability\n * @property {Promise} promise - A promise object.\n * @property {function} resolve - Fullfills the promise.\n * @property {function} reject - Rejects the promise.\n */\n\n/**\n * Creates a promise capability object.\n * @alias PDFJS.createPromiseCapability\n *\n * @return {PromiseCapability} A capability object contains:\n * - a Promise, resolve and reject methods.\n */\nfunction createPromiseCapability() {\n  var capability = {};\n  capability.promise = new Promise(function (resolve, reject) {\n    capability.resolve = resolve;\n    capability.reject = reject;\n  });\n  return capability;\n}\n\nPDFJS.createPromiseCapability = createPromiseCapability;\n\n/**\n * Polyfill for Promises:\n * The following promise implementation tries to generally implement the\n * Promise/A+ spec. Some notable differences from other promise libaries are:\n * - There currently isn't a seperate deferred and promise object.\n * - Unhandled rejections eventually show an error if they aren't handled.\n *\n * Based off of the work in:\n * https://bugzilla.mozilla.org/show_bug.cgi?id=810490\n */\n(function PromiseClosure() {\n  if (globalScope.Promise) {\n    // Promises existing in the DOM/Worker, checking presence of all/resolve\n    if (typeof globalScope.Promise.all !== 'function') {\n      globalScope.Promise.all = function (iterable) {\n        var count = 0, results = [], resolve, reject;\n        var promise = new globalScope.Promise(function (resolve_, reject_) {\n          resolve = resolve_;\n          reject = reject_;\n        });\n        iterable.forEach(function (p, i) {\n          count++;\n          p.then(function (result) {\n            results[i] = result;\n            count--;\n            if (count === 0) {\n              resolve(results);\n            }\n          }, reject);\n        });\n        if (count === 0) {\n          resolve(results);\n        }\n        return promise;\n      };\n    }\n    if (typeof globalScope.Promise.resolve !== 'function') {\n      globalScope.Promise.resolve = function (value) {\n        return new globalScope.Promise(function (resolve) { resolve(value); });\n      };\n    }\n    if (typeof globalScope.Promise.reject !== 'function') {\n      globalScope.Promise.reject = function (reason) {\n        return new globalScope.Promise(function (resolve, reject) {\n          reject(reason);\n        });\n      };\n    }\n    if (typeof globalScope.Promise.prototype.catch !== 'function') {\n      globalScope.Promise.prototype.catch = function (onReject) {\n        return globalScope.Promise.prototype.then(undefined, onReject);\n      };\n    }\n    return;\n  }\n  var STATUS_PENDING = 0;\n  var STATUS_RESOLVED = 1;\n  var STATUS_REJECTED = 2;\n\n  // In an attempt to avoid silent exceptions, unhandled rejections are\n  // tracked and if they aren't handled in a certain amount of time an\n  // error is logged.\n  var REJECTION_TIMEOUT = 500;\n\n  var HandlerManager = {\n    handlers: [],\n    running: false,\n    unhandledRejections: [],\n    pendingRejectionCheck: false,\n\n    scheduleHandlers: function scheduleHandlers(promise) {\n      if (promise._status === STATUS_PENDING) {\n        return;\n      }\n\n      this.handlers = this.handlers.concat(promise._handlers);\n      promise._handlers = [];\n\n      if (this.running) {\n        return;\n      }\n      this.running = true;\n\n      setTimeout(this.runHandlers.bind(this), 0);\n    },\n\n    runHandlers: function runHandlers() {\n      var RUN_TIMEOUT = 1; // ms\n      var timeoutAt = Date.now() + RUN_TIMEOUT;\n      while (this.handlers.length > 0) {\n        var handler = this.handlers.shift();\n\n        var nextStatus = handler.thisPromise._status;\n        var nextValue = handler.thisPromise._value;\n\n        try {\n          if (nextStatus === STATUS_RESOLVED) {\n            if (typeof handler.onResolve === 'function') {\n              nextValue = handler.onResolve(nextValue);\n            }\n          } else if (typeof handler.onReject === 'function') {\n              nextValue = handler.onReject(nextValue);\n              nextStatus = STATUS_RESOLVED;\n\n              if (handler.thisPromise._unhandledRejection) {\n                this.removeUnhandeledRejection(handler.thisPromise);\n              }\n          }\n        } catch (ex) {\n          nextStatus = STATUS_REJECTED;\n          nextValue = ex;\n        }\n\n        handler.nextPromise._updateStatus(nextStatus, nextValue);\n        if (Date.now() >= timeoutAt) {\n          break;\n        }\n      }\n\n      if (this.handlers.length > 0) {\n        setTimeout(this.runHandlers.bind(this), 0);\n        return;\n      }\n\n      this.running = false;\n    },\n\n    addUnhandledRejection: function addUnhandledRejection(promise) {\n      this.unhandledRejections.push({\n        promise: promise,\n        time: Date.now()\n      });\n      this.scheduleRejectionCheck();\n    },\n\n    removeUnhandeledRejection: function removeUnhandeledRejection(promise) {\n      promise._unhandledRejection = false;\n      for (var i = 0; i < this.unhandledRejections.length; i++) {\n        if (this.unhandledRejections[i].promise === promise) {\n          this.unhandledRejections.splice(i);\n          i--;\n        }\n      }\n    },\n\n    scheduleRejectionCheck: function scheduleRejectionCheck() {\n      if (this.pendingRejectionCheck) {\n        return;\n      }\n      this.pendingRejectionCheck = true;\n      setTimeout(function rejectionCheck() {\n        this.pendingRejectionCheck = false;\n        var now = Date.now();\n        for (var i = 0; i < this.unhandledRejections.length; i++) {\n          if (now - this.unhandledRejections[i].time > REJECTION_TIMEOUT) {\n            var unhandled = this.unhandledRejections[i].promise._value;\n            var msg = 'Unhandled rejection: ' + unhandled;\n            if (unhandled.stack) {\n              msg += '\\n' + unhandled.stack;\n            }\n            warn(msg);\n            this.unhandledRejections.splice(i);\n            i--;\n          }\n        }\n        if (this.unhandledRejections.length) {\n          this.scheduleRejectionCheck();\n        }\n      }.bind(this), REJECTION_TIMEOUT);\n    }\n  };\n\n  function Promise(resolver) {\n    this._status = STATUS_PENDING;\n    this._handlers = [];\n    try {\n      resolver.call(this, this._resolve.bind(this), this._reject.bind(this));\n    } catch (e) {\n      this._reject(e);\n    }\n  }\n  /**\n   * Builds a promise that is resolved when all the passed in promises are\n   * resolved.\n   * @param {array} array of data and/or promises to wait for.\n   * @return {Promise} New dependant promise.\n   */\n  Promise.all = function Promise_all(promises) {\n    var resolveAll, rejectAll;\n    var deferred = new Promise(function (resolve, reject) {\n      resolveAll = resolve;\n      rejectAll = reject;\n    });\n    var unresolved = promises.length;\n    var results = [];\n    if (unresolved === 0) {\n      resolveAll(results);\n      return deferred;\n    }\n    function reject(reason) {\n      if (deferred._status === STATUS_REJECTED) {\n        return;\n      }\n      results = [];\n      rejectAll(reason);\n    }\n    for (var i = 0, ii = promises.length; i < ii; ++i) {\n      var promise = promises[i];\n      var resolve = (function(i) {\n        return function(value) {\n          if (deferred._status === STATUS_REJECTED) {\n            return;\n          }\n          results[i] = value;\n          unresolved--;\n          if (unresolved === 0) {\n            resolveAll(results);\n          }\n        };\n      })(i);\n      if (Promise.isPromise(promise)) {\n        promise.then(resolve, reject);\n      } else {\n        resolve(promise);\n      }\n    }\n    return deferred;\n  };\n\n  /**\n   * Checks if the value is likely a promise (has a 'then' function).\n   * @return {boolean} true if value is thenable\n   */\n  Promise.isPromise = function Promise_isPromise(value) {\n    return value && typeof value.then === 'function';\n  };\n\n  /**\n   * Creates resolved promise\n   * @param value resolve value\n   * @returns {Promise}\n   */\n  Promise.resolve = function Promise_resolve(value) {\n    return new Promise(function (resolve) { resolve(value); });\n  };\n\n  /**\n   * Creates rejected promise\n   * @param reason rejection value\n   * @returns {Promise}\n   */\n  Promise.reject = function Promise_reject(reason) {\n    return new Promise(function (resolve, reject) { reject(reason); });\n  };\n\n  Promise.prototype = {\n    _status: null,\n    _value: null,\n    _handlers: null,\n    _unhandledRejection: null,\n\n    _updateStatus: function Promise__updateStatus(status, value) {\n      if (this._status === STATUS_RESOLVED ||\n          this._status === STATUS_REJECTED) {\n        return;\n      }\n\n      if (status === STATUS_RESOLVED &&\n          Promise.isPromise(value)) {\n        value.then(this._updateStatus.bind(this, STATUS_RESOLVED),\n                   this._updateStatus.bind(this, STATUS_REJECTED));\n        return;\n      }\n\n      this._status = status;\n      this._value = value;\n\n      if (status === STATUS_REJECTED && this._handlers.length === 0) {\n        this._unhandledRejection = true;\n        HandlerManager.addUnhandledRejection(this);\n      }\n\n      HandlerManager.scheduleHandlers(this);\n    },\n\n    _resolve: function Promise_resolve(value) {\n      this._updateStatus(STATUS_RESOLVED, value);\n    },\n\n    _reject: function Promise_reject(reason) {\n      this._updateStatus(STATUS_REJECTED, reason);\n    },\n\n    then: function Promise_then(onResolve, onReject) {\n      var nextPromise = new Promise(function (resolve, reject) {\n        this.resolve = resolve;\n        this.reject = reject;\n      });\n      this._handlers.push({\n        thisPromise: this,\n        onResolve: onResolve,\n        onReject: onReject,\n        nextPromise: nextPromise\n      });\n      HandlerManager.scheduleHandlers(this);\n      return nextPromise;\n    },\n\n    catch: function Promise_catch(onReject) {\n      return this.then(undefined, onReject);\n    }\n  };\n\n  globalScope.Promise = Promise;\n})();\n\nvar StatTimer = (function StatTimerClosure() {\n  function rpad(str, pad, length) {\n    while (str.length < length) {\n      str += pad;\n    }\n    return str;\n  }\n  function StatTimer() {\n    this.started = {};\n    this.times = [];\n    this.enabled = true;\n  }\n  StatTimer.prototype = {\n    time: function StatTimer_time(name) {\n      if (!this.enabled) {\n        return;\n      }\n      if (name in this.started) {\n        warn('Timer is already running for ' + name);\n      }\n      this.started[name] = Date.now();\n    },\n    timeEnd: function StatTimer_timeEnd(name) {\n      if (!this.enabled) {\n        return;\n      }\n      if (!(name in this.started)) {\n        warn('Timer has not been started for ' + name);\n      }\n      this.times.push({\n        'name': name,\n        'start': this.started[name],\n        'end': Date.now()\n      });\n      // Remove timer from started so it can be called again.\n      delete this.started[name];\n    },\n    toString: function StatTimer_toString() {\n      var i, ii;\n      var times = this.times;\n      var out = '';\n      // Find the longest name for padding purposes.\n      var longest = 0;\n      for (i = 0, ii = times.length; i < ii; ++i) {\n        var name = times[i]['name'];\n        if (name.length > longest) {\n          longest = name.length;\n        }\n      }\n      for (i = 0, ii = times.length; i < ii; ++i) {\n        var span = times[i];\n        var duration = span.end - span.start;\n        out += rpad(span['name'], ' ', longest) + ' ' + duration + 'ms\\n';\n      }\n      return out;\n    }\n  };\n  return StatTimer;\n})();\n\nPDFJS.createBlob = function createBlob(data, contentType) {\n  if (typeof Blob !== 'undefined') {\n    return new Blob([data], { type: contentType });\n  }\n  // Blob builder is deprecated in FF14 and removed in FF18.\n  var bb = new MozBlobBuilder();\n  bb.append(data);\n  return bb.getBlob(contentType);\n};\n\nPDFJS.createObjectURL = (function createObjectURLClosure() {\n  // Blob/createObjectURL is not available, falling back to data schema.\n  var digits =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n  return function createObjectURL(data, contentType) {\n    if (!PDFJS.disableCreateObjectURL &&\n        typeof URL !== 'undefined' && URL.createObjectURL) {\n      var blob = PDFJS.createBlob(data, contentType);\n      return URL.createObjectURL(blob);\n    }\n\n    var buffer = 'data:' + contentType + ';base64,';\n    for (var i = 0, ii = data.length; i < ii; i += 3) {\n      var b1 = data[i] & 0xFF;\n      var b2 = data[i + 1] & 0xFF;\n      var b3 = data[i + 2] & 0xFF;\n      var d1 = b1 >> 2, d2 = ((b1 & 3) << 4) | (b2 >> 4);\n      var d3 = i + 1 < ii ? ((b2 & 0xF) << 2) | (b3 >> 6) : 64;\n      var d4 = i + 2 < ii ? (b3 & 0x3F) : 64;\n      buffer += digits[d1] + digits[d2] + digits[d3] + digits[d4];\n    }\n    return buffer;\n  };\n})();\n\nfunction MessageHandler(sourceName, targetName, comObj) {\n  this.sourceName = sourceName;\n  this.targetName = targetName;\n  this.comObj = comObj;\n  this.callbackIndex = 1;\n  this.postMessageTransfers = true;\n  var callbacksCapabilities = this.callbacksCapabilities = {};\n  var ah = this.actionHandler = {};\n\n  this._onComObjOnMessage = function messageHandlerComObjOnMessage(event) {\n    var data = event.data;\n    if (data.targetName !== this.sourceName) {\n      return;\n    }\n    if (data.isReply) {\n      var callbackId = data.callbackId;\n      if (data.callbackId in callbacksCapabilities) {\n        var callback = callbacksCapabilities[callbackId];\n        delete callbacksCapabilities[callbackId];\n        if ('error' in data) {\n          callback.reject(data.error);\n        } else {\n          callback.resolve(data.data);\n        }\n      } else {\n        error('Cannot resolve callback ' + callbackId);\n      }\n    } else if (data.action in ah) {\n      var action = ah[data.action];\n      if (data.callbackId) {\n        var sourceName = this.sourceName;\n        var targetName = data.sourceName;\n        Promise.resolve().then(function () {\n          return action[0].call(action[1], data.data);\n        }).then(function (result) {\n          comObj.postMessage({\n            sourceName: sourceName,\n            targetName: targetName,\n            isReply: true,\n            callbackId: data.callbackId,\n            data: result\n          });\n        }, function (reason) {\n          if (reason instanceof Error) {\n            // Serialize error to avoid \"DataCloneError\"\n            reason = reason + '';\n          }\n          comObj.postMessage({\n            sourceName: sourceName,\n            targetName: targetName,\n            isReply: true,\n            callbackId: data.callbackId,\n            error: reason\n          });\n        });\n      } else {\n        action[0].call(action[1], data.data);\n      }\n    } else {\n      error('Unknown action from worker: ' + data.action);\n    }\n  }.bind(this);\n  comObj.addEventListener('message', this._onComObjOnMessage);\n}\n\nMessageHandler.prototype = {\n  on: function messageHandlerOn(actionName, handler, scope) {\n    var ah = this.actionHandler;\n    if (ah[actionName]) {\n      error('There is already an actionName called \"' + actionName + '\"');\n    }\n    ah[actionName] = [handler, scope];\n  },\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * @param {String} actionName Action to call.\n   * @param {JSON} data JSON data to send.\n   * @param {Array} [transfers] Optional list of transfers/ArrayBuffers\n   */\n  send: function messageHandlerSend(actionName, data, transfers) {\n    var message = {\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data: data\n    };\n    this.postMessage(message, transfers);\n  },\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expects that other side will callback with the response.\n   * @param {String} actionName Action to call.\n   * @param {JSON} data JSON data to send.\n   * @param {Array} [transfers] Optional list of transfers/ArrayBuffers.\n   * @returns {Promise} Promise to be resolved with response data.\n   */\n  sendWithPromise:\n    function messageHandlerSendWithPromise(actionName, data, transfers) {\n    var callbackId = this.callbackIndex++;\n    var message = {\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data: data,\n      callbackId: callbackId\n    };\n    var capability = createPromiseCapability();\n    this.callbacksCapabilities[callbackId] = capability;\n    try {\n      this.postMessage(message, transfers);\n    } catch (e) {\n      capability.reject(e);\n    }\n    return capability.promise;\n  },\n  /**\n   * Sends raw message to the comObj.\n   * @private\n   * @param message {Object} Raw message.\n   * @param transfers List of transfers/ArrayBuffers, or undefined.\n   */\n  postMessage: function (message, transfers) {\n    if (transfers && this.postMessageTransfers) {\n      this.comObj.postMessage(message, transfers);\n    } else {\n      this.comObj.postMessage(message);\n    }\n  },\n\n  destroy: function () {\n    this.comObj.removeEventListener('message', this._onComObjOnMessage);\n  }\n};\n\nfunction loadJpegStream(id, imageUrl, objs) {\n  var img = new Image();\n  img.onload = (function loadJpegStream_onloadClosure() {\n    objs.resolve(id, img);\n  });\n  img.onerror = (function loadJpegStream_onerrorClosure() {\n    objs.resolve(id, null);\n    warn('Error during JPEG image loading');\n  });\n  img.src = imageUrl;\n}\n\n  // Polyfill from https://github.com/Polymer/URL\n/* Any copyright is dedicated to the Public Domain.\n * http://creativecommons.org/publicdomain/zero/1.0/ */\n(function checkURLConstructor(scope) {\n  /* jshint ignore:start */\n\n  // feature detect for URL constructor\n  var hasWorkingUrl = false;\n  try {\n    if (typeof URL === 'function' &&\n        typeof URL.prototype === 'object' &&\n        ('origin' in URL.prototype)) {\n      var u = new URL('b', 'http://a');\n      u.pathname = 'c%20d';\n      hasWorkingUrl = u.href === 'http://a/c%20d';\n    }\n  } catch(e) { }\n\n  if (hasWorkingUrl)\n    return;\n\n  var relative = Object.create(null);\n  relative['ftp'] = 21;\n  relative['file'] = 0;\n  relative['gopher'] = 70;\n  relative['http'] = 80;\n  relative['https'] = 443;\n  relative['ws'] = 80;\n  relative['wss'] = 443;\n\n  var relativePathDotMapping = Object.create(null);\n  relativePathDotMapping['%2e'] = '.';\n  relativePathDotMapping['.%2e'] = '..';\n  relativePathDotMapping['%2e.'] = '..';\n  relativePathDotMapping['%2e%2e'] = '..';\n\n  function isRelativeScheme(scheme) {\n    return relative[scheme] !== undefined;\n  }\n\n  function invalid() {\n    clear.call(this);\n    this._isInvalid = true;\n  }\n\n  function IDNAToASCII(h) {\n    if ('' == h) {\n      invalid.call(this)\n    }\n    // XXX\n    return h.toLowerCase()\n  }\n\n  function percentEscape(c) {\n    var unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ? `\n       [0x22, 0x23, 0x3C, 0x3E, 0x3F, 0x60].indexOf(unicode) == -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  function percentEscapeQuery(c) {\n    // XXX This actually needs to encode c using encoding and then\n    // convert the bytes one-by-one.\n\n    var unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ` (do not escape '?')\n       [0x22, 0x23, 0x3C, 0x3E, 0x60].indexOf(unicode) == -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  var EOF = undefined,\n      ALPHA = /[a-zA-Z]/,\n      ALPHANUMERIC = /[a-zA-Z0-9\\+\\-\\.]/;\n\n  function parse(input, stateOverride, base) {\n    function err(message) {\n      errors.push(message)\n    }\n\n    var state = stateOverride || 'scheme start',\n        cursor = 0,\n        buffer = '',\n        seenAt = false,\n        seenBracket = false,\n        errors = [];\n\n    loop: while ((input[cursor - 1] != EOF || cursor == 0) && !this._isInvalid) {\n      var c = input[cursor];\n      switch (state) {\n        case 'scheme start':\n          if (c && ALPHA.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n            state = 'scheme';\n          } else if (!stateOverride) {\n            buffer = '';\n            state = 'no scheme';\n            continue;\n          } else {\n            err('Invalid scheme.');\n            break loop;\n          }\n          break;\n\n        case 'scheme':\n          if (c && ALPHANUMERIC.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n          } else if (':' == c) {\n            this._scheme = buffer;\n            buffer = '';\n            if (stateOverride) {\n              break loop;\n            }\n            if (isRelativeScheme(this._scheme)) {\n              this._isRelative = true;\n            }\n            if ('file' == this._scheme) {\n              state = 'relative';\n            } else if (this._isRelative && base && base._scheme == this._scheme) {\n              state = 'relative or authority';\n            } else if (this._isRelative) {\n              state = 'authority first slash';\n            } else {\n              state = 'scheme data';\n            }\n          } else if (!stateOverride) {\n            buffer = '';\n            cursor = 0;\n            state = 'no scheme';\n            continue;\n          } else if (EOF == c) {\n            break loop;\n          } else {\n            err('Code point not allowed in scheme: ' + c)\n            break loop;\n          }\n          break;\n\n        case 'scheme data':\n          if ('?' == c) {\n            this._query = '?';\n            state = 'query';\n          } else if ('#' == c) {\n            this._fragment = '#';\n            state = 'fragment';\n          } else {\n            // XXX error handling\n            if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n              this._schemeData += percentEscape(c);\n            }\n          }\n          break;\n\n        case 'no scheme':\n          if (!base || !(isRelativeScheme(base._scheme))) {\n            err('Missing scheme.');\n            invalid.call(this);\n          } else {\n            state = 'relative';\n            continue;\n          }\n          break;\n\n        case 'relative or authority':\n          if ('/' == c && '/' == input[cursor+1]) {\n            state = 'authority ignore slashes';\n          } else {\n            err('Expected /, got: ' + c);\n            state = 'relative';\n            continue\n          }\n          break;\n\n        case 'relative':\n          this._isRelative = true;\n          if ('file' != this._scheme)\n            this._scheme = base._scheme;\n          if (EOF == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._username = base._username;\n            this._password = base._password;\n            break loop;\n          } else if ('/' == c || '\\\\' == c) {\n            if ('\\\\' == c)\n              err('\\\\ is an invalid code point.');\n            state = 'relative slash';\n          } else if ('?' == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = '?';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'query';\n          } else if ('#' == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._fragment = '#';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'fragment';\n          } else {\n            var nextC = input[cursor+1]\n            var nextNextC = input[cursor+2]\n            if (\n              'file' != this._scheme || !ALPHA.test(c) ||\n              (nextC != ':' && nextC != '|') ||\n              (EOF != nextNextC && '/' != nextNextC && '\\\\' != nextNextC && '?' != nextNextC && '#' != nextNextC)) {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n              this._path = base._path.slice();\n              this._path.pop();\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'relative slash':\n          if ('/' == c || '\\\\' == c) {\n            if ('\\\\' == c) {\n              err('\\\\ is an invalid code point.');\n            }\n            if ('file' == this._scheme) {\n              state = 'file host';\n            } else {\n              state = 'authority ignore slashes';\n            }\n          } else {\n            if ('file' != this._scheme) {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'authority first slash':\n          if ('/' == c) {\n            state = 'authority second slash';\n          } else {\n            err(\"Expected '/', got: \" + c);\n            state = 'authority ignore slashes';\n            continue;\n          }\n          break;\n\n        case 'authority second slash':\n          state = 'authority ignore slashes';\n          if ('/' != c) {\n            err(\"Expected '/', got: \" + c);\n            continue;\n          }\n          break;\n\n        case 'authority ignore slashes':\n          if ('/' != c && '\\\\' != c) {\n            state = 'authority';\n            continue;\n          } else {\n            err('Expected authority, got: ' + c);\n          }\n          break;\n\n        case 'authority':\n          if ('@' == c) {\n            if (seenAt) {\n              err('@ already seen.');\n              buffer += '%40';\n            }\n            seenAt = true;\n            for (var i = 0; i < buffer.length; i++) {\n              var cp = buffer[i];\n              if ('\\t' == cp || '\\n' == cp || '\\r' == cp) {\n                err('Invalid whitespace in authority.');\n                continue;\n              }\n              // XXX check URL code points\n              if (':' == cp && null === this._password) {\n                this._password = '';\n                continue;\n              }\n              var tempC = percentEscape(cp);\n              (null !== this._password) ? this._password += tempC : this._username += tempC;\n            }\n            buffer = '';\n          } else if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c) {\n            cursor -= buffer.length;\n            buffer = '';\n            state = 'host';\n            continue;\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'file host':\n          if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c) {\n            if (buffer.length == 2 && ALPHA.test(buffer[0]) && (buffer[1] == ':' || buffer[1] == '|')) {\n              state = 'relative path';\n            } else if (buffer.length == 0) {\n              state = 'relative path start';\n            } else {\n              this._host = IDNAToASCII.call(this, buffer);\n              buffer = '';\n              state = 'relative path start';\n            }\n            continue;\n          } else if ('\\t' == c || '\\n' == c || '\\r' == c) {\n            err('Invalid whitespace in file host.');\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'host':\n        case 'hostname':\n          if (':' == c && !seenBracket) {\n            // XXX host parsing\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'port';\n            if ('hostname' == stateOverride) {\n              break loop;\n            }\n          } else if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c) {\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'relative path start';\n            if (stateOverride) {\n              break loop;\n            }\n            continue;\n          } else if ('\\t' != c && '\\n' != c && '\\r' != c) {\n            if ('[' == c) {\n              seenBracket = true;\n            } else if (']' == c) {\n              seenBracket = false;\n            }\n            buffer += c;\n          } else {\n            err('Invalid code point in host/hostname: ' + c);\n          }\n          break;\n\n        case 'port':\n          if (/[0-9]/.test(c)) {\n            buffer += c;\n          } else if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c || stateOverride) {\n            if ('' != buffer) {\n              var temp = parseInt(buffer, 10);\n              if (temp != relative[this._scheme]) {\n                this._port = temp + '';\n              }\n              buffer = '';\n            }\n            if (stateOverride) {\n              break loop;\n            }\n            state = 'relative path start';\n            continue;\n          } else if ('\\t' == c || '\\n' == c || '\\r' == c) {\n            err('Invalid code point in port: ' + c);\n          } else {\n            invalid.call(this);\n          }\n          break;\n\n        case 'relative path start':\n          if ('\\\\' == c)\n            err(\"'\\\\' not allowed in path.\");\n          state = 'relative path';\n          if ('/' != c && '\\\\' != c) {\n            continue;\n          }\n          break;\n\n        case 'relative path':\n          if (EOF == c || '/' == c || '\\\\' == c || (!stateOverride && ('?' == c || '#' == c))) {\n            if ('\\\\' == c) {\n              err('\\\\ not allowed in relative path.');\n            }\n            var tmp;\n            if (tmp = relativePathDotMapping[buffer.toLowerCase()]) {\n              buffer = tmp;\n            }\n            if ('..' == buffer) {\n              this._path.pop();\n              if ('/' != c && '\\\\' != c) {\n                this._path.push('');\n              }\n            } else if ('.' == buffer && '/' != c && '\\\\' != c) {\n              this._path.push('');\n            } else if ('.' != buffer) {\n              if ('file' == this._scheme && this._path.length == 0 && buffer.length == 2 && ALPHA.test(buffer[0]) && buffer[1] == '|') {\n                buffer = buffer[0] + ':';\n              }\n              this._path.push(buffer);\n            }\n            buffer = '';\n            if ('?' == c) {\n              this._query = '?';\n              state = 'query';\n            } else if ('#' == c) {\n              this._fragment = '#';\n              state = 'fragment';\n            }\n          } else if ('\\t' != c && '\\n' != c && '\\r' != c) {\n            buffer += percentEscape(c);\n          }\n          break;\n\n        case 'query':\n          if (!stateOverride && '#' == c) {\n            this._fragment = '#';\n            state = 'fragment';\n          } else if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n            this._query += percentEscapeQuery(c);\n          }\n          break;\n\n        case 'fragment':\n          if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n            this._fragment += c;\n          }\n          break;\n      }\n\n      cursor++;\n    }\n  }\n\n  function clear() {\n    this._scheme = '';\n    this._schemeData = '';\n    this._username = '';\n    this._password = null;\n    this._host = '';\n    this._port = '';\n    this._path = [];\n    this._query = '';\n    this._fragment = '';\n    this._isInvalid = false;\n    this._isRelative = false;\n  }\n\n  // Does not process domain names or IP addresses.\n  // Does not handle encoding for the query parameter.\n  function jURL(url, base /* , encoding */) {\n    if (base !== undefined && !(base instanceof jURL))\n      base = new jURL(String(base));\n\n    this._url = url;\n    clear.call(this);\n\n    var input = url.replace(/^[ \\t\\r\\n\\f]+|[ \\t\\r\\n\\f]+$/g, '');\n    // encoding = encoding || 'utf-8'\n\n    parse.call(this, input, null, base);\n  }\n\n  jURL.prototype = {\n    toString: function() {\n      return this.href;\n    },\n    get href() {\n      if (this._isInvalid)\n        return this._url;\n\n      var authority = '';\n      if ('' != this._username || null != this._password) {\n        authority = this._username +\n            (null != this._password ? ':' + this._password : '') + '@';\n      }\n\n      return this.protocol +\n          (this._isRelative ? '//' + authority + this.host : '') +\n          this.pathname + this._query + this._fragment;\n    },\n    set href(href) {\n      clear.call(this);\n      parse.call(this, href);\n    },\n\n    get protocol() {\n      return this._scheme + ':';\n    },\n    set protocol(protocol) {\n      if (this._isInvalid)\n        return;\n      parse.call(this, protocol + ':', 'scheme start');\n    },\n\n    get host() {\n      return this._isInvalid ? '' : this._port ?\n          this._host + ':' + this._port : this._host;\n    },\n    set host(host) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      parse.call(this, host, 'host');\n    },\n\n    get hostname() {\n      return this._host;\n    },\n    set hostname(hostname) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      parse.call(this, hostname, 'hostname');\n    },\n\n    get port() {\n      return this._port;\n    },\n    set port(port) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      parse.call(this, port, 'port');\n    },\n\n    get pathname() {\n      return this._isInvalid ? '' : this._isRelative ?\n          '/' + this._path.join('/') : this._schemeData;\n    },\n    set pathname(pathname) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      this._path = [];\n      parse.call(this, pathname, 'relative path start');\n    },\n\n    get search() {\n      return this._isInvalid || !this._query || '?' == this._query ?\n          '' : this._query;\n    },\n    set search(search) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      this._query = '?';\n      if ('?' == search[0])\n        search = search.slice(1);\n      parse.call(this, search, 'query');\n    },\n\n    get hash() {\n      return this._isInvalid || !this._fragment || '#' == this._fragment ?\n          '' : this._fragment;\n    },\n    set hash(hash) {\n      if (this._isInvalid)\n        return;\n      this._fragment = '#';\n      if ('#' == hash[0])\n        hash = hash.slice(1);\n      parse.call(this, hash, 'fragment');\n    },\n\n    get origin() {\n      var host;\n      if (this._isInvalid || !this._scheme) {\n        return '';\n      }\n      // javascript: Gecko returns String(\"\"), WebKit/Blink String(\"null\")\n      // Gecko throws error for \"data://\"\n      // data: Gecko returns \"\", Blink returns \"data://\", WebKit returns \"null\"\n      // Gecko returns String(\"\") for file: mailto:\n      // WebKit/Blink returns String(\"SCHEME://\") for file: mailto:\n      switch (this._scheme) {\n        case 'data':\n        case 'file':\n        case 'javascript':\n        case 'mailto':\n          return 'null';\n      }\n      host = this.host;\n      if (!host) {\n        return '';\n      }\n      return this._scheme + '://' + host;\n    }\n  };\n\n  // Copy over the static methods\n  var OriginalURL = scope.URL;\n  if (OriginalURL) {\n    jURL.createObjectURL = function(blob) {\n      // IE extension allows a second optional options argument.\n      // http://msdn.microsoft.com/en-us/library/ie/hh772302(v=vs.85).aspx\n      return OriginalURL.createObjectURL.apply(OriginalURL, arguments);\n    };\n    jURL.revokeObjectURL = function(url) {\n      OriginalURL.revokeObjectURL(url);\n    };\n  }\n\n  scope.URL = jURL;\n  /* jshint ignore:end */\n})(globalScope);\n\nexports.FONT_IDENTITY_MATRIX = FONT_IDENTITY_MATRIX;\nexports.IDENTITY_MATRIX = IDENTITY_MATRIX;\nexports.OPS = OPS;\nexports.UNSUPPORTED_FEATURES = UNSUPPORTED_FEATURES;\nexports.AnnotationBorderStyleType = AnnotationBorderStyleType;\nexports.AnnotationFlag = AnnotationFlag;\nexports.AnnotationType = AnnotationType;\nexports.FontType = FontType;\nexports.ImageKind = ImageKind;\nexports.InvalidPDFException = InvalidPDFException;\nexports.LinkTarget = LinkTarget;\nexports.LinkTargetStringMap = LinkTargetStringMap;\nexports.MessageHandler = MessageHandler;\nexports.MissingDataException = MissingDataException;\nexports.MissingPDFException = MissingPDFException;\nexports.NotImplementedException = NotImplementedException;\nexports.PasswordException = PasswordException;\nexports.PasswordResponses = PasswordResponses;\nexports.StatTimer = StatTimer;\nexports.StreamType = StreamType;\nexports.TextRenderingMode = TextRenderingMode;\nexports.UnexpectedResponseException = UnexpectedResponseException;\nexports.UnknownErrorException = UnknownErrorException;\nexports.Util = Util;\nexports.XRefParseException = XRefParseException;\nexports.assert = assert;\nexports.bytesToString = bytesToString;\nexports.combineUrl = combineUrl;\nexports.createPromiseCapability = createPromiseCapability;\nexports.deprecated = deprecated;\nexports.error = error;\nexports.info = info;\nexports.isArray = isArray;\nexports.isArrayBuffer = isArrayBuffer;\nexports.isBool = isBool;\nexports.isEmptyObj = isEmptyObj;\nexports.isExternalLinkTargetSet = isExternalLinkTargetSet;\nexports.isInt = isInt;\nexports.isNum = isNum;\nexports.isString = isString;\nexports.isValidUrl = isValidUrl;\nexports.addLinkAttributes = addLinkAttributes;\nexports.loadJpegStream = loadJpegStream;\nexports.log2 = log2;\nexports.readInt8 = readInt8;\nexports.readUint16 = readUint16;\nexports.readUint32 = readUint32;\nexports.removeNullCharacters = removeNullCharacters;\nexports.shadow = shadow;\nexports.string32 = string32;\nexports.stringToBytes = stringToBytes;\nexports.stringToPDFString = stringToPDFString;\nexports.stringToUTF8String = stringToUTF8String;\nexports.utf8StringToString = utf8StringToString;\nexports.warn = warn;\n}));\n\n\n(function (root, factory) {\n  {\n    factory((root.pdfjsDisplayAnnotationLayer = {}), root.pdfjsSharedUtil,\n      root.pdfjsDisplayDOMUtils);\n  }\n}(this, function (exports, sharedUtil, displayDOMUtils) {\n\nvar AnnotationBorderStyleType = sharedUtil.AnnotationBorderStyleType;\nvar AnnotationType = sharedUtil.AnnotationType;\nvar Util = sharedUtil.Util;\nvar addLinkAttributes = sharedUtil.addLinkAttributes;\nvar warn = sharedUtil.warn;\nvar CustomStyle = displayDOMUtils.CustomStyle;\n\n/**\n * @typedef {Object} AnnotationElementParameters\n * @property {Object} data\n * @property {HTMLDivElement} layer\n * @property {PDFPage} page\n * @property {PageViewport} viewport\n * @property {IPDFLinkService} linkService\n */\n\n/**\n * @class\n * @alias AnnotationElementFactory\n */\nfunction AnnotationElementFactory() {}\nAnnotationElementFactory.prototype =\n    /** @lends AnnotationElementFactory.prototype */ {\n  /**\n   * @param {AnnotationElementParameters} parameters\n   * @returns {AnnotationElement}\n   */\n  create: function AnnotationElementFactory_create(parameters) {\n    var subtype = parameters.data.annotationType;\n\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n\n      case AnnotationType.WIDGET:\n        return new WidgetAnnotationElement(parameters);\n\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n\n      default:\n        throw new Error('Unimplemented annotation type \"' + subtype + '\"');\n    }\n  }\n};\n\n/**\n * @class\n * @alias AnnotationElement\n */\nvar AnnotationElement = (function AnnotationElementClosure() {\n  function AnnotationElement(parameters) {\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.page = parameters.page;\n    this.viewport = parameters.viewport;\n    this.linkService = parameters.linkService;\n\n    this.container = this._createContainer();\n  }\n\n  AnnotationElement.prototype = /** @lends AnnotationElement.prototype */ {\n    /**\n     * Create an empty container for the annotation's HTML element.\n     *\n     * @private\n     * @memberof AnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    _createContainer: function AnnotationElement_createContainer() {\n      var data = this.data, page = this.page, viewport = this.viewport;\n      var container = document.createElement('section');\n      var width = data.rect[2] - data.rect[0];\n      var height = data.rect[3] - data.rect[1];\n\n      container.setAttribute('data-annotation-id', data.id);\n\n      // Do *not* modify `data.rect`, since that will corrupt the annotation\n      // position on subsequent calls to `_createContainer` (see issue 6804).\n      var rect = Util.normalizeRect([\n        data.rect[0],\n        page.view[3] - data.rect[1] + page.view[1],\n        data.rect[2],\n        page.view[3] - data.rect[3] + page.view[1]\n      ]);\n\n      CustomStyle.setProp('transform', container,\n                          'matrix(' + viewport.transform.join(',') + ')');\n      CustomStyle.setProp('transformOrigin', container,\n                          -rect[0] + 'px ' + -rect[1] + 'px');\n\n      if (data.borderStyle.width > 0) {\n        container.style.borderWidth = data.borderStyle.width + 'px';\n        if (data.borderStyle.style !== AnnotationBorderStyleType.UNDERLINE) {\n          // Underline styles only have a bottom border, so we do not need\n          // to adjust for all borders. This yields a similar result as\n          // Adobe Acrobat/Reader.\n          width = width - 2 * data.borderStyle.width;\n          height = height - 2 * data.borderStyle.width;\n        }\n\n        var horizontalRadius = data.borderStyle.horizontalCornerRadius;\n        var verticalRadius = data.borderStyle.verticalCornerRadius;\n        if (horizontalRadius > 0 || verticalRadius > 0) {\n          var radius = horizontalRadius + 'px / ' + verticalRadius + 'px';\n          CustomStyle.setProp('borderRadius', container, radius);\n        }\n\n        switch (data.borderStyle.style) {\n          case AnnotationBorderStyleType.SOLID:\n            container.style.borderStyle = 'solid';\n            break;\n\n          case AnnotationBorderStyleType.DASHED:\n            container.style.borderStyle = 'dashed';\n            break;\n\n          case AnnotationBorderStyleType.BEVELED:\n            warn('Unimplemented border style: beveled');\n            break;\n\n          case AnnotationBorderStyleType.INSET:\n            warn('Unimplemented border style: inset');\n            break;\n\n          case AnnotationBorderStyleType.UNDERLINE:\n            container.style.borderBottomStyle = 'solid';\n            break;\n\n          default:\n            break;\n        }\n\n        if (data.color) {\n          container.style.borderColor =\n            Util.makeCssRgb(data.color[0] | 0,\n                            data.color[1] | 0,\n                            data.color[2] | 0);\n        } else {\n          // Transparent (invisible) border, so do not draw it at all.\n          container.style.borderWidth = 0;\n        }\n      }\n\n      container.style.left = rect[0] + 'px';\n      container.style.top = rect[1] + 'px';\n\n      container.style.width = width + 'px';\n      container.style.height = height + 'px';\n\n      return container;\n    },\n\n    /**\n     * Render the annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof AnnotationElement\n     */\n    render: function AnnotationElement_render() {\n      throw new Error('Abstract method AnnotationElement.render called');\n    }\n  };\n\n  return AnnotationElement;\n})();\n\n/**\n * @class\n * @alias LinkAnnotationElement\n */\nvar LinkAnnotationElement = (function LinkAnnotationElementClosure() {\n  function LinkAnnotationElement(parameters) {\n    AnnotationElement.call(this, parameters);\n  }\n\n  Util.inherit(LinkAnnotationElement, AnnotationElement, {\n    /**\n     * Render the link annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof LinkAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function LinkAnnotationElement_render() {\n      this.container.className = 'linkAnnotation';\n\n      var link = document.createElement('a');\n      addLinkAttributes(link, { url: this.data.url });\n\n      if (!this.data.url) {\n        if (this.data.action) {\n          this._bindNamedAction(link, this.data.action);\n        } else {\n          this._bindLink(link, ('dest' in this.data) ? this.data.dest : null);\n        }\n      }\n\n      this.container.appendChild(link);\n      return this.container;\n    },\n\n    /**\n     * Bind internal links to the link element.\n     *\n     * @private\n     * @param {Object} link\n     * @param {Object} destination\n     * @memberof LinkAnnotationElement\n     */\n    _bindLink: function LinkAnnotationElement_bindLink(link, destination) {\n      var self = this;\n\n      link.href = this.linkService.getDestinationHash(destination);\n      link.onclick = function() {\n        if (destination) {\n          self.linkService.navigateTo(destination);\n        }\n        return false;\n      };\n      if (destination) {\n        link.className = 'internalLink';\n      }\n    },\n\n    /**\n     * Bind named actions to the link element.\n     *\n     * @private\n     * @param {Object} link\n     * @param {Object} action\n     * @memberof LinkAnnotationElement\n     */\n    _bindNamedAction:\n        function LinkAnnotationElement_bindNamedAction(link, action) {\n      var self = this;\n\n      link.href = this.linkService.getAnchorUrl('');\n      link.onclick = function() {\n        self.linkService.executeNamedAction(action);\n        return false;\n      };\n      link.className = 'internalLink';\n    }\n  });\n\n  return LinkAnnotationElement;\n})();\n\n/**\n * @class\n * @alias TextAnnotationElement\n */\nvar TextAnnotationElement = (function TextAnnotationElementClosure() {\n  function TextAnnotationElement(parameters) {\n    AnnotationElement.call(this, parameters);\n  }\n\n  Util.inherit(TextAnnotationElement, AnnotationElement, {\n    /**\n     * Render the text annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof TextAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function TextAnnotationElement_render() {\n      this.container.className = 'textAnnotation';\n\n      var image = document.createElement('img');\n      image.style.height = this.container.style.height;\n      image.style.width = this.container.style.width;\n      image.src = PDFJS.imageResourcesPath + 'annotation-' +\n        this.data.name.toLowerCase() + '.svg';\n      image.alt = '[{{type}} Annotation]';\n      image.dataset.l10nId = 'text_annotation_type';\n      image.dataset.l10nArgs = JSON.stringify({type: this.data.name});\n\n      if (!this.data.hasPopup) {\n        var popupElement = new PopupElement({\n          container: this.container,\n          trigger: image,\n          color: this.data.color,\n          title: this.data.title,\n          contents: this.data.contents,\n          hideWrapper: true\n        });\n        var popup = popupElement.render();\n\n        // Position the popup next to the Text annotation's container.\n        popup.style.left = image.style.width;\n\n        this.container.appendChild(popup);\n      }\n\n      this.container.appendChild(image);\n      return this.container;\n    }\n  });\n\n  return TextAnnotationElement;\n})();\n\n/**\n * @class\n * @alias WidgetAnnotationElement\n */\nvar WidgetAnnotationElement = (function WidgetAnnotationElementClosure() {\n  function WidgetAnnotationElement(parameters) {\n    AnnotationElement.call(this, parameters);\n  }\n\n  Util.inherit(WidgetAnnotationElement, AnnotationElement, {\n    /**\n     * Render the widget annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof WidgetAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function WidgetAnnotationElement_render() {\n      var content = document.createElement('div');\n      content.textContent = this.data.fieldValue;\n      var textAlignment = this.data.textAlignment;\n      content.style.textAlign = ['left', 'center', 'right'][textAlignment];\n      content.style.verticalAlign = 'middle';\n      content.style.display = 'table-cell';\n\n      var font = (this.data.fontRefName ?\n        this.page.commonObjs.getData(this.data.fontRefName) : null);\n      this._setTextStyle(content, font);\n\n      this.container.appendChild(content);\n      return this.container;\n    },\n\n    /**\n     * Apply text styles to the text in the element.\n     *\n     * @private\n     * @param {HTMLDivElement} element\n     * @param {Object} font\n     * @memberof WidgetAnnotationElement\n     */\n    _setTextStyle:\n        function WidgetAnnotationElement_setTextStyle(element, font) {\n      // TODO: This duplicates some of the logic in CanvasGraphics.setFont().\n      var style = element.style;\n      style.fontSize = this.data.fontSize + 'px';\n      style.direction = (this.data.fontDirection < 0 ? 'rtl': 'ltr');\n\n      if (!font) {\n        return;\n      }\n\n      style.fontWeight = (font.black ?\n        (font.bold ? '900' : 'bold') :\n        (font.bold ? 'bold' : 'normal'));\n      style.fontStyle = (font.italic ? 'italic' : 'normal');\n\n      // Use a reasonable default font if the font doesn't specify a fallback.\n      var fontFamily = font.loadedName ? '\"' + font.loadedName + '\", ' : '';\n      var fallbackName = font.fallbackName || 'Helvetica, sans-serif';\n      style.fontFamily = fontFamily + fallbackName;\n    }\n  });\n\n  return WidgetAnnotationElement;\n})();\n\n/**\n * @class\n * @alias PopupAnnotationElement\n */\nvar PopupAnnotationElement = (function PopupAnnotationElementClosure() {\n  function PopupAnnotationElement(parameters) {\n    AnnotationElement.call(this, parameters);\n  }\n\n  Util.inherit(PopupAnnotationElement, AnnotationElement, {\n    /**\n     * Render the popup annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof PopupAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function PopupAnnotationElement_render() {\n      this.container.className = 'popupAnnotation';\n\n      var selector = '[data-annotation-id=\"' + this.data.parentId + '\"]';\n      var parentElement = this.layer.querySelector(selector);\n      if (!parentElement) {\n        return this.container;\n      }\n\n      var popup = new PopupElement({\n        container: this.container,\n        trigger: parentElement,\n        color: this.data.color,\n        title: this.data.title,\n        contents: this.data.contents\n      });\n\n      // Position the popup next to the parent annotation's container.\n      // PDF viewers ignore a popup annotation's rectangle.\n      var parentLeft = parseFloat(parentElement.style.left);\n      var parentWidth = parseFloat(parentElement.style.width);\n      CustomStyle.setProp('transformOrigin', this.container,\n                          -(parentLeft + parentWidth) + 'px -' +\n                          parentElement.style.top);\n      this.container.style.left = (parentLeft + parentWidth) + 'px';\n\n      this.container.appendChild(popup.render());\n      return this.container;\n    }\n  });\n\n  return PopupAnnotationElement;\n})();\n\n/**\n * @class\n * @alias PopupElement\n */\nvar PopupElement = (function PopupElementClosure() {\n  var BACKGROUND_ENLIGHT = 0.7;\n\n  function PopupElement(parameters) {\n    this.container = parameters.container;\n    this.trigger = parameters.trigger;\n    this.color = parameters.color;\n    this.title = parameters.title;\n    this.contents = parameters.contents;\n    this.hideWrapper = parameters.hideWrapper || false;\n\n    this.pinned = false;\n  }\n\n  PopupElement.prototype = /** @lends PopupElement.prototype */ {\n    /**\n     * Render the popup's HTML element.\n     *\n     * @public\n     * @memberof PopupElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function PopupElement_render() {\n      var wrapper = document.createElement('div');\n      wrapper.className = 'popupWrapper';\n\n      // For Popup annotations we hide the entire section because it contains\n      // only the popup. However, for Text annotations without a separate Popup\n      // annotation, we cannot hide the entire container as the image would\n      // disappear too. In that special case, hiding the wrapper suffices.\n      this.hideElement = (this.hideWrapper ? wrapper : this.container);\n      this.hideElement.setAttribute('hidden', true);\n\n      var popup = document.createElement('div');\n      popup.className = 'popup';\n\n      var color = this.color;\n      if (color) {\n        // Enlighten the color.\n        var r = BACKGROUND_ENLIGHT * (255 - color[0]) + color[0];\n        var g = BACKGROUND_ENLIGHT * (255 - color[1]) + color[1];\n        var b = BACKGROUND_ENLIGHT * (255 - color[2]) + color[2];\n        popup.style.backgroundColor = Util.makeCssRgb(r | 0, g | 0, b | 0);\n      }\n\n      var contents = this._formatContents(this.contents);\n      var title = document.createElement('h1');\n      title.textContent = this.title;\n\n      // Attach the event listeners to the trigger element.\n      this.trigger.addEventListener('click', this._toggle.bind(this));\n      this.trigger.addEventListener('mouseover', this._show.bind(this, false));\n      this.trigger.addEventListener('mouseout', this._hide.bind(this, false));\n      popup.addEventListener('click', this._hide.bind(this, true));\n\n      popup.appendChild(title);\n      popup.appendChild(contents);\n      wrapper.appendChild(popup);\n      return wrapper;\n    },\n\n    /**\n     * Format the contents of the popup by adding newlines where necessary.\n     *\n     * @private\n     * @param {string} contents\n     * @memberof PopupElement\n     * @returns {HTMLParagraphElement}\n     */\n    _formatContents: function PopupElement_formatContents(contents) {\n      var p = document.createElement('p');\n      var lines = contents.split(/(?:\\r\\n?|\\n)/);\n      for (var i = 0, ii = lines.length; i < ii; ++i) {\n        var line = lines[i];\n        p.appendChild(document.createTextNode(line));\n        if (i < (ii - 1)) {\n          p.appendChild(document.createElement('br'));\n        }\n      }\n      return p;\n    },\n\n    /**\n     * Toggle the visibility of the popup.\n     *\n     * @private\n     * @memberof PopupElement\n     */\n    _toggle: function PopupElement_toggle() {\n      if (this.pinned) {\n        this._hide(true);\n      } else {\n        this._show(true);\n      }\n    },\n\n    /**\n     * Show the popup.\n     *\n     * @private\n     * @param {boolean} pin\n     * @memberof PopupElement\n     */\n    _show: function PopupElement_show(pin) {\n      if (pin) {\n        this.pinned = true;\n      }\n      if (this.hideElement.hasAttribute('hidden')) {\n        this.hideElement.removeAttribute('hidden');\n        this.container.style.zIndex += 1;\n      }\n    },\n\n    /**\n     * Hide the popup.\n     *\n     * @private\n     * @param {boolean} unpin\n     * @memberof PopupElement\n     */\n    _hide: function PopupElement_hide(unpin) {\n      if (unpin) {\n        this.pinned = false;\n      }\n      if (!this.hideElement.hasAttribute('hidden') && !this.pinned) {\n        this.hideElement.setAttribute('hidden', true);\n        this.container.style.zIndex -= 1;\n      }\n    }\n  };\n\n  return PopupElement;\n})();\n\n/**\n * @class\n * @alias HighlightAnnotationElement\n */\nvar HighlightAnnotationElement = (\n    function HighlightAnnotationElementClosure() {\n  function HighlightAnnotationElement(parameters) {\n    AnnotationElement.call(this, parameters);\n  }\n\n  Util.inherit(HighlightAnnotationElement, AnnotationElement, {\n    /**\n     * Render the highlight annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof HighlightAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function HighlightAnnotationElement_render() {\n      this.container.className = 'highlightAnnotation';\n      return this.container;\n    }\n  });\n\n  return HighlightAnnotationElement;\n})();\n\n/**\n * @class\n * @alias UnderlineAnnotationElement\n */\nvar UnderlineAnnotationElement = (\n    function UnderlineAnnotationElementClosure() {\n  function UnderlineAnnotationElement(parameters) {\n    AnnotationElement.call(this, parameters);\n  }\n\n  Util.inherit(UnderlineAnnotationElement, AnnotationElement, {\n    /**\n     * Render the underline annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof UnderlineAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function UnderlineAnnotationElement_render() {\n      this.container.className = 'underlineAnnotation';\n      return this.container;\n    }\n  });\n\n  return UnderlineAnnotationElement;\n})();\n\n/**\n * @class\n * @alias SquigglyAnnotationElement\n */\nvar SquigglyAnnotationElement = (function SquigglyAnnotationElementClosure() {\n  function SquigglyAnnotationElement(parameters) {\n    AnnotationElement.call(this, parameters);\n  }\n\n  Util.inherit(SquigglyAnnotationElement, AnnotationElement, {\n    /**\n     * Render the squiggly annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof SquigglyAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function SquigglyAnnotationElement_render() {\n      this.container.className = 'squigglyAnnotation';\n      return this.container;\n    }\n  });\n\n  return SquigglyAnnotationElement;\n})();\n\n/**\n * @class\n * @alias StrikeOutAnnotationElement\n */\nvar StrikeOutAnnotationElement = (\n    function StrikeOutAnnotationElementClosure() {\n  function StrikeOutAnnotationElement(parameters) {\n    AnnotationElement.call(this, parameters);\n  }\n\n  Util.inherit(StrikeOutAnnotationElement, AnnotationElement, {\n    /**\n     * Render the strikeout annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof StrikeOutAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function StrikeOutAnnotationElement_render() {\n      this.container.className = 'strikeoutAnnotation';\n      return this.container;\n    }\n  });\n\n  return StrikeOutAnnotationElement;\n})();\n\n/**\n * @typedef {Object} AnnotationLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Array} annotations\n * @property {PDFPage} page\n * @property {IPDFLinkService} linkService\n */\n\n/**\n * @class\n * @alias AnnotationLayer\n */\nvar AnnotationLayer = (function AnnotationLayerClosure() {\n  return {\n    /**\n     * Render a new annotation layer with all annotation elements.\n     *\n     * @public\n     * @param {AnnotationLayerParameters} parameters\n     * @memberof AnnotationLayer\n     */\n    render: function AnnotationLayer_render(parameters) {\n      var annotationElementFactory = new AnnotationElementFactory();\n\n      for (var i = 0, ii = parameters.annotations.length; i < ii; i++) {\n        var data = parameters.annotations[i];\n        if (!data || !data.hasHtml) {\n          continue;\n        }\n\n        var properties = {\n          data: data,\n          layer: parameters.div,\n          page: parameters.page,\n          viewport: parameters.viewport,\n          linkService: parameters.linkService\n        };\n        var element = annotationElementFactory.create(properties);\n        parameters.div.appendChild(element.render());\n      }\n    },\n\n    /**\n     * Update the annotation elements on existing annotation layer.\n     *\n     * @public\n     * @param {AnnotationLayerParameters} parameters\n     * @memberof AnnotationLayer\n     */\n    update: function AnnotationLayer_update(parameters) {\n      for (var i = 0, ii = parameters.annotations.length; i < ii; i++) {\n        var data = parameters.annotations[i];\n        var element = parameters.div.querySelector(\n          '[data-annotation-id=\"' + data.id + '\"]');\n        if (element) {\n          CustomStyle.setProp('transform', element,\n            'matrix(' + parameters.viewport.transform.join(',') + ')');\n        }\n      }\n      parameters.div.removeAttribute('hidden');\n    }\n  };\n})();\n\nPDFJS.AnnotationLayer = AnnotationLayer;\n\nexports.AnnotationLayer = AnnotationLayer;\n}));\n\n\n(function (root, factory) {\n  {\n    factory((root.pdfjsDisplayFontLoader = {}), root.pdfjsSharedUtil,\n      root.pdfjsSharedGlobal);\n  }\n}(this, function (exports, sharedUtil, sharedGlobal) {\n\nvar assert = sharedUtil.assert;\nvar bytesToString = sharedUtil.bytesToString;\nvar string32 = sharedUtil.string32;\nvar shadow = sharedUtil.shadow;\nvar warn = sharedUtil.warn;\n\nvar PDFJS = sharedGlobal.PDFJS;\nvar globalScope = sharedGlobal.globalScope;\nvar isWorker = sharedGlobal.isWorker;\n\nfunction FontLoader(docId) {\n  this.docId = docId;\n  this.styleElement = null;\n  this.nativeFontFaces = [];\n  this.loadTestFontId = 0;\n  this.loadingContext = {\n    requests: [],\n    nextRequestId: 0\n  };\n}\nFontLoader.prototype = {\n  insertRule: function fontLoaderInsertRule(rule) {\n    var styleElement = this.styleElement;\n    if (!styleElement) {\n      styleElement = this.styleElement = document.createElement('style');\n      styleElement.id = 'PDFJS_FONT_STYLE_TAG_' + this.docId;\n      document.documentElement.getElementsByTagName('head')[0].appendChild(\n        styleElement);\n    }\n\n    var styleSheet = styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  },\n\n  clear: function fontLoaderClear() {\n    var styleElement = this.styleElement;\n    if (styleElement) {\n      styleElement.parentNode.removeChild(styleElement);\n      styleElement = this.styleElement = null;\n    }\n    this.nativeFontFaces.forEach(function(nativeFontFace) {\n      document.fonts.delete(nativeFontFace);\n    });\n    this.nativeFontFaces.length = 0;\n  },\n  get loadTestFont() {\n    // This is a CFF font with 1 glyph for '.' that fills its entire width and\n    // height.\n    return shadow(this, 'loadTestFont', atob(\n      'T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQ' +\n      'AABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwA' +\n      'AAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbm' +\n      'FtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAA' +\n      'AADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6A' +\n      'ABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAA' +\n      'MQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAA' +\n      'AAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAA' +\n      'AAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQ' +\n      'AAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMA' +\n      'AQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAA' +\n      'EAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAA' +\n      'AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAA' +\n      'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n      'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n      'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n      'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAA' +\n      'AAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgc' +\n      'A/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWF' +\n      'hYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQA' +\n      'AAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAg' +\n      'ABAAAAAAAAAAAD6AAAAAAAAA=='\n    ));\n  },\n\n  addNativeFontFace: function fontLoader_addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.push(nativeFontFace);\n    document.fonts.add(nativeFontFace);\n  },\n\n  bind: function fontLoaderBind(fonts, callback) {\n    assert(!isWorker, 'bind() shall be called from main thread');\n\n    var rules = [];\n    var fontsToLoad = [];\n    var fontLoadPromises = [];\n    var getNativeFontPromise = function(nativeFontFace) {\n      // Return a promise that is always fulfilled, even when the font fails to\n      // load.\n      return nativeFontFace.loaded.catch(function(e) {\n        warn('Failed to load font \"' + nativeFontFace.family + '\": ' + e);\n      });\n    };\n    for (var i = 0, ii = fonts.length; i < ii; i++) {\n      var font = fonts[i];\n\n      // Add the font to the DOM only once or skip if the font\n      // is already loaded.\n      if (font.attached || font.loading === false) {\n        continue;\n      }\n      font.attached = true;\n\n      if (FontLoader.isFontLoadingAPISupported) {\n        var nativeFontFace = font.createNativeFontFace();\n        if (nativeFontFace) {\n          this.addNativeFontFace(nativeFontFace);\n          fontLoadPromises.push(getNativeFontPromise(nativeFontFace));\n        }\n      } else {\n        var rule = font.createFontFaceRule();\n        if (rule) {\n          this.insertRule(rule);\n          rules.push(rule);\n          fontsToLoad.push(font);\n        }\n      }\n    }\n\n    var request = this.queueLoadingCallback(callback);\n    if (FontLoader.isFontLoadingAPISupported) {\n      Promise.all(fontLoadPromises).then(function() {\n        request.complete();\n      });\n    } else if (rules.length > 0 && !FontLoader.isSyncFontLoadingSupported) {\n      this.prepareFontLoadEvent(rules, fontsToLoad, request);\n    } else {\n      request.complete();\n    }\n  },\n\n  queueLoadingCallback: function FontLoader_queueLoadingCallback(callback) {\n    function LoadLoader_completeRequest() {\n      assert(!request.end, 'completeRequest() cannot be called twice');\n      request.end = Date.now();\n\n      // sending all completed requests in order how they were queued\n      while (context.requests.length > 0 && context.requests[0].end) {\n        var otherRequest = context.requests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n\n    var context = this.loadingContext;\n    var requestId = 'pdfjs-font-loading-' + (context.nextRequestId++);\n    var request = {\n      id: requestId,\n      complete: LoadLoader_completeRequest,\n      callback: callback,\n      started: Date.now()\n    };\n    context.requests.push(request);\n    return request;\n  },\n\n  prepareFontLoadEvent: function fontLoaderPrepareFontLoadEvent(rules,\n                                                                fonts,\n                                                                request) {\n      /** Hack begin */\n      // There's currently no event when a font has finished downloading so the\n      // following code is a dirty hack to 'guess' when a font is\n      // ready. It's assumed fonts are loaded in order, so add a known test\n      // font after the desired fonts and then test for the loading of that\n      // test font.\n\n      function int32(data, offset) {\n        return (data.charCodeAt(offset) << 24) |\n               (data.charCodeAt(offset + 1) << 16) |\n               (data.charCodeAt(offset + 2) << 8) |\n               (data.charCodeAt(offset + 3) & 0xff);\n      }\n\n      function spliceString(s, offset, remove, insert) {\n        var chunk1 = s.substr(0, offset);\n        var chunk2 = s.substr(offset + remove);\n        return chunk1 + insert + chunk2;\n      }\n\n      var i, ii;\n\n      var canvas = document.createElement('canvas');\n      canvas.width = 1;\n      canvas.height = 1;\n      var ctx = canvas.getContext('2d');\n\n      var called = 0;\n      function isFontReady(name, callback) {\n        called++;\n        // With setTimeout clamping this gives the font ~100ms to load.\n        if(called > 30) {\n          warn('Load test font never loaded.');\n          callback();\n          return;\n        }\n        ctx.font = '30px ' + name;\n        ctx.fillText('.', 0, 20);\n        var imageData = ctx.getImageData(0, 0, 1, 1);\n        if (imageData.data[3] > 0) {\n          callback();\n          return;\n        }\n        setTimeout(isFontReady.bind(null, name, callback));\n      }\n\n      var loadTestFontId = 'lt' + Date.now() + this.loadTestFontId++;\n      // Chromium seems to cache fonts based on a hash of the actual font data,\n      // so the font must be modified for each load test else it will appear to\n      // be loaded already.\n      // TODO: This could maybe be made faster by avoiding the btoa of the full\n      // font by splitting it in chunks before hand and padding the font id.\n      var data = this.loadTestFont;\n      var COMMENT_OFFSET = 976; // has to be on 4 byte boundary (for checksum)\n      data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length,\n                          loadTestFontId);\n      // CFF checksum is important for IE, adjusting it\n      var CFF_CHECKSUM_OFFSET = 16;\n      var XXXX_VALUE = 0x58585858; // the \"comment\" filled with 'X'\n      var checksum = int32(data, CFF_CHECKSUM_OFFSET);\n      for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n        checksum = (checksum - XXXX_VALUE + int32(loadTestFontId, i)) | 0;\n      }\n      if (i < loadTestFontId.length) { // align to 4 bytes boundary\n        checksum = (checksum - XXXX_VALUE +\n                    int32(loadTestFontId + 'XXX', i)) | 0;\n      }\n      data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n\n      var url = 'url(data:font/opentype;base64,' + btoa(data) + ');';\n      var rule = '@font-face { font-family:\"' + loadTestFontId + '\";src:' +\n                 url + '}';\n      this.insertRule(rule);\n\n      var names = [];\n      for (i = 0, ii = fonts.length; i < ii; i++) {\n        names.push(fonts[i].loadedName);\n      }\n      names.push(loadTestFontId);\n\n      var div = document.createElement('div');\n      div.setAttribute('style',\n                       'visibility: hidden;' +\n                       'width: 10px; height: 10px;' +\n                       'position: absolute; top: 0px; left: 0px;');\n      for (i = 0, ii = names.length; i < ii; ++i) {\n        var span = document.createElement('span');\n        span.textContent = 'Hi';\n        span.style.fontFamily = names[i];\n        div.appendChild(span);\n      }\n      document.body.appendChild(div);\n\n      isFontReady(loadTestFontId, function() {\n        document.body.removeChild(div);\n        request.complete();\n      });\n      /** Hack end */\n  }\n};\nFontLoader.isFontLoadingAPISupported = (!isWorker &&\n  typeof document !== 'undefined' && !!document.fonts);\nObject.defineProperty(FontLoader, 'isSyncFontLoadingSupported', {\n  get: function () {\n    var supported = false;\n\n    // User agent string sniffing is bad, but there is no reliable way to tell\n    // if font is fully loaded and ready to be used with canvas.\n    var userAgent = window.navigator.userAgent;\n    var m = /Mozilla\\/5.0.*?rv:(\\d+).*? Gecko/.exec(userAgent);\n    if (m && m[1] >= 14) {\n      supported = true;\n    }\n    // TODO other browsers\n    if (userAgent === 'node') {\n      supported = true;\n    }\n    return shadow(FontLoader, 'isSyncFontLoadingSupported', supported);\n  },\n  enumerable: true,\n  configurable: true\n});\n\nvar FontFaceObject = (function FontFaceObjectClosure() {\n  function FontFaceObject(translatedData) {\n    this.compiledGlyphs = {};\n    // importing translated data\n    for (var i in translatedData) {\n      this[i] = translatedData[i];\n    }\n  }\n  Object.defineProperty(FontFaceObject, 'isEvalSupported', {\n    get: function () {\n      var evalSupport = false;\n      if (PDFJS.isEvalSupported) {\n        try {\n          /* jshint evil: true */\n          new Function('');\n          evalSupport = true;\n        } catch (e) {}\n      }\n      return shadow(this, 'isEvalSupported', evalSupport);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  FontFaceObject.prototype = {\n    createNativeFontFace: function FontFaceObject_createNativeFontFace() {\n      if (!this.data) {\n        return null;\n      }\n\n      if (PDFJS.disableFontFace) {\n        this.disableFontFace = true;\n        return null;\n      }\n\n      var nativeFontFace = new FontFace(this.loadedName, this.data, {});\n\n      if (PDFJS.pdfBug && 'FontInspector' in globalScope &&\n          globalScope['FontInspector'].enabled) {\n        globalScope['FontInspector'].fontAdded(this);\n      }\n      return nativeFontFace;\n    },\n\n    createFontFaceRule: function FontFaceObject_createFontFaceRule() {\n      if (!this.data) {\n        return null;\n      }\n\n      if (PDFJS.disableFontFace) {\n        this.disableFontFace = true;\n        return null;\n      }\n\n      var data = bytesToString(new Uint8Array(this.data));\n      var fontName = this.loadedName;\n\n      // Add the font-face rule to the document\n      var url = ('url(data:' + this.mimetype + ';base64,' +\n                 window.btoa(data) + ');');\n      var rule = '@font-face { font-family:\"' + fontName + '\";src:' + url + '}';\n\n      if (PDFJS.pdfBug && 'FontInspector' in globalScope &&\n          globalScope['FontInspector'].enabled) {\n        globalScope['FontInspector'].fontAdded(this, url);\n      }\n\n      return rule;\n    },\n\n    getPathGenerator:\n        function FontFaceObject_getPathGenerator(objs, character) {\n      if (!(character in this.compiledGlyphs)) {\n        var cmds = objs.get(this.loadedName + '_path_' + character);\n        var current, i, len;\n\n        // If we can, compile cmds into JS for MAXIMUM SPEED\n        if (FontFaceObject.isEvalSupported) {\n          var args, js = '';\n          for (i = 0, len = cmds.length; i < len; i++) {\n            current = cmds[i];\n\n            if (current.args !== undefined) {\n              args = current.args.join(',');\n            } else {\n              args = '';\n            }\n\n            js += 'c.' + current.cmd + '(' + args + ');\\n';\n          }\n          /* jshint -W054 */\n          this.compiledGlyphs[character] = new Function('c', 'size', js);\n        } else {\n          // But fall back on using Function.prototype.apply() if we're\n          // blocked from using eval() for whatever reason (like CSP policies)\n          this.compiledGlyphs[character] = function(c, size) {\n            for (i = 0, len = cmds.length; i < len; i++) {\n              current = cmds[i];\n\n              if (current.cmd === 'scale') {\n                current.args = [size, -size];\n              }\n\n              c[current.cmd].apply(c, current.args);\n            }\n          };\n        }\n      }\n      return this.compiledGlyphs[character];\n    }\n  };\n  return FontFaceObject;\n})();\n\nexports.FontFaceObject = FontFaceObject;\nexports.FontLoader = FontLoader;\n}));\n\n\n(function (root, factory) {\n  {\n    factory((root.pdfjsDisplayMetadata = {}), root.pdfjsSharedUtil);\n  }\n}(this, function (exports, sharedUtil) {\n\nvar error = sharedUtil.error;\n\nvar Metadata = PDFJS.Metadata = (function MetadataClosure() {\n  function fixMetadata(meta) {\n    return meta.replace(/>\\\\376\\\\377([^<]+)/g, function(all, codes) {\n      var bytes = codes.replace(/\\\\([0-3])([0-7])([0-7])/g,\n                                function(code, d1, d2, d3) {\n        return String.fromCharCode(d1 * 64 + d2 * 8 + d3 * 1);\n      });\n      var chars = '';\n      for (var i = 0; i < bytes.length; i += 2) {\n        var code = bytes.charCodeAt(i) * 256 + bytes.charCodeAt(i + 1);\n        chars += code >= 32 && code < 127 && code !== 60 && code !== 62 &&\n          code !== 38 && false ? String.fromCharCode(code) :\n          '&#x' + (0x10000 + code).toString(16).substring(1) + ';';\n      }\n      return '>' + chars;\n    });\n  }\n\n  function Metadata(meta) {\n    if (typeof meta === 'string') {\n      // Ghostscript produces invalid metadata\n      meta = fixMetadata(meta);\n\n      var parser = new DOMParser();\n      meta = parser.parseFromString(meta, 'application/xml');\n    } else if (!(meta instanceof Document)) {\n      error('Metadata: Invalid metadata object');\n    }\n\n    this.metaDocument = meta;\n    this.metadata = {};\n    this.parse();\n  }\n\n  Metadata.prototype = {\n    parse: function Metadata_parse() {\n      var doc = this.metaDocument;\n      var rdf = doc.documentElement;\n\n      if (rdf.nodeName.toLowerCase() !== 'rdf:rdf') { // Wrapped in <xmpmeta>\n        rdf = rdf.firstChild;\n        while (rdf && rdf.nodeName.toLowerCase() !== 'rdf:rdf') {\n          rdf = rdf.nextSibling;\n        }\n      }\n\n      var nodeName = (rdf) ? rdf.nodeName.toLowerCase() : null;\n      if (!rdf || nodeName !== 'rdf:rdf' || !rdf.hasChildNodes()) {\n        return;\n      }\n\n      var children = rdf.childNodes, desc, entry, name, i, ii, length, iLength;\n      for (i = 0, length = children.length; i < length; i++) {\n        desc = children[i];\n        if (desc.nodeName.toLowerCase() !== 'rdf:description') {\n          continue;\n        }\n\n        for (ii = 0, iLength = desc.childNodes.length; ii < iLength; ii++) {\n          if (desc.childNodes[ii].nodeName.toLowerCase() !== '#text') {\n            entry = desc.childNodes[ii];\n            name = entry.nodeName.toLowerCase();\n            this.metadata[name] = entry.textContent.trim();\n          }\n        }\n      }\n    },\n\n    get: function Metadata_get(name) {\n      return this.metadata[name] || null;\n    },\n\n    has: function Metadata_has(name) {\n      return typeof this.metadata[name] !== 'undefined';\n    }\n  };\n\n  return Metadata;\n})();\n\nexports.Metadata = Metadata;\n}));\n\n\n(function (root, factory) {\n  {\n    factory((root.pdfjsDisplaySVG = {}), root.pdfjsSharedUtil);\n  }\n}(this, function (exports, sharedUtil) {\n\nvar FONT_IDENTITY_MATRIX = sharedUtil.FONT_IDENTITY_MATRIX;\nvar IDENTITY_MATRIX = sharedUtil.IDENTITY_MATRIX;\nvar ImageKind = sharedUtil.ImageKind;\nvar OPS = sharedUtil.OPS;\nvar Util = sharedUtil.Util;\nvar isNum = sharedUtil.isNum;\nvar isArray = sharedUtil.isArray;\nvar warn = sharedUtil.warn;\n\nvar SVG_DEFAULTS = {\n  fontStyle: 'normal',\n  fontWeight: 'normal',\n  fillColor: '#000000'\n};\n\nvar convertImgDataToPng = (function convertImgDataToPngClosure() {\n  var PNG_HEADER =\n    new Uint8Array([0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a]);\n\n  var CHUNK_WRAPPER_SIZE = 12;\n\n  var crcTable = new Int32Array(256);\n  for (var i = 0; i < 256; i++) {\n    var c = i;\n    for (var h = 0; h < 8; h++) {\n      if (c & 1) {\n        c = 0xedB88320 ^ ((c >> 1) & 0x7fffffff);\n      } else {\n        c = (c >> 1) & 0x7fffffff;\n      }\n    }\n    crcTable[i] = c;\n  }\n\n  function crc32(data, start, end) {\n    var crc = -1;\n    for (var i = start; i < end; i++) {\n      var a = (crc ^ data[i]) & 0xff;\n      var b = crcTable[a];\n      crc = (crc >>> 8) ^ b;\n    }\n    return crc ^ -1;\n  }\n\n  function writePngChunk(type, body, data, offset) {\n    var p = offset;\n    var len = body.length;\n\n    data[p] = len >> 24 & 0xff;\n    data[p + 1] = len >> 16 & 0xff;\n    data[p + 2] = len >> 8 & 0xff;\n    data[p + 3] = len & 0xff;\n    p += 4;\n\n    data[p] = type.charCodeAt(0) & 0xff;\n    data[p + 1] = type.charCodeAt(1) & 0xff;\n    data[p + 2] = type.charCodeAt(2) & 0xff;\n    data[p + 3] = type.charCodeAt(3) & 0xff;\n    p += 4;\n\n    data.set(body, p);\n    p += body.length;\n\n    var crc = crc32(data, offset + 4, p);\n\n    data[p] = crc >> 24 & 0xff;\n    data[p + 1] = crc >> 16 & 0xff;\n    data[p + 2] = crc >> 8 & 0xff;\n    data[p + 3] = crc & 0xff;\n  }\n\n  function adler32(data, start, end) {\n    var a = 1;\n    var b = 0;\n    for (var i = start; i < end; ++i) {\n      a = (a + (data[i] & 0xff)) % 65521;\n      b = (b + a) % 65521;\n    }\n    return (b << 16) | a;\n  }\n\n  function encode(imgData, kind) {\n    var width = imgData.width;\n    var height = imgData.height;\n    var bitDepth, colorType, lineSize;\n    var bytes = imgData.data;\n\n    switch (kind) {\n      case ImageKind.GRAYSCALE_1BPP:\n        colorType = 0;\n        bitDepth = 1;\n        lineSize = (width + 7) >> 3;\n        break;\n      case ImageKind.RGB_24BPP:\n        colorType = 2;\n        bitDepth = 8;\n        lineSize = width * 3;\n        break;\n      case ImageKind.RGBA_32BPP:\n        colorType = 6;\n        bitDepth = 8;\n        lineSize = width * 4;\n        break;\n      default:\n        throw new Error('invalid format');\n    }\n\n    // prefix every row with predictor 0\n    var literals = new Uint8Array((1 + lineSize) * height);\n    var offsetLiterals = 0, offsetBytes = 0;\n    var y, i;\n    for (y = 0; y < height; ++y) {\n      literals[offsetLiterals++] = 0; // no prediction\n      literals.set(bytes.subarray(offsetBytes, offsetBytes + lineSize),\n                   offsetLiterals);\n      offsetBytes += lineSize;\n      offsetLiterals += lineSize;\n    }\n\n    if (kind === ImageKind.GRAYSCALE_1BPP) {\n      // inverting for B/W\n      offsetLiterals = 0;\n      for (y = 0; y < height; y++) {\n        offsetLiterals++; // skipping predictor\n        for (i = 0; i < lineSize; i++) {\n          literals[offsetLiterals++] ^= 0xFF;\n        }\n      }\n    }\n\n    var ihdr = new Uint8Array([\n      width >> 24 & 0xff,\n      width >> 16 & 0xff,\n      width >> 8 & 0xff,\n      width & 0xff,\n      height >> 24 & 0xff,\n      height >> 16 & 0xff,\n      height >> 8 & 0xff,\n      height & 0xff,\n      bitDepth, // bit depth\n      colorType, // color type\n      0x00, // compression method\n      0x00, // filter method\n      0x00 // interlace method\n    ]);\n\n    var len = literals.length;\n    var maxBlockLength = 0xFFFF;\n\n    var deflateBlocks = Math.ceil(len / maxBlockLength);\n    var idat = new Uint8Array(2 + len + deflateBlocks * 5 + 4);\n    var pi = 0;\n    idat[pi++] = 0x78; // compression method and flags\n    idat[pi++] = 0x9c; // flags\n\n    var pos = 0;\n    while (len > maxBlockLength) {\n      // writing non-final DEFLATE blocks type 0 and length of 65535\n      idat[pi++] = 0x00;\n      idat[pi++] = 0xff;\n      idat[pi++] = 0xff;\n      idat[pi++] = 0x00;\n      idat[pi++] = 0x00;\n      idat.set(literals.subarray(pos, pos + maxBlockLength), pi);\n      pi += maxBlockLength;\n      pos += maxBlockLength;\n      len -= maxBlockLength;\n    }\n\n    // writing non-final DEFLATE blocks type 0\n    idat[pi++] = 0x01;\n    idat[pi++] = len & 0xff;\n    idat[pi++] = len >> 8 & 0xff;\n    idat[pi++] = (~len & 0xffff) & 0xff;\n    idat[pi++] = (~len & 0xffff) >> 8 & 0xff;\n    idat.set(literals.subarray(pos), pi);\n    pi += literals.length - pos;\n\n    var adler = adler32(literals, 0, literals.length); // checksum\n    idat[pi++] = adler >> 24 & 0xff;\n    idat[pi++] = adler >> 16 & 0xff;\n    idat[pi++] = adler >> 8 & 0xff;\n    idat[pi++] = adler & 0xff;\n\n    // PNG will consists: header, IHDR+data, IDAT+data, and IEND.\n    var pngLength = PNG_HEADER.length + (CHUNK_WRAPPER_SIZE * 3) +\n                    ihdr.length + idat.length;\n    var data = new Uint8Array(pngLength);\n    var offset = 0;\n    data.set(PNG_HEADER, offset);\n    offset += PNG_HEADER.length;\n    writePngChunk('IHDR', ihdr, data, offset);\n    offset += CHUNK_WRAPPER_SIZE + ihdr.length;\n    writePngChunk('IDATA', idat, data, offset);\n    offset += CHUNK_WRAPPER_SIZE + idat.length;\n    writePngChunk('IEND', new Uint8Array(0), data, offset);\n\n    return PDFJS.createObjectURL(data, 'image/png');\n  }\n\n  return function convertImgDataToPng(imgData) {\n    var kind = (imgData.kind === undefined ?\n                ImageKind.GRAYSCALE_1BPP : imgData.kind);\n    return encode(imgData, kind);\n  };\n})();\n\nvar SVGExtraState = (function SVGExtraStateClosure() {\n  function SVGExtraState() {\n    this.fontSizeScale = 1;\n    this.fontWeight = SVG_DEFAULTS.fontWeight;\n    this.fontSize = 0;\n\n    this.textMatrix = IDENTITY_MATRIX;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n\n    // Current point (in user coordinates)\n    this.x = 0;\n    this.y = 0;\n\n    // Start of text line (in text coordinates)\n    this.lineX = 0;\n    this.lineY = 0;\n\n    // Character and word spacing\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRise = 0;\n\n    // Default foreground and background colors\n    this.fillColor = SVG_DEFAULTS.fillColor;\n    this.strokeColor = '#000000';\n\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.lineJoin = '';\n    this.lineCap = '';\n    this.miterLimit = 0;\n\n    this.dashArray = [];\n    this.dashPhase = 0;\n\n    this.dependencies = [];\n\n    // Clipping\n    this.clipId = '';\n    this.pendingClip = false;\n\n    this.maskId = '';\n  }\n\n  SVGExtraState.prototype = {\n    clone: function SVGExtraState_clone() {\n      return Object.create(this);\n    },\n    setCurrentPoint: function SVGExtraState_setCurrentPoint(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n  };\n  return SVGExtraState;\n})();\n\nvar SVGGraphics = (function SVGGraphicsClosure() {\n  function createScratchSVG(width, height) {\n    var NS = 'http://www.w3.org/2000/svg';\n    var svg = document.createElementNS(NS, 'svg:svg');\n    svg.setAttributeNS(null, 'version', '1.1');\n    svg.setAttributeNS(null, 'width', width + 'px');\n    svg.setAttributeNS(null, 'height', height + 'px');\n    svg.setAttributeNS(null, 'viewBox', '0 0 ' + width + ' ' + height);\n    return svg;\n  }\n\n  function opListToTree(opList) {\n    var opTree = [];\n    var tmp = [];\n    var opListLen = opList.length;\n\n    for (var x = 0; x < opListLen; x++) {\n      if (opList[x].fn === 'save') {\n        opTree.push({'fnId': 92, 'fn': 'group', 'items': []});\n        tmp.push(opTree);\n        opTree = opTree[opTree.length - 1].items;\n        continue;\n      }\n\n      if(opList[x].fn === 'restore') {\n        opTree = tmp.pop();\n      } else {\n        opTree.push(opList[x]);\n      }\n    }\n    return opTree;\n  }\n\n  /**\n   * Formats float number.\n   * @param value {number} number to format.\n   * @returns {string}\n   */\n  function pf(value) {\n    if (value === (value | 0)) { // integer number\n      return value.toString();\n    }\n    var s = value.toFixed(10);\n    var i = s.length - 1;\n    if (s[i] !== '0') {\n      return s;\n    }\n    // removing trailing zeros\n    do {\n      i--;\n    } while (s[i] === '0');\n    return s.substr(0, s[i] === '.' ? i : i + 1);\n  }\n\n  /**\n   * Formats transform matrix. The standard rotation, scale and translate\n   * matrices are replaced by their shorter forms, and for identity matrix\n   * returns empty string to save the memory.\n   * @param m {Array} matrix to format.\n   * @returns {string}\n   */\n  function pm(m) {\n    if (m[4] === 0 && m[5] === 0) {\n      if (m[1] === 0 && m[2] === 0) {\n        if (m[0] === 1 && m[3] === 1) {\n          return '';\n        }\n        return 'scale(' + pf(m[0]) + ' ' + pf(m[3]) + ')';\n      }\n      if (m[0] === m[3] && m[1] === -m[2]) {\n        var a = Math.acos(m[0]) * 180 / Math.PI;\n        return 'rotate(' + pf(a) + ')';\n      }\n    } else {\n      if (m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 1) {\n        return 'translate(' + pf(m[4]) + ' ' + pf(m[5]) + ')';\n      }\n    }\n    return 'matrix(' + pf(m[0]) + ' ' + pf(m[1]) + ' ' + pf(m[2]) + ' ' +\n      pf(m[3]) + ' ' + pf(m[4]) + ' ' + pf(m[5]) + ')';\n  }\n\n  function SVGGraphics(commonObjs, objs) {\n    this.current = new SVGExtraState();\n    this.transformMatrix = IDENTITY_MATRIX; // Graphics state matrix\n    this.transformStack = [];\n    this.extraStack = [];\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.pendingEOFill = false;\n\n    this.embedFonts = false;\n    this.embeddedFonts = {};\n    this.cssStyle = null;\n  }\n\n  var NS = 'http://www.w3.org/2000/svg';\n  var XML_NS = 'http://www.w3.org/XML/1998/namespace';\n  var XLINK_NS = 'http://www.w3.org/1999/xlink';\n  var LINE_CAP_STYLES = ['butt', 'round', 'square'];\n  var LINE_JOIN_STYLES = ['miter', 'round', 'bevel'];\n  var clipCount = 0;\n  var maskCount = 0;\n\n  SVGGraphics.prototype = {\n    save: function SVGGraphics_save() {\n      this.transformStack.push(this.transformMatrix);\n      var old = this.current;\n      this.extraStack.push(old);\n      this.current = old.clone();\n    },\n\n    restore: function SVGGraphics_restore() {\n      this.transformMatrix = this.transformStack.pop();\n      this.current = this.extraStack.pop();\n\n      this.tgrp = document.createElementNS(NS, 'svg:g');\n      this.tgrp.setAttributeNS(null, 'transform', pm(this.transformMatrix));\n      this.pgrp.appendChild(this.tgrp);\n    },\n\n    group: function SVGGraphics_group(items) {\n      this.save();\n      this.executeOpTree(items);\n      this.restore();\n    },\n\n    loadDependencies: function SVGGraphics_loadDependencies(operatorList) {\n      var fnArray = operatorList.fnArray;\n      var fnArrayLen = fnArray.length;\n      var argsArray = operatorList.argsArray;\n\n      var self = this;\n      for (var i = 0; i < fnArrayLen; i++) {\n        if (OPS.dependency === fnArray[i]) {\n          var deps = argsArray[i];\n          for (var n = 0, nn = deps.length; n < nn; n++) {\n            var obj = deps[n];\n            var common = obj.substring(0, 2) === 'g_';\n            var promise;\n            if (common) {\n              promise = new Promise(function(resolve) {\n                self.commonObjs.get(obj, resolve);\n              });\n            } else {\n              promise = new Promise(function(resolve) {\n                self.objs.get(obj, resolve);\n              });\n            }\n            this.current.dependencies.push(promise);\n          }\n        }\n      }\n      return Promise.all(this.current.dependencies);\n    },\n\n    transform: function SVGGraphics_transform(a, b, c, d, e, f) {\n      var transformMatrix = [a, b, c, d, e, f];\n      this.transformMatrix = PDFJS.Util.transform(this.transformMatrix,\n                                                  transformMatrix);\n\n      this.tgrp = document.createElementNS(NS, 'svg:g');\n      this.tgrp.setAttributeNS(null, 'transform', pm(this.transformMatrix));\n    },\n\n    getSVG: function SVGGraphics_getSVG(operatorList, viewport) {\n      this.svg = createScratchSVG(viewport.width, viewport.height);\n      this.viewport = viewport;\n\n      return this.loadDependencies(operatorList).then(function () {\n        this.transformMatrix = IDENTITY_MATRIX;\n        this.pgrp = document.createElementNS(NS, 'svg:g'); // Parent group\n        this.pgrp.setAttributeNS(null, 'transform', pm(viewport.transform));\n        this.tgrp = document.createElementNS(NS, 'svg:g'); // Transform group\n        this.tgrp.setAttributeNS(null, 'transform', pm(this.transformMatrix));\n        this.defs = document.createElementNS(NS, 'svg:defs');\n        this.pgrp.appendChild(this.defs);\n        this.pgrp.appendChild(this.tgrp);\n        this.svg.appendChild(this.pgrp);\n        var opTree = this.convertOpList(operatorList);\n        this.executeOpTree(opTree);\n        return this.svg;\n      }.bind(this));\n    },\n\n    convertOpList: function SVGGraphics_convertOpList(operatorList) {\n      var argsArray = operatorList.argsArray;\n      var fnArray = operatorList.fnArray;\n      var fnArrayLen  = fnArray.length;\n      var REVOPS = [];\n      var opList = [];\n\n      for (var op in OPS) {\n        REVOPS[OPS[op]] = op;\n      }\n\n      for (var x = 0; x < fnArrayLen; x++) {\n        var fnId = fnArray[x];\n        opList.push({'fnId' : fnId, 'fn': REVOPS[fnId], 'args': argsArray[x]});\n      }\n      return opListToTree(opList);\n    },\n\n    executeOpTree: function SVGGraphics_executeOpTree(opTree) {\n      var opTreeLen = opTree.length;\n      for(var x = 0; x < opTreeLen; x++) {\n        var fn = opTree[x].fn;\n        var fnId = opTree[x].fnId;\n        var args = opTree[x].args;\n\n        switch (fnId | 0) {\n          case OPS.beginText:\n            this.beginText();\n            break;\n          case OPS.setLeading:\n            this.setLeading(args);\n            break;\n          case OPS.setLeadingMoveText:\n            this.setLeadingMoveText(args[0], args[1]);\n            break;\n          case OPS.setFont:\n            this.setFont(args);\n            break;\n          case OPS.showText:\n            this.showText(args[0]);\n            break;\n          case OPS.showSpacedText:\n            this.showText(args[0]);\n            break;\n          case OPS.endText:\n            this.endText();\n            break;\n          case OPS.moveText:\n            this.moveText(args[0], args[1]);\n            break;\n          case OPS.setCharSpacing:\n            this.setCharSpacing(args[0]);\n            break;\n          case OPS.setWordSpacing:\n            this.setWordSpacing(args[0]);\n            break;\n          case OPS.setHScale:\n            this.setHScale(args[0]);\n            break;\n          case OPS.setTextMatrix:\n            this.setTextMatrix(args[0], args[1], args[2],\n                               args[3], args[4], args[5]);\n            break;\n          case OPS.setLineWidth:\n            this.setLineWidth(args[0]);\n            break;\n          case OPS.setLineJoin:\n            this.setLineJoin(args[0]);\n            break;\n          case OPS.setLineCap:\n            this.setLineCap(args[0]);\n            break;\n          case OPS.setMiterLimit:\n            this.setMiterLimit(args[0]);\n            break;\n          case OPS.setFillRGBColor:\n            this.setFillRGBColor(args[0], args[1], args[2]);\n            break;\n          case OPS.setStrokeRGBColor:\n            this.setStrokeRGBColor(args[0], args[1], args[2]);\n            break;\n          case OPS.setDash:\n            this.setDash(args[0], args[1]);\n            break;\n          case OPS.setGState:\n            this.setGState(args[0]);\n            break;\n          case OPS.fill:\n            this.fill();\n            break;\n          case OPS.eoFill:\n            this.eoFill();\n            break;\n          case OPS.stroke:\n            this.stroke();\n            break;\n          case OPS.fillStroke:\n            this.fillStroke();\n            break;\n          case OPS.eoFillStroke:\n            this.eoFillStroke();\n            break;\n          case OPS.clip:\n            this.clip('nonzero');\n            break;\n          case OPS.eoClip:\n            this.clip('evenodd');\n            break;\n          case OPS.paintSolidColorImageMask:\n            this.paintSolidColorImageMask();\n            break;\n          case OPS.paintJpegXObject:\n            this.paintJpegXObject(args[0], args[1], args[2]);\n            break;\n          case OPS.paintImageXObject:\n            this.paintImageXObject(args[0]);\n            break;\n          case OPS.paintInlineImageXObject:\n            this.paintInlineImageXObject(args[0]);\n            break;\n          case OPS.paintImageMaskXObject:\n            this.paintImageMaskXObject(args[0]);\n            break;\n          case OPS.paintFormXObjectBegin:\n            this.paintFormXObjectBegin(args[0], args[1]);\n            break;\n          case OPS.paintFormXObjectEnd:\n            this.paintFormXObjectEnd();\n            break;\n          case OPS.closePath:\n            this.closePath();\n            break;\n          case OPS.closeStroke:\n            this.closeStroke();\n            break;\n          case OPS.closeFillStroke:\n            this.closeFillStroke();\n            break;\n          case OPS.nextLine:\n            this.nextLine();\n            break;\n          case OPS.transform:\n            this.transform(args[0], args[1], args[2], args[3],\n                           args[4], args[5]);\n            break;\n          case OPS.constructPath:\n            this.constructPath(args[0], args[1]);\n            break;\n          case OPS.endPath:\n            this.endPath();\n            break;\n          case 92:\n            this.group(opTree[x].items);\n            break;\n          default:\n            warn('Unimplemented method '+ fn);\n            break;\n        }\n      }\n    },\n\n    setWordSpacing: function SVGGraphics_setWordSpacing(wordSpacing) {\n      this.current.wordSpacing = wordSpacing;\n    },\n\n    setCharSpacing: function SVGGraphics_setCharSpacing(charSpacing) {\n      this.current.charSpacing = charSpacing;\n    },\n\n    nextLine: function SVGGraphics_nextLine() {\n      this.moveText(0, this.current.leading);\n    },\n\n    setTextMatrix: function SVGGraphics_setTextMatrix(a, b, c, d, e, f) {\n      var current = this.current;\n      this.current.textMatrix = this.current.lineMatrix = [a, b, c, d, e, f];\n\n      this.current.x = this.current.lineX = 0;\n      this.current.y = this.current.lineY = 0;\n\n      current.xcoords = [];\n      current.tspan = document.createElementNS(NS, 'svg:tspan');\n      current.tspan.setAttributeNS(null, 'font-family', current.fontFamily);\n      current.tspan.setAttributeNS(null, 'font-size',\n                                   pf(current.fontSize) + 'px');\n      current.tspan.setAttributeNS(null, 'y', pf(-current.y));\n\n      current.txtElement = document.createElementNS(NS, 'svg:text');\n      current.txtElement.appendChild(current.tspan);\n    },\n\n    beginText: function SVGGraphics_beginText() {\n      this.current.x = this.current.lineX = 0;\n      this.current.y = this.current.lineY = 0;\n      this.current.textMatrix = IDENTITY_MATRIX;\n      this.current.lineMatrix = IDENTITY_MATRIX;\n      this.current.tspan = document.createElementNS(NS, 'svg:tspan');\n      this.current.txtElement = document.createElementNS(NS, 'svg:text');\n      this.current.txtgrp = document.createElementNS(NS, 'svg:g');\n      this.current.xcoords = [];\n    },\n\n    moveText: function SVGGraphics_moveText(x, y) {\n      var current = this.current;\n      this.current.x = this.current.lineX += x;\n      this.current.y = this.current.lineY += y;\n\n      current.xcoords = [];\n      current.tspan = document.createElementNS(NS, 'svg:tspan');\n      current.tspan.setAttributeNS(null, 'font-family', current.fontFamily);\n      current.tspan.setAttributeNS(null, 'font-size',\n                                   pf(current.fontSize) + 'px');\n      current.tspan.setAttributeNS(null, 'y', pf(-current.y));\n    },\n\n    showText: function SVGGraphics_showText(glyphs) {\n      var current = this.current;\n      var font = current.font;\n      var fontSize = current.fontSize;\n\n      if (fontSize === 0) {\n        return;\n      }\n\n      var charSpacing = current.charSpacing;\n      var wordSpacing = current.wordSpacing;\n      var fontDirection = current.fontDirection;\n      var textHScale = current.textHScale * fontDirection;\n      var glyphsLength = glyphs.length;\n      var vertical = font.vertical;\n      var widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n      var x = 0, i;\n      for (i = 0; i < glyphsLength; ++i) {\n        var glyph = glyphs[i];\n        if (glyph === null) {\n          // word break\n          x += fontDirection * wordSpacing;\n          continue;\n        } else if (isNum(glyph)) {\n          x += -glyph * fontSize * 0.001;\n          continue;\n        }\n        current.xcoords.push(current.x + x * textHScale);\n\n        var width = glyph.width;\n        var character = glyph.fontChar;\n        var charWidth = width * widthAdvanceScale + charSpacing * fontDirection;\n        x += charWidth;\n\n        current.tspan.textContent += character;\n      }\n      if (vertical) {\n        current.y -= x * textHScale;\n      } else {\n        current.x += x * textHScale;\n      }\n\n      current.tspan.setAttributeNS(null, 'x',\n                                   current.xcoords.map(pf).join(' '));\n      current.tspan.setAttributeNS(null, 'y', pf(-current.y));\n      current.tspan.setAttributeNS(null, 'font-family', current.fontFamily);\n      current.tspan.setAttributeNS(null, 'font-size',\n                                   pf(current.fontSize) + 'px');\n      if (current.fontStyle !== SVG_DEFAULTS.fontStyle) {\n        current.tspan.setAttributeNS(null, 'font-style', current.fontStyle);\n      }\n      if (current.fontWeight !== SVG_DEFAULTS.fontWeight) {\n        current.tspan.setAttributeNS(null, 'font-weight', current.fontWeight);\n      }\n      if (current.fillColor !== SVG_DEFAULTS.fillColor) {\n        current.tspan.setAttributeNS(null, 'fill', current.fillColor);\n      }\n\n      current.txtElement.setAttributeNS(null, 'transform',\n                                        pm(current.textMatrix) +\n                                        ' scale(1, -1)' );\n      current.txtElement.setAttributeNS(XML_NS, 'xml:space', 'preserve');\n      current.txtElement.appendChild(current.tspan);\n      current.txtgrp.appendChild(current.txtElement);\n\n      this.tgrp.appendChild(current.txtElement);\n\n    },\n\n    setLeadingMoveText: function SVGGraphics_setLeadingMoveText(x, y) {\n      this.setLeading(-y);\n      this.moveText(x, y);\n    },\n\n    addFontStyle: function SVGGraphics_addFontStyle(fontObj) {\n      if (!this.cssStyle) {\n        this.cssStyle = document.createElementNS(NS, 'svg:style');\n        this.cssStyle.setAttributeNS(null, 'type', 'text/css');\n        this.defs.appendChild(this.cssStyle);\n      }\n\n      var url = PDFJS.createObjectURL(fontObj.data, fontObj.mimetype);\n      this.cssStyle.textContent +=\n        '@font-face { font-family: \"' + fontObj.loadedName + '\";' +\n        ' src: url(' + url + '); }\\n';\n    },\n\n    setFont: function SVGGraphics_setFont(details) {\n      var current = this.current;\n      var fontObj = this.commonObjs.get(details[0]);\n      var size = details[1];\n      this.current.font = fontObj;\n\n      if (this.embedFonts && fontObj.data &&\n          !this.embeddedFonts[fontObj.loadedName]) {\n        this.addFontStyle(fontObj);\n        this.embeddedFonts[fontObj.loadedName] = fontObj;\n      }\n\n      current.fontMatrix = (fontObj.fontMatrix ?\n                            fontObj.fontMatrix : FONT_IDENTITY_MATRIX);\n\n      var bold = fontObj.black ? (fontObj.bold ? 'bolder' : 'bold') :\n                                 (fontObj.bold ? 'bold' : 'normal');\n      var italic = fontObj.italic ? 'italic' : 'normal';\n\n      if (size < 0) {\n        size = -size;\n        current.fontDirection = -1;\n      } else {\n        current.fontDirection = 1;\n      }\n      current.fontSize = size;\n      current.fontFamily = fontObj.loadedName;\n      current.fontWeight = bold;\n      current.fontStyle = italic;\n\n      current.tspan = document.createElementNS(NS, 'svg:tspan');\n      current.tspan.setAttributeNS(null, 'y', pf(-current.y));\n      current.xcoords = [];\n    },\n\n    endText: function SVGGraphics_endText() {\n      if (this.current.pendingClip) {\n        this.cgrp.appendChild(this.tgrp);\n        this.pgrp.appendChild(this.cgrp);\n      } else {\n        this.pgrp.appendChild(this.tgrp);\n      }\n      this.tgrp = document.createElementNS(NS, 'svg:g');\n      this.tgrp.setAttributeNS(null, 'transform', pm(this.transformMatrix));\n    },\n\n    // Path properties\n    setLineWidth: function SVGGraphics_setLineWidth(width) {\n      this.current.lineWidth = width;\n    },\n    setLineCap: function SVGGraphics_setLineCap(style) {\n      this.current.lineCap = LINE_CAP_STYLES[style];\n    },\n    setLineJoin: function SVGGraphics_setLineJoin(style) {\n      this.current.lineJoin = LINE_JOIN_STYLES[style];\n    },\n    setMiterLimit: function SVGGraphics_setMiterLimit(limit) {\n      this.current.miterLimit = limit;\n    },\n    setStrokeRGBColor: function SVGGraphics_setStrokeRGBColor(r, g, b) {\n      var color = Util.makeCssRgb(r, g, b);\n      this.current.strokeColor = color;\n    },\n    setFillRGBColor: function SVGGraphics_setFillRGBColor(r, g, b) {\n      var color = Util.makeCssRgb(r, g, b);\n      this.current.fillColor = color;\n      this.current.tspan = document.createElementNS(NS, 'svg:tspan');\n      this.current.xcoords = [];\n    },\n    setDash: function SVGGraphics_setDash(dashArray, dashPhase) {\n      this.current.dashArray = dashArray;\n      this.current.dashPhase = dashPhase;\n    },\n\n    constructPath: function SVGGraphics_constructPath(ops, args) {\n      var current = this.current;\n      var x = current.x, y = current.y;\n      current.path = document.createElementNS(NS, 'svg:path');\n      var d = [];\n      var opLength = ops.length;\n\n      for (var i = 0, j = 0; i < opLength; i++) {\n        switch (ops[i] | 0) {\n          case OPS.rectangle:\n            x = args[j++];\n            y = args[j++];\n            var width = args[j++];\n            var height = args[j++];\n            var xw = x + width;\n            var yh = y + height;\n            d.push('M', pf(x), pf(y), 'L', pf(xw) , pf(y), 'L', pf(xw), pf(yh),\n                   'L', pf(x), pf(yh), 'Z');\n            break;\n          case OPS.moveTo:\n            x = args[j++];\n            y = args[j++];\n            d.push('M', pf(x), pf(y));\n            break;\n          case OPS.lineTo:\n            x = args[j++];\n            y = args[j++];\n            d.push('L', pf(x) , pf(y));\n            break;\n          case OPS.curveTo:\n            x = args[j + 4];\n            y = args[j + 5];\n            d.push('C', pf(args[j]), pf(args[j + 1]), pf(args[j + 2]),\n                   pf(args[j + 3]), pf(x), pf(y));\n            j += 6;\n            break;\n          case OPS.curveTo2:\n            x = args[j + 2];\n            y = args[j + 3];\n            d.push('C', pf(x), pf(y), pf(args[j]), pf(args[j + 1]),\n                   pf(args[j + 2]), pf(args[j + 3]));\n            j += 4;\n            break;\n          case OPS.curveTo3:\n            x = args[j + 2];\n            y = args[j + 3];\n            d.push('C', pf(args[j]), pf(args[j + 1]), pf(x), pf(y),\n                   pf(x), pf(y));\n            j += 4;\n            break;\n          case OPS.closePath:\n            d.push('Z');\n            break;\n        }\n      }\n      current.path.setAttributeNS(null, 'd', d.join(' '));\n      current.path.setAttributeNS(null, 'stroke-miterlimit',\n                                  pf(current.miterLimit));\n      current.path.setAttributeNS(null, 'stroke-linecap', current.lineCap);\n      current.path.setAttributeNS(null, 'stroke-linejoin', current.lineJoin);\n      current.path.setAttributeNS(null, 'stroke-width',\n                                  pf(current.lineWidth) + 'px');\n      current.path.setAttributeNS(null, 'stroke-dasharray',\n                                  current.dashArray.map(pf).join(' '));\n      current.path.setAttributeNS(null, 'stroke-dashoffset',\n                                  pf(current.dashPhase) + 'px');\n      current.path.setAttributeNS(null, 'fill', 'none');\n\n      this.tgrp.appendChild(current.path);\n      if (current.pendingClip) {\n        this.cgrp.appendChild(this.tgrp);\n        this.pgrp.appendChild(this.cgrp);\n      } else {\n        this.pgrp.appendChild(this.tgrp);\n      }\n      // Saving a reference in current.element so that it can be addressed\n      // in 'fill' and 'stroke'\n      current.element = current.path;\n      current.setCurrentPoint(x, y);\n    },\n\n    endPath: function SVGGraphics_endPath() {\n      var current = this.current;\n      if (current.pendingClip) {\n        this.cgrp.appendChild(this.tgrp);\n        this.pgrp.appendChild(this.cgrp);\n      } else {\n        this.pgrp.appendChild(this.tgrp);\n      }\n      this.tgrp = document.createElementNS(NS, 'svg:g');\n      this.tgrp.setAttributeNS(null, 'transform', pm(this.transformMatrix));\n    },\n\n    clip: function SVGGraphics_clip(type) {\n      var current = this.current;\n      // Add current path to clipping path\n      current.clipId = 'clippath' + clipCount;\n      clipCount++;\n      this.clippath = document.createElementNS(NS, 'svg:clipPath');\n      this.clippath.setAttributeNS(null, 'id', current.clipId);\n      var clipElement = current.element.cloneNode();\n      if (type === 'evenodd') {\n        clipElement.setAttributeNS(null, 'clip-rule', 'evenodd');\n      } else {\n        clipElement.setAttributeNS(null, 'clip-rule', 'nonzero');\n      }\n      this.clippath.setAttributeNS(null, 'transform', pm(this.transformMatrix));\n      this.clippath.appendChild(clipElement);\n      this.defs.appendChild(this.clippath);\n\n      // Create a new group with that attribute\n      current.pendingClip = true;\n      this.cgrp = document.createElementNS(NS, 'svg:g');\n      this.cgrp.setAttributeNS(null, 'clip-path',\n                               'url(#' + current.clipId + ')');\n      this.pgrp.appendChild(this.cgrp);\n    },\n\n    closePath: function SVGGraphics_closePath() {\n      var current = this.current;\n      var d = current.path.getAttributeNS(null, 'd');\n      d += 'Z';\n      current.path.setAttributeNS(null, 'd', d);\n    },\n\n    setLeading: function SVGGraphics_setLeading(leading) {\n      this.current.leading = -leading;\n    },\n\n    setTextRise: function SVGGraphics_setTextRise(textRise) {\n      this.current.textRise = textRise;\n    },\n\n    setHScale: function SVGGraphics_setHScale(scale) {\n      this.current.textHScale = scale / 100;\n    },\n\n    setGState: function SVGGraphics_setGState(states) {\n      for (var i = 0, ii = states.length; i < ii; i++) {\n        var state = states[i];\n        var key = state[0];\n        var value = state[1];\n\n        switch (key) {\n          case 'LW':\n            this.setLineWidth(value);\n            break;\n          case 'LC':\n            this.setLineCap(value);\n            break;\n          case 'LJ':\n            this.setLineJoin(value);\n            break;\n          case 'ML':\n            this.setMiterLimit(value);\n            break;\n          case 'D':\n            this.setDash(value[0], value[1]);\n            break;\n          case 'RI':\n            break;\n          case 'FL':\n            break;\n          case 'Font':\n            this.setFont(value);\n            break;\n          case 'CA':\n            break;\n          case 'ca':\n            break;\n          case 'BM':\n            break;\n          case 'SMask':\n            break;\n        }\n      }\n    },\n\n    fill: function SVGGraphics_fill() {\n      var current = this.current;\n      current.element.setAttributeNS(null, 'fill', current.fillColor);\n    },\n\n    stroke: function SVGGraphics_stroke() {\n      var current = this.current;\n      current.element.setAttributeNS(null, 'stroke', current.strokeColor);\n      current.element.setAttributeNS(null, 'fill', 'none');\n    },\n\n    eoFill: function SVGGraphics_eoFill() {\n      var current = this.current;\n      current.element.setAttributeNS(null, 'fill', current.fillColor);\n      current.element.setAttributeNS(null, 'fill-rule', 'evenodd');\n    },\n\n    fillStroke: function SVGGraphics_fillStroke() {\n      // Order is important since stroke wants fill to be none.\n      // First stroke, then if fill needed, it will be overwritten.\n      this.stroke();\n      this.fill();\n    },\n\n    eoFillStroke: function SVGGraphics_eoFillStroke() {\n      this.current.element.setAttributeNS(null, 'fill-rule', 'evenodd');\n      this.fillStroke();\n    },\n\n    closeStroke: function SVGGraphics_closeStroke() {\n      this.closePath();\n      this.stroke();\n    },\n\n    closeFillStroke: function SVGGraphics_closeFillStroke() {\n      this.closePath();\n      this.fillStroke();\n    },\n\n    paintSolidColorImageMask:\n        function SVGGraphics_paintSolidColorImageMask() {\n      var current = this.current;\n      var rect = document.createElementNS(NS, 'svg:rect');\n      rect.setAttributeNS(null, 'x', '0');\n      rect.setAttributeNS(null, 'y', '0');\n      rect.setAttributeNS(null, 'width', '1px');\n      rect.setAttributeNS(null, 'height', '1px');\n      rect.setAttributeNS(null, 'fill', current.fillColor);\n      this.tgrp.appendChild(rect);\n    },\n\n    paintJpegXObject: function SVGGraphics_paintJpegXObject(objId, w, h) {\n      var current = this.current;\n      var imgObj = this.objs.get(objId);\n      var imgEl = document.createElementNS(NS, 'svg:image');\n      imgEl.setAttributeNS(XLINK_NS, 'xlink:href', imgObj.src);\n      imgEl.setAttributeNS(null, 'width', imgObj.width + 'px');\n      imgEl.setAttributeNS(null, 'height', imgObj.height + 'px');\n      imgEl.setAttributeNS(null, 'x', '0');\n      imgEl.setAttributeNS(null, 'y', pf(-h));\n      imgEl.setAttributeNS(null, 'transform',\n                           'scale(' + pf(1 / w) + ' ' + pf(-1 / h) + ')');\n\n      this.tgrp.appendChild(imgEl);\n      if (current.pendingClip) {\n        this.cgrp.appendChild(this.tgrp);\n        this.pgrp.appendChild(this.cgrp);\n      } else {\n        this.pgrp.appendChild(this.tgrp);\n      }\n    },\n\n    paintImageXObject: function SVGGraphics_paintImageXObject(objId) {\n      var imgData = this.objs.get(objId);\n      if (!imgData) {\n        warn('Dependent image isn\\'t ready yet');\n        return;\n      }\n      this.paintInlineImageXObject(imgData);\n    },\n\n    paintInlineImageXObject:\n        function SVGGraphics_paintInlineImageXObject(imgData, mask) {\n      var current = this.current;\n      var width = imgData.width;\n      var height = imgData.height;\n\n      var imgSrc = convertImgDataToPng(imgData);\n      var cliprect = document.createElementNS(NS, 'svg:rect');\n      cliprect.setAttributeNS(null, 'x', '0');\n      cliprect.setAttributeNS(null, 'y', '0');\n      cliprect.setAttributeNS(null, 'width', pf(width));\n      cliprect.setAttributeNS(null, 'height', pf(height));\n      current.element = cliprect;\n      this.clip('nonzero');\n      var imgEl = document.createElementNS(NS, 'svg:image');\n      imgEl.setAttributeNS(XLINK_NS, 'xlink:href', imgSrc);\n      imgEl.setAttributeNS(null, 'x', '0');\n      imgEl.setAttributeNS(null, 'y', pf(-height));\n      imgEl.setAttributeNS(null, 'width', pf(width) + 'px');\n      imgEl.setAttributeNS(null, 'height', pf(height) + 'px');\n      imgEl.setAttributeNS(null, 'transform',\n                           'scale(' + pf(1 / width) + ' ' +\n                           pf(-1 / height) + ')');\n      if (mask) {\n        mask.appendChild(imgEl);\n      } else {\n        this.tgrp.appendChild(imgEl);\n      }\n      if (current.pendingClip) {\n        this.cgrp.appendChild(this.tgrp);\n        this.pgrp.appendChild(this.cgrp);\n      } else {\n        this.pgrp.appendChild(this.tgrp);\n      }\n    },\n\n    paintImageMaskXObject:\n        function SVGGraphics_paintImageMaskXObject(imgData) {\n      var current = this.current;\n      var width = imgData.width;\n      var height = imgData.height;\n      var fillColor = current.fillColor;\n\n      current.maskId = 'mask' + maskCount++;\n      var mask = document.createElementNS(NS, 'svg:mask');\n      mask.setAttributeNS(null, 'id', current.maskId);\n\n      var rect = document.createElementNS(NS, 'svg:rect');\n      rect.setAttributeNS(null, 'x', '0');\n      rect.setAttributeNS(null, 'y', '0');\n      rect.setAttributeNS(null, 'width', pf(width));\n      rect.setAttributeNS(null, 'height', pf(height));\n      rect.setAttributeNS(null, 'fill', fillColor);\n      rect.setAttributeNS(null, 'mask', 'url(#' + current.maskId +')');\n      this.defs.appendChild(mask);\n      this.tgrp.appendChild(rect);\n\n      this.paintInlineImageXObject(imgData, mask);\n    },\n\n    paintFormXObjectBegin:\n        function SVGGraphics_paintFormXObjectBegin(matrix, bbox) {\n      this.save();\n\n      if (isArray(matrix) && matrix.length === 6) {\n        this.transform(matrix[0], matrix[1], matrix[2],\n                       matrix[3], matrix[4], matrix[5]);\n      }\n\n      if (isArray(bbox) && bbox.length === 4) {\n        var width = bbox[2] - bbox[0];\n        var height = bbox[3] - bbox[1];\n\n        var cliprect = document.createElementNS(NS, 'svg:rect');\n        cliprect.setAttributeNS(null, 'x', bbox[0]);\n        cliprect.setAttributeNS(null, 'y', bbox[1]);\n        cliprect.setAttributeNS(null, 'width', pf(width));\n        cliprect.setAttributeNS(null, 'height', pf(height));\n        this.current.element = cliprect;\n        this.clip('nonzero');\n        this.endPath();\n      }\n    },\n\n    paintFormXObjectEnd:\n        function SVGGraphics_paintFormXObjectEnd() {\n      this.restore();\n    }\n  };\n  return SVGGraphics;\n})();\n\nPDFJS.SVGGraphics = SVGGraphics;\n\nexports.SVGGraphics = SVGGraphics;\n}));\n\n\n(function (root, factory) {\n  {\n    factory((root.pdfjsDisplayTextLayer = {}), root.pdfjsSharedUtil,\n      root.pdfjsDisplayDOMUtils, root.pdfjsSharedGlobal);\n  }\n}(this, function (exports, sharedUtil, displayDOMUtils, sharedGlobal) {\n\nvar Util = sharedUtil.Util;\nvar createPromiseCapability = sharedUtil.createPromiseCapability;\nvar CustomStyle = displayDOMUtils.CustomStyle;\nvar PDFJS = sharedGlobal.PDFJS;\n\n/**\n * Text layer render parameters.\n *\n * @typedef {Object} TextLayerRenderParameters\n * @property {TextContent} textContent - Text content to render (the object is\n *   returned by the page's getTextContent() method).\n * @property {HTMLElement} container - HTML element that will contain text runs.\n * @property {PDFJS.PageViewport} viewport - The target viewport to properly\n *   layout the text runs.\n * @property {Array} textDivs - (optional) HTML elements that are correspond\n *   the text items of the textContent input. This is output and shall be\n *   initially be set to empty array.\n * @property {number} timeout - (optional) Delay in milliseconds before\n *   rendering of the text  runs occurs.\n */\nvar renderTextLayer = (function renderTextLayerClosure() {\n  var MAX_TEXT_DIVS_TO_RENDER = 100000;\n\n  var NonWhitespaceRegexp = /\\S/;\n\n  function isAllWhitespace(str) {\n    return !NonWhitespaceRegexp.test(str);\n  }\n\n  function appendText(textDivs, viewport, geom, styles) {\n    var style = styles[geom.fontName];\n    var textDiv = document.createElement('div');\n    textDivs.push(textDiv);\n    if (isAllWhitespace(geom.str)) {\n      textDiv.dataset.isWhitespace = true;\n      return;\n    }\n    var tx = Util.transform(viewport.transform, geom.transform);\n    var angle = Math.atan2(tx[1], tx[0]);\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    var fontHeight = Math.sqrt((tx[2] * tx[2]) + (tx[3] * tx[3]));\n    var fontAscent = fontHeight;\n    if (style.ascent) {\n      fontAscent = style.ascent * fontAscent;\n    } else if (style.descent) {\n      fontAscent = (1 + style.descent) * fontAscent;\n    }\n\n    var left;\n    var top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + (fontAscent * Math.sin(angle));\n      top = tx[5] - (fontAscent * Math.cos(angle));\n    }\n    textDiv.style.left = left + 'px';\n    textDiv.style.top = top + 'px';\n    textDiv.style.fontSize = fontHeight + 'px';\n    textDiv.style.fontFamily = style.fontFamily;\n\n    textDiv.textContent = geom.str;\n    // |fontName| is only used by the Font Inspector. This test will succeed\n    // when e.g. the Font Inspector is off but the Stepper is on, but it's\n    // not worth the effort to do a more accurate test.\n    if (PDFJS.pdfBug) {\n      textDiv.dataset.fontName = geom.fontName;\n    }\n    // Storing into dataset will convert number into string.\n    if (angle !== 0) {\n      textDiv.dataset.angle = angle * (180 / Math.PI);\n    }\n    // We don't bother scaling single-char text divs, because it has very\n    // little effect on text highlighting. This makes scrolling on docs with\n    // lots of such divs a lot faster.\n    if (geom.str.length > 1) {\n      if (style.vertical) {\n        textDiv.dataset.canvasWidth = geom.height * viewport.scale;\n      } else {\n        textDiv.dataset.canvasWidth = geom.width * viewport.scale;\n      }\n    }\n  }\n\n  function render(task) {\n    if (task._canceled) {\n      return;\n    }\n    var textLayerFrag = task._container;\n    var textDivs = task._textDivs;\n    var capability = task._capability;\n    var textDivsLength = textDivs.length;\n\n    // No point in rendering many divs as it would make the browser\n    // unusable even after the divs are rendered.\n    if (textDivsLength > MAX_TEXT_DIVS_TO_RENDER) {\n      capability.resolve();\n      return;\n    }\n\n    var canvas = document.createElement('canvas');\n    canvas.mozOpaque = true;\n    var ctx = canvas.getContext('2d', {alpha: false});\n\n    var lastFontSize;\n    var lastFontFamily;\n    for (var i = 0; i < textDivsLength; i++) {\n      var textDiv = textDivs[i];\n      if (textDiv.dataset.isWhitespace !== undefined) {\n        continue;\n      }\n\n      var fontSize = textDiv.style.fontSize;\n      var fontFamily = textDiv.style.fontFamily;\n\n      // Only build font string and set to context if different from last.\n      if (fontSize !== lastFontSize || fontFamily !== lastFontFamily) {\n        ctx.font = fontSize + ' ' + fontFamily;\n        lastFontSize = fontSize;\n        lastFontFamily = fontFamily;\n      }\n\n      var width = ctx.measureText(textDiv.textContent).width;\n      if (width > 0) {\n        textLayerFrag.appendChild(textDiv);\n        var transform;\n        if (textDiv.dataset.canvasWidth !== undefined) {\n          // Dataset values come of type string.\n          var textScale = textDiv.dataset.canvasWidth / width;\n          transform = 'scaleX(' + textScale + ')';\n        } else {\n          transform = '';\n        }\n        var rotation = textDiv.dataset.angle;\n        if (rotation) {\n          transform = 'rotate(' + rotation + 'deg) ' + transform;\n        }\n        if (transform) {\n          CustomStyle.setProp('transform' , textDiv, transform);\n        }\n      }\n    }\n    capability.resolve();\n  }\n\n  /**\n   * Text layer rendering task.\n   *\n   * @param {TextContent} textContent\n   * @param {HTMLElement} container\n   * @param {PDFJS.PageViewport} viewport\n   * @param {Array} textDivs\n   * @private\n   */\n  function TextLayerRenderTask(textContent, container, viewport, textDivs) {\n    this._textContent = textContent;\n    this._container = container;\n    this._viewport = viewport;\n    textDivs = textDivs || [];\n    this._textDivs = textDivs;\n    this._canceled = false;\n    this._capability = createPromiseCapability();\n    this._renderTimer = null;\n  }\n  TextLayerRenderTask.prototype = {\n    get promise() {\n      return this._capability.promise;\n    },\n\n    cancel: function TextLayer_cancel() {\n      this._canceled = true;\n      if (this._renderTimer !== null) {\n        clearTimeout(this._renderTimer);\n        this._renderTimer = null;\n      }\n      this._capability.reject('canceled');\n    },\n\n    _render: function TextLayer_render(timeout) {\n      var textItems = this._textContent.items;\n      var styles = this._textContent.styles;\n      var textDivs = this._textDivs;\n      var viewport = this._viewport;\n      for (var i = 0, len = textItems.length; i < len; i++) {\n        appendText(textDivs, viewport, textItems[i], styles);\n      }\n\n      if (!timeout) { // Render right away\n        render(this);\n      } else { // Schedule\n        var self = this;\n        this._renderTimer = setTimeout(function() {\n          render(self);\n          self._renderTimer = null;\n        }, timeout);\n      }\n    }\n  };\n\n\n  /**\n   * Starts rendering of the text layer.\n   *\n   * @param {TextLayerRenderParameters} renderParameters\n   * @returns {TextLayerRenderTask}\n   */\n  function renderTextLayer(renderParameters) {\n    var task = new TextLayerRenderTask(renderParameters.textContent,\n                                       renderParameters.container,\n                                       renderParameters.viewport,\n                                       renderParameters.textDivs);\n    task._render(renderParameters.timeout);\n    return task;\n  }\n\n  return renderTextLayer;\n})();\n\nPDFJS.renderTextLayer = renderTextLayer;\n\nexports.renderTextLayer = renderTextLayer;\n}));\n\n\n(function (root, factory) {\n  {\n    factory((root.pdfjsDisplayWebGL = {}), root.pdfjsSharedUtil);\n  }\n}(this, function (exports, sharedUtil) {\n\nvar shadow = sharedUtil.shadow;\n\nvar WebGLUtils = (function WebGLUtilsClosure() {\n  function loadShader(gl, code, shaderType) {\n    var shader = gl.createShader(shaderType);\n    gl.shaderSource(shader, code);\n    gl.compileShader(shader);\n    var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    if (!compiled) {\n      var errorMsg = gl.getShaderInfoLog(shader);\n      throw new Error('Error during shader compilation: ' + errorMsg);\n    }\n    return shader;\n  }\n  function createVertexShader(gl, code) {\n    return loadShader(gl, code, gl.VERTEX_SHADER);\n  }\n  function createFragmentShader(gl, code) {\n    return loadShader(gl, code, gl.FRAGMENT_SHADER);\n  }\n  function createProgram(gl, shaders) {\n    var program = gl.createProgram();\n    for (var i = 0, ii = shaders.length; i < ii; ++i) {\n      gl.attachShader(program, shaders[i]);\n    }\n    gl.linkProgram(program);\n    var linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n      var errorMsg = gl.getProgramInfoLog(program);\n      throw new Error('Error during program linking: ' + errorMsg);\n    }\n    return program;\n  }\n  function createTexture(gl, image, textureId) {\n    gl.activeTexture(textureId);\n    var texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n\n    // Set the parameters so we can render any size image.\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n    // Upload the image into the texture.\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n    return texture;\n  }\n\n  var currentGL, currentCanvas;\n  function generateGL() {\n    if (currentGL) {\n      return;\n    }\n    currentCanvas = document.createElement('canvas');\n    currentGL = currentCanvas.getContext('webgl',\n      { premultipliedalpha: false });\n  }\n\n  var smaskVertexShaderCode = '\\\n  attribute vec2 a_position;                                    \\\n  attribute vec2 a_texCoord;                                    \\\n                                                                \\\n  uniform vec2 u_resolution;                                    \\\n                                                                \\\n  varying vec2 v_texCoord;                                      \\\n                                                                \\\n  void main() {                                                 \\\n    vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;   \\\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);          \\\n                                                                \\\n    v_texCoord = a_texCoord;                                    \\\n  }                                                             ';\n\n  var smaskFragmentShaderCode = '\\\n  precision mediump float;                                      \\\n                                                                \\\n  uniform vec4 u_backdrop;                                      \\\n  uniform int u_subtype;                                        \\\n  uniform sampler2D u_image;                                    \\\n  uniform sampler2D u_mask;                                     \\\n                                                                \\\n  varying vec2 v_texCoord;                                      \\\n                                                                \\\n  void main() {                                                 \\\n    vec4 imageColor = texture2D(u_image, v_texCoord);           \\\n    vec4 maskColor = texture2D(u_mask, v_texCoord);             \\\n    if (u_backdrop.a > 0.0) {                                   \\\n      maskColor.rgb = maskColor.rgb * maskColor.a +             \\\n                      u_backdrop.rgb * (1.0 - maskColor.a);     \\\n    }                                                           \\\n    float lum;                                                  \\\n    if (u_subtype == 0) {                                       \\\n      lum = maskColor.a;                                        \\\n    } else {                                                    \\\n      lum = maskColor.r * 0.3 + maskColor.g * 0.59 +            \\\n            maskColor.b * 0.11;                                 \\\n    }                                                           \\\n    imageColor.a *= lum;                                        \\\n    imageColor.rgb *= imageColor.a;                             \\\n    gl_FragColor = imageColor;                                  \\\n  }                                                             ';\n\n  var smaskCache = null;\n\n  function initSmaskGL() {\n    var canvas, gl;\n\n    generateGL();\n    canvas = currentCanvas;\n    currentCanvas = null;\n    gl = currentGL;\n    currentGL = null;\n\n    // setup a GLSL program\n    var vertexShader = createVertexShader(gl, smaskVertexShaderCode);\n    var fragmentShader = createFragmentShader(gl, smaskFragmentShaderCode);\n    var program = createProgram(gl, [vertexShader, fragmentShader]);\n    gl.useProgram(program);\n\n    var cache = {};\n    cache.gl = gl;\n    cache.canvas = canvas;\n    cache.resolutionLocation = gl.getUniformLocation(program, 'u_resolution');\n    cache.positionLocation = gl.getAttribLocation(program, 'a_position');\n    cache.backdropLocation = gl.getUniformLocation(program, 'u_backdrop');\n    cache.subtypeLocation = gl.getUniformLocation(program, 'u_subtype');\n\n    var texCoordLocation = gl.getAttribLocation(program, 'a_texCoord');\n    var texLayerLocation = gl.getUniformLocation(program, 'u_image');\n    var texMaskLocation = gl.getUniformLocation(program, 'u_mask');\n\n    // provide texture coordinates for the rectangle.\n    var texCoordBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n      0.0,  0.0,\n      1.0,  0.0,\n      0.0,  1.0,\n      0.0,  1.0,\n      1.0,  0.0,\n      1.0,  1.0]), gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(texCoordLocation);\n    gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\n\n    gl.uniform1i(texLayerLocation, 0);\n    gl.uniform1i(texMaskLocation, 1);\n\n    smaskCache = cache;\n  }\n\n  function composeSMask(layer, mask, properties) {\n    var width = layer.width, height = layer.height;\n\n    if (!smaskCache) {\n      initSmaskGL();\n    }\n    var cache = smaskCache,canvas = cache.canvas, gl = cache.gl;\n    canvas.width = width;\n    canvas.height = height;\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    gl.uniform2f(cache.resolutionLocation, width, height);\n\n    if (properties.backdrop) {\n      gl.uniform4f(cache.resolutionLocation, properties.backdrop[0],\n                   properties.backdrop[1], properties.backdrop[2], 1);\n    } else {\n      gl.uniform4f(cache.resolutionLocation, 0, 0, 0, 0);\n    }\n    gl.uniform1i(cache.subtypeLocation,\n                 properties.subtype === 'Luminosity' ? 1 : 0);\n\n    // Create a textures\n    var texture = createTexture(gl, layer, gl.TEXTURE0);\n    var maskTexture = createTexture(gl, mask, gl.TEXTURE1);\n\n\n    // Create a buffer and put a single clipspace rectangle in\n    // it (2 triangles)\n    var buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n      0, 0,\n      width, 0,\n      0, height,\n      0, height,\n      width, 0,\n      width, height]), gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(cache.positionLocation);\n    gl.vertexAttribPointer(cache.positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n    // draw\n    gl.clearColor(0, 0, 0, 0);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n\n    gl.flush();\n\n    gl.deleteTexture(texture);\n    gl.deleteTexture(maskTexture);\n    gl.deleteBuffer(buffer);\n\n    return canvas;\n  }\n\n  var figuresVertexShaderCode = '\\\n  attribute vec2 a_position;                                    \\\n  attribute vec3 a_color;                                       \\\n                                                                \\\n  uniform vec2 u_resolution;                                    \\\n  uniform vec2 u_scale;                                         \\\n  uniform vec2 u_offset;                                        \\\n                                                                \\\n  varying vec4 v_color;                                         \\\n                                                                \\\n  void main() {                                                 \\\n    vec2 position = (a_position + u_offset) * u_scale;          \\\n    vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;     \\\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);          \\\n                                                                \\\n    v_color = vec4(a_color / 255.0, 1.0);                       \\\n  }                                                             ';\n\n  var figuresFragmentShaderCode = '\\\n  precision mediump float;                                      \\\n                                                                \\\n  varying vec4 v_color;                                         \\\n                                                                \\\n  void main() {                                                 \\\n    gl_FragColor = v_color;                                     \\\n  }                                                             ';\n\n  var figuresCache = null;\n\n  function initFiguresGL() {\n    var canvas, gl;\n\n    generateGL();\n    canvas = currentCanvas;\n    currentCanvas = null;\n    gl = currentGL;\n    currentGL = null;\n\n    // setup a GLSL program\n    var vertexShader = createVertexShader(gl, figuresVertexShaderCode);\n    var fragmentShader = createFragmentShader(gl, figuresFragmentShaderCode);\n    var program = createProgram(gl, [vertexShader, fragmentShader]);\n    gl.useProgram(program);\n\n    var cache = {};\n    cache.gl = gl;\n    cache.canvas = canvas;\n    cache.resolutionLocation = gl.getUniformLocation(program, 'u_resolution');\n    cache.scaleLocation = gl.getUniformLocation(program, 'u_scale');\n    cache.offsetLocation = gl.getUniformLocation(program, 'u_offset');\n    cache.positionLocation = gl.getAttribLocation(program, 'a_position');\n    cache.colorLocation = gl.getAttribLocation(program, 'a_color');\n\n    figuresCache = cache;\n  }\n\n  function drawFigures(width, height, backgroundColor, figures, context) {\n    if (!figuresCache) {\n      initFiguresGL();\n    }\n    var cache = figuresCache, canvas = cache.canvas, gl = cache.gl;\n\n    canvas.width = width;\n    canvas.height = height;\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    gl.uniform2f(cache.resolutionLocation, width, height);\n\n    // count triangle points\n    var count = 0;\n    var i, ii, rows;\n    for (i = 0, ii = figures.length; i < ii; i++) {\n      switch (figures[i].type) {\n        case 'lattice':\n          rows = (figures[i].coords.length / figures[i].verticesPerRow) | 0;\n          count += (rows - 1) * (figures[i].verticesPerRow - 1) * 6;\n          break;\n        case 'triangles':\n          count += figures[i].coords.length;\n          break;\n      }\n    }\n    // transfer data\n    var coords = new Float32Array(count * 2);\n    var colors = new Uint8Array(count * 3);\n    var coordsMap = context.coords, colorsMap = context.colors;\n    var pIndex = 0, cIndex = 0;\n    for (i = 0, ii = figures.length; i < ii; i++) {\n      var figure = figures[i], ps = figure.coords, cs = figure.colors;\n      switch (figure.type) {\n        case 'lattice':\n          var cols = figure.verticesPerRow;\n          rows = (ps.length / cols) | 0;\n          for (var row = 1; row < rows; row++) {\n            var offset = row * cols + 1;\n            for (var col = 1; col < cols; col++, offset++) {\n              coords[pIndex] = coordsMap[ps[offset - cols - 1]];\n              coords[pIndex + 1] = coordsMap[ps[offset - cols - 1] + 1];\n              coords[pIndex + 2] = coordsMap[ps[offset - cols]];\n              coords[pIndex + 3] = coordsMap[ps[offset - cols] + 1];\n              coords[pIndex + 4] = coordsMap[ps[offset - 1]];\n              coords[pIndex + 5] = coordsMap[ps[offset - 1] + 1];\n              colors[cIndex] = colorsMap[cs[offset - cols - 1]];\n              colors[cIndex + 1] = colorsMap[cs[offset - cols - 1] + 1];\n              colors[cIndex + 2] = colorsMap[cs[offset - cols - 1] + 2];\n              colors[cIndex + 3] = colorsMap[cs[offset - cols]];\n              colors[cIndex + 4] = colorsMap[cs[offset - cols] + 1];\n              colors[cIndex + 5] = colorsMap[cs[offset - cols] + 2];\n              colors[cIndex + 6] = colorsMap[cs[offset - 1]];\n              colors[cIndex + 7] = colorsMap[cs[offset - 1] + 1];\n              colors[cIndex + 8] = colorsMap[cs[offset - 1] + 2];\n\n              coords[pIndex + 6] = coords[pIndex + 2];\n              coords[pIndex + 7] = coords[pIndex + 3];\n              coords[pIndex + 8] = coords[pIndex + 4];\n              coords[pIndex + 9] = coords[pIndex + 5];\n              coords[pIndex + 10] = coordsMap[ps[offset]];\n              coords[pIndex + 11] = coordsMap[ps[offset] + 1];\n              colors[cIndex + 9] = colors[cIndex + 3];\n              colors[cIndex + 10] = colors[cIndex + 4];\n              colors[cIndex + 11] = colors[cIndex + 5];\n              colors[cIndex + 12] = colors[cIndex + 6];\n              colors[cIndex + 13] = colors[cIndex + 7];\n              colors[cIndex + 14] = colors[cIndex + 8];\n              colors[cIndex + 15] = colorsMap[cs[offset]];\n              colors[cIndex + 16] = colorsMap[cs[offset] + 1];\n              colors[cIndex + 17] = colorsMap[cs[offset] + 2];\n              pIndex += 12;\n              cIndex += 18;\n            }\n          }\n          break;\n        case 'triangles':\n          for (var j = 0, jj = ps.length; j < jj; j++) {\n            coords[pIndex] = coordsMap[ps[j]];\n            coords[pIndex + 1] = coordsMap[ps[j] + 1];\n            colors[cIndex] = colorsMap[cs[j]];\n            colors[cIndex + 1] = colorsMap[cs[j] + 1];\n            colors[cIndex + 2] = colorsMap[cs[j] + 2];\n            pIndex += 2;\n            cIndex += 3;\n          }\n          break;\n      }\n    }\n\n    // draw\n    if (backgroundColor) {\n      gl.clearColor(backgroundColor[0] / 255, backgroundColor[1] / 255,\n                    backgroundColor[2] / 255, 1.0);\n    } else {\n      gl.clearColor(0, 0, 0, 0);\n    }\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    var coordsBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, coordsBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, coords, gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(cache.positionLocation);\n    gl.vertexAttribPointer(cache.positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n    var colorsBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, colorsBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, colors, gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(cache.colorLocation);\n    gl.vertexAttribPointer(cache.colorLocation, 3, gl.UNSIGNED_BYTE, false,\n                           0, 0);\n\n    gl.uniform2f(cache.scaleLocation, context.scaleX, context.scaleY);\n    gl.uniform2f(cache.offsetLocation, context.offsetX, context.offsetY);\n\n    gl.drawArrays(gl.TRIANGLES, 0, count);\n\n    gl.flush();\n\n    gl.deleteBuffer(coordsBuffer);\n    gl.deleteBuffer(colorsBuffer);\n\n    return canvas;\n  }\n\n  function cleanup() {\n    if (smaskCache && smaskCache.canvas) {\n      smaskCache.canvas.width = 0;\n      smaskCache.canvas.height = 0;\n    }\n    if (figuresCache && figuresCache.canvas) {\n      figuresCache.canvas.width = 0;\n      figuresCache.canvas.height = 0;\n    }\n    smaskCache = null;\n    figuresCache = null;\n  }\n\n  return {\n    get isEnabled() {\n      if (PDFJS.disableWebGL) {\n        return false;\n      }\n      var enabled = false;\n      try {\n        generateGL();\n        enabled = !!currentGL;\n      } catch (e) { }\n      return shadow(this, 'isEnabled', enabled);\n    },\n    composeSMask: composeSMask,\n    drawFigures: drawFigures,\n    clear: cleanup\n  };\n})();\n\nexports.WebGLUtils = WebGLUtils;\n}));\n\n\n(function (root, factory) {\n  {\n    factory((root.pdfjsDisplayPatternHelper = {}), root.pdfjsSharedUtil,\n      root.pdfjsDisplayWebGL);\n  }\n}(this, function (exports, sharedUtil, displayWebGL) {\n\nvar Util = sharedUtil.Util;\nvar info = sharedUtil.info;\nvar isArray = sharedUtil.isArray;\nvar error = sharedUtil.error;\nvar WebGLUtils = displayWebGL.WebGLUtils;\n\nvar ShadingIRs = {};\n\nShadingIRs.RadialAxial = {\n  fromIR: function RadialAxial_fromIR(raw) {\n    var type = raw[1];\n    var colorStops = raw[2];\n    var p0 = raw[3];\n    var p1 = raw[4];\n    var r0 = raw[5];\n    var r1 = raw[6];\n    return {\n      type: 'Pattern',\n      getPattern: function RadialAxial_getPattern(ctx) {\n        var grad;\n        if (type === 'axial') {\n          grad = ctx.createLinearGradient(p0[0], p0[1], p1[0], p1[1]);\n        } else if (type === 'radial') {\n          grad = ctx.createRadialGradient(p0[0], p0[1], r0, p1[0], p1[1], r1);\n        }\n\n        for (var i = 0, ii = colorStops.length; i < ii; ++i) {\n          var c = colorStops[i];\n          grad.addColorStop(c[0], c[1]);\n        }\n        return grad;\n      }\n    };\n  }\n};\n\nvar createMeshCanvas = (function createMeshCanvasClosure() {\n  function drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n    // Very basic Gouraud-shaded triangle rasterization algorithm.\n    var coords = context.coords, colors = context.colors;\n    var bytes = data.data, rowSize = data.width * 4;\n    var tmp;\n    if (coords[p1 + 1] > coords[p2 + 1]) {\n      tmp = p1; p1 = p2; p2 = tmp; tmp = c1; c1 = c2; c2 = tmp;\n    }\n    if (coords[p2 + 1] > coords[p3 + 1]) {\n      tmp = p2; p2 = p3; p3 = tmp; tmp = c2; c2 = c3; c3 = tmp;\n    }\n    if (coords[p1 + 1] > coords[p2 + 1]) {\n      tmp = p1; p1 = p2; p2 = tmp; tmp = c1; c1 = c2; c2 = tmp;\n    }\n    var x1 = (coords[p1] + context.offsetX) * context.scaleX;\n    var y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n    var x2 = (coords[p2] + context.offsetX) * context.scaleX;\n    var y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n    var x3 = (coords[p3] + context.offsetX) * context.scaleX;\n    var y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n    if (y1 >= y3) {\n      return;\n    }\n    var c1r = colors[c1], c1g = colors[c1 + 1], c1b = colors[c1 + 2];\n    var c2r = colors[c2], c2g = colors[c2 + 1], c2b = colors[c2 + 2];\n    var c3r = colors[c3], c3g = colors[c3 + 1], c3b = colors[c3 + 2];\n\n    var minY = Math.round(y1), maxY = Math.round(y3);\n    var xa, car, cag, cab;\n    var xb, cbr, cbg, cbb;\n    var k;\n    for (var y = minY; y <= maxY; y++) {\n      if (y < y2) {\n        k = y < y1 ? 0 : y1 === y2 ? 1 : (y1 - y) / (y1 - y2);\n        xa = x1 - (x1 - x2) * k;\n        car = c1r - (c1r - c2r) * k;\n        cag = c1g - (c1g - c2g) * k;\n        cab = c1b - (c1b - c2b) * k;\n      } else {\n        k = y > y3 ? 1 : y2 === y3 ? 0 : (y2 - y) / (y2 - y3);\n        xa = x2 - (x2 - x3) * k;\n        car = c2r - (c2r - c3r) * k;\n        cag = c2g - (c2g - c3g) * k;\n        cab = c2b - (c2b - c3b) * k;\n      }\n      k = y < y1 ? 0 : y > y3 ? 1 : (y1 - y) / (y1 - y3);\n      xb = x1 - (x1 - x3) * k;\n      cbr = c1r - (c1r - c3r) * k;\n      cbg = c1g - (c1g - c3g) * k;\n      cbb = c1b - (c1b - c3b) * k;\n      var x1_ = Math.round(Math.min(xa, xb));\n      var x2_ = Math.round(Math.max(xa, xb));\n      var j = rowSize * y + x1_ * 4;\n      for (var x = x1_; x <= x2_; x++) {\n        k = (xa - x) / (xa - xb);\n        k = k < 0 ? 0 : k > 1 ? 1 : k;\n        bytes[j++] = (car - (car - cbr) * k) | 0;\n        bytes[j++] = (cag - (cag - cbg) * k) | 0;\n        bytes[j++] = (cab - (cab - cbb) * k) | 0;\n        bytes[j++] = 255;\n      }\n    }\n  }\n\n  function drawFigure(data, figure, context) {\n    var ps = figure.coords;\n    var cs = figure.colors;\n    var i, ii;\n    switch (figure.type) {\n      case 'lattice':\n        var verticesPerRow = figure.verticesPerRow;\n        var rows = Math.floor(ps.length / verticesPerRow) - 1;\n        var cols = verticesPerRow - 1;\n        for (i = 0; i < rows; i++) {\n          var q = i * verticesPerRow;\n          for (var j = 0; j < cols; j++, q++) {\n            drawTriangle(data, context,\n              ps[q], ps[q + 1], ps[q + verticesPerRow],\n              cs[q], cs[q + 1], cs[q + verticesPerRow]);\n            drawTriangle(data, context,\n              ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow],\n              cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n          }\n        }\n        break;\n      case 'triangles':\n        for (i = 0, ii = ps.length; i < ii; i += 3) {\n          drawTriangle(data, context,\n            ps[i], ps[i + 1], ps[i + 2],\n            cs[i], cs[i + 1], cs[i + 2]);\n        }\n        break;\n      default:\n        error('illigal figure');\n        break;\n    }\n  }\n\n  function createMeshCanvas(bounds, combinesScale, coords, colors, figures,\n                            backgroundColor, cachedCanvases) {\n    // we will increase scale on some weird factor to let antialiasing take\n    // care of \"rough\" edges\n    var EXPECTED_SCALE = 1.1;\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    var MAX_PATTERN_SIZE = 3000; // 10in @ 300dpi shall be enough\n\n    var offsetX = Math.floor(bounds[0]);\n    var offsetY = Math.floor(bounds[1]);\n    var boundsWidth = Math.ceil(bounds[2]) - offsetX;\n    var boundsHeight = Math.ceil(bounds[3]) - offsetY;\n\n    var width = Math.min(Math.ceil(Math.abs(boundsWidth * combinesScale[0] *\n      EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    var height = Math.min(Math.ceil(Math.abs(boundsHeight * combinesScale[1] *\n      EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    var scaleX = boundsWidth / width;\n    var scaleY = boundsHeight / height;\n\n    var context = {\n      coords: coords,\n      colors: colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY\n    };\n\n    var canvas, tmpCanvas, i, ii;\n    if (WebGLUtils.isEnabled) {\n      canvas = WebGLUtils.drawFigures(width, height, backgroundColor,\n                                      figures, context);\n\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=972126\n      tmpCanvas = cachedCanvases.getCanvas('mesh', width, height, false);\n      tmpCanvas.context.drawImage(canvas, 0, 0);\n      canvas = tmpCanvas.canvas;\n    } else {\n      tmpCanvas = cachedCanvases.getCanvas('mesh', width, height, false);\n      var tmpCtx = tmpCanvas.context;\n\n      var data = tmpCtx.createImageData(width, height);\n      if (backgroundColor) {\n        var bytes = data.data;\n        for (i = 0, ii = bytes.length; i < ii; i += 4) {\n          bytes[i] = backgroundColor[0];\n          bytes[i + 1] = backgroundColor[1];\n          bytes[i + 2] = backgroundColor[2];\n          bytes[i + 3] = 255;\n        }\n      }\n      for (i = 0; i < figures.length; i++) {\n        drawFigure(data, figures[i], context);\n      }\n      tmpCtx.putImageData(data, 0, 0);\n      canvas = tmpCanvas.canvas;\n    }\n\n    return {canvas: canvas, offsetX: offsetX, offsetY: offsetY,\n            scaleX: scaleX, scaleY: scaleY};\n  }\n  return createMeshCanvas;\n})();\n\nShadingIRs.Mesh = {\n  fromIR: function Mesh_fromIR(raw) {\n    //var type = raw[1];\n    var coords = raw[2];\n    var colors = raw[3];\n    var figures = raw[4];\n    var bounds = raw[5];\n    var matrix = raw[6];\n    //var bbox = raw[7];\n    var background = raw[8];\n    return {\n      type: 'Pattern',\n      getPattern: function Mesh_getPattern(ctx, owner, shadingFill) {\n        var scale;\n        if (shadingFill) {\n          scale = Util.singularValueDecompose2dScale(ctx.mozCurrentTransform);\n        } else {\n          // Obtain scale from matrix and current transformation matrix.\n          scale = Util.singularValueDecompose2dScale(owner.baseTransform);\n          if (matrix) {\n            var matrixScale = Util.singularValueDecompose2dScale(matrix);\n            scale = [scale[0] * matrixScale[0],\n                     scale[1] * matrixScale[1]];\n          }\n        }\n\n\n        // Rasterizing on the main thread since sending/queue large canvases\n        // might cause OOM.\n        var temporaryPatternCanvas = createMeshCanvas(bounds, scale, coords,\n          colors, figures, shadingFill ? null : background,\n          owner.cachedCanvases);\n\n        if (!shadingFill) {\n          ctx.setTransform.apply(ctx, owner.baseTransform);\n          if (matrix) {\n            ctx.transform.apply(ctx, matrix);\n          }\n        }\n\n        ctx.translate(temporaryPatternCanvas.offsetX,\n                      temporaryPatternCanvas.offsetY);\n        ctx.scale(temporaryPatternCanvas.scaleX,\n                  temporaryPatternCanvas.scaleY);\n\n        return ctx.createPattern(temporaryPatternCanvas.canvas, 'no-repeat');\n      }\n    };\n  }\n};\n\nShadingIRs.Dummy = {\n  fromIR: function Dummy_fromIR() {\n    return {\n      type: 'Pattern',\n      getPattern: function Dummy_fromIR_getPattern() {\n        return 'hotpink';\n      }\n    };\n  }\n};\n\nfunction getShadingPatternFromIR(raw) {\n  var shadingIR = ShadingIRs[raw[0]];\n  if (!shadingIR) {\n    error('Unknown IR type: ' + raw[0]);\n  }\n  return shadingIR.fromIR(raw);\n}\n\nvar TilingPattern = (function TilingPatternClosure() {\n  var PaintType = {\n    COLORED: 1,\n    UNCOLORED: 2\n  };\n\n  var MAX_PATTERN_SIZE = 3000; // 10in @ 300dpi shall be enough\n\n  function TilingPattern(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n    this.operatorList = IR[2];\n    this.matrix = IR[3] || [1, 0, 0, 1, 0, 0];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.color = color;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n    this.type = 'Pattern';\n    this.ctx = ctx;\n  }\n\n  TilingPattern.prototype = {\n    createPatternCanvas: function TilinPattern_createPatternCanvas(owner) {\n      var operatorList = this.operatorList;\n      var bbox = this.bbox;\n      var xstep = this.xstep;\n      var ystep = this.ystep;\n      var paintType = this.paintType;\n      var tilingType = this.tilingType;\n      var color = this.color;\n      var canvasGraphicsFactory = this.canvasGraphicsFactory;\n\n      info('TilingType: ' + tilingType);\n\n      var x0 = bbox[0], y0 = bbox[1], x1 = bbox[2], y1 = bbox[3];\n\n      var topLeft = [x0, y0];\n      // we want the canvas to be as large as the step size\n      var botRight = [x0 + xstep, y0 + ystep];\n\n      var width = botRight[0] - topLeft[0];\n      var height = botRight[1] - topLeft[1];\n\n      // Obtain scale from matrix and current transformation matrix.\n      var matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n      var curMatrixScale = Util.singularValueDecompose2dScale(\n        this.baseTransform);\n      var combinedScale = [matrixScale[0] * curMatrixScale[0],\n        matrixScale[1] * curMatrixScale[1]];\n\n      // MAX_PATTERN_SIZE is used to avoid OOM situation.\n      // Use width and height values that are as close as possible to the end\n      // result when the pattern is used. Too low value makes the pattern look\n      // blurry. Too large value makes it look too crispy.\n      width = Math.min(Math.ceil(Math.abs(width * combinedScale[0])),\n        MAX_PATTERN_SIZE);\n\n      height = Math.min(Math.ceil(Math.abs(height * combinedScale[1])),\n        MAX_PATTERN_SIZE);\n\n      var tmpCanvas = owner.cachedCanvases.getCanvas('pattern',\n        width, height, true);\n      var tmpCtx = tmpCanvas.context;\n      var graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n      graphics.groupLevel = owner.groupLevel;\n\n      this.setFillAndStrokeStyleToContext(tmpCtx, paintType, color);\n\n      this.setScale(width, height, xstep, ystep);\n      this.transformToScale(graphics);\n\n      // transform coordinates to pattern space\n      var tmpTranslate = [1, 0, 0, 1, -topLeft[0], -topLeft[1]];\n      graphics.transform.apply(graphics, tmpTranslate);\n\n      this.clipBbox(graphics, bbox, x0, y0, x1, y1);\n\n      graphics.executeOperatorList(operatorList);\n      return tmpCanvas.canvas;\n    },\n\n    setScale: function TilingPattern_setScale(width, height, xstep, ystep) {\n      this.scale = [width / xstep, height / ystep];\n    },\n\n    transformToScale: function TilingPattern_transformToScale(graphics) {\n      var scale = this.scale;\n      var tmpScale = [scale[0], 0, 0, scale[1], 0, 0];\n      graphics.transform.apply(graphics, tmpScale);\n    },\n\n    scaleToContext: function TilingPattern_scaleToContext() {\n      var scale = this.scale;\n      this.ctx.scale(1 / scale[0], 1 / scale[1]);\n    },\n\n    clipBbox: function clipBbox(graphics, bbox, x0, y0, x1, y1) {\n      if (bbox && isArray(bbox) && bbox.length === 4) {\n        var bboxWidth = x1 - x0;\n        var bboxHeight = y1 - y0;\n        graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n        graphics.clip();\n        graphics.endPath();\n      }\n    },\n\n    setFillAndStrokeStyleToContext:\n      function setFillAndStrokeStyleToContext(context, paintType, color) {\n        switch (paintType) {\n          case PaintType.COLORED:\n            var ctx = this.ctx;\n            context.fillStyle = ctx.fillStyle;\n            context.strokeStyle = ctx.strokeStyle;\n            break;\n          case PaintType.UNCOLORED:\n            var cssColor = Util.makeCssRgb(color[0], color[1], color[2]);\n            context.fillStyle = cssColor;\n            context.strokeStyle = cssColor;\n            break;\n          default:\n            error('Unsupported paint type: ' + paintType);\n        }\n      },\n\n    getPattern: function TilingPattern_getPattern(ctx, owner) {\n      var temporaryPatternCanvas = this.createPatternCanvas(owner);\n\n      ctx = this.ctx;\n      ctx.setTransform.apply(ctx, this.baseTransform);\n      ctx.transform.apply(ctx, this.matrix);\n      this.scaleToContext();\n\n      return ctx.createPattern(temporaryPatternCanvas, 'repeat');\n    }\n  };\n\n  return TilingPattern;\n})();\n\nexports.getShadingPatternFromIR = getShadingPatternFromIR;\nexports.TilingPattern = TilingPattern;\n}));\n\n\n(function (root, factory) {\n  {\n    factory((root.pdfjsDisplayCanvas = {}), root.pdfjsSharedUtil,\n      root.pdfjsDisplayPatternHelper, root.pdfjsDisplayWebGL);\n  }\n}(this, function (exports, sharedUtil, displayPatternHelper, displayWebGL) {\n\nvar FONT_IDENTITY_MATRIX = sharedUtil.FONT_IDENTITY_MATRIX;\nvar IDENTITY_MATRIX = sharedUtil.IDENTITY_MATRIX;\nvar ImageKind = sharedUtil.ImageKind;\nvar OPS = sharedUtil.OPS;\nvar TextRenderingMode = sharedUtil.TextRenderingMode;\nvar Uint32ArrayView = sharedUtil.Uint32ArrayView;\nvar Util = sharedUtil.Util;\nvar assert = sharedUtil.assert;\nvar info = sharedUtil.info;\nvar isNum = sharedUtil.isNum;\nvar isArray = sharedUtil.isArray;\nvar error = sharedUtil.error;\nvar shadow = sharedUtil.shadow;\nvar warn = sharedUtil.warn;\nvar TilingPattern = displayPatternHelper.TilingPattern;\nvar getShadingPatternFromIR = displayPatternHelper.getShadingPatternFromIR;\nvar WebGLUtils = displayWebGL.WebGLUtils;\n\n// <canvas> contexts store most of the state we need natively.\n// However, PDF needs a bit more state, which we store here.\n\n// Minimal font size that would be used during canvas fillText operations.\nvar MIN_FONT_SIZE = 16;\n// Maximum font size that would be used during canvas fillText operations.\nvar MAX_FONT_SIZE = 100;\nvar MAX_GROUP_SIZE = 4096;\n\n// Heuristic value used when enforcing minimum line widths.\nvar MIN_WIDTH_FACTOR = 0.65;\n\nvar COMPILE_TYPE3_GLYPHS = true;\nvar MAX_SIZE_TO_COMPILE = 1000;\n\nvar FULL_CHUNK_HEIGHT = 16;\n\nfunction createScratchCanvas(width, height) {\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  return canvas;\n}\n\nfunction addContextCurrentTransform(ctx) {\n  // If the context doesn't expose a `mozCurrentTransform`, add a JS based one.\n  if (!ctx.mozCurrentTransform) {\n    ctx._originalSave = ctx.save;\n    ctx._originalRestore = ctx.restore;\n    ctx._originalRotate = ctx.rotate;\n    ctx._originalScale = ctx.scale;\n    ctx._originalTranslate = ctx.translate;\n    ctx._originalTransform = ctx.transform;\n    ctx._originalSetTransform = ctx.setTransform;\n\n    ctx._transformMatrix = ctx._transformMatrix || [1, 0, 0, 1, 0, 0];\n    ctx._transformStack = [];\n\n    Object.defineProperty(ctx, 'mozCurrentTransform', {\n      get: function getCurrentTransform() {\n        return this._transformMatrix;\n      }\n    });\n\n    Object.defineProperty(ctx, 'mozCurrentTransformInverse', {\n      get: function getCurrentTransformInverse() {\n        // Calculation done using WolframAlpha:\n        // http://www.wolframalpha.com/input/?\n        //   i=Inverse+{{a%2C+c%2C+e}%2C+{b%2C+d%2C+f}%2C+{0%2C+0%2C+1}}\n\n        var m = this._transformMatrix;\n        var a = m[0], b = m[1], c = m[2], d = m[3], e = m[4], f = m[5];\n\n        var ad_bc = a * d - b * c;\n        var bc_ad = b * c - a * d;\n\n        return [\n          d / ad_bc,\n          b / bc_ad,\n          c / bc_ad,\n          a / ad_bc,\n          (d * e - c * f) / bc_ad,\n          (b * e - a * f) / ad_bc\n        ];\n      }\n    });\n\n    ctx.save = function ctxSave() {\n      var old = this._transformMatrix;\n      this._transformStack.push(old);\n      this._transformMatrix = old.slice(0, 6);\n\n      this._originalSave();\n    };\n\n    ctx.restore = function ctxRestore() {\n      var prev = this._transformStack.pop();\n      if (prev) {\n        this._transformMatrix = prev;\n        this._originalRestore();\n      }\n    };\n\n    ctx.translate = function ctxTranslate(x, y) {\n      var m = this._transformMatrix;\n      m[4] = m[0] * x + m[2] * y + m[4];\n      m[5] = m[1] * x + m[3] * y + m[5];\n\n      this._originalTranslate(x, y);\n    };\n\n    ctx.scale = function ctxScale(x, y) {\n      var m = this._transformMatrix;\n      m[0] = m[0] * x;\n      m[1] = m[1] * x;\n      m[2] = m[2] * y;\n      m[3] = m[3] * y;\n\n      this._originalScale(x, y);\n    };\n\n    ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n      var m = this._transformMatrix;\n      this._transformMatrix = [\n        m[0] * a + m[2] * b,\n        m[1] * a + m[3] * b,\n        m[0] * c + m[2] * d,\n        m[1] * c + m[3] * d,\n        m[0] * e + m[2] * f + m[4],\n        m[1] * e + m[3] * f + m[5]\n      ];\n\n      ctx._originalTransform(a, b, c, d, e, f);\n    };\n\n    ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n      this._transformMatrix = [a, b, c, d, e, f];\n\n      ctx._originalSetTransform(a, b, c, d, e, f);\n    };\n\n    ctx.rotate = function ctxRotate(angle) {\n      var cosValue = Math.cos(angle);\n      var sinValue = Math.sin(angle);\n\n      var m = this._transformMatrix;\n      this._transformMatrix = [\n        m[0] * cosValue + m[2] * sinValue,\n        m[1] * cosValue + m[3] * sinValue,\n        m[0] * (-sinValue) + m[2] * cosValue,\n        m[1] * (-sinValue) + m[3] * cosValue,\n        m[4],\n        m[5]\n      ];\n\n      this._originalRotate(angle);\n    };\n  }\n}\n\nvar CachedCanvases = (function CachedCanvasesClosure() {\n  function CachedCanvases() {\n    this.cache = Object.create(null);\n  }\n  CachedCanvases.prototype = {\n    getCanvas: function CachedCanvases_getCanvas(id, width, height,\n                                                 trackTransform) {\n      var canvasEntry;\n      if (this.cache[id] !== undefined) {\n        canvasEntry = this.cache[id];\n        canvasEntry.canvas.width = width;\n        canvasEntry.canvas.height = height;\n        // reset canvas transform for emulated mozCurrentTransform, if needed\n        canvasEntry.context.setTransform(1, 0, 0, 1, 0, 0);\n      } else {\n        var canvas = createScratchCanvas(width, height);\n        var ctx = canvas.getContext('2d');\n        if (trackTransform) {\n          addContextCurrentTransform(ctx);\n        }\n        this.cache[id] = canvasEntry = {canvas: canvas, context: ctx};\n      }\n      return canvasEntry;\n    },\n    clear: function () {\n      for (var id in this.cache) {\n        var canvasEntry = this.cache[id];\n        // Zeroing the width and height causes Firefox to release graphics\n        // resources immediately, which can greatly reduce memory consumption.\n        canvasEntry.canvas.width = 0;\n        canvasEntry.canvas.height = 0;\n        delete this.cache[id];\n      }\n    }\n  };\n  return CachedCanvases;\n})();\n\nfunction compileType3Glyph(imgData) {\n  var POINT_TO_PROCESS_LIMIT = 1000;\n\n  var width = imgData.width, height = imgData.height;\n  var i, j, j0, width1 = width + 1;\n  var points = new Uint8Array(width1 * (height + 1));\n  var POINT_TYPES =\n      new Uint8Array([0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0]);\n\n  // decodes bit-packed mask data\n  var lineSize = (width + 7) & ~7, data0 = imgData.data;\n  var data = new Uint8Array(lineSize * height), pos = 0, ii;\n  for (i = 0, ii = data0.length; i < ii; i++) {\n    var mask = 128, elem = data0[i];\n    while (mask > 0) {\n      data[pos++] = (elem & mask) ? 0 : 255;\n      mask >>= 1;\n    }\n  }\n\n  // finding iteresting points: every point is located between mask pixels,\n  // so there will be points of the (width + 1)x(height + 1) grid. Every point\n  // will have flags assigned based on neighboring mask pixels:\n  //   4 | 8\n  //   --P--\n  //   2 | 1\n  // We are interested only in points with the flags:\n  //   - outside corners: 1, 2, 4, 8;\n  //   - inside corners: 7, 11, 13, 14;\n  //   - and, intersections: 5, 10.\n  var count = 0;\n  pos = 0;\n  if (data[pos] !== 0) {\n    points[0] = 1;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j] = data[pos] ? 2 : 1;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j] = 2;\n    ++count;\n  }\n  for (i = 1; i < height; i++) {\n    pos = i * lineSize;\n    j0 = i * width1;\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0] = data[pos] ? 1 : 8;\n      ++count;\n    }\n    // 'sum' is the position of the current pixel configuration in the 'TYPES'\n    // array (in order 8-1-2-4, so we can use '>>2' to shift the column).\n    var sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n    for (j = 1; j < width; j++) {\n      sum = (sum >> 2) + (data[pos + 1] ? 4 : 0) +\n            (data[pos - lineSize + 1] ? 8 : 0);\n      if (POINT_TYPES[sum]) {\n        points[j0 + j] = POINT_TYPES[sum];\n        ++count;\n      }\n      pos++;\n    }\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0 + j] = data[pos] ? 2 : 4;\n      ++count;\n    }\n\n    if (count > POINT_TO_PROCESS_LIMIT) {\n      return null;\n    }\n  }\n\n  pos = lineSize * (height - 1);\n  j0 = i * width1;\n  if (data[pos] !== 0) {\n    points[j0] = 8;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j0 + j] = data[pos] ? 4 : 8;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j0 + j] = 4;\n    ++count;\n  }\n  if (count > POINT_TO_PROCESS_LIMIT) {\n    return null;\n  }\n\n  // building outlines\n  var steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n  var outlines = [];\n  for (i = 0; count && i <= height; i++) {\n    var p = i * width1;\n    var end = p + width;\n    while (p < end && !points[p]) {\n      p++;\n    }\n    if (p === end) {\n      continue;\n    }\n    var coords = [p % width1, i];\n\n    var type = points[p], p0 = p, pp;\n    do {\n      var step = steps[type];\n      do {\n        p += step;\n      } while (!points[p]);\n\n      pp = points[p];\n      if (pp !== 5 && pp !== 10) {\n        // set new direction\n        type = pp;\n        // delete mark\n        points[p] = 0;\n      } else { // type is 5 or 10, ie, a crossing\n        // set new direction\n        type = pp & ((0x33 * type) >> 4);\n        // set new type for \"future hit\"\n        points[p] &= (type >> 2 | type << 2);\n      }\n\n      coords.push(p % width1);\n      coords.push((p / width1) | 0);\n      --count;\n    } while (p0 !== p);\n    outlines.push(coords);\n    --i;\n  }\n\n  var drawOutline = function(c) {\n    c.save();\n    // the path shall be painted in [0..1]x[0..1] space\n    c.scale(1 / width, -1 / height);\n    c.translate(0, -height);\n    c.beginPath();\n    for (var i = 0, ii = outlines.length; i < ii; i++) {\n      var o = outlines[i];\n      c.moveTo(o[0], o[1]);\n      for (var j = 2, jj = o.length; j < jj; j += 2) {\n        c.lineTo(o[j], o[j+1]);\n      }\n    }\n    c.fill();\n    c.beginPath();\n    c.restore();\n  };\n\n  return drawOutline;\n}\n\nvar CanvasExtraState = (function CanvasExtraStateClosure() {\n  function CanvasExtraState(old) {\n    // Are soft masks and alpha values shapes or opacities?\n    this.alphaIsShape = false;\n    this.fontSize = 0;\n    this.fontSizeScale = 1;\n    this.textMatrix = IDENTITY_MATRIX;\n    this.textMatrixScale = 1;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    // Current point (in user coordinates)\n    this.x = 0;\n    this.y = 0;\n    // Start of text line (in text coordinates)\n    this.lineX = 0;\n    this.lineY = 0;\n    // Character and word spacing\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRenderingMode = TextRenderingMode.FILL;\n    this.textRise = 0;\n    // Default fore and background colors\n    this.fillColor = '#000000';\n    this.strokeColor = '#000000';\n    this.patternFill = false;\n    // Note: fill alpha applies to all non-stroking operations\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.activeSMask = null; // nonclonable field (see the save method below)\n\n    this.old = old;\n  }\n\n  CanvasExtraState.prototype = {\n    clone: function CanvasExtraState_clone() {\n      return Object.create(this);\n    },\n    setCurrentPoint: function CanvasExtraState_setCurrentPoint(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n  };\n  return CanvasExtraState;\n})();\n\nvar CanvasGraphics = (function CanvasGraphicsClosure() {\n  // Defines the time the executeOperatorList is going to be executing\n  // before it stops and shedules a continue of execution.\n  var EXECUTION_TIME = 15;\n  // Defines the number of steps before checking the execution time\n  var EXECUTION_STEPS = 10;\n\n  function CanvasGraphics(canvasCtx, commonObjs, objs, imageLayer) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState();\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.imageLayer = imageLayer;\n    this.groupStack = [];\n    this.processingType3 = null;\n    // Patterns are painted relative to the initial page/form transform, see pdf\n    // spec 8.7.2 NOTE 1.\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.cachedCanvases = new CachedCanvases();\n    if (canvasCtx) {\n      // NOTE: if mozCurrentTransform is polyfilled, then the current state of\n      // the transformation must already be set in canvasCtx._transformMatrix.\n      addContextCurrentTransform(canvasCtx);\n    }\n    this.cachedGetSinglePixelWidth = null;\n  }\n\n  function putBinaryImageData(ctx, imgData) {\n    if (typeof ImageData !== 'undefined' && imgData instanceof ImageData) {\n      ctx.putImageData(imgData, 0, 0);\n      return;\n    }\n\n    // Put the image data to the canvas in chunks, rather than putting the\n    // whole image at once.  This saves JS memory, because the ImageData object\n    // is smaller. It also possibly saves C++ memory within the implementation\n    // of putImageData(). (E.g. in Firefox we make two short-lived copies of\n    // the data passed to putImageData()). |n| shouldn't be too small, however,\n    // because too many putImageData() calls will slow things down.\n    //\n    // Note: as written, if the last chunk is partial, the putImageData() call\n    // will (conceptually) put pixels past the bounds of the canvas.  But\n    // that's ok; any such pixels are ignored.\n\n    var height = imgData.height, width = imgData.width;\n    var partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n    var fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n    var totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n    var chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n    var srcPos = 0, destPos;\n    var src = imgData.data;\n    var dest = chunkImgData.data;\n    var i, j, thisChunkHeight, elemsInThisChunk;\n\n    // There are multiple forms in which the pixel data can be passed, and\n    // imgData.kind tells us which one this is.\n    if (imgData.kind === ImageKind.GRAYSCALE_1BPP) {\n      // Grayscale, 1 bit per pixel (i.e. black-and-white).\n      var srcLength = src.byteLength;\n      var dest32 = PDFJS.hasCanvasTypedArrays ? new Uint32Array(dest.buffer) :\n        new Uint32ArrayView(dest);\n      var dest32DataLength = dest32.length;\n      var fullSrcDiff = (width + 7) >> 3;\n      var white = 0xFFFFFFFF;\n      var black = (PDFJS.isLittleEndian || !PDFJS.hasCanvasTypedArrays) ?\n        0xFF000000 : 0x000000FF;\n      for (i = 0; i < totalChunks; i++) {\n        thisChunkHeight =\n          (i < fullChunks) ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n        destPos = 0;\n        for (j = 0; j < thisChunkHeight; j++) {\n          var srcDiff = srcLength - srcPos;\n          var k = 0;\n          var kEnd = (srcDiff > fullSrcDiff) ? width : srcDiff * 8 - 7;\n          var kEndUnrolled = kEnd & ~7;\n          var mask = 0;\n          var srcByte = 0;\n          for (; k < kEndUnrolled; k += 8) {\n            srcByte = src[srcPos++];\n            dest32[destPos++] = (srcByte & 128) ? white : black;\n            dest32[destPos++] = (srcByte & 64) ? white : black;\n            dest32[destPos++] = (srcByte & 32) ? white : black;\n            dest32[destPos++] = (srcByte & 16) ? white : black;\n            dest32[destPos++] = (srcByte & 8) ? white : black;\n            dest32[destPos++] = (srcByte & 4) ? white : black;\n            dest32[destPos++] = (srcByte & 2) ? white : black;\n            dest32[destPos++] = (srcByte & 1) ? white : black;\n          }\n          for (; k < kEnd; k++) {\n             if (mask === 0) {\n               srcByte = src[srcPos++];\n               mask = 128;\n             }\n\n            dest32[destPos++] = (srcByte & mask) ? white : black;\n            mask >>= 1;\n          }\n        }\n        // We ran out of input. Make all remaining pixels transparent.\n        while (destPos < dest32DataLength) {\n          dest32[destPos++] = 0;\n        }\n\n        ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n      }\n    } else if (imgData.kind === ImageKind.RGBA_32BPP) {\n      // RGBA, 32-bits per pixel.\n\n      j = 0;\n      elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n      for (i = 0; i < fullChunks; i++) {\n        dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n        srcPos += elemsInThisChunk;\n\n        ctx.putImageData(chunkImgData, 0, j);\n        j += FULL_CHUNK_HEIGHT;\n      }\n      if (i < totalChunks) {\n        elemsInThisChunk = width * partialChunkHeight * 4;\n        dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n        ctx.putImageData(chunkImgData, 0, j);\n      }\n\n    } else if (imgData.kind === ImageKind.RGB_24BPP) {\n      // RGB, 24-bits per pixel.\n      thisChunkHeight = FULL_CHUNK_HEIGHT;\n      elemsInThisChunk = width * thisChunkHeight;\n      for (i = 0; i < totalChunks; i++) {\n        if (i >= fullChunks) {\n          thisChunkHeight = partialChunkHeight;\n          elemsInThisChunk = width * thisChunkHeight;\n        }\n\n        destPos = 0;\n        for (j = elemsInThisChunk; j--;) {\n          dest[destPos++] = src[srcPos++];\n          dest[destPos++] = src[srcPos++];\n          dest[destPos++] = src[srcPos++];\n          dest[destPos++] = 255;\n        }\n        ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n      }\n    } else {\n      error('bad image kind: ' + imgData.kind);\n    }\n  }\n\n  function putBinaryImageMask(ctx, imgData) {\n    var height = imgData.height, width = imgData.width;\n    var partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n    var fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n    var totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n    var chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n    var srcPos = 0;\n    var src = imgData.data;\n    var dest = chunkImgData.data;\n\n    for (var i = 0; i < totalChunks; i++) {\n      var thisChunkHeight =\n        (i < fullChunks) ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n\n      // Expand the mask so it can be used by the canvas.  Any required\n      // inversion has already been handled.\n      var destPos = 3; // alpha component offset\n      for (var j = 0; j < thisChunkHeight; j++) {\n        var mask = 0;\n        for (var k = 0; k < width; k++) {\n          if (!mask) {\n            var elem = src[srcPos++];\n            mask = 128;\n          }\n          dest[destPos] = (elem & mask) ? 0 : 255;\n          destPos += 4;\n          mask >>= 1;\n        }\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  }\n\n  function copyCtxState(sourceCtx, destCtx) {\n    var properties = ['strokeStyle', 'fillStyle', 'fillRule', 'globalAlpha',\n                      'lineWidth', 'lineCap', 'lineJoin', 'miterLimit',\n                      'globalCompositeOperation', 'font'];\n    for (var i = 0, ii = properties.length; i < ii; i++) {\n      var property = properties[i];\n      if (sourceCtx[property] !== undefined) {\n        destCtx[property] = sourceCtx[property];\n      }\n    }\n    if (sourceCtx.setLineDash !== undefined) {\n      destCtx.setLineDash(sourceCtx.getLineDash());\n      destCtx.lineDashOffset =  sourceCtx.lineDashOffset;\n    } else if (sourceCtx.mozDashOffset !== undefined) {\n      destCtx.mozDash = sourceCtx.mozDash;\n      destCtx.mozDashOffset = sourceCtx.mozDashOffset;\n    }\n  }\n\n  function composeSMaskBackdrop(bytes, r0, g0, b0) {\n    var length = bytes.length;\n    for (var i = 3; i < length; i += 4) {\n      var alpha = bytes[i];\n      if (alpha === 0) {\n        bytes[i - 3] = r0;\n        bytes[i - 2] = g0;\n        bytes[i - 1] = b0;\n      } else if (alpha < 255) {\n        var alpha_ = 255 - alpha;\n        bytes[i - 3] = (bytes[i - 3] * alpha + r0 * alpha_) >> 8;\n        bytes[i - 2] = (bytes[i - 2] * alpha + g0 * alpha_) >> 8;\n        bytes[i - 1] = (bytes[i - 1] * alpha + b0 * alpha_) >> 8;\n      }\n    }\n  }\n\n  function composeSMaskAlpha(maskData, layerData, transferMap) {\n    var length = maskData.length;\n    var scale = 1 / 255;\n    for (var i = 3; i < length; i += 4) {\n      var alpha = transferMap ? transferMap[maskData[i]] : maskData[i];\n      layerData[i] = (layerData[i] * alpha * scale) | 0;\n    }\n  }\n\n  function composeSMaskLuminosity(maskData, layerData, transferMap) {\n    var length = maskData.length;\n    for (var i = 3; i < length; i += 4) {\n      var y = (maskData[i - 3] * 77) +  // * 0.3 / 255 * 0x10000\n              (maskData[i - 2] * 152) + // * 0.59 ....\n              (maskData[i - 1] * 28);   // * 0.11 ....\n      layerData[i] = transferMap ?\n        (layerData[i] * transferMap[y >> 8]) >> 8 :\n        (layerData[i] * y) >> 16;\n    }\n  }\n\n  function genericComposeSMask(maskCtx, layerCtx, width, height,\n                               subtype, backdrop, transferMap) {\n    var hasBackdrop = !!backdrop;\n    var r0 = hasBackdrop ? backdrop[0] : 0;\n    var g0 = hasBackdrop ? backdrop[1] : 0;\n    var b0 = hasBackdrop ? backdrop[2] : 0;\n\n    var composeFn;\n    if (subtype === 'Luminosity') {\n      composeFn = composeSMaskLuminosity;\n    } else {\n      composeFn = composeSMaskAlpha;\n    }\n\n    // processing image in chunks to save memory\n    var PIXELS_TO_PROCESS = 1048576;\n    var chunkSize = Math.min(height, Math.ceil(PIXELS_TO_PROCESS / width));\n    for (var row = 0; row < height; row += chunkSize) {\n      var chunkHeight = Math.min(chunkSize, height - row);\n      var maskData = maskCtx.getImageData(0, row, width, chunkHeight);\n      var layerData = layerCtx.getImageData(0, row, width, chunkHeight);\n\n      if (hasBackdrop) {\n        composeSMaskBackdrop(maskData.data, r0, g0, b0);\n      }\n      composeFn(maskData.data, layerData.data, transferMap);\n\n      maskCtx.putImageData(layerData, 0, row);\n    }\n  }\n\n  function composeSMask(ctx, smask, layerCtx) {\n    var mask = smask.canvas;\n    var maskCtx = smask.context;\n\n    ctx.setTransform(smask.scaleX, 0, 0, smask.scaleY,\n                     smask.offsetX, smask.offsetY);\n\n    var backdrop = smask.backdrop || null;\n    if (!smask.transferMap && WebGLUtils.isEnabled) {\n      var composed = WebGLUtils.composeSMask(layerCtx.canvas, mask,\n        {subtype: smask.subtype, backdrop: backdrop});\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.drawImage(composed, smask.offsetX, smask.offsetY);\n      return;\n    }\n    genericComposeSMask(maskCtx, layerCtx, mask.width, mask.height,\n                        smask.subtype, backdrop, smask.transferMap);\n    ctx.drawImage(mask, 0, 0);\n  }\n\n  var LINE_CAP_STYLES = ['butt', 'round', 'square'];\n  var LINE_JOIN_STYLES = ['miter', 'round', 'bevel'];\n  var NORMAL_CLIP = {};\n  var EO_CLIP = {};\n\n  CanvasGraphics.prototype = {\n\n    beginDrawing: function CanvasGraphics_beginDrawing(transform, viewport,\n                                                       transparency) {\n      // For pdfs that use blend modes we have to clear the canvas else certain\n      // blend modes can look wrong since we'd be blending with a white\n      // backdrop. The problem with a transparent backdrop though is we then\n      // don't get sub pixel anti aliasing on text, creating temporary\n      // transparent canvas when we have blend modes.\n      var width = this.ctx.canvas.width;\n      var height = this.ctx.canvas.height;\n\n      this.ctx.save();\n      this.ctx.fillStyle = 'rgb(255, 255, 255)';\n      this.ctx.fillRect(0, 0, width, height);\n      this.ctx.restore();\n\n      if (transparency) {\n        var transparentCanvas = this.cachedCanvases.getCanvas(\n          'transparent', width, height, true);\n        this.compositeCtx = this.ctx;\n        this.transparentCanvas = transparentCanvas.canvas;\n        this.ctx = transparentCanvas.context;\n        this.ctx.save();\n        // The transform can be applied before rendering, transferring it to\n        // the new canvas.\n        this.ctx.transform.apply(this.ctx,\n                                 this.compositeCtx.mozCurrentTransform);\n      }\n\n      this.ctx.save();\n      if (transform) {\n        this.ctx.transform.apply(this.ctx, transform);\n      }\n      this.ctx.transform.apply(this.ctx, viewport.transform);\n\n      this.baseTransform = this.ctx.mozCurrentTransform.slice();\n\n      if (this.imageLayer) {\n        this.imageLayer.beginLayout();\n      }\n    },\n\n    executeOperatorList: function CanvasGraphics_executeOperatorList(\n                                    operatorList,\n                                    executionStartIdx, continueCallback,\n                                    stepper) {\n      var argsArray = operatorList.argsArray;\n      var fnArray = operatorList.fnArray;\n      var i = executionStartIdx || 0;\n      var argsArrayLen = argsArray.length;\n\n      // Sometimes the OperatorList to execute is empty.\n      if (argsArrayLen === i) {\n        return i;\n      }\n\n      var chunkOperations = (argsArrayLen - i > EXECUTION_STEPS &&\n                             typeof continueCallback === 'function');\n      var endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n      var steps = 0;\n\n      var commonObjs = this.commonObjs;\n      var objs = this.objs;\n      var fnId;\n\n      while (true) {\n        if (stepper !== undefined && i === stepper.nextBreakPoint) {\n          stepper.breakIt(i, continueCallback);\n          return i;\n        }\n\n        fnId = fnArray[i];\n\n        if (fnId !== OPS.dependency) {\n          this[fnId].apply(this, argsArray[i]);\n        } else {\n          var deps = argsArray[i];\n          for (var n = 0, nn = deps.length; n < nn; n++) {\n            var depObjId = deps[n];\n            var common = depObjId[0] === 'g' && depObjId[1] === '_';\n            var objsPool = common ? commonObjs : objs;\n\n            // If the promise isn't resolved yet, add the continueCallback\n            // to the promise and bail out.\n            if (!objsPool.isResolved(depObjId)) {\n              objsPool.get(depObjId, continueCallback);\n              return i;\n            }\n          }\n        }\n\n        i++;\n\n        // If the entire operatorList was executed, stop as were done.\n        if (i === argsArrayLen) {\n          return i;\n        }\n\n        // If the execution took longer then a certain amount of time and\n        // `continueCallback` is specified, interrupt the execution.\n        if (chunkOperations && ++steps > EXECUTION_STEPS) {\n          if (Date.now() > endTime) {\n            continueCallback();\n            return i;\n          }\n          steps = 0;\n        }\n\n        // If the operatorList isn't executed completely yet OR the execution\n        // time was short enough, do another execution round.\n      }\n    },\n\n    endDrawing: function CanvasGraphics_endDrawing() {\n      this.ctx.restore();\n\n      if (this.transparentCanvas) {\n        this.ctx = this.compositeCtx;\n        this.ctx.drawImage(this.transparentCanvas, 0, 0);\n        this.transparentCanvas = null;\n      }\n\n      this.cachedCanvases.clear();\n      WebGLUtils.clear();\n\n      if (this.imageLayer) {\n        this.imageLayer.endLayout();\n      }\n    },\n\n    // Graphics state\n    setLineWidth: function CanvasGraphics_setLineWidth(width) {\n      this.current.lineWidth = width;\n      this.ctx.lineWidth = width;\n    },\n    setLineCap: function CanvasGraphics_setLineCap(style) {\n      this.ctx.lineCap = LINE_CAP_STYLES[style];\n    },\n    setLineJoin: function CanvasGraphics_setLineJoin(style) {\n      this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n    },\n    setMiterLimit: function CanvasGraphics_setMiterLimit(limit) {\n      this.ctx.miterLimit = limit;\n    },\n    setDash: function CanvasGraphics_setDash(dashArray, dashPhase) {\n      var ctx = this.ctx;\n      if (ctx.setLineDash !== undefined) {\n        ctx.setLineDash(dashArray);\n        ctx.lineDashOffset = dashPhase;\n      } else {\n        ctx.mozDash = dashArray;\n        ctx.mozDashOffset = dashPhase;\n      }\n    },\n    setRenderingIntent: function CanvasGraphics_setRenderingIntent(intent) {\n      // Maybe if we one day fully support color spaces this will be important\n      // for now we can ignore.\n      // TODO set rendering intent?\n    },\n    setFlatness: function CanvasGraphics_setFlatness(flatness) {\n      // There's no way to control this with canvas, but we can safely ignore.\n      // TODO set flatness?\n    },\n    setGState: function CanvasGraphics_setGState(states) {\n      for (var i = 0, ii = states.length; i < ii; i++) {\n        var state = states[i];\n        var key = state[0];\n        var value = state[1];\n\n        switch (key) {\n          case 'LW':\n            this.setLineWidth(value);\n            break;\n          case 'LC':\n            this.setLineCap(value);\n            break;\n          case 'LJ':\n            this.setLineJoin(value);\n            break;\n          case 'ML':\n            this.setMiterLimit(value);\n            break;\n          case 'D':\n            this.setDash(value[0], value[1]);\n            break;\n          case 'RI':\n            this.setRenderingIntent(value);\n            break;\n          case 'FL':\n            this.setFlatness(value);\n            break;\n          case 'Font':\n            this.setFont(value[0], value[1]);\n            break;\n          case 'CA':\n            this.current.strokeAlpha = state[1];\n            break;\n          case 'ca':\n            this.current.fillAlpha = state[1];\n            this.ctx.globalAlpha = state[1];\n            break;\n          case 'BM':\n            if (value && value.name && (value.name !== 'Normal')) {\n              var mode = value.name.replace(/([A-Z])/g,\n                function(c) {\n                  return '-' + c.toLowerCase();\n                }\n              ).substring(1);\n              this.ctx.globalCompositeOperation = mode;\n              if (this.ctx.globalCompositeOperation !== mode) {\n                warn('globalCompositeOperation \"' + mode +\n                     '\" is not supported');\n              }\n            } else {\n              this.ctx.globalCompositeOperation = 'source-over';\n            }\n            break;\n          case 'SMask':\n            if (this.current.activeSMask) {\n              this.endSMaskGroup();\n            }\n            this.current.activeSMask = value ? this.tempSMask : null;\n            if (this.current.activeSMask) {\n              this.beginSMaskGroup();\n            }\n            this.tempSMask = null;\n            break;\n        }\n      }\n    },\n    beginSMaskGroup: function CanvasGraphics_beginSMaskGroup() {\n\n      var activeSMask = this.current.activeSMask;\n      var drawnWidth = activeSMask.canvas.width;\n      var drawnHeight = activeSMask.canvas.height;\n      var cacheId = 'smaskGroupAt' + this.groupLevel;\n      var scratchCanvas = this.cachedCanvases.getCanvas(\n        cacheId, drawnWidth, drawnHeight, true);\n\n      var currentCtx = this.ctx;\n      var currentTransform = currentCtx.mozCurrentTransform;\n      this.ctx.save();\n\n      var groupCtx = scratchCanvas.context;\n      groupCtx.scale(1 / activeSMask.scaleX, 1 / activeSMask.scaleY);\n      groupCtx.translate(-activeSMask.offsetX, -activeSMask.offsetY);\n      groupCtx.transform.apply(groupCtx, currentTransform);\n\n      copyCtxState(currentCtx, groupCtx);\n      this.ctx = groupCtx;\n      this.setGState([\n        ['BM', 'Normal'],\n        ['ca', 1],\n        ['CA', 1]\n      ]);\n      this.groupStack.push(currentCtx);\n      this.groupLevel++;\n    },\n    endSMaskGroup: function CanvasGraphics_endSMaskGroup() {\n      var groupCtx = this.ctx;\n      this.groupLevel--;\n      this.ctx = this.groupStack.pop();\n\n      composeSMask(this.ctx, this.current.activeSMask, groupCtx);\n      this.ctx.restore();\n      copyCtxState(groupCtx, this.ctx);\n    },\n    save: function CanvasGraphics_save() {\n      this.ctx.save();\n      var old = this.current;\n      this.stateStack.push(old);\n      this.current = old.clone();\n      this.current.activeSMask = null;\n    },\n    restore: function CanvasGraphics_restore() {\n      if (this.stateStack.length !== 0) {\n        if (this.current.activeSMask !== null) {\n          this.endSMaskGroup();\n        }\n\n        this.current = this.stateStack.pop();\n        this.ctx.restore();\n\n        // Ensure that the clipping path is reset (fixes issue6413.pdf).\n        this.pendingClip = null;\n\n        this.cachedGetSinglePixelWidth = null;\n      }\n    },\n    transform: function CanvasGraphics_transform(a, b, c, d, e, f) {\n      this.ctx.transform(a, b, c, d, e, f);\n\n      this.cachedGetSinglePixelWidth = null;\n    },\n\n    // Path\n    constructPath: function CanvasGraphics_constructPath(ops, args) {\n      var ctx = this.ctx;\n      var current = this.current;\n      var x = current.x, y = current.y;\n      for (var i = 0, j = 0, ii = ops.length; i < ii; i++) {\n        switch (ops[i] | 0) {\n          case OPS.rectangle:\n            x = args[j++];\n            y = args[j++];\n            var width = args[j++];\n            var height = args[j++];\n            if (width === 0) {\n              width = this.getSinglePixelWidth();\n            }\n            if (height === 0) {\n              height = this.getSinglePixelWidth();\n            }\n            var xw = x + width;\n            var yh = y + height;\n            this.ctx.moveTo(x, y);\n            this.ctx.lineTo(xw, y);\n            this.ctx.lineTo(xw, yh);\n            this.ctx.lineTo(x, yh);\n            this.ctx.lineTo(x, y);\n            this.ctx.closePath();\n            break;\n          case OPS.moveTo:\n            x = args[j++];\n            y = args[j++];\n            ctx.moveTo(x, y);\n            break;\n          case OPS.lineTo:\n            x = args[j++];\n            y = args[j++];\n            ctx.lineTo(x, y);\n            break;\n          case OPS.curveTo:\n            x = args[j + 4];\n            y = args[j + 5];\n            ctx.bezierCurveTo(args[j], args[j + 1], args[j + 2], args[j + 3],\n                              x, y);\n            j += 6;\n            break;\n          case OPS.curveTo2:\n            ctx.bezierCurveTo(x, y, args[j], args[j + 1],\n                              args[j + 2], args[j + 3]);\n            x = args[j + 2];\n            y = args[j + 3];\n            j += 4;\n            break;\n          case OPS.curveTo3:\n            x = args[j + 2];\n            y = args[j + 3];\n            ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n            j += 4;\n            break;\n          case OPS.closePath:\n            ctx.closePath();\n            break;\n        }\n      }\n      current.setCurrentPoint(x, y);\n    },\n    closePath: function CanvasGraphics_closePath() {\n      this.ctx.closePath();\n    },\n    stroke: function CanvasGraphics_stroke(consumePath) {\n      consumePath = typeof consumePath !== 'undefined' ? consumePath : true;\n      var ctx = this.ctx;\n      var strokeColor = this.current.strokeColor;\n      // Prevent drawing too thin lines by enforcing a minimum line width.\n      ctx.lineWidth = Math.max(this.getSinglePixelWidth() * MIN_WIDTH_FACTOR,\n                               this.current.lineWidth);\n      // For stroke we want to temporarily change the global alpha to the\n      // stroking alpha.\n      ctx.globalAlpha = this.current.strokeAlpha;\n      if (strokeColor && strokeColor.hasOwnProperty('type') &&\n          strokeColor.type === 'Pattern') {\n        // for patterns, we transform to pattern space, calculate\n        // the pattern, call stroke, and restore to user space\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(ctx, this);\n        ctx.stroke();\n        ctx.restore();\n      } else {\n        ctx.stroke();\n      }\n      if (consumePath) {\n        this.consumePath();\n      }\n      // Restore the global alpha to the fill alpha\n      ctx.globalAlpha = this.current.fillAlpha;\n    },\n    closeStroke: function CanvasGraphics_closeStroke() {\n      this.closePath();\n      this.stroke();\n    },\n    fill: function CanvasGraphics_fill(consumePath) {\n      consumePath = typeof consumePath !== 'undefined' ? consumePath : true;\n      var ctx = this.ctx;\n      var fillColor = this.current.fillColor;\n      var isPatternFill = this.current.patternFill;\n      var needRestore = false;\n\n      if (isPatternFill) {\n        ctx.save();\n        if (this.baseTransform) {\n          ctx.setTransform.apply(ctx, this.baseTransform);\n        }\n        ctx.fillStyle = fillColor.getPattern(ctx, this);\n        needRestore = true;\n      }\n\n      if (this.pendingEOFill) {\n        if (ctx.mozFillRule !== undefined) {\n          ctx.mozFillRule = 'evenodd';\n          ctx.fill();\n          ctx.mozFillRule = 'nonzero';\n        } else {\n          ctx.fill('evenodd');\n        }\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill();\n      }\n\n      if (needRestore) {\n        ctx.restore();\n      }\n      if (consumePath) {\n        this.consumePath();\n      }\n    },\n    eoFill: function CanvasGraphics_eoFill() {\n      this.pendingEOFill = true;\n      this.fill();\n    },\n    fillStroke: function CanvasGraphics_fillStroke() {\n      this.fill(false);\n      this.stroke(false);\n\n      this.consumePath();\n    },\n    eoFillStroke: function CanvasGraphics_eoFillStroke() {\n      this.pendingEOFill = true;\n      this.fillStroke();\n    },\n    closeFillStroke: function CanvasGraphics_closeFillStroke() {\n      this.closePath();\n      this.fillStroke();\n    },\n    closeEOFillStroke: function CanvasGraphics_closeEOFillStroke() {\n      this.pendingEOFill = true;\n      this.closePath();\n      this.fillStroke();\n    },\n    endPath: function CanvasGraphics_endPath() {\n      this.consumePath();\n    },\n\n    // Clipping\n    clip: function CanvasGraphics_clip() {\n      this.pendingClip = NORMAL_CLIP;\n    },\n    eoClip: function CanvasGraphics_eoClip() {\n      this.pendingClip = EO_CLIP;\n    },\n\n    // Text\n    beginText: function CanvasGraphics_beginText() {\n      this.current.textMatrix = IDENTITY_MATRIX;\n      this.current.textMatrixScale = 1;\n      this.current.x = this.current.lineX = 0;\n      this.current.y = this.current.lineY = 0;\n    },\n    endText: function CanvasGraphics_endText() {\n      var paths = this.pendingTextPaths;\n      var ctx = this.ctx;\n      if (paths === undefined) {\n        ctx.beginPath();\n        return;\n      }\n\n      ctx.save();\n      ctx.beginPath();\n      for (var i = 0; i < paths.length; i++) {\n        var path = paths[i];\n        ctx.setTransform.apply(ctx, path.transform);\n        ctx.translate(path.x, path.y);\n        path.addToPath(ctx, path.fontSize);\n      }\n      ctx.restore();\n      ctx.clip();\n      ctx.beginPath();\n      delete this.pendingTextPaths;\n    },\n    setCharSpacing: function CanvasGraphics_setCharSpacing(spacing) {\n      this.current.charSpacing = spacing;\n    },\n    setWordSpacing: function CanvasGraphics_setWordSpacing(spacing) {\n      this.current.wordSpacing = spacing;\n    },\n    setHScale: function CanvasGraphics_setHScale(scale) {\n      this.current.textHScale = scale / 100;\n    },\n    setLeading: function CanvasGraphics_setLeading(leading) {\n      this.current.leading = -leading;\n    },\n    setFont: function CanvasGraphics_setFont(fontRefName, size) {\n      var fontObj = this.commonObjs.get(fontRefName);\n      var current = this.current;\n\n      if (!fontObj) {\n        error('Can\\'t find font for ' + fontRefName);\n      }\n\n      current.fontMatrix = (fontObj.fontMatrix ?\n                            fontObj.fontMatrix : FONT_IDENTITY_MATRIX);\n\n      // A valid matrix needs all main diagonal elements to be non-zero\n      // This also ensures we bypass FF bugzilla bug #719844.\n      if (current.fontMatrix[0] === 0 ||\n          current.fontMatrix[3] === 0) {\n        warn('Invalid font matrix for font ' + fontRefName);\n      }\n\n      // The spec for Tf (setFont) says that 'size' specifies the font 'scale',\n      // and in some docs this can be negative (inverted x-y axes).\n      if (size < 0) {\n        size = -size;\n        current.fontDirection = -1;\n      } else {\n        current.fontDirection = 1;\n      }\n\n      this.current.font = fontObj;\n      this.current.fontSize = size;\n\n      if (fontObj.isType3Font) {\n        return; // we don't need ctx.font for Type3 fonts\n      }\n\n      var name = fontObj.loadedName || 'sans-serif';\n      var bold = fontObj.black ? (fontObj.bold ? '900' : 'bold') :\n                                 (fontObj.bold ? 'bold' : 'normal');\n\n      var italic = fontObj.italic ? 'italic' : 'normal';\n      var typeface = '\"' + name + '\", ' + fontObj.fallbackName;\n\n      // Some font backends cannot handle fonts below certain size.\n      // Keeping the font at minimal size and using the fontSizeScale to change\n      // the current transformation matrix before the fillText/strokeText.\n      // See https://bugzilla.mozilla.org/show_bug.cgi?id=726227\n      var browserFontSize = size < MIN_FONT_SIZE ? MIN_FONT_SIZE :\n                            size > MAX_FONT_SIZE ? MAX_FONT_SIZE : size;\n      this.current.fontSizeScale = size / browserFontSize;\n\n      var rule = italic + ' ' + bold + ' ' + browserFontSize + 'px ' + typeface;\n      this.ctx.font = rule;\n    },\n    setTextRenderingMode: function CanvasGraphics_setTextRenderingMode(mode) {\n      this.current.textRenderingMode = mode;\n    },\n    setTextRise: function CanvasGraphics_setTextRise(rise) {\n      this.current.textRise = rise;\n    },\n    moveText: function CanvasGraphics_moveText(x, y) {\n      this.current.x = this.current.lineX += x;\n      this.current.y = this.current.lineY += y;\n    },\n    setLeadingMoveText: function CanvasGraphics_setLeadingMoveText(x, y) {\n      this.setLeading(-y);\n      this.moveText(x, y);\n    },\n    setTextMatrix: function CanvasGraphics_setTextMatrix(a, b, c, d, e, f) {\n      this.current.textMatrix = [a, b, c, d, e, f];\n      this.current.textMatrixScale = Math.sqrt(a * a + b * b);\n\n      this.current.x = this.current.lineX = 0;\n      this.current.y = this.current.lineY = 0;\n    },\n    nextLine: function CanvasGraphics_nextLine() {\n      this.moveText(0, this.current.leading);\n    },\n\n    paintChar: function CanvasGraphics_paintChar(character, x, y) {\n      var ctx = this.ctx;\n      var current = this.current;\n      var font = current.font;\n      var textRenderingMode = current.textRenderingMode;\n      var fontSize = current.fontSize / current.fontSizeScale;\n      var fillStrokeMode = textRenderingMode &\n        TextRenderingMode.FILL_STROKE_MASK;\n      var isAddToPathSet = !!(textRenderingMode &\n        TextRenderingMode.ADD_TO_PATH_FLAG);\n\n      var addToPath;\n      if (font.disableFontFace || isAddToPathSet) {\n        addToPath = font.getPathGenerator(this.commonObjs, character);\n      }\n\n      if (font.disableFontFace) {\n        ctx.save();\n        ctx.translate(x, y);\n        ctx.beginPath();\n        addToPath(ctx, fontSize);\n        if (fillStrokeMode === TextRenderingMode.FILL ||\n            fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n          ctx.fill();\n        }\n        if (fillStrokeMode === TextRenderingMode.STROKE ||\n            fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n          ctx.stroke();\n        }\n        ctx.restore();\n      } else {\n        if (fillStrokeMode === TextRenderingMode.FILL ||\n            fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n          ctx.fillText(character, x, y);\n        }\n        if (fillStrokeMode === TextRenderingMode.STROKE ||\n            fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n          ctx.strokeText(character, x, y);\n        }\n      }\n\n      if (isAddToPathSet) {\n        var paths = this.pendingTextPaths || (this.pendingTextPaths = []);\n        paths.push({\n          transform: ctx.mozCurrentTransform,\n          x: x,\n          y: y,\n          fontSize: fontSize,\n          addToPath: addToPath\n        });\n      }\n    },\n\n    get isFontSubpixelAAEnabled() {\n      // Checks if anti-aliasing is enabled when scaled text is painted.\n      // On Windows GDI scaled fonts looks bad.\n      var ctx = document.createElement('canvas').getContext('2d');\n      ctx.scale(1.5, 1);\n      ctx.fillText('I', 0, 10);\n      var data = ctx.getImageData(0, 0, 10, 10).data;\n      var enabled = false;\n      for (var i = 3; i < data.length; i += 4) {\n        if (data[i] > 0 && data[i] < 255) {\n          enabled = true;\n          break;\n        }\n      }\n      return shadow(this, 'isFontSubpixelAAEnabled', enabled);\n    },\n\n    showText: function CanvasGraphics_showText(glyphs) {\n      var current = this.current;\n      var font = current.font;\n      if (font.isType3Font) {\n        return this.showType3Text(glyphs);\n      }\n\n      var fontSize = current.fontSize;\n      if (fontSize === 0) {\n        return;\n      }\n\n      var ctx = this.ctx;\n      var fontSizeScale = current.fontSizeScale;\n      var charSpacing = current.charSpacing;\n      var wordSpacing = current.wordSpacing;\n      var fontDirection = current.fontDirection;\n      var textHScale = current.textHScale * fontDirection;\n      var glyphsLength = glyphs.length;\n      var vertical = font.vertical;\n      var spacingDir = vertical ? 1 : -1;\n      var defaultVMetrics = font.defaultVMetrics;\n      var widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n      var simpleFillText =\n        current.textRenderingMode === TextRenderingMode.FILL &&\n        !font.disableFontFace;\n\n      ctx.save();\n      ctx.transform.apply(ctx, current.textMatrix);\n      ctx.translate(current.x, current.y + current.textRise);\n\n      if (current.patternFill) {\n        // TODO: Some shading patterns are not applied correctly to text,\n        //       e.g. issues 3988 and 5432, and ShowText-ShadingPattern.pdf.\n        ctx.fillStyle = current.fillColor.getPattern(ctx, this);\n      }\n\n      if (fontDirection > 0) {\n        ctx.scale(textHScale, -1);\n      } else {\n        ctx.scale(textHScale, 1);\n      }\n\n      var lineWidth = current.lineWidth;\n      var scale = current.textMatrixScale;\n      if (scale === 0 || lineWidth === 0) {\n        var fillStrokeMode = current.textRenderingMode &\n          TextRenderingMode.FILL_STROKE_MASK;\n        if (fillStrokeMode === TextRenderingMode.STROKE ||\n            fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n          this.cachedGetSinglePixelWidth = null;\n          lineWidth = this.getSinglePixelWidth() * MIN_WIDTH_FACTOR;\n        }\n      } else {\n        lineWidth /= scale;\n      }\n\n      if (fontSizeScale !== 1.0) {\n        ctx.scale(fontSizeScale, fontSizeScale);\n        lineWidth /= fontSizeScale;\n      }\n\n      ctx.lineWidth = lineWidth;\n\n      var x = 0, i;\n      for (i = 0; i < glyphsLength; ++i) {\n        var glyph = glyphs[i];\n        if (isNum(glyph)) {\n          x += spacingDir * glyph * fontSize / 1000;\n          continue;\n        }\n\n        var restoreNeeded = false;\n        var spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n        var character = glyph.fontChar;\n        var accent = glyph.accent;\n        var scaledX, scaledY, scaledAccentX, scaledAccentY;\n        var width = glyph.width;\n        if (vertical) {\n          var vmetric, vx, vy;\n          vmetric = glyph.vmetric || defaultVMetrics;\n          vx = glyph.vmetric ? vmetric[1] : width * 0.5;\n          vx = -vx * widthAdvanceScale;\n          vy = vmetric[2] * widthAdvanceScale;\n\n          width = vmetric ? -vmetric[0] : width;\n          scaledX = vx / fontSizeScale;\n          scaledY = (x + vy) / fontSizeScale;\n        } else {\n          scaledX = x / fontSizeScale;\n          scaledY = 0;\n        }\n\n        if (font.remeasure && width > 0) {\n          // Some standard fonts may not have the exact width: rescale per\n          // character if measured width is greater than expected glyph width\n          // and subpixel-aa is enabled, otherwise just center the glyph.\n          var measuredWidth = ctx.measureText(character).width * 1000 /\n            fontSize * fontSizeScale;\n          if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n            var characterScaleX = width / measuredWidth;\n            restoreNeeded = true;\n            ctx.save();\n            ctx.scale(characterScaleX, 1);\n            scaledX /= characterScaleX;\n          } else if (width !== measuredWidth) {\n            scaledX += (width - measuredWidth) / 2000 *\n              fontSize / fontSizeScale;\n          }\n        }\n\n        if (simpleFillText && !accent) {\n          // common case\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY);\n          if (accent) {\n            scaledAccentX = scaledX + accent.offset.x / fontSizeScale;\n            scaledAccentY = scaledY - accent.offset.y / fontSizeScale;\n            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY);\n          }\n        }\n\n        var charWidth = width * widthAdvanceScale + spacing * fontDirection;\n        x += charWidth;\n\n        if (restoreNeeded) {\n          ctx.restore();\n        }\n      }\n      if (vertical) {\n        current.y -= x * textHScale;\n      } else {\n        current.x += x * textHScale;\n      }\n      ctx.restore();\n    },\n\n    showType3Text: function CanvasGraphics_showType3Text(glyphs) {\n      // Type3 fonts - each glyph is a \"mini-PDF\"\n      var ctx = this.ctx;\n      var current = this.current;\n      var font = current.font;\n      var fontSize = current.fontSize;\n      var fontDirection = current.fontDirection;\n      var spacingDir = font.vertical ? 1 : -1;\n      var charSpacing = current.charSpacing;\n      var wordSpacing = current.wordSpacing;\n      var textHScale = current.textHScale * fontDirection;\n      var fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n      var glyphsLength = glyphs.length;\n      var isTextInvisible =\n        current.textRenderingMode === TextRenderingMode.INVISIBLE;\n      var i, glyph, width, spacingLength;\n\n      if (isTextInvisible || fontSize === 0) {\n        return;\n      }\n      this.cachedGetSinglePixelWidth = null;\n\n      ctx.save();\n      ctx.transform.apply(ctx, current.textMatrix);\n      ctx.translate(current.x, current.y);\n\n      ctx.scale(textHScale, fontDirection);\n\n      for (i = 0; i < glyphsLength; ++i) {\n        glyph = glyphs[i];\n        if (isNum(glyph)) {\n          spacingLength = spacingDir * glyph * fontSize / 1000;\n          this.ctx.translate(spacingLength, 0);\n          current.x += spacingLength * textHScale;\n          continue;\n        }\n\n        var spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n        var operatorList = font.charProcOperatorList[glyph.operatorListId];\n        if (!operatorList) {\n          warn('Type3 character \\\"' + glyph.operatorListId +\n               '\\\" is not available');\n          continue;\n        }\n        this.processingType3 = glyph;\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform.apply(ctx, fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n\n        var transformed = Util.applyTransform([glyph.width, 0], fontMatrix);\n        width = transformed[0] * fontSize + spacing;\n\n        ctx.translate(width, 0);\n        current.x += width * textHScale;\n      }\n      ctx.restore();\n      this.processingType3 = null;\n    },\n\n    // Type3 fonts\n    setCharWidth: function CanvasGraphics_setCharWidth(xWidth, yWidth) {\n      // We can safely ignore this since the width should be the same\n      // as the width in the Widths array.\n    },\n    setCharWidthAndBounds: function CanvasGraphics_setCharWidthAndBounds(xWidth,\n                                                                        yWidth,\n                                                                        llx,\n                                                                        lly,\n                                                                        urx,\n                                                                        ury) {\n      // TODO According to the spec we're also suppose to ignore any operators\n      // that set color or include images while processing this type3 font.\n      this.ctx.rect(llx, lly, urx - llx, ury - lly);\n      this.clip();\n      this.endPath();\n    },\n\n    // Color\n    getColorN_Pattern: function CanvasGraphics_getColorN_Pattern(IR) {\n      var pattern;\n      if (IR[0] === 'TilingPattern') {\n        var color = IR[1];\n        var baseTransform = this.baseTransform ||\n                            this.ctx.mozCurrentTransform.slice();\n        var self = this;\n        var canvasGraphicsFactory = {\n          createCanvasGraphics: function (ctx) {\n            return new CanvasGraphics(ctx, self.commonObjs, self.objs);\n          }\n        };\n        pattern = new TilingPattern(IR, color, this.ctx, canvasGraphicsFactory,\n                                    baseTransform);\n      } else {\n        pattern = getShadingPatternFromIR(IR);\n      }\n      return pattern;\n    },\n    setStrokeColorN: function CanvasGraphics_setStrokeColorN(/*...*/) {\n      this.current.strokeColor = this.getColorN_Pattern(arguments);\n    },\n    setFillColorN: function CanvasGraphics_setFillColorN(/*...*/) {\n      this.current.fillColor = this.getColorN_Pattern(arguments);\n      this.current.patternFill = true;\n    },\n    setStrokeRGBColor: function CanvasGraphics_setStrokeRGBColor(r, g, b) {\n      var color = Util.makeCssRgb(r, g, b);\n      this.ctx.strokeStyle = color;\n      this.current.strokeColor = color;\n    },\n    setFillRGBColor: function CanvasGraphics_setFillRGBColor(r, g, b) {\n      var color = Util.makeCssRgb(r, g, b);\n      this.ctx.fillStyle = color;\n      this.current.fillColor = color;\n      this.current.patternFill = false;\n    },\n\n    shadingFill: function CanvasGraphics_shadingFill(patternIR) {\n      var ctx = this.ctx;\n\n      this.save();\n      var pattern = getShadingPatternFromIR(patternIR);\n      ctx.fillStyle = pattern.getPattern(ctx, this, true);\n\n      var inv = ctx.mozCurrentTransformInverse;\n      if (inv) {\n        var canvas = ctx.canvas;\n        var width = canvas.width;\n        var height = canvas.height;\n\n        var bl = Util.applyTransform([0, 0], inv);\n        var br = Util.applyTransform([0, height], inv);\n        var ul = Util.applyTransform([width, 0], inv);\n        var ur = Util.applyTransform([width, height], inv);\n\n        var x0 = Math.min(bl[0], br[0], ul[0], ur[0]);\n        var y0 = Math.min(bl[1], br[1], ul[1], ur[1]);\n        var x1 = Math.max(bl[0], br[0], ul[0], ur[0]);\n        var y1 = Math.max(bl[1], br[1], ul[1], ur[1]);\n\n        this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n      } else {\n        // HACK to draw the gradient onto an infinite rectangle.\n        // PDF gradients are drawn across the entire image while\n        // Canvas only allows gradients to be drawn in a rectangle\n        // The following bug should allow us to remove this.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=664884\n\n        this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n      }\n\n      this.restore();\n    },\n\n    // Images\n    beginInlineImage: function CanvasGraphics_beginInlineImage() {\n      error('Should not call beginInlineImage');\n    },\n    beginImageData: function CanvasGraphics_beginImageData() {\n      error('Should not call beginImageData');\n    },\n\n    paintFormXObjectBegin: function CanvasGraphics_paintFormXObjectBegin(matrix,\n                                                                        bbox) {\n      this.save();\n      this.baseTransformStack.push(this.baseTransform);\n\n      if (isArray(matrix) && 6 === matrix.length) {\n        this.transform.apply(this, matrix);\n      }\n\n      this.baseTransform = this.ctx.mozCurrentTransform;\n\n      if (isArray(bbox) && 4 === bbox.length) {\n        var width = bbox[2] - bbox[0];\n        var height = bbox[3] - bbox[1];\n        this.ctx.rect(bbox[0], bbox[1], width, height);\n        this.clip();\n        this.endPath();\n      }\n    },\n\n    paintFormXObjectEnd: function CanvasGraphics_paintFormXObjectEnd() {\n      this.restore();\n      this.baseTransform = this.baseTransformStack.pop();\n    },\n\n    beginGroup: function CanvasGraphics_beginGroup(group) {\n      this.save();\n      var currentCtx = this.ctx;\n      // TODO non-isolated groups - according to Rik at adobe non-isolated\n      // group results aren't usually that different and they even have tools\n      // that ignore this setting. Notes from Rik on implmenting:\n      // - When you encounter an transparency group, create a new canvas with\n      // the dimensions of the bbox\n      // - copy the content from the previous canvas to the new canvas\n      // - draw as usual\n      // - remove the backdrop alpha:\n      // alphaNew = 1 - (1 - alpha)/(1 - alphaBackdrop) with 'alpha' the alpha\n      // value of your transparency group and 'alphaBackdrop' the alpha of the\n      // backdrop\n      // - remove background color:\n      // colorNew = color - alphaNew *colorBackdrop /(1 - alphaNew)\n      if (!group.isolated) {\n        info('TODO: Support non-isolated groups.');\n      }\n\n      // TODO knockout - supposedly possible with the clever use of compositing\n      // modes.\n      if (group.knockout) {\n        warn('Knockout groups not supported.');\n      }\n\n      var currentTransform = currentCtx.mozCurrentTransform;\n      if (group.matrix) {\n        currentCtx.transform.apply(currentCtx, group.matrix);\n      }\n      assert(group.bbox, 'Bounding box is required.');\n\n      // Based on the current transform figure out how big the bounding box\n      // will actually be.\n      var bounds = Util.getAxialAlignedBoundingBox(\n                    group.bbox,\n                    currentCtx.mozCurrentTransform);\n      // Clip the bounding box to the current canvas.\n      var canvasBounds = [0,\n                          0,\n                          currentCtx.canvas.width,\n                          currentCtx.canvas.height];\n      bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n      // Use ceil in case we're between sizes so we don't create canvas that is\n      // too small and make the canvas at least 1x1 pixels.\n      var offsetX = Math.floor(bounds[0]);\n      var offsetY = Math.floor(bounds[1]);\n      var drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n      var drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n      var scaleX = 1, scaleY = 1;\n      if (drawnWidth > MAX_GROUP_SIZE) {\n        scaleX = drawnWidth / MAX_GROUP_SIZE;\n        drawnWidth = MAX_GROUP_SIZE;\n      }\n      if (drawnHeight > MAX_GROUP_SIZE) {\n        scaleY = drawnHeight / MAX_GROUP_SIZE;\n        drawnHeight = MAX_GROUP_SIZE;\n      }\n\n      var cacheId = 'groupAt' + this.groupLevel;\n      if (group.smask) {\n        // Using two cache entries is case if masks are used one after another.\n        cacheId +=  '_smask_' + ((this.smaskCounter++) % 2);\n      }\n      var scratchCanvas = this.cachedCanvases.getCanvas(\n        cacheId, drawnWidth, drawnHeight, true);\n      var groupCtx = scratchCanvas.context;\n\n      // Since we created a new canvas that is just the size of the bounding box\n      // we have to translate the group ctx.\n      groupCtx.scale(1 / scaleX, 1 / scaleY);\n      groupCtx.translate(-offsetX, -offsetY);\n      groupCtx.transform.apply(groupCtx, currentTransform);\n\n      if (group.smask) {\n        // Saving state and cached mask to be used in setGState.\n        this.smaskStack.push({\n          canvas: scratchCanvas.canvas,\n          context: groupCtx,\n          offsetX: offsetX,\n          offsetY: offsetY,\n          scaleX: scaleX,\n          scaleY: scaleY,\n          subtype: group.smask.subtype,\n          backdrop: group.smask.backdrop,\n          transferMap: group.smask.transferMap || null\n        });\n      } else {\n        // Setup the current ctx so when the group is popped we draw it at the\n        // right location.\n        currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n        currentCtx.translate(offsetX, offsetY);\n        currentCtx.scale(scaleX, scaleY);\n      }\n      // The transparency group inherits all off the current graphics state\n      // except the blend mode, soft mask, and alpha constants.\n      copyCtxState(currentCtx, groupCtx);\n      this.ctx = groupCtx;\n      this.setGState([\n        ['BM', 'Normal'],\n        ['ca', 1],\n        ['CA', 1]\n      ]);\n      this.groupStack.push(currentCtx);\n      this.groupLevel++;\n    },\n\n    endGroup: function CanvasGraphics_endGroup(group) {\n      this.groupLevel--;\n      var groupCtx = this.ctx;\n      this.ctx = this.groupStack.pop();\n      // Turn off image smoothing to avoid sub pixel interpolation which can\n      // look kind of blurry for some pdfs.\n      if (this.ctx.imageSmoothingEnabled !== undefined) {\n        this.ctx.imageSmoothingEnabled = false;\n      } else {\n        this.ctx.mozImageSmoothingEnabled = false;\n      }\n      if (group.smask) {\n        this.tempSMask = this.smaskStack.pop();\n      } else {\n        this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      }\n      this.restore();\n    },\n\n    beginAnnotations: function CanvasGraphics_beginAnnotations() {\n      this.save();\n      this.current = new CanvasExtraState();\n\n      if (this.baseTransform) {\n        this.ctx.setTransform.apply(this.ctx, this.baseTransform);\n      }\n    },\n\n    endAnnotations: function CanvasGraphics_endAnnotations() {\n      this.restore();\n    },\n\n    beginAnnotation: function CanvasGraphics_beginAnnotation(rect, transform,\n                                                             matrix) {\n      this.save();\n\n      if (isArray(rect) && 4 === rect.length) {\n        var width = rect[2] - rect[0];\n        var height = rect[3] - rect[1];\n        this.ctx.rect(rect[0], rect[1], width, height);\n        this.clip();\n        this.endPath();\n      }\n\n      this.transform.apply(this, transform);\n      this.transform.apply(this, matrix);\n    },\n\n    endAnnotation: function CanvasGraphics_endAnnotation() {\n      this.restore();\n    },\n\n    paintJpegXObject: function CanvasGraphics_paintJpegXObject(objId, w, h) {\n      var domImage = this.objs.get(objId);\n      if (!domImage) {\n        warn('Dependent image isn\\'t ready yet');\n        return;\n      }\n\n      this.save();\n\n      var ctx = this.ctx;\n      // scale the image to the unit square\n      ctx.scale(1 / w, -1 / h);\n\n      ctx.drawImage(domImage, 0, 0, domImage.width, domImage.height,\n                    0, -h, w, h);\n      if (this.imageLayer) {\n        var currentTransform = ctx.mozCurrentTransformInverse;\n        var position = this.getCanvasPosition(0, 0);\n        this.imageLayer.appendImage({\n          objId: objId,\n          left: position[0],\n          top: position[1],\n          width: w / currentTransform[0],\n          height: h / currentTransform[3]\n        });\n      }\n      this.restore();\n    },\n\n    paintImageMaskXObject: function CanvasGraphics_paintImageMaskXObject(img) {\n      var ctx = this.ctx;\n      var width = img.width, height = img.height;\n      var fillColor = this.current.fillColor;\n      var isPatternFill = this.current.patternFill;\n\n      var glyph = this.processingType3;\n\n      if (COMPILE_TYPE3_GLYPHS && glyph && glyph.compiled === undefined) {\n        if (width <= MAX_SIZE_TO_COMPILE && height <= MAX_SIZE_TO_COMPILE) {\n          glyph.compiled =\n            compileType3Glyph({data: img.data, width: width, height: height});\n        } else {\n          glyph.compiled = null;\n        }\n      }\n\n      if (glyph && glyph.compiled) {\n        glyph.compiled(ctx);\n        return;\n      }\n\n      var maskCanvas = this.cachedCanvases.getCanvas('maskCanvas',\n                                                     width, height);\n      var maskCtx = maskCanvas.context;\n      maskCtx.save();\n\n      putBinaryImageMask(maskCtx, img);\n\n      maskCtx.globalCompositeOperation = 'source-in';\n\n      maskCtx.fillStyle = isPatternFill ?\n                          fillColor.getPattern(maskCtx, this) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n\n      maskCtx.restore();\n\n      this.paintInlineImageXObject(maskCanvas.canvas);\n    },\n\n    paintImageMaskXObjectRepeat:\n      function CanvasGraphics_paintImageMaskXObjectRepeat(imgData, scaleX,\n                                                          scaleY, positions) {\n      var width = imgData.width;\n      var height = imgData.height;\n      var fillColor = this.current.fillColor;\n      var isPatternFill = this.current.patternFill;\n\n      var maskCanvas = this.cachedCanvases.getCanvas('maskCanvas',\n                                                     width, height);\n      var maskCtx = maskCanvas.context;\n      maskCtx.save();\n\n      putBinaryImageMask(maskCtx, imgData);\n\n      maskCtx.globalCompositeOperation = 'source-in';\n\n      maskCtx.fillStyle = isPatternFill ?\n                          fillColor.getPattern(maskCtx, this) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n\n      maskCtx.restore();\n\n      var ctx = this.ctx;\n      for (var i = 0, ii = positions.length; i < ii; i += 2) {\n        ctx.save();\n        ctx.transform(scaleX, 0, 0, scaleY, positions[i], positions[i + 1]);\n        ctx.scale(1, -1);\n        ctx.drawImage(maskCanvas.canvas, 0, 0, width, height,\n          0, -1, 1, 1);\n        ctx.restore();\n      }\n    },\n\n    paintImageMaskXObjectGroup:\n      function CanvasGraphics_paintImageMaskXObjectGroup(images) {\n      var ctx = this.ctx;\n\n      var fillColor = this.current.fillColor;\n      var isPatternFill = this.current.patternFill;\n      for (var i = 0, ii = images.length; i < ii; i++) {\n        var image = images[i];\n        var width = image.width, height = image.height;\n\n        var maskCanvas = this.cachedCanvases.getCanvas('maskCanvas',\n                                                       width, height);\n        var maskCtx = maskCanvas.context;\n        maskCtx.save();\n\n        putBinaryImageMask(maskCtx, image);\n\n        maskCtx.globalCompositeOperation = 'source-in';\n\n        maskCtx.fillStyle = isPatternFill ?\n                            fillColor.getPattern(maskCtx, this) : fillColor;\n        maskCtx.fillRect(0, 0, width, height);\n\n        maskCtx.restore();\n\n        ctx.save();\n        ctx.transform.apply(ctx, image.transform);\n        ctx.scale(1, -1);\n        ctx.drawImage(maskCanvas.canvas, 0, 0, width, height,\n                      0, -1, 1, 1);\n        ctx.restore();\n      }\n    },\n\n    paintImageXObject: function CanvasGraphics_paintImageXObject(objId) {\n      var imgData = this.objs.get(objId);\n      if (!imgData) {\n        warn('Dependent image isn\\'t ready yet');\n        return;\n      }\n\n      this.paintInlineImageXObject(imgData);\n    },\n\n    paintImageXObjectRepeat:\n      function CanvasGraphics_paintImageXObjectRepeat(objId, scaleX, scaleY,\n                                                          positions) {\n      var imgData = this.objs.get(objId);\n      if (!imgData) {\n        warn('Dependent image isn\\'t ready yet');\n        return;\n      }\n\n      var width = imgData.width;\n      var height = imgData.height;\n      var map = [];\n      for (var i = 0, ii = positions.length; i < ii; i += 2) {\n        map.push({transform: [scaleX, 0, 0, scaleY, positions[i],\n                 positions[i + 1]], x: 0, y: 0, w: width, h: height});\n      }\n      this.paintInlineImageXObjectGroup(imgData, map);\n    },\n\n    paintInlineImageXObject:\n      function CanvasGraphics_paintInlineImageXObject(imgData) {\n      var width = imgData.width;\n      var height = imgData.height;\n      var ctx = this.ctx;\n\n      this.save();\n      // scale the image to the unit square\n      ctx.scale(1 / width, -1 / height);\n\n      var currentTransform = ctx.mozCurrentTransformInverse;\n      var a = currentTransform[0], b = currentTransform[1];\n      var widthScale = Math.max(Math.sqrt(a * a + b * b), 1);\n      var c = currentTransform[2], d = currentTransform[3];\n      var heightScale = Math.max(Math.sqrt(c * c + d * d), 1);\n\n      var imgToPaint, tmpCanvas;\n      // instanceof HTMLElement does not work in jsdom node.js module\n      if (imgData instanceof HTMLElement || !imgData.data) {\n        imgToPaint = imgData;\n      } else {\n        tmpCanvas = this.cachedCanvases.getCanvas('inlineImage',\n                                                  width, height);\n        var tmpCtx = tmpCanvas.context;\n        putBinaryImageData(tmpCtx, imgData);\n        imgToPaint = tmpCanvas.canvas;\n      }\n\n      var paintWidth = width, paintHeight = height;\n      var tmpCanvasId = 'prescale1';\n      // Vertial or horizontal scaling shall not be more than 2 to not loose the\n      // pixels during drawImage operation, painting on the temporary canvas(es)\n      // that are twice smaller in size\n      while ((widthScale > 2 && paintWidth > 1) ||\n             (heightScale > 2 && paintHeight > 1)) {\n        var newWidth = paintWidth, newHeight = paintHeight;\n        if (widthScale > 2 && paintWidth > 1) {\n          newWidth = Math.ceil(paintWidth / 2);\n          widthScale /= paintWidth / newWidth;\n        }\n        if (heightScale > 2 && paintHeight > 1) {\n          newHeight = Math.ceil(paintHeight / 2);\n          heightScale /= paintHeight / newHeight;\n        }\n        tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId,\n                                                  newWidth, newHeight);\n        tmpCtx = tmpCanvas.context;\n        tmpCtx.clearRect(0, 0, newWidth, newHeight);\n        tmpCtx.drawImage(imgToPaint, 0, 0, paintWidth, paintHeight,\n                                     0, 0, newWidth, newHeight);\n        imgToPaint = tmpCanvas.canvas;\n        paintWidth = newWidth;\n        paintHeight = newHeight;\n        tmpCanvasId = tmpCanvasId === 'prescale1' ? 'prescale2' : 'prescale1';\n      }\n      ctx.drawImage(imgToPaint, 0, 0, paintWidth, paintHeight,\n                                0, -height, width, height);\n\n      if (this.imageLayer) {\n        var position = this.getCanvasPosition(0, -height);\n        this.imageLayer.appendImage({\n          imgData: imgData,\n          left: position[0],\n          top: position[1],\n          width: width / currentTransform[0],\n          height: height / currentTransform[3]\n        });\n      }\n      this.restore();\n    },\n\n    paintInlineImageXObjectGroup:\n      function CanvasGraphics_paintInlineImageXObjectGroup(imgData, map) {\n      var ctx = this.ctx;\n      var w = imgData.width;\n      var h = imgData.height;\n\n      var tmpCanvas = this.cachedCanvases.getCanvas('inlineImage', w, h);\n      var tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n\n      for (var i = 0, ii = map.length; i < ii; i++) {\n        var entry = map[i];\n        ctx.save();\n        ctx.transform.apply(ctx, entry.transform);\n        ctx.scale(1, -1);\n        ctx.drawImage(tmpCanvas.canvas, entry.x, entry.y, entry.w, entry.h,\n                      0, -1, 1, 1);\n        if (this.imageLayer) {\n          var position = this.getCanvasPosition(entry.x, entry.y);\n          this.imageLayer.appendImage({\n            imgData: imgData,\n            left: position[0],\n            top: position[1],\n            width: w,\n            height: h\n          });\n        }\n        ctx.restore();\n      }\n    },\n\n    paintSolidColorImageMask:\n      function CanvasGraphics_paintSolidColorImageMask() {\n        this.ctx.fillRect(0, 0, 1, 1);\n    },\n\n    paintXObject: function CanvasGraphics_paintXObject() {\n      warn('Unsupported \\'paintXObject\\' command.');\n    },\n\n    // Marked content\n\n    markPoint: function CanvasGraphics_markPoint(tag) {\n      // TODO Marked content.\n    },\n    markPointProps: function CanvasGraphics_markPointProps(tag, properties) {\n      // TODO Marked content.\n    },\n    beginMarkedContent: function CanvasGraphics_beginMarkedContent(tag) {\n      // TODO Marked content.\n    },\n    beginMarkedContentProps: function CanvasGraphics_beginMarkedContentProps(\n                                        tag, properties) {\n      // TODO Marked content.\n    },\n    endMarkedContent: function CanvasGraphics_endMarkedContent() {\n      // TODO Marked content.\n    },\n\n    // Compatibility\n\n    beginCompat: function CanvasGraphics_beginCompat() {\n      // TODO ignore undefined operators (should we do that anyway?)\n    },\n    endCompat: function CanvasGraphics_endCompat() {\n      // TODO stop ignoring undefined operators\n    },\n\n    // Helper functions\n\n    consumePath: function CanvasGraphics_consumePath() {\n      var ctx = this.ctx;\n      if (this.pendingClip) {\n        if (this.pendingClip === EO_CLIP) {\n          if (ctx.mozFillRule !== undefined) {\n            ctx.mozFillRule = 'evenodd';\n            ctx.clip();\n            ctx.mozFillRule = 'nonzero';\n          } else {\n            ctx.clip('evenodd');\n          }\n        } else {\n          ctx.clip();\n        }\n        this.pendingClip = null;\n      }\n      ctx.beginPath();\n    },\n    getSinglePixelWidth: function CanvasGraphics_getSinglePixelWidth(scale) {\n      if (this.cachedGetSinglePixelWidth === null) {\n        var inverse = this.ctx.mozCurrentTransformInverse;\n        // max of the current horizontal and vertical scale\n        this.cachedGetSinglePixelWidth = Math.sqrt(Math.max(\n          (inverse[0] * inverse[0] + inverse[1] * inverse[1]),\n          (inverse[2] * inverse[2] + inverse[3] * inverse[3])));\n      }\n      return this.cachedGetSinglePixelWidth;\n    },\n    getCanvasPosition: function CanvasGraphics_getCanvasPosition(x, y) {\n      var transform = this.ctx.mozCurrentTransform;\n      return [\n        transform[0] * x + transform[2] * y + transform[4],\n        transform[1] * x + transform[3] * y + transform[5]\n      ];\n    }\n  };\n\n  for (var op in OPS) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n\n  return CanvasGraphics;\n})();\n\nexports.CanvasGraphics = CanvasGraphics;\nexports.createScratchCanvas = createScratchCanvas;\n}));\n\n\n(function (root, factory) {\n  {\n    factory((root.pdfjsDisplayAPI = {}), root.pdfjsSharedUtil,\n      root.pdfjsDisplayFontLoader, root.pdfjsDisplayCanvas,\n      root.pdfjsDisplayMetadata, root.pdfjsSharedGlobal);\n  }\n}(this, function (exports, sharedUtil, displayFontLoader, displayCanvas,\n                  displayMetadata, sharedGlobal, amdRequire) {\n\nvar InvalidPDFException = sharedUtil.InvalidPDFException;\nvar MessageHandler = sharedUtil.MessageHandler;\nvar MissingPDFException = sharedUtil.MissingPDFException;\nvar PasswordResponses = sharedUtil.PasswordResponses;\nvar PasswordException = sharedUtil.PasswordException;\nvar StatTimer = sharedUtil.StatTimer;\nvar UnexpectedResponseException = sharedUtil.UnexpectedResponseException;\nvar UnknownErrorException = sharedUtil.UnknownErrorException;\nvar Util = sharedUtil.Util;\nvar createPromiseCapability = sharedUtil.createPromiseCapability;\nvar combineUrl = sharedUtil.combineUrl;\nvar error = sharedUtil.error;\nvar deprecated = sharedUtil.deprecated;\nvar info = sharedUtil.info;\nvar isArrayBuffer = sharedUtil.isArrayBuffer;\nvar loadJpegStream = sharedUtil.loadJpegStream;\nvar stringToBytes = sharedUtil.stringToBytes;\nvar warn = sharedUtil.warn;\nvar FontFaceObject = displayFontLoader.FontFaceObject;\nvar FontLoader = displayFontLoader.FontLoader;\nvar CanvasGraphics = displayCanvas.CanvasGraphics;\nvar createScratchCanvas = displayCanvas.createScratchCanvas;\nvar Metadata = displayMetadata.Metadata;\nvar PDFJS = sharedGlobal.PDFJS;\nvar globalScope = sharedGlobal.globalScope;\n\nvar DEFAULT_RANGE_CHUNK_SIZE = 65536; // 2^16 = 65536\n\n\nvar useRequireEnsure = false;\nif (typeof module !== 'undefined' && module.require) {\n  // node.js - disable worker and set require.ensure.\n  PDFJS.disableWorker = true;\n  if (typeof require.ensure === 'undefined') {\n    require.ensure = require('node-ensure');\n  }\n  useRequireEnsure = true;\n}\nif (typeof __webpack_require__ !== 'undefined') {\n  // Webpack - get/bundle pdf.worker.js as additional file.\n  PDFJS.workerSrc = require('entry?name=[hash]-worker.js!./pdf.worker.js');\n  useRequireEnsure = true;\n}\nif (typeof requirejs !== 'undefined' && requirejs.toUrl) {\n  PDFJS.workerSrc = requirejs.toUrl('pdfjs-dist/build/pdf.worker.js');\n}\nvar fakeWorkerFilesLoader = useRequireEnsure ? (function (callback) {\n  require.ensure([], function () {\n    require('./pdf.worker.js');\n    callback();\n  });\n}) : (typeof requirejs !== 'undefined') ? (function (callback) {\n  requirejs(['pdfjs-dist/build/pdf.worker'], function (worker) {\n    callback();\n  });\n}) : null;\n\n\n/**\n * The maximum allowed image size in total pixels e.g. width * height. Images\n * above this value will not be drawn. Use -1 for no limit.\n * @var {number}\n */\nPDFJS.maxImageSize = (PDFJS.maxImageSize === undefined ?\n                      -1 : PDFJS.maxImageSize);\n\n/**\n * The url of where the predefined Adobe CMaps are located. Include trailing\n * slash.\n * @var {string}\n */\nPDFJS.cMapUrl = (PDFJS.cMapUrl === undefined ? null : PDFJS.cMapUrl);\n\n/**\n * Specifies if CMaps are binary packed.\n * @var {boolean}\n */\nPDFJS.cMapPacked = PDFJS.cMapPacked === undefined ? false : PDFJS.cMapPacked;\n\n/**\n * By default fonts are converted to OpenType fonts and loaded via font face\n * rules. If disabled, the font will be rendered using a built in font renderer\n * that constructs the glyphs with primitive path commands.\n * @var {boolean}\n */\nPDFJS.disableFontFace = (PDFJS.disableFontFace === undefined ?\n                         false : PDFJS.disableFontFace);\n\n/**\n * Path for image resources, mainly for annotation icons. Include trailing\n * slash.\n * @var {string}\n */\nPDFJS.imageResourcesPath = (PDFJS.imageResourcesPath === undefined ?\n                            '' : PDFJS.imageResourcesPath);\n\n/**\n * Disable the web worker and run all code on the main thread. This will happen\n * automatically if the browser doesn't support workers or sending typed arrays\n * to workers.\n * @var {boolean}\n */\nPDFJS.disableWorker = (PDFJS.disableWorker === undefined ?\n                       false : PDFJS.disableWorker);\n\n/**\n * Path and filename of the worker file. Required when the worker is enabled in\n * development mode. If unspecified in the production build, the worker will be\n * loaded based on the location of the pdf.js file. It is recommended that\n * the workerSrc is set in a custom application to prevent issues caused by\n * third-party frameworks and libraries.\n * @var {string}\n */\nPDFJS.workerSrc = (PDFJS.workerSrc === undefined ? null : PDFJS.workerSrc);\n\n/**\n * Disable range request loading of PDF files. When enabled and if the server\n * supports partial content requests then the PDF will be fetched in chunks.\n * Enabled (false) by default.\n * @var {boolean}\n */\nPDFJS.disableRange = (PDFJS.disableRange === undefined ?\n                      false : PDFJS.disableRange);\n\n/**\n * Disable streaming of PDF file data. By default PDF.js attempts to load PDF\n * in chunks. This default behavior can be disabled.\n * @var {boolean}\n */\nPDFJS.disableStream = (PDFJS.disableStream === undefined ?\n                       false : PDFJS.disableStream);\n\n/**\n * Disable pre-fetching of PDF file data. When range requests are enabled PDF.js\n * will automatically keep fetching more data even if it isn't needed to display\n * the current page. This default behavior can be disabled.\n *\n * NOTE: It is also necessary to disable streaming, see above,\n *       in order for disabling of pre-fetching to work correctly.\n * @var {boolean}\n */\nPDFJS.disableAutoFetch = (PDFJS.disableAutoFetch === undefined ?\n                          false : PDFJS.disableAutoFetch);\n\n/**\n * Enables special hooks for debugging PDF.js.\n * @var {boolean}\n */\nPDFJS.pdfBug = (PDFJS.pdfBug === undefined ? false : PDFJS.pdfBug);\n\n/**\n * Enables transfer usage in postMessage for ArrayBuffers.\n * @var {boolean}\n */\nPDFJS.postMessageTransfers = (PDFJS.postMessageTransfers === undefined ?\n                              true : PDFJS.postMessageTransfers);\n\n/**\n * Disables URL.createObjectURL usage.\n * @var {boolean}\n */\nPDFJS.disableCreateObjectURL = (PDFJS.disableCreateObjectURL === undefined ?\n                                false : PDFJS.disableCreateObjectURL);\n\n/**\n * Disables WebGL usage.\n * @var {boolean}\n */\nPDFJS.disableWebGL = (PDFJS.disableWebGL === undefined ?\n                      true : PDFJS.disableWebGL);\n\n/**\n * Disables fullscreen support, and by extension Presentation Mode,\n * in browsers which support the fullscreen API.\n * @var {boolean}\n */\nPDFJS.disableFullscreen = (PDFJS.disableFullscreen === undefined ?\n                           false : PDFJS.disableFullscreen);\n\n/**\n * Enables CSS only zooming.\n * @var {boolean}\n */\nPDFJS.useOnlyCssZoom = (PDFJS.useOnlyCssZoom === undefined ?\n                        false : PDFJS.useOnlyCssZoom);\n\n/**\n * Controls the logging level.\n * The constants from PDFJS.VERBOSITY_LEVELS should be used:\n * - errors\n * - warnings [default]\n * - infos\n * @var {number}\n */\nPDFJS.verbosity = (PDFJS.verbosity === undefined ?\n                   PDFJS.VERBOSITY_LEVELS.warnings : PDFJS.verbosity);\n\n/**\n * The maximum supported canvas size in total pixels e.g. width * height.\n * The default value is 4096 * 4096. Use -1 for no limit.\n * @var {number}\n */\nPDFJS.maxCanvasPixels = (PDFJS.maxCanvasPixels === undefined ?\n                         16777216 : PDFJS.maxCanvasPixels);\n\n/**\n * (Deprecated) Opens external links in a new window if enabled.\n * The default behavior opens external links in the PDF.js window.\n *\n * NOTE: This property has been deprecated, please use\n *       `PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK` instead.\n * @var {boolean}\n */\nPDFJS.openExternalLinksInNewWindow = (\n  PDFJS.openExternalLinksInNewWindow === undefined ?\n    false : PDFJS.openExternalLinksInNewWindow);\n\n/**\n * Specifies the |target| attribute for external links.\n * The constants from PDFJS.LinkTarget should be used:\n *  - NONE [default]\n *  - SELF\n *  - BLANK\n *  - PARENT\n *  - TOP\n * @var {number}\n */\nPDFJS.externalLinkTarget = (PDFJS.externalLinkTarget === undefined ?\n                            PDFJS.LinkTarget.NONE : PDFJS.externalLinkTarget);\n\n/**\n * Specifies the |rel| attribute for external links. Defaults to stripping\n * the referrer.\n * @var {string}\n */\nPDFJS.externalLinkRel = (PDFJS.externalLinkRel === undefined ?\n                         'noreferrer' : PDFJS.externalLinkRel);\n\n/**\n  * Determines if we can eval strings as JS. Primarily used to improve\n  * performance for font rendering.\n  * @var {boolean}\n  */\nPDFJS.isEvalSupported = (PDFJS.isEvalSupported === undefined ?\n                         true : PDFJS.isEvalSupported);\n\n/**\n * Document initialization / loading parameters object.\n *\n * @typedef {Object} DocumentInitParameters\n * @property {string}     url   - The URL of the PDF.\n * @property {TypedArray|Array|string} data - Binary PDF data. Use typed arrays\n *   (Uint8Array) to improve the memory usage. If PDF data is BASE64-encoded,\n *   use atob() to convert it to a binary string first.\n * @property {Object}     httpHeaders - Basic authentication headers.\n * @property {boolean}    withCredentials - Indicates whether or not cross-site\n *   Access-Control requests should be made using credentials such as cookies\n *   or authorization headers. The default is false.\n * @property {string}     password - For decrypting password-protected PDFs.\n * @property {TypedArray} initialData - A typed array with the first portion or\n *   all of the pdf data. Used by the extension since some data is already\n *   loaded before the switch to range requests.\n * @property {number}     length - The PDF file length. It's used for progress\n *   reports and range requests operations.\n * @property {PDFDataRangeTransport} range\n * @property {number}     rangeChunkSize - Optional parameter to specify\n *   maximum number of bytes fetched per range request. The default value is\n *   2^16 = 65536.\n * @property {PDFWorker}  worker - The worker that will be used for the loading\n *   and parsing of the PDF data.\n */\n\n/**\n * @typedef {Object} PDFDocumentStats\n * @property {Array} streamTypes - Used stream types in the document (an item\n *   is set to true if specific stream ID was used in the document).\n * @property {Array} fontTypes - Used font type in the document (an item is set\n *   to true if specific font ID was used in the document).\n */\n\n/**\n * This is the main entry point for loading a PDF and interacting with it.\n * NOTE: If a URL is used to fetch the PDF data a standard XMLHttpRequest(XHR)\n * is used, which means it must follow the same origin rules that any XHR does\n * e.g. No cross domain requests without CORS.\n *\n * @param {string|TypedArray|DocumentInitParameters|PDFDataRangeTransport} src\n * Can be a url to where a PDF is located, a typed array (Uint8Array)\n * already populated with data or parameter object.\n *\n * @param {PDFDataRangeTransport} pdfDataRangeTransport (deprecated) It is used\n * if you want to manually serve range requests for data in the PDF.\n *\n * @param {function} passwordCallback (deprecated) It is used to request a\n * password if wrong or no password was provided. The callback receives two\n * parameters: function that needs to be called with new password and reason\n * (see {PasswordResponses}).\n *\n * @param {function} progressCallback (deprecated) It is used to be able to\n * monitor the loading progress of the PDF file (necessary to implement e.g.\n * a loading bar). The callback receives an {Object} with the properties:\n * {number} loaded and {number} total.\n *\n * @return {PDFDocumentLoadingTask}\n */\nPDFJS.getDocument = function getDocument(src,\n                                         pdfDataRangeTransport,\n                                         passwordCallback,\n                                         progressCallback) {\n  var task = new PDFDocumentLoadingTask();\n\n  // Support of the obsolete arguments (for compatibility with API v1.0)\n  if (arguments.length > 1) {\n    deprecated('getDocument is called with pdfDataRangeTransport, ' +\n               'passwordCallback or progressCallback argument');\n  }\n  if (pdfDataRangeTransport) {\n    if (!(pdfDataRangeTransport instanceof PDFDataRangeTransport)) {\n      // Not a PDFDataRangeTransport instance, trying to add missing properties.\n      pdfDataRangeTransport = Object.create(pdfDataRangeTransport);\n      pdfDataRangeTransport.length = src.length;\n      pdfDataRangeTransport.initialData = src.initialData;\n      if (!pdfDataRangeTransport.abort) {\n        pdfDataRangeTransport.abort = function () {};\n      }\n    }\n    src = Object.create(src);\n    src.range = pdfDataRangeTransport;\n  }\n  task.onPassword = passwordCallback || null;\n  task.onProgress = progressCallback || null;\n\n  var source;\n  if (typeof src === 'string') {\n    source = { url: src };\n  } else if (isArrayBuffer(src)) {\n    source = { data: src };\n  } else if (src instanceof PDFDataRangeTransport) {\n    source = { range: src };\n  } else {\n    if (typeof src !== 'object') {\n      error('Invalid parameter in getDocument, need either Uint8Array, ' +\n        'string or a parameter object');\n    }\n    if (!src.url && !src.data && !src.range) {\n      error('Invalid parameter object: need either .data, .range or .url');\n    }\n\n    source = src;\n  }\n\n  var params = {};\n  var rangeTransport = null;\n  var worker = null;\n  for (var key in source) {\n    if (key === 'url' && typeof window !== 'undefined') {\n      // The full path is required in the 'url' field.\n      params[key] = combineUrl(window.location.href, source[key]);\n      continue;\n    } else if (key === 'range') {\n      rangeTransport = source[key];\n      continue;\n    } else if (key === 'worker') {\n      worker = source[key];\n      continue;\n    } else if (key === 'data' && !(source[key] instanceof Uint8Array)) {\n      // Converting string or array-like data to Uint8Array.\n      var pdfBytes = source[key];\n      if (typeof pdfBytes === 'string') {\n        params[key] = stringToBytes(pdfBytes);\n      } else if (typeof pdfBytes === 'object' && pdfBytes !== null &&\n                 !isNaN(pdfBytes.length)) {\n        params[key] = new Uint8Array(pdfBytes);\n      } else if (isArrayBuffer(pdfBytes)) {\n        params[key] = new Uint8Array(pdfBytes);\n      } else {\n        error('Invalid PDF binary data: either typed array, string or ' +\n              'array-like object is expected in the data property.');\n      }\n      continue;\n    }\n    params[key] = source[key];\n  }\n\n  params.rangeChunkSize = params.rangeChunkSize || DEFAULT_RANGE_CHUNK_SIZE;\n\n  if (!worker) {\n    // Worker was not provided -- creating and owning our own.\n    worker = new PDFWorker();\n    task._worker = worker;\n  }\n  var docId = task.docId;\n  worker.promise.then(function () {\n    if (task.destroyed) {\n      throw new Error('Loading aborted');\n    }\n    return _fetchDocument(worker, params, rangeTransport, docId).then(\n        function (workerId) {\n      if (task.destroyed) {\n        throw new Error('Loading aborted');\n      }\n      var messageHandler = new MessageHandler(docId, workerId, worker.port);\n      messageHandler.send('Ready', null);\n      var transport = new WorkerTransport(messageHandler, task, rangeTransport);\n      task._transport = transport;\n    });\n  }).catch(task._capability.reject);\n\n  return task;\n};\n\n/**\n * Starts fetching of specified PDF document/data.\n * @param {PDFWorker} worker\n * @param {Object} source\n * @param {PDFDataRangeTransport} pdfDataRangeTransport\n * @param {string} docId Unique document id, used as MessageHandler id.\n * @returns {Promise} The promise, which is resolved when worker id of\n *                    MessageHandler is known.\n * @private\n */\nfunction _fetchDocument(worker, source, pdfDataRangeTransport, docId) {\n  if (worker.destroyed) {\n    return Promise.reject(new Error('Worker was destroyed'));\n  }\n\n  source.disableAutoFetch = PDFJS.disableAutoFetch;\n  source.disableStream = PDFJS.disableStream;\n  source.chunkedViewerLoading = !!pdfDataRangeTransport;\n  if (pdfDataRangeTransport) {\n    source.length = pdfDataRangeTransport.length;\n    source.initialData = pdfDataRangeTransport.initialData;\n  }\n  return worker.messageHandler.sendWithPromise('GetDocRequest', {\n    docId: docId,\n    source: source,\n    disableRange: PDFJS.disableRange,\n    maxImageSize: PDFJS.maxImageSize,\n    cMapUrl: PDFJS.cMapUrl,\n    cMapPacked: PDFJS.cMapPacked,\n    disableFontFace: PDFJS.disableFontFace,\n    disableCreateObjectURL: PDFJS.disableCreateObjectURL,\n    verbosity: PDFJS.verbosity\n  }).then(function (workerId) {\n    if (worker.destroyed) {\n      throw new Error('Worker was destroyed');\n    }\n    return workerId;\n  });\n}\n\n/**\n * PDF document loading operation.\n * @class\n * @alias PDFDocumentLoadingTask\n */\nvar PDFDocumentLoadingTask = (function PDFDocumentLoadingTaskClosure() {\n  var nextDocumentId = 0;\n\n  /** @constructs PDFDocumentLoadingTask */\n  function PDFDocumentLoadingTask() {\n    this._capability = createPromiseCapability();\n    this._transport = null;\n    this._worker = null;\n\n    /**\n     * Unique document loading task id -- used in MessageHandlers.\n     * @type {string}\n     */\n    this.docId = 'd' + (nextDocumentId++);\n\n    /**\n     * Shows if loading task is destroyed.\n     * @type {boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * Callback to request a password if wrong or no password was provided.\n     * The callback receives two parameters: function that needs to be called\n     * with new password and reason (see {PasswordResponses}).\n     */\n    this.onPassword = null;\n\n    /**\n     * Callback to be able to monitor the loading progress of the PDF file\n     * (necessary to implement e.g. a loading bar). The callback receives\n     * an {Object} with the properties: {number} loaded and {number} total.\n     */\n    this.onProgress = null;\n\n    /**\n     * Callback to when unsupported feature is used. The callback receives\n     * an {PDFJS.UNSUPPORTED_FEATURES} argument.\n     */\n    this.onUnsupportedFeature = null;\n  }\n\n  PDFDocumentLoadingTask.prototype =\n      /** @lends PDFDocumentLoadingTask.prototype */ {\n    /**\n     * @return {Promise}\n     */\n    get promise() {\n      return this._capability.promise;\n    },\n\n    /**\n     * Aborts all network requests and destroys worker.\n     * @return {Promise} A promise that is resolved after destruction activity\n     *                   is completed.\n     */\n    destroy: function () {\n      this.destroyed = true;\n\n      var transportDestroyed = !this._transport ? Promise.resolve() :\n        this._transport.destroy();\n      return transportDestroyed.then(function () {\n        this._transport = null;\n        if (this._worker) {\n          this._worker.destroy();\n          this._worker = null;\n        }\n      }.bind(this));\n    },\n\n    /**\n     * Registers callbacks to indicate the document loading completion.\n     *\n     * @param {function} onFulfilled The callback for the loading completion.\n     * @param {function} onRejected The callback for the loading failure.\n     * @return {Promise} A promise that is resolved after the onFulfilled or\n     *                   onRejected callback.\n     */\n    then: function PDFDocumentLoadingTask_then(onFulfilled, onRejected) {\n      return this.promise.then.apply(this.promise, arguments);\n    }\n  };\n\n  return PDFDocumentLoadingTask;\n})();\n\n/**\n * Abstract class to support range requests file loading.\n * @class\n * @alias PDFJS.PDFDataRangeTransport\n * @param {number} length\n * @param {Uint8Array} initialData\n */\nvar PDFDataRangeTransport = (function pdfDataRangeTransportClosure() {\n  function PDFDataRangeTransport(length, initialData) {\n    this.length = length;\n    this.initialData = initialData;\n\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._readyCapability = createPromiseCapability();\n  }\n  PDFDataRangeTransport.prototype =\n      /** @lends PDFDataRangeTransport.prototype */ {\n    addRangeListener:\n        function PDFDataRangeTransport_addRangeListener(listener) {\n      this._rangeListeners.push(listener);\n    },\n\n    addProgressListener:\n        function PDFDataRangeTransport_addProgressListener(listener) {\n      this._progressListeners.push(listener);\n    },\n\n    addProgressiveReadListener:\n        function PDFDataRangeTransport_addProgressiveReadListener(listener) {\n      this._progressiveReadListeners.push(listener);\n    },\n\n    onDataRange: function PDFDataRangeTransport_onDataRange(begin, chunk) {\n      var listeners = this._rangeListeners;\n      for (var i = 0, n = listeners.length; i < n; ++i) {\n        listeners[i](begin, chunk);\n      }\n    },\n\n    onDataProgress: function PDFDataRangeTransport_onDataProgress(loaded) {\n      this._readyCapability.promise.then(function () {\n        var listeners = this._progressListeners;\n        for (var i = 0, n = listeners.length; i < n; ++i) {\n          listeners[i](loaded);\n        }\n      }.bind(this));\n    },\n\n    onDataProgressiveRead:\n        function PDFDataRangeTransport_onDataProgress(chunk) {\n      this._readyCapability.promise.then(function () {\n        var listeners = this._progressiveReadListeners;\n        for (var i = 0, n = listeners.length; i < n; ++i) {\n          listeners[i](chunk);\n        }\n      }.bind(this));\n    },\n\n    transportReady: function PDFDataRangeTransport_transportReady() {\n      this._readyCapability.resolve();\n    },\n\n    requestDataRange:\n        function PDFDataRangeTransport_requestDataRange(begin, end) {\n      throw new Error('Abstract method PDFDataRangeTransport.requestDataRange');\n    },\n\n    abort: function PDFDataRangeTransport_abort() {\n    }\n  };\n  return PDFDataRangeTransport;\n})();\n\nPDFJS.PDFDataRangeTransport = PDFDataRangeTransport;\n\n/**\n * Proxy to a PDFDocument in the worker thread. Also, contains commonly used\n * properties that can be read synchronously.\n * @class\n * @alias PDFDocumentProxy\n */\nvar PDFDocumentProxy = (function PDFDocumentProxyClosure() {\n  function PDFDocumentProxy(pdfInfo, transport, loadingTask) {\n    this.pdfInfo = pdfInfo;\n    this.transport = transport;\n    this.loadingTask = loadingTask;\n  }\n  PDFDocumentProxy.prototype = /** @lends PDFDocumentProxy.prototype */ {\n    /**\n     * @return {number} Total number of pages the PDF contains.\n     */\n    get numPages() {\n      return this.pdfInfo.numPages;\n    },\n    /**\n     * @return {string} A unique ID to identify a PDF. Not guaranteed to be\n     * unique.\n     */\n    get fingerprint() {\n      return this.pdfInfo.fingerprint;\n    },\n    /**\n     * @param {number} pageNumber The page number to get. The first page is 1.\n     * @return {Promise} A promise that is resolved with a {@link PDFPageProxy}\n     * object.\n     */\n    getPage: function PDFDocumentProxy_getPage(pageNumber) {\n      return this.transport.getPage(pageNumber);\n    },\n    /**\n     * @param {{num: number, gen: number}} ref The page reference. Must have\n     *   the 'num' and 'gen' properties.\n     * @return {Promise} A promise that is resolved with the page index that is\n     * associated with the reference.\n     */\n    getPageIndex: function PDFDocumentProxy_getPageIndex(ref) {\n      return this.transport.getPageIndex(ref);\n    },\n    /**\n     * @return {Promise} A promise that is resolved with a lookup table for\n     * mapping named destinations to reference numbers.\n     *\n     * This can be slow for large documents: use getDestination instead\n     */\n    getDestinations: function PDFDocumentProxy_getDestinations() {\n      return this.transport.getDestinations();\n    },\n    /**\n     * @param {string} id The named destination to get.\n     * @return {Promise} A promise that is resolved with all information\n     * of the given named destination.\n     */\n    getDestination: function PDFDocumentProxy_getDestination(id) {\n      return this.transport.getDestination(id);\n    },\n    /**\n     * @return {Promise} A promise that is resolved with:\n     *   an Array containing the pageLabels that correspond to the pageIndexes,\n     *   or `null` when no pageLabels are present in the PDF file.\n     */\n    getPageLabels: function PDFDocumentProxy_getPageLabels() {\n      return this.transport.getPageLabels();\n    },\n    /**\n     * @return {Promise} A promise that is resolved with a lookup table for\n     * mapping named attachments to their content.\n     */\n    getAttachments: function PDFDocumentProxy_getAttachments() {\n      return this.transport.getAttachments();\n    },\n    /**\n     * @return {Promise} A promise that is resolved with an array of all the\n     * JavaScript strings in the name tree.\n     */\n    getJavaScript: function PDFDocumentProxy_getJavaScript() {\n      return this.transport.getJavaScript();\n    },\n    /**\n     * @return {Promise} A promise that is resolved with an {Array} that is a\n     * tree outline (if it has one) of the PDF. The tree is in the format of:\n     * [\n     *  {\n     *   title: string,\n     *   bold: boolean,\n     *   italic: boolean,\n     *   color: rgb array,\n     *   dest: dest obj,\n     *   url: string,\n     *   items: array of more items like this\n     *  },\n     *  ...\n     * ].\n     */\n    getOutline: function PDFDocumentProxy_getOutline() {\n      return this.transport.getOutline();\n    },\n    /**\n     * @return {Promise} A promise that is resolved with an {Object} that has\n     * info and metadata properties.  Info is an {Object} filled with anything\n     * available in the information dictionary and similarly metadata is a\n     * {Metadata} object with information from the metadata section of the PDF.\n     */\n    getMetadata: function PDFDocumentProxy_getMetadata() {\n      return this.transport.getMetadata();\n    },\n    /**\n     * @return {Promise} A promise that is resolved with a TypedArray that has\n     * the raw data from the PDF.\n     */\n    getData: function PDFDocumentProxy_getData() {\n      return this.transport.getData();\n    },\n    /**\n     * @return {Promise} A promise that is resolved when the document's data\n     * is loaded. It is resolved with an {Object} that contains the length\n     * property that indicates size of the PDF data in bytes.\n     */\n    getDownloadInfo: function PDFDocumentProxy_getDownloadInfo() {\n      return this.transport.downloadInfoCapability.promise;\n    },\n    /**\n     * @return {Promise} A promise this is resolved with current stats about\n     * document structures (see {@link PDFDocumentStats}).\n     */\n    getStats: function PDFDocumentProxy_getStats() {\n      return this.transport.getStats();\n    },\n    /**\n     * Cleans up resources allocated by the document, e.g. created @font-face.\n     */\n    cleanup: function PDFDocumentProxy_cleanup() {\n      this.transport.startCleanup();\n    },\n    /**\n     * Destroys current document instance and terminates worker.\n     */\n    destroy: function PDFDocumentProxy_destroy() {\n      return this.loadingTask.destroy();\n    }\n  };\n  return PDFDocumentProxy;\n})();\n\n/**\n * Page getTextContent parameters.\n *\n * @typedef {Object} getTextContentParameters\n * @param {boolean} normalizeWhitespace - replaces all occurrences of\n *   whitespace with standard spaces (0x20). The default value is `false`.\n */\n\n/**\n * Page text content.\n *\n * @typedef {Object} TextContent\n * @property {array} items - array of {@link TextItem}\n * @property {Object} styles - {@link TextStyles} objects, indexed by font\n *                    name.\n */\n\n/**\n * Page text content part.\n *\n * @typedef {Object} TextItem\n * @property {string} str - text content.\n * @property {string} dir - text direction: 'ttb', 'ltr' or 'rtl'.\n * @property {array} transform - transformation matrix.\n * @property {number} width - width in device space.\n * @property {number} height - height in device space.\n * @property {string} fontName - font name used by pdf.js for converted font.\n */\n\n/**\n * Text style.\n *\n * @typedef {Object} TextStyle\n * @property {number} ascent - font ascent.\n * @property {number} descent - font descent.\n * @property {boolean} vertical - text is in vertical mode.\n * @property {string} fontFamily - possible font family\n */\n\n/**\n * Page annotation parameters.\n *\n * @typedef {Object} GetAnnotationsParameters\n * @param {string} intent - Determines the annotations that will be fetched,\n *                 can be either 'display' (viewable annotations) or 'print'\n *                 (printable annotations).\n *                 If the parameter is omitted, all annotations are fetched.\n */\n\n/**\n * Page render parameters.\n *\n * @typedef {Object} RenderParameters\n * @property {Object} canvasContext - A 2D context of a DOM Canvas object.\n * @property {PDFJS.PageViewport} viewport - Rendering viewport obtained by\n *                                calling of PDFPage.getViewport method.\n * @property {string} intent - Rendering intent, can be 'display' or 'print'\n *                    (default value is 'display').\n * @property {Array}  transform - (optional) Additional transform, applied\n *                    just before viewport transform.\n * @property {Object} imageLayer - (optional) An object that has beginLayout,\n *                    endLayout and appendImage functions.\n * @property {function} continueCallback - (deprecated) A function that will be\n *                      called each time the rendering is paused.  To continue\n *                      rendering call the function that is the first argument\n *                      to the callback.\n */\n\n/**\n * PDF page operator list.\n *\n * @typedef {Object} PDFOperatorList\n * @property {Array} fnArray - Array containing the operator functions.\n * @property {Array} argsArray - Array containing the arguments of the\n *                               functions.\n */\n\n/**\n * Proxy to a PDFPage in the worker thread.\n * @class\n * @alias PDFPageProxy\n */\nvar PDFPageProxy = (function PDFPageProxyClosure() {\n  function PDFPageProxy(pageIndex, pageInfo, transport) {\n    this.pageIndex = pageIndex;\n    this.pageInfo = pageInfo;\n    this.transport = transport;\n    this.stats = new StatTimer();\n    this.stats.enabled = !!globalScope.PDFJS.enableStats;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this.cleanupAfterRender = false;\n    this.pendingCleanup = false;\n    this.intentStates = {};\n    this.destroyed = false;\n  }\n  PDFPageProxy.prototype = /** @lends PDFPageProxy.prototype */ {\n    /**\n     * @return {number} Page number of the page. First page is 1.\n     */\n    get pageNumber() {\n      return this.pageIndex + 1;\n    },\n    /**\n     * @return {number} The number of degrees the page is rotated clockwise.\n     */\n    get rotate() {\n      return this.pageInfo.rotate;\n    },\n    /**\n     * @return {Object} The reference that points to this page. It has 'num' and\n     * 'gen' properties.\n     */\n    get ref() {\n      return this.pageInfo.ref;\n    },\n    /**\n     * @return {Array} An array of the visible portion of the PDF page in the\n     * user space units - [x1, y1, x2, y2].\n     */\n    get view() {\n      return this.pageInfo.view;\n    },\n    /**\n     * @param {number} scale The desired scale of the viewport.\n     * @param {number} rotate Degrees to rotate the viewport. If omitted this\n     * defaults to the page rotation.\n     * @return {PDFJS.PageViewport} Contains 'width' and 'height' properties\n     * along with transforms required for rendering.\n     */\n    getViewport: function PDFPageProxy_getViewport(scale, rotate) {\n      if (arguments.length < 2) {\n        rotate = this.rotate;\n      }\n      return new PDFJS.PageViewport(this.view, scale, rotate, 0, 0);\n    },\n    /**\n     * @param {GetAnnotationsParameters} params - Annotation parameters.\n     * @return {Promise} A promise that is resolved with an {Array} of the\n     * annotation objects.\n     */\n    getAnnotations: function PDFPageProxy_getAnnotations(params) {\n      var intent = (params && params.intent) || null;\n\n      if (!this.annotationsPromise || this.annotationsIntent !== intent) {\n        this.annotationsPromise = this.transport.getAnnotations(this.pageIndex,\n                                                                intent);\n        this.annotationsIntent = intent;\n      }\n      return this.annotationsPromise;\n    },\n    /**\n     * Begins the process of rendering a page to the desired context.\n     * @param {RenderParameters} params Page render parameters.\n     * @return {RenderTask} An object that contains the promise, which\n     *                      is resolved when the page finishes rendering.\n     */\n    render: function PDFPageProxy_render(params) {\n      var stats = this.stats;\n      stats.time('Overall');\n\n      // If there was a pending destroy cancel it so no cleanup happens during\n      // this call to render.\n      this.pendingCleanup = false;\n\n      var renderingIntent = (params.intent === 'print' ? 'print' : 'display');\n\n      if (!this.intentStates[renderingIntent]) {\n        this.intentStates[renderingIntent] = {};\n      }\n      var intentState = this.intentStates[renderingIntent];\n\n      // If there's no displayReadyCapability yet, then the operatorList\n      // was never requested before. Make the request and create the promise.\n      if (!intentState.displayReadyCapability) {\n        intentState.receivingOperatorList = true;\n        intentState.displayReadyCapability = createPromiseCapability();\n        intentState.operatorList = {\n          fnArray: [],\n          argsArray: [],\n          lastChunk: false\n        };\n\n        this.stats.time('Page Request');\n        this.transport.messageHandler.send('RenderPageRequest', {\n          pageIndex: this.pageNumber - 1,\n          intent: renderingIntent\n        });\n      }\n\n      var internalRenderTask = new InternalRenderTask(complete, params,\n                                                      this.objs,\n                                                      this.commonObjs,\n                                                      intentState.operatorList,\n                                                      this.pageNumber);\n      internalRenderTask.useRequestAnimationFrame = renderingIntent !== 'print';\n      if (!intentState.renderTasks) {\n        intentState.renderTasks = [];\n      }\n      intentState.renderTasks.push(internalRenderTask);\n      var renderTask = internalRenderTask.task;\n\n      // Obsolete parameter support\n      if (params.continueCallback) {\n        deprecated('render is used with continueCallback parameter');\n        renderTask.onContinue = params.continueCallback;\n      }\n\n      var self = this;\n      intentState.displayReadyCapability.promise.then(\n        function pageDisplayReadyPromise(transparency) {\n          if (self.pendingCleanup) {\n            complete();\n            return;\n          }\n          stats.time('Rendering');\n          internalRenderTask.initalizeGraphics(transparency);\n          internalRenderTask.operatorListChanged();\n        },\n        function pageDisplayReadPromiseError(reason) {\n          complete(reason);\n        }\n      );\n\n      function complete(error) {\n        var i = intentState.renderTasks.indexOf(internalRenderTask);\n        if (i >= 0) {\n          intentState.renderTasks.splice(i, 1);\n        }\n\n        if (self.cleanupAfterRender) {\n          self.pendingCleanup = true;\n        }\n        self._tryCleanup();\n\n        if (error) {\n          internalRenderTask.capability.reject(error);\n        } else {\n          internalRenderTask.capability.resolve();\n        }\n        stats.timeEnd('Rendering');\n        stats.timeEnd('Overall');\n      }\n\n      return renderTask;\n    },\n\n    /**\n     * @return {Promise} A promise resolved with an {@link PDFOperatorList}\n     * object that represents page's operator list.\n     */\n    getOperatorList: function PDFPageProxy_getOperatorList() {\n      function operatorListChanged() {\n        if (intentState.operatorList.lastChunk) {\n          intentState.opListReadCapability.resolve(intentState.operatorList);\n        }\n      }\n\n      var renderingIntent = 'oplist';\n      if (!this.intentStates[renderingIntent]) {\n        this.intentStates[renderingIntent] = {};\n      }\n      var intentState = this.intentStates[renderingIntent];\n\n      if (!intentState.opListReadCapability) {\n        var opListTask = {};\n        opListTask.operatorListChanged = operatorListChanged;\n        intentState.receivingOperatorList = true;\n        intentState.opListReadCapability = createPromiseCapability();\n        intentState.renderTasks = [];\n        intentState.renderTasks.push(opListTask);\n        intentState.operatorList = {\n          fnArray: [],\n          argsArray: [],\n          lastChunk: false\n        };\n\n        this.transport.messageHandler.send('RenderPageRequest', {\n          pageIndex: this.pageIndex,\n          intent: renderingIntent\n        });\n      }\n      return intentState.opListReadCapability.promise;\n    },\n\n    /**\n     * @param {getTextContentParameters} params - getTextContent parameters.\n     * @return {Promise} That is resolved a {@link TextContent}\n     * object that represent the page text content.\n     */\n    getTextContent: function PDFPageProxy_getTextContent(params) {\n      var normalizeWhitespace = (params && params.normalizeWhitespace) || false;\n\n      return this.transport.messageHandler.sendWithPromise('GetTextContent', {\n        pageIndex: this.pageNumber - 1,\n        normalizeWhitespace: normalizeWhitespace,\n      });\n    },\n\n    /**\n     * Destroys page object.\n     */\n    _destroy: function PDFPageProxy_destroy() {\n      this.destroyed = true;\n      this.transport.pageCache[this.pageIndex] = null;\n\n      var waitOn = [];\n      Object.keys(this.intentStates).forEach(function(intent) {\n        var intentState = this.intentStates[intent];\n        intentState.renderTasks.forEach(function(renderTask) {\n          var renderCompleted = renderTask.capability.promise.\n            catch(function () {}); // ignoring failures\n          waitOn.push(renderCompleted);\n          renderTask.cancel();\n        });\n      }, this);\n      this.objs.clear();\n      this.annotationsPromise = null;\n      this.pendingCleanup = false;\n      return Promise.all(waitOn);\n    },\n\n    /**\n     * Cleans up resources allocated by the page. (deprecated)\n     */\n    destroy: function() {\n      deprecated('page destroy method, use cleanup() instead');\n      this.cleanup();\n    },\n\n    /**\n     * Cleans up resources allocated by the page.\n     */\n    cleanup: function PDFPageProxy_cleanup() {\n      this.pendingCleanup = true;\n      this._tryCleanup();\n    },\n    /**\n     * For internal use only. Attempts to clean up if rendering is in a state\n     * where that's possible.\n     * @ignore\n     */\n    _tryCleanup: function PDFPageProxy_tryCleanup() {\n      if (!this.pendingCleanup ||\n          Object.keys(this.intentStates).some(function(intent) {\n            var intentState = this.intentStates[intent];\n            return (intentState.renderTasks.length !== 0 ||\n                    intentState.receivingOperatorList);\n          }, this)) {\n        return;\n      }\n\n      Object.keys(this.intentStates).forEach(function(intent) {\n        delete this.intentStates[intent];\n      }, this);\n      this.objs.clear();\n      this.annotationsPromise = null;\n      this.pendingCleanup = false;\n    },\n    /**\n     * For internal use only.\n     * @ignore\n     */\n    _startRenderPage: function PDFPageProxy_startRenderPage(transparency,\n                                                            intent) {\n      var intentState = this.intentStates[intent];\n      // TODO Refactor RenderPageRequest to separate rendering\n      // and operator list logic\n      if (intentState.displayReadyCapability) {\n        intentState.displayReadyCapability.resolve(transparency);\n      }\n    },\n    /**\n     * For internal use only.\n     * @ignore\n     */\n    _renderPageChunk: function PDFPageProxy_renderPageChunk(operatorListChunk,\n                                                            intent) {\n      var intentState = this.intentStates[intent];\n      var i, ii;\n      // Add the new chunk to the current operator list.\n      for (i = 0, ii = operatorListChunk.length; i < ii; i++) {\n        intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n        intentState.operatorList.argsArray.push(\n          operatorListChunk.argsArray[i]);\n      }\n      intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n\n      // Notify all the rendering tasks there are more operators to be consumed.\n      for (i = 0; i < intentState.renderTasks.length; i++) {\n        intentState.renderTasks[i].operatorListChanged();\n      }\n\n      if (operatorListChunk.lastChunk) {\n        intentState.receivingOperatorList = false;\n        this._tryCleanup();\n      }\n    }\n  };\n  return PDFPageProxy;\n})();\n\n/**\n * PDF.js web worker abstraction, it controls instantiation of PDF documents and\n * WorkerTransport for them.  If creation of a web worker is not possible,\n * a \"fake\" worker will be used instead.\n * @class\n */\nvar PDFWorker = (function PDFWorkerClosure() {\n  var nextFakeWorkerId = 0;\n\n  function getWorkerSrc() {\n    if (PDFJS.workerSrc) {\n      return PDFJS.workerSrc;\n    }\n    if (pdfjsFilePath) {\n      return pdfjsFilePath.replace(/\\.js$/i, '.worker.js');\n    }\n    error('No PDFJS.workerSrc specified');\n  }\n\n  // Loads worker code into main thread.\n  function setupFakeWorkerGlobal() {\n    if (!PDFJS.fakeWorkerFilesLoadedCapability) {\n      PDFJS.fakeWorkerFilesLoadedCapability = createPromiseCapability();\n      // In the developer build load worker_loader which in turn loads all the\n      // other files and resolves the promise. In production only the\n      // pdf.worker.js file is needed.\n      var loader = fakeWorkerFilesLoader || function (callback) {\n        Util.loadScript(getWorkerSrc(), callback);\n      };\n      loader(function () {\n        PDFJS.fakeWorkerFilesLoadedCapability.resolve();\n      });\n    }\n    return PDFJS.fakeWorkerFilesLoadedCapability.promise;\n  }\n\n  function PDFWorker(name) {\n    this.name = name;\n    this.destroyed = false;\n\n    this._readyCapability = createPromiseCapability();\n    this._port = null;\n    this._webWorker = null;\n    this._messageHandler = null;\n    this._initialize();\n  }\n\n  PDFWorker.prototype =  /** @lends PDFWorker.prototype */ {\n    get promise() {\n      return this._readyCapability.promise;\n    },\n\n    get port() {\n      return this._port;\n    },\n\n    get messageHandler() {\n      return this._messageHandler;\n    },\n\n    _initialize: function PDFWorker_initialize() {\n      // If worker support isn't disabled explicit and the browser has worker\n      // support, create a new web worker and test if it/the browser fullfills\n      // all requirements to run parts of pdf.js in a web worker.\n      // Right now, the requirement is, that an Uint8Array is still an\n      // Uint8Array as it arrives on the worker. (Chrome added this with v.15.)\n      if (!globalScope.PDFJS.disableWorker && typeof Worker !== 'undefined') {\n        var workerSrc = getWorkerSrc();\n\n        try {\n          // Some versions of FF can't create a worker on localhost, see:\n          // https://bugzilla.mozilla.org/show_bug.cgi?id=683280\n          var worker = new Worker(workerSrc);\n          var messageHandler = new MessageHandler('main', 'worker', worker);\n          messageHandler.on('test', function PDFWorker_test(data) {\n            if (this.destroyed) {\n              this._readyCapability.reject(new Error('Worker was destroyed'));\n              messageHandler.destroy();\n              worker.terminate();\n              return; // worker was destroyed\n            }\n            var supportTypedArray = data && data.supportTypedArray;\n            if (supportTypedArray) {\n              this._messageHandler = messageHandler;\n              this._port = worker;\n              this._webWorker = worker;\n              if (!data.supportTransfers) {\n                PDFJS.postMessageTransfers = false;\n              }\n              this._readyCapability.resolve();\n            } else {\n              this._setupFakeWorker();\n              messageHandler.destroy();\n              worker.terminate();\n            }\n          }.bind(this));\n\n          messageHandler.on('console_log', function (data) {\n            console.log.apply(console, data);\n          });\n          messageHandler.on('console_error', function (data) {\n            console.error.apply(console, data);\n          });\n\n          messageHandler.on('ready', function (data) {\n            if (this.destroyed) {\n              this._readyCapability.reject(new Error('Worker was destroyed'));\n              messageHandler.destroy();\n              worker.terminate();\n              return; // worker was destroyed\n            }\n            try {\n              sendTest();\n            } catch (e)  {\n              // We need fallback to a faked worker.\n              this._setupFakeWorker();\n            }\n          }.bind(this));\n\n          var sendTest = function () {\n            var testObj = new Uint8Array(\n              [PDFJS.postMessageTransfers ? 255 : 0]);\n            // Some versions of Opera throw a DATA_CLONE_ERR on serializing the\n            // typed array. Also, checking if we can use transfers.\n            try {\n              messageHandler.send('test', testObj, [testObj.buffer]);\n            } catch (ex) {\n              info('Cannot use postMessage transfers');\n              testObj[0] = 0;\n              messageHandler.send('test', testObj);\n            }\n          };\n\n          // It might take time for worker to initialize (especially when AMD\n          // loader is used). We will try to send test immediately, and then\n          // when 'ready' message will arrive. The worker shall process only\n          // first received 'test'.\n          sendTest();\n          return;\n        } catch (e) {\n          info('The worker has been disabled.');\n        }\n      }\n      // Either workers are disabled, not supported or have thrown an exception.\n      // Thus, we fallback to a faked worker.\n      this._setupFakeWorker();\n    },\n\n    _setupFakeWorker: function PDFWorker_setupFakeWorker() {\n      if (!globalScope.PDFJS.disableWorker) {\n        warn('Setting up fake worker.');\n        globalScope.PDFJS.disableWorker = true;\n      }\n\n      setupFakeWorkerGlobal().then(function () {\n        if (this.destroyed) {\n          this._readyCapability.reject(new Error('Worker was destroyed'));\n          return;\n        }\n\n        // If we don't use a worker, just post/sendMessage to the main thread.\n        var port = {\n          _listeners: [],\n          postMessage: function (obj) {\n            var e = {data: obj};\n            this._listeners.forEach(function (listener) {\n              listener.call(this, e);\n            }, this);\n          },\n          addEventListener: function (name, listener) {\n            this._listeners.push(listener);\n          },\n          removeEventListener: function (name, listener) {\n            var i = this._listeners.indexOf(listener);\n            this._listeners.splice(i, 1);\n          },\n          terminate: function () {}\n        };\n        this._port = port;\n\n        // All fake workers use the same port, making id unique.\n        var id = 'fake' + (nextFakeWorkerId++);\n\n        // If the main thread is our worker, setup the handling for the\n        // messages -- the main thread sends to it self.\n        var workerHandler = new MessageHandler(id + '_worker', id, port);\n        PDFJS.WorkerMessageHandler.setup(workerHandler, port);\n\n        var messageHandler = new MessageHandler(id, id + '_worker', port);\n        this._messageHandler = messageHandler;\n        this._readyCapability.resolve();\n      }.bind(this));\n    },\n\n    /**\n     * Destroys the worker instance.\n     */\n    destroy: function PDFWorker_destroy() {\n      this.destroyed = true;\n      if (this._webWorker) {\n        // We need to terminate only web worker created resource.\n        this._webWorker.terminate();\n        this._webWorker = null;\n      }\n      this._port = null;\n      if (this._messageHandler) {\n        this._messageHandler.destroy();\n        this._messageHandler = null;\n      }\n    }\n  };\n\n  return PDFWorker;\n})();\nPDFJS.PDFWorker = PDFWorker;\n\n/**\n * For internal use only.\n * @ignore\n */\nvar WorkerTransport = (function WorkerTransportClosure() {\n  function WorkerTransport(messageHandler, loadingTask, pdfDataRangeTransport) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.pdfDataRangeTransport = pdfDataRangeTransport;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader(loadingTask.docId);\n\n    this.destroyed = false;\n    this.destroyCapability = null;\n\n    this.pageCache = [];\n    this.pagePromises = [];\n    this.downloadInfoCapability = createPromiseCapability();\n\n    this.setupMessageHandler();\n  }\n  WorkerTransport.prototype = {\n    destroy: function WorkerTransport_destroy() {\n      if (this.destroyCapability) {\n        return this.destroyCapability.promise;\n      }\n\n      this.destroyed = true;\n      this.destroyCapability = createPromiseCapability();\n\n      var waitOn = [];\n      // We need to wait for all renderings to be completed, e.g.\n      // timeout/rAF can take a long time.\n      this.pageCache.forEach(function (page) {\n        if (page) {\n          waitOn.push(page._destroy());\n        }\n      });\n      this.pageCache = [];\n      this.pagePromises = [];\n      var self = this;\n      // We also need to wait for the worker to finish its long running tasks.\n      var terminated = this.messageHandler.sendWithPromise('Terminate', null);\n      waitOn.push(terminated);\n      Promise.all(waitOn).then(function () {\n        self.fontLoader.clear();\n        if (self.pdfDataRangeTransport) {\n          self.pdfDataRangeTransport.abort();\n          self.pdfDataRangeTransport = null;\n        }\n        if (self.messageHandler) {\n          self.messageHandler.destroy();\n          self.messageHandler = null;\n        }\n        self.destroyCapability.resolve();\n      }, this.destroyCapability.reject);\n      return this.destroyCapability.promise;\n    },\n\n    setupMessageHandler:\n      function WorkerTransport_setupMessageHandler() {\n      var messageHandler = this.messageHandler;\n\n      function updatePassword(password) {\n        messageHandler.send('UpdatePassword', password);\n      }\n\n      var pdfDataRangeTransport = this.pdfDataRangeTransport;\n      if (pdfDataRangeTransport) {\n        pdfDataRangeTransport.addRangeListener(function(begin, chunk) {\n          messageHandler.send('OnDataRange', {\n            begin: begin,\n            chunk: chunk\n          });\n        });\n\n        pdfDataRangeTransport.addProgressListener(function(loaded) {\n          messageHandler.send('OnDataProgress', {\n            loaded: loaded\n          });\n        });\n\n        pdfDataRangeTransport.addProgressiveReadListener(function(chunk) {\n          messageHandler.send('OnDataRange', {\n            chunk: chunk\n          });\n        });\n\n        messageHandler.on('RequestDataRange',\n          function transportDataRange(data) {\n            pdfDataRangeTransport.requestDataRange(data.begin, data.end);\n          }, this);\n      }\n\n      messageHandler.on('GetDoc', function transportDoc(data) {\n        var pdfInfo = data.pdfInfo;\n        this.numPages = data.pdfInfo.numPages;\n        var loadingTask = this.loadingTask;\n        var pdfDocument = new PDFDocumentProxy(pdfInfo, this, loadingTask);\n        this.pdfDocument = pdfDocument;\n        loadingTask._capability.resolve(pdfDocument);\n      }, this);\n\n      messageHandler.on('NeedPassword',\n                        function transportNeedPassword(exception) {\n        var loadingTask = this.loadingTask;\n        if (loadingTask.onPassword) {\n          return loadingTask.onPassword(updatePassword,\n                                        PasswordResponses.NEED_PASSWORD);\n        }\n        loadingTask._capability.reject(\n          new PasswordException(exception.message, exception.code));\n      }, this);\n\n      messageHandler.on('IncorrectPassword',\n                        function transportIncorrectPassword(exception) {\n        var loadingTask = this.loadingTask;\n        if (loadingTask.onPassword) {\n          return loadingTask.onPassword(updatePassword,\n                                        PasswordResponses.INCORRECT_PASSWORD);\n        }\n        loadingTask._capability.reject(\n          new PasswordException(exception.message, exception.code));\n      }, this);\n\n      messageHandler.on('InvalidPDF', function transportInvalidPDF(exception) {\n        this.loadingTask._capability.reject(\n          new InvalidPDFException(exception.message));\n      }, this);\n\n      messageHandler.on('MissingPDF', function transportMissingPDF(exception) {\n        this.loadingTask._capability.reject(\n          new MissingPDFException(exception.message));\n      }, this);\n\n      messageHandler.on('UnexpectedResponse',\n                        function transportUnexpectedResponse(exception) {\n        this.loadingTask._capability.reject(\n          new UnexpectedResponseException(exception.message, exception.status));\n      }, this);\n\n      messageHandler.on('UnknownError',\n                        function transportUnknownError(exception) {\n        this.loadingTask._capability.reject(\n          new UnknownErrorException(exception.message, exception.details));\n      }, this);\n\n      messageHandler.on('DataLoaded', function transportPage(data) {\n        this.downloadInfoCapability.resolve(data);\n      }, this);\n\n      messageHandler.on('PDFManagerReady', function transportPage(data) {\n        if (this.pdfDataRangeTransport) {\n          this.pdfDataRangeTransport.transportReady();\n        }\n      }, this);\n\n      messageHandler.on('StartRenderPage', function transportRender(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n        var page = this.pageCache[data.pageIndex];\n\n        page.stats.timeEnd('Page Request');\n        page._startRenderPage(data.transparency, data.intent);\n      }, this);\n\n      messageHandler.on('RenderPageChunk', function transportRender(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n        var page = this.pageCache[data.pageIndex];\n\n        page._renderPageChunk(data.operatorList, data.intent);\n      }, this);\n\n      messageHandler.on('commonobj', function transportObj(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n\n        var id = data[0];\n        var type = data[1];\n        if (this.commonObjs.hasData(id)) {\n          return;\n        }\n\n        switch (type) {\n          case 'Font':\n            var exportedData = data[2];\n\n            var font;\n            if ('error' in exportedData) {\n              var error = exportedData.error;\n              warn('Error during font loading: ' + error);\n              this.commonObjs.resolve(id, error);\n              break;\n            } else {\n              font = new FontFaceObject(exportedData);\n            }\n\n            this.fontLoader.bind(\n              [font],\n              function fontReady(fontObjs) {\n                this.commonObjs.resolve(id, font);\n              }.bind(this)\n            );\n            break;\n          case 'FontPath':\n            this.commonObjs.resolve(id, data[2]);\n            break;\n          default:\n            error('Got unknown common object type ' + type);\n        }\n      }, this);\n\n      messageHandler.on('obj', function transportObj(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n\n        var id = data[0];\n        var pageIndex = data[1];\n        var type = data[2];\n        var pageProxy = this.pageCache[pageIndex];\n        var imageData;\n        if (pageProxy.objs.hasData(id)) {\n          return;\n        }\n\n        switch (type) {\n          case 'JpegStream':\n            imageData = data[3];\n            loadJpegStream(id, imageData, pageProxy.objs);\n            break;\n          case 'Image':\n            imageData = data[3];\n            pageProxy.objs.resolve(id, imageData);\n\n            // heuristics that will allow not to store large data\n            var MAX_IMAGE_SIZE_TO_STORE = 8000000;\n            if (imageData && 'data' in imageData &&\n                imageData.data.length > MAX_IMAGE_SIZE_TO_STORE) {\n              pageProxy.cleanupAfterRender = true;\n            }\n            break;\n          default:\n            error('Got unknown object type ' + type);\n        }\n      }, this);\n\n      messageHandler.on('DocProgress', function transportDocProgress(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n\n        var loadingTask = this.loadingTask;\n        if (loadingTask.onProgress) {\n          loadingTask.onProgress({\n            loaded: data.loaded,\n            total: data.total\n          });\n        }\n      }, this);\n\n      messageHandler.on('PageError', function transportError(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n\n        var page = this.pageCache[data.pageNum - 1];\n        var intentState = page.intentStates[data.intent];\n        if (intentState.displayReadyCapability) {\n          intentState.displayReadyCapability.reject(data.error);\n        } else {\n          error(data.error);\n        }\n      }, this);\n\n      messageHandler.on('UnsupportedFeature',\n          function transportUnsupportedFeature(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n        var featureId = data.featureId;\n        var loadingTask = this.loadingTask;\n        if (loadingTask.onUnsupportedFeature) {\n          loadingTask.onUnsupportedFeature(featureId);\n        }\n        PDFJS.UnsupportedManager.notify(featureId);\n      }, this);\n\n      messageHandler.on('JpegDecode', function(data) {\n        if (this.destroyed) {\n          return Promise.reject('Worker was terminated');\n        }\n\n        var imageUrl = data[0];\n        var components = data[1];\n        if (components !== 3 && components !== 1) {\n          return Promise.reject(\n            new Error('Only 3 components or 1 component can be returned'));\n        }\n\n        return new Promise(function (resolve, reject) {\n          var img = new Image();\n          img.onload = function () {\n            var width = img.width;\n            var height = img.height;\n            var size = width * height;\n            var rgbaLength = size * 4;\n            var buf = new Uint8Array(size * components);\n            var tmpCanvas = createScratchCanvas(width, height);\n            var tmpCtx = tmpCanvas.getContext('2d');\n            tmpCtx.drawImage(img, 0, 0);\n            var data = tmpCtx.getImageData(0, 0, width, height).data;\n            var i, j;\n\n            if (components === 3) {\n              for (i = 0, j = 0; i < rgbaLength; i += 4, j += 3) {\n                buf[j] = data[i];\n                buf[j + 1] = data[i + 1];\n                buf[j + 2] = data[i + 2];\n              }\n            } else if (components === 1) {\n              for (i = 0, j = 0; i < rgbaLength; i += 4, j++) {\n                buf[j] = data[i];\n              }\n            }\n            resolve({ data: buf, width: width, height: height});\n          };\n          img.onerror = function () {\n            reject(new Error('JpegDecode failed to load image'));\n          };\n          img.src = imageUrl;\n        });\n      }, this);\n    },\n\n    getData: function WorkerTransport_getData() {\n      return this.messageHandler.sendWithPromise('GetData', null);\n    },\n\n    getPage: function WorkerTransport_getPage(pageNumber, capability) {\n      if (pageNumber <= 0 || pageNumber > this.numPages ||\n          (pageNumber|0) !== pageNumber) {\n        return Promise.reject(new Error('Invalid page request'));\n      }\n\n      var pageIndex = pageNumber - 1;\n      if (pageIndex in this.pagePromises) {\n        return this.pagePromises[pageIndex];\n      }\n      var promise = this.messageHandler.sendWithPromise('GetPage', {\n        pageIndex: pageIndex\n      }).then(function (pageInfo) {\n        if (this.destroyed) {\n          throw new Error('Transport destroyed');\n        }\n        var page = new PDFPageProxy(pageIndex, pageInfo, this);\n        this.pageCache[pageIndex] = page;\n        return page;\n      }.bind(this));\n      this.pagePromises[pageIndex] = promise;\n      return promise;\n    },\n\n    getPageIndex: function WorkerTransport_getPageIndexByRef(ref) {\n      return this.messageHandler.sendWithPromise('GetPageIndex', { ref: ref });\n    },\n\n    getAnnotations: function WorkerTransport_getAnnotations(pageIndex, intent) {\n      return this.messageHandler.sendWithPromise('GetAnnotations', {\n        pageIndex: pageIndex,\n        intent: intent,\n      });\n    },\n\n    getDestinations: function WorkerTransport_getDestinations() {\n      return this.messageHandler.sendWithPromise('GetDestinations', null);\n    },\n\n    getDestination: function WorkerTransport_getDestination(id) {\n      return this.messageHandler.sendWithPromise('GetDestination', { id: id });\n    },\n\n    getPageLabels: function WorkerTransport_getPageLabels() {\n      return this.messageHandler.sendWithPromise('GetPageLabels', null);\n    },\n\n    getAttachments: function WorkerTransport_getAttachments() {\n      return this.messageHandler.sendWithPromise('GetAttachments', null);\n    },\n\n    getJavaScript: function WorkerTransport_getJavaScript() {\n      return this.messageHandler.sendWithPromise('GetJavaScript', null);\n    },\n\n    getOutline: function WorkerTransport_getOutline() {\n      return this.messageHandler.sendWithPromise('GetOutline', null);\n    },\n\n    getMetadata: function WorkerTransport_getMetadata() {\n      return this.messageHandler.sendWithPromise('GetMetadata', null).\n        then(function transportMetadata(results) {\n        return {\n          info: results[0],\n          metadata: (results[1] ? new Metadata(results[1]) : null)\n        };\n      });\n    },\n\n    getStats: function WorkerTransport_getStats() {\n      return this.messageHandler.sendWithPromise('GetStats', null);\n    },\n\n    startCleanup: function WorkerTransport_startCleanup() {\n      this.messageHandler.sendWithPromise('Cleanup', null).\n        then(function endCleanup() {\n        for (var i = 0, ii = this.pageCache.length; i < ii; i++) {\n          var page = this.pageCache[i];\n          if (page) {\n            page.cleanup();\n          }\n        }\n        this.commonObjs.clear();\n        this.fontLoader.clear();\n      }.bind(this));\n    }\n  };\n  return WorkerTransport;\n\n})();\n\n/**\n * A PDF document and page is built of many objects. E.g. there are objects\n * for fonts, images, rendering code and such. These objects might get processed\n * inside of a worker. The `PDFObjects` implements some basic functions to\n * manage these objects.\n * @ignore\n */\nvar PDFObjects = (function PDFObjectsClosure() {\n  function PDFObjects() {\n    this.objs = {};\n  }\n\n  PDFObjects.prototype = {\n    /**\n     * Internal function.\n     * Ensures there is an object defined for `objId`.\n     */\n    ensureObj: function PDFObjects_ensureObj(objId) {\n      if (this.objs[objId]) {\n        return this.objs[objId];\n      }\n\n      var obj = {\n        capability: createPromiseCapability(),\n        data: null,\n        resolved: false\n      };\n      this.objs[objId] = obj;\n\n      return obj;\n    },\n\n    /**\n     * If called *without* callback, this returns the data of `objId` but the\n     * object needs to be resolved. If it isn't, this function throws.\n     *\n     * If called *with* a callback, the callback is called with the data of the\n     * object once the object is resolved. That means, if you call this\n     * function and the object is already resolved, the callback gets called\n     * right away.\n     */\n    get: function PDFObjects_get(objId, callback) {\n      // If there is a callback, then the get can be async and the object is\n      // not required to be resolved right now\n      if (callback) {\n        this.ensureObj(objId).capability.promise.then(callback);\n        return null;\n      }\n\n      // If there isn't a callback, the user expects to get the resolved data\n      // directly.\n      var obj = this.objs[objId];\n\n      // If there isn't an object yet or the object isn't resolved, then the\n      // data isn't ready yet!\n      if (!obj || !obj.resolved) {\n        error('Requesting object that isn\\'t resolved yet ' + objId);\n      }\n\n      return obj.data;\n    },\n\n    /**\n     * Resolves the object `objId` with optional `data`.\n     */\n    resolve: function PDFObjects_resolve(objId, data) {\n      var obj = this.ensureObj(objId);\n\n      obj.resolved = true;\n      obj.data = data;\n      obj.capability.resolve(data);\n    },\n\n    isResolved: function PDFObjects_isResolved(objId) {\n      var objs = this.objs;\n\n      if (!objs[objId]) {\n        return false;\n      } else {\n        return objs[objId].resolved;\n      }\n    },\n\n    hasData: function PDFObjects_hasData(objId) {\n      return this.isResolved(objId);\n    },\n\n    /**\n     * Returns the data of `objId` if object exists, null otherwise.\n     */\n    getData: function PDFObjects_getData(objId) {\n      var objs = this.objs;\n      if (!objs[objId] || !objs[objId].resolved) {\n        return null;\n      } else {\n        return objs[objId].data;\n      }\n    },\n\n    clear: function PDFObjects_clear() {\n      this.objs = {};\n    }\n  };\n  return PDFObjects;\n})();\n\n/**\n * Allows controlling of the rendering tasks.\n * @class\n * @alias RenderTask\n */\nvar RenderTask = (function RenderTaskClosure() {\n  function RenderTask(internalRenderTask) {\n    this._internalRenderTask = internalRenderTask;\n\n    /**\n     * Callback for incremental rendering -- a function that will be called\n     * each time the rendering is paused.  To continue rendering call the\n     * function that is the first argument to the callback.\n     * @type {function}\n     */\n    this.onContinue = null;\n  }\n\n  RenderTask.prototype = /** @lends RenderTask.prototype */ {\n    /**\n     * Promise for rendering task completion.\n     * @return {Promise}\n     */\n    get promise() {\n      return this._internalRenderTask.capability.promise;\n    },\n\n    /**\n     * Cancels the rendering task. If the task is currently rendering it will\n     * not be cancelled until graphics pauses with a timeout. The promise that\n     * this object extends will resolved when cancelled.\n     */\n    cancel: function RenderTask_cancel() {\n      this._internalRenderTask.cancel();\n    },\n\n    /**\n     * Registers callbacks to indicate the rendering task completion.\n     *\n     * @param {function} onFulfilled The callback for the rendering completion.\n     * @param {function} onRejected The callback for the rendering failure.\n     * @return {Promise} A promise that is resolved after the onFulfilled or\n     *                   onRejected callback.\n     */\n    then: function RenderTask_then(onFulfilled, onRejected) {\n      return this.promise.then.apply(this.promise, arguments);\n    }\n  };\n\n  return RenderTask;\n})();\n\n/**\n * For internal use only.\n * @ignore\n */\nvar InternalRenderTask = (function InternalRenderTaskClosure() {\n\n  function InternalRenderTask(callback, params, objs, commonObjs, operatorList,\n                              pageNumber) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this.pageNumber = pageNumber;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this.useRequestAnimationFrame = false;\n    this.cancelled = false;\n    this.capability = createPromiseCapability();\n    this.task = new RenderTask(this);\n    // caching this-bound methods\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n  }\n\n  InternalRenderTask.prototype = {\n\n    initalizeGraphics:\n        function InternalRenderTask_initalizeGraphics(transparency) {\n\n      if (this.cancelled) {\n        return;\n      }\n      if (PDFJS.pdfBug && 'StepperManager' in globalScope &&\n          globalScope.StepperManager.enabled) {\n        this.stepper = globalScope.StepperManager.create(this.pageNumber - 1);\n        this.stepper.init(this.operatorList);\n        this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n      }\n\n      var params = this.params;\n      this.gfx = new CanvasGraphics(params.canvasContext, this.commonObjs,\n                                    this.objs, params.imageLayer);\n\n      this.gfx.beginDrawing(params.transform, params.viewport, transparency);\n      this.operatorListIdx = 0;\n      this.graphicsReady = true;\n      if (this.graphicsReadyCallback) {\n        this.graphicsReadyCallback();\n      }\n    },\n\n    cancel: function InternalRenderTask_cancel() {\n      this.running = false;\n      this.cancelled = true;\n      this.callback('cancelled');\n    },\n\n    operatorListChanged: function InternalRenderTask_operatorListChanged() {\n      if (!this.graphicsReady) {\n        if (!this.graphicsReadyCallback) {\n          this.graphicsReadyCallback = this._continueBound;\n        }\n        return;\n      }\n\n      if (this.stepper) {\n        this.stepper.updateOperatorList(this.operatorList);\n      }\n\n      if (this.running) {\n        return;\n      }\n      this._continue();\n    },\n\n    _continue: function InternalRenderTask__continue() {\n      this.running = true;\n      if (this.cancelled) {\n        return;\n      }\n      if (this.task.onContinue) {\n        this.task.onContinue.call(this.task, this._scheduleNextBound);\n      } else {\n        this._scheduleNext();\n      }\n    },\n\n    _scheduleNext: function InternalRenderTask__scheduleNext() {\n      if (this.useRequestAnimationFrame) {\n        window.requestAnimationFrame(this._nextBound);\n      } else {\n        Promise.resolve(undefined).then(this._nextBound);\n      }\n    },\n\n    _next: function InternalRenderTask__next() {\n      if (this.cancelled) {\n        return;\n      }\n      this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList,\n                                        this.operatorListIdx,\n                                        this._continueBound,\n                                        this.stepper);\n      if (this.operatorListIdx === this.operatorList.argsArray.length) {\n        this.running = false;\n        if (this.operatorList.lastChunk) {\n          this.gfx.endDrawing();\n          this.callback();\n        }\n      }\n    }\n\n  };\n\n  return InternalRenderTask;\n})();\n\n/**\n * (Deprecated) Global observer of unsupported feature usages. Use\n * onUnsupportedFeature callback of the {PDFDocumentLoadingTask} instance.\n */\nPDFJS.UnsupportedManager = (function UnsupportedManagerClosure() {\n  var listeners = [];\n  return {\n    listen: function (cb) {\n      deprecated('Global UnsupportedManager.listen is used: ' +\n                 ' use PDFDocumentLoadingTask.onUnsupportedFeature instead');\n      listeners.push(cb);\n    },\n    notify: function (featureId) {\n      for (var i = 0, ii = listeners.length; i < ii; i++) {\n        listeners[i](featureId);\n      }\n    }\n  };\n})();\n\nexports.getDocument = PDFJS.getDocument;\nexports.PDFDataRangeTransport = PDFDataRangeTransport;\nexports.PDFDocumentProxy = PDFDocumentProxy;\nexports.PDFPageProxy = PDFPageProxy;\n}));\n\n\n  }).call(pdfjsLibs);\n\n  exports.PDFJS = pdfjsLibs.pdfjsSharedGlobal.PDFJS;\n\n  exports.getDocument = pdfjsLibs.pdfjsDisplayAPI.getDocument;\n  exports.PDFDataRangeTransport =\n    pdfjsLibs.pdfjsDisplayAPI.PDFDataRangeTransport;\n  exports.renderTextLayer = pdfjsLibs.pdfjsDisplayTextLayer.renderTextLayer;\n  exports.AnnotationLayer =\n    pdfjsLibs.pdfjsDisplayAnnotationLayer.AnnotationLayer;\n  exports.CustomStyle = pdfjsLibs.pdfjsDisplayDOMUtils.CustomStyle;\n  exports.PasswordResponses = pdfjsLibs.pdfjsSharedUtil.PasswordResponses;\n  exports.InvalidPDFException = pdfjsLibs.pdfjsSharedUtil.InvalidPDFException;\n  exports.MissingPDFException = pdfjsLibs.pdfjsSharedUtil.MissingPDFException;\n  exports.UnexpectedResponseException =\n    pdfjsLibs.pdfjsSharedUtil.UnexpectedResponseException;\n}));\n\n\n"]}