{"version":3,"sources":["sw.js"],"names":["version","baseDir","console","log","CACHE_NAME","urlsToCache","join","self","addEventListener","event","skipWaiting","waitUntil","caches","open","then","cache","addAll","respondWith","match","request","ignoreSearch","response","fetch","keys","cacheNames","Promise","all","map","cacheName","delete"],"mappings":"AAAA,MAAMA,QAAU,gBACVC,QAAU,iBAChBC,QAAQC,IAAI,0BAA2BH,SAEvC,MAAMI,WAAa,kBAAoBJ,QACjCK,eA8BNH,QAAQC,IAAI,eAAgBE,YAAYC,KAAK,OAE7CC,KAAKC,iBAAiB,UAAWC,IAC7BP,QAAQC,IAAI,WAAYM,GACxBF,KAAKG,cACLD,EAAME,UACFC,OAAOC,KAAKT,YAAYU,KAAKC,IACzBb,QAAQC,IAAI,iBACLY,EAAMC,OAAOX,kBAKhCE,KAAKC,iBAAiB,QAASC,IAE3BA,EAAMQ,YACFL,OAAOM,MAAMT,EAAMU,SAAWC,cAAe,IAAQN,KAAKO,GAClDA,GAGGC,MAAMb,EAAMU,aAK/BZ,KAAKC,iBAAiB,WAAYC,IAC9BP,QAAQC,IAAI,YAAaM,GACzBA,EAAME,UACFC,OAAOW,OAAOT,KAAKU,GACRC,QAAQC,IACXF,EAAWG,IAAIC,IACX,GAAIA,GAAaxB,WACb,OAAOQ,OAAOiB,OAAOD","file":"sw.js","sourcesContent":["const version = '1528899057395'\nconst baseDir = 'pdfanno/latest'\nconsole.log('service worker version:', version)\n\nconst CACHE_NAME = 'pdfanno-cache-v' + version\nconst urlsToCache = [\n    // `/${baseDir}/embedded-sample.html`,\n    // `/${baseDir}/embedded-sample.bundle.js`,\n    // `/${baseDir}/pdfanno.core.bundle.js`,\n    // `/${baseDir}/pages/viewer.html`,\n    // `/${baseDir}/pages/viewer.css`,\n    // `/${baseDir}/pages/compatibility.js`,\n    // `/${baseDir}/pages/l10n.js`,\n    // `/${baseDir}/pages/debugger.js`,\n    // `/${baseDir}/pages/viewer.js`,\n    // `/${baseDir}/pages/images/texture.png`,\n    // `/${baseDir}/pages/images/toolbarButton-menuArrows.png`,\n    // `/${baseDir}/pages/images/toolbarButton-viewThumbnail.png`,\n    // `/${baseDir}/pages/images/toolbarButton-viewOutline.png`,\n    // `/${baseDir}/pages/images/toolbarButton-viewAttachments.png`,\n    // `/${baseDir}/pages/images/toolbarButton-sidebarToggle.png`,\n    // `/${baseDir}/pages/images/toolbarButton-pageUp.png`,\n    // `/${baseDir}/pages/images/toolbarButton-secondaryToolbarToggle.png`,\n    // `/${baseDir}/pages/images/toolbarButton-zoomIn.png`,\n    // `/${baseDir}/pages/images/toolbarButton-zoomOut.png`,\n    // `/${baseDir}/pages/images/toolbarButton-pageDown.png`,\n    // `/${baseDir}/pages/images/shadow.png`,\n    // `/${baseDir}/pages/images/loading-icon.gif`,\n    // `/${baseDir}/pages/images/loading-small.png`,\n    // `/${baseDir}/pages/locale/locale.properties`,\n    // `/${baseDir}/pages/locale/ja/viewer.properties`,\n    // `/${baseDir}/build/pdf.js`,\n    // `/${baseDir}/build/pdf.worker.js`,\n    // 'https://code.jquery.com/jquery-3.1.1.min.js',\n]\nconsole.log('urlsToCache:', urlsToCache.join('\\n'))\n\nself.addEventListener('install', event => {\n    console.log('install:', event)\n    self.skipWaiting()\n    event.waitUntil(\n        caches.open(CACHE_NAME).then(cache => {\n            console.log('Opened cache.')\n            return cache.addAll(urlsToCache)\n        })\n    )\n})\n\nself.addEventListener('fetch', event => {\n    // console.log('fetch:', event.request.method, event.request.url)\n    event.respondWith(\n        caches.match(event.request, { ignoreSearch : true }).then(response => {\n            if (response) {\n                return response\n            }\n            return fetch(event.request)\n        })\n    )\n})\n\nself.addEventListener('activate', event => {\n    console.log('activate:', event)\n    event.waitUntil(\n        caches.keys().then(cacheNames => {\n            return Promise.all(\n                cacheNames.map(cacheName => {\n                    if (cacheName != CACHE_NAME) {\n                        return caches.delete(cacheName)\n                    }\n                })\n            )\n        })\n    )\n})\n"]}